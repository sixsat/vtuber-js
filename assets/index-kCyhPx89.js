(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var b4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function r8(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var wb={exports:{}},b0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x4;function a8(){if(x4)return b0;x4=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:a}}return b0.Fragment=e,b0.jsx=t,b0.jsxs=t,b0}var S4;function s8(){return S4||(S4=1,wb.exports=a8()),wb.exports}var Ni=s8(),Ab={exports:{}},$n={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T4;function o8(){if(T4)return $n;T4=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(ee){return ee===null||typeof ee!="object"?null:(ee=g&&ee[g]||ee["@@iterator"],typeof ee=="function"?ee:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function T(ee,be,Ge){this.props=ee,this.context=be,this.refs=w,this.updater=Ge||_}T.prototype.isReactComponent={},T.prototype.setState=function(ee,be){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,be,"setState")},T.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function S(){}S.prototype=T.prototype;function O(ee,be,Ge){this.props=ee,this.context=be,this.refs=w,this.updater=Ge||_}var L=O.prototype=new S;L.constructor=O,x(L,T.prototype),L.isPureReactComponent=!0;var C=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function j(ee,be,Ge,Ye,xe,Ke){return Ge=Ke.ref,{$$typeof:n,type:ee,key:be,ref:Ge!==void 0?Ge:null,props:Ke}}function X(ee,be){return j(ee.type,be,void 0,void 0,void 0,ee.props)}function k(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===n}function U(ee){var be={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(Ge){return be[Ge]})}var K=/\/+/g;function ye(ee,be){return typeof ee=="object"&&ee!==null&&ee.key!=null?U(""+ee.key):be.toString(36)}function ue(){}function we(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(ue,ue):(ee.status="pending",ee.then(function(be){ee.status==="pending"&&(ee.status="fulfilled",ee.value=be)},function(be){ee.status==="pending"&&(ee.status="rejected",ee.reason=be)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function Ae(ee,be,Ge,Ye,xe){var Ke=typeof ee;(Ke==="undefined"||Ke==="boolean")&&(ee=null);var et=!1;if(ee===null)et=!0;else switch(Ke){case"bigint":case"string":case"number":et=!0;break;case"object":switch(ee.$$typeof){case n:case e:et=!0;break;case m:return et=ee._init,Ae(et(ee._payload),be,Ge,Ye,xe)}}if(et)return xe=xe(ee),et=Ye===""?"."+ye(ee,0):Ye,C(xe)?(Ge="",et!=null&&(Ge=et.replace(K,"$&/")+"/"),Ae(xe,be,Ge,"",function(Kt){return Kt})):xe!=null&&(k(xe)&&(xe=X(xe,Ge+(xe.key==null||ee&&ee.key===xe.key?"":(""+xe.key).replace(K,"$&/")+"/")+et)),be.push(xe)),1;et=0;var xt=Ye===""?".":Ye+":";if(C(ee))for(var bt=0;bt<ee.length;bt++)Ye=ee[bt],Ke=xt+ye(Ye,bt),et+=Ae(Ye,be,Ge,Ke,xe);else if(bt=y(ee),typeof bt=="function")for(ee=bt.call(ee),bt=0;!(Ye=ee.next()).done;)Ye=Ye.value,Ke=xt+ye(Ye,bt++),et+=Ae(Ye,be,Ge,Ke,xe);else if(Ke==="object"){if(typeof ee.then=="function")return Ae(we(ee),be,Ge,Ye,xe);throw be=String(ee),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return et}function Z(ee,be,Ge){if(ee==null)return ee;var Ye=[],xe=0;return Ae(ee,Ye,"","",function(Ke){return be.call(Ge,Ke,xe++)}),Ye}function le(ee){if(ee._status===-1){var be=ee._result;be=be(),be.then(function(Ge){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=Ge)},function(Ge){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=Ge)}),ee._status===-1&&(ee._status=0,ee._result=be)}if(ee._status===1)return ee._result.default;throw ee._result}var de=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)};function Le(){}return $n.Children={map:Z,forEach:function(ee,be,Ge){Z(ee,function(){be.apply(this,arguments)},Ge)},count:function(ee){var be=0;return Z(ee,function(){be++}),be},toArray:function(ee){return Z(ee,function(be){return be})||[]},only:function(ee){if(!k(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},$n.Component=T,$n.Fragment=t,$n.Profiler=r,$n.PureComponent=O,$n.StrictMode=i,$n.Suspense=u,$n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,$n.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return P.H.useMemoCache(ee)}},$n.cache=function(ee){return function(){return ee.apply(null,arguments)}},$n.cloneElement=function(ee,be,Ge){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var Ye=x({},ee.props),xe=ee.key,Ke=void 0;if(be!=null)for(et in be.ref!==void 0&&(Ke=void 0),be.key!==void 0&&(xe=""+be.key),be)!B.call(be,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&be.ref===void 0||(Ye[et]=be[et]);var et=arguments.length-2;if(et===1)Ye.children=Ge;else if(1<et){for(var xt=Array(et),bt=0;bt<et;bt++)xt[bt]=arguments[bt+2];Ye.children=xt}return j(ee.type,xe,void 0,void 0,Ke,Ye)},$n.createContext=function(ee){return ee={$$typeof:s,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:a,_context:ee},ee},$n.createElement=function(ee,be,Ge){var Ye,xe={},Ke=null;if(be!=null)for(Ye in be.key!==void 0&&(Ke=""+be.key),be)B.call(be,Ye)&&Ye!=="key"&&Ye!=="__self"&&Ye!=="__source"&&(xe[Ye]=be[Ye]);var et=arguments.length-2;if(et===1)xe.children=Ge;else if(1<et){for(var xt=Array(et),bt=0;bt<et;bt++)xt[bt]=arguments[bt+2];xe.children=xt}if(ee&&ee.defaultProps)for(Ye in et=ee.defaultProps,et)xe[Ye]===void 0&&(xe[Ye]=et[Ye]);return j(ee,Ke,void 0,void 0,null,xe)},$n.createRef=function(){return{current:null}},$n.forwardRef=function(ee){return{$$typeof:l,render:ee}},$n.isValidElement=k,$n.lazy=function(ee){return{$$typeof:m,_payload:{_status:-1,_result:ee},_init:le}},$n.memo=function(ee,be){return{$$typeof:f,type:ee,compare:be===void 0?null:be}},$n.startTransition=function(ee){var be=P.T,Ge={};P.T=Ge;try{var Ye=ee(),xe=P.S;xe!==null&&xe(Ge,Ye),typeof Ye=="object"&&Ye!==null&&typeof Ye.then=="function"&&Ye.then(Le,de)}catch(Ke){de(Ke)}finally{P.T=be}},$n.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},$n.use=function(ee){return P.H.use(ee)},$n.useActionState=function(ee,be,Ge){return P.H.useActionState(ee,be,Ge)},$n.useCallback=function(ee,be){return P.H.useCallback(ee,be)},$n.useContext=function(ee){return P.H.useContext(ee)},$n.useDebugValue=function(){},$n.useDeferredValue=function(ee,be){return P.H.useDeferredValue(ee,be)},$n.useEffect=function(ee,be,Ge){var Ye=P.H;if(typeof Ge=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ye.useEffect(ee,be)},$n.useId=function(){return P.H.useId()},$n.useImperativeHandle=function(ee,be,Ge){return P.H.useImperativeHandle(ee,be,Ge)},$n.useInsertionEffect=function(ee,be){return P.H.useInsertionEffect(ee,be)},$n.useLayoutEffect=function(ee,be){return P.H.useLayoutEffect(ee,be)},$n.useMemo=function(ee,be){return P.H.useMemo(ee,be)},$n.useOptimistic=function(ee,be){return P.H.useOptimistic(ee,be)},$n.useReducer=function(ee,be,Ge){return P.H.useReducer(ee,be,Ge)},$n.useRef=function(ee){return P.H.useRef(ee)},$n.useState=function(ee){return P.H.useState(ee)},$n.useSyncExternalStore=function(ee,be,Ge){return P.H.useSyncExternalStore(ee,be,Ge)},$n.useTransition=function(){return P.H.useTransition()},$n.version="19.1.0",$n}var E4;function tg(){return E4||(E4=1,Ab.exports=o8()),Ab.exports}var jt=tg();const iE=q_(jt);var Rb={exports:{}},x0={},Nb={exports:{}},Cb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M4;function l8(){return M4||(M4=1,function(n){function e(Z,le){var de=Z.length;Z.push(le);e:for(;0<de;){var Le=de-1>>>1,ee=Z[Le];if(0<r(ee,le))Z[Le]=le,Z[de]=ee,de=Le;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var le=Z[0],de=Z.pop();if(de!==le){Z[0]=de;e:for(var Le=0,ee=Z.length,be=ee>>>1;Le<be;){var Ge=2*(Le+1)-1,Ye=Z[Ge],xe=Ge+1,Ke=Z[xe];if(0>r(Ye,de))xe<ee&&0>r(Ke,Ye)?(Z[Le]=Ke,Z[xe]=de,Le=xe):(Z[Le]=Ye,Z[Ge]=de,Le=Ge);else if(xe<ee&&0>r(Ke,de))Z[Le]=Ke,Z[xe]=de,Le=xe;else break e}}return le}function r(Z,le){var de=Z.sortIndex-le.sortIndex;return de!==0?de:Z.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var u=[],f=[],m=1,g=null,y=3,_=!1,x=!1,w=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function C(Z){for(var le=t(f);le!==null;){if(le.callback===null)i(f);else if(le.startTime<=Z)i(f),le.sortIndex=le.expirationTime,e(u,le);else break;le=t(f)}}function P(Z){if(w=!1,C(Z),!x)if(t(u)!==null)x=!0,B||(B=!0,ye());else{var le=t(f);le!==null&&Ae(P,le.startTime-Z)}}var B=!1,j=-1,X=5,k=-1;function U(){return T?!0:!(n.unstable_now()-k<X)}function K(){if(T=!1,B){var Z=n.unstable_now();k=Z;var le=!0;try{e:{x=!1,w&&(w=!1,O(j),j=-1),_=!0;var de=y;try{t:{for(C(Z),g=t(u);g!==null&&!(g.expirationTime>Z&&U());){var Le=g.callback;if(typeof Le=="function"){g.callback=null,y=g.priorityLevel;var ee=Le(g.expirationTime<=Z);if(Z=n.unstable_now(),typeof ee=="function"){g.callback=ee,C(Z),le=!0;break t}g===t(u)&&i(u),C(Z)}else i(u);g=t(u)}if(g!==null)le=!0;else{var be=t(f);be!==null&&Ae(P,be.startTime-Z),le=!1}}break e}finally{g=null,y=de,_=!1}le=void 0}}finally{le?ye():B=!1}}}var ye;if(typeof L=="function")ye=function(){L(K)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,we=ue.port2;ue.port1.onmessage=K,ye=function(){we.postMessage(null)}}else ye=function(){S(K,0)};function Ae(Z,le){j=S(function(){Z(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(Z){switch(y){case 1:case 2:case 3:var le=3;break;default:le=y}var de=y;y=le;try{return Z()}finally{y=de}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=y;y=Z;try{return le()}finally{y=de}},n.unstable_scheduleCallback=function(Z,le,de){var Le=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Le+de:Le):de=Le,Z){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=de+ee,Z={id:m++,callback:le,priorityLevel:Z,startTime:de,expirationTime:ee,sortIndex:-1},de>Le?(Z.sortIndex=de,e(f,Z),t(u)===null&&Z===t(f)&&(w?(O(j),j=-1):w=!0,Ae(P,de-Le))):(Z.sortIndex=ee,e(u,Z),x||_||(x=!0,B||(B=!0,ye()))),Z},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Z){var le=y;return function(){var de=y;y=le;try{return Z.apply(this,arguments)}finally{y=de}}}}(Cb)),Cb}var w4;function u8(){return w4||(w4=1,Nb.exports=l8()),Nb.exports}var Ob={exports:{}},as={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A4;function c8(){if(A4)return as;A4=1;var n=tg();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:u,containerInfo:f,implementation:m}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return as.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,as.createPortal=function(u,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(u,f,null,m)},as.flushSync=function(u){var f=s.T,m=i.p;try{if(s.T=null,i.p=2,u)return u()}finally{s.T=f,i.p=m,i.d.f()}},as.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(u,f))},as.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},as.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:_}):m==="script"&&i.d.X(u,{crossOrigin:g,integrity:y,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},as.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=l(f.as,f.crossOrigin);i.d.M(u,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(u)},as.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin);i.d.L(u,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},as.preloadModule=function(u,f){if(typeof u=="string")if(f){var m=l(f.as,f.crossOrigin);i.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(u)},as.requestFormReset=function(u){i.d.r(u)},as.unstable_batchedUpdates=function(u,f){return u(f)},as.useFormState=function(u,f,m){return s.H.useFormState(u,f,m)},as.useFormStatus=function(){return s.H.useHostTransitionStatus()},as.version="19.1.0",as}var R4;function f8(){if(R4)return Ob.exports;R4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ob.exports=c8(),Ob.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N4;function h8(){if(N4)return x0;N4=1;var n=u8(),e=tg(),t=f8();function i(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function s(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(a(o)!==o)throw Error(i(188))}function u(o){var c=o.alternate;if(!c){if(c=a(o),c===null)throw Error(i(188));return c!==o?null:o}for(var p=o,v=c;;){var E=p.return;if(E===null)break;var A=E.alternate;if(A===null){if(v=E.return,v!==null){p=v;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===p)return l(E),o;if(A===v)return l(E),c;A=A.sibling}throw Error(i(188))}if(p.return!==v.return)p=E,v=A;else{for(var G=!1,J=E.child;J;){if(J===p){G=!0,p=E,v=A;break}if(J===v){G=!0,v=E,p=A;break}J=J.sibling}if(!G){for(J=A.child;J;){if(J===p){G=!0,p=A,v=E;break}if(J===v){G=!0,v=A,p=E;break}J=J.sibling}if(!G)throw Error(i(189))}}if(p.alternate!==v)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),L=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function ye(o){return o===null||typeof o!="object"?null:(o=K&&o[K]||o["@@iterator"],typeof o=="function"?o:null)}var ue=Symbol.for("react.client.reference");function we(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ue?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case T:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case B:return"SuspenseList";case k:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case L:return(o.displayName||"Context")+".Provider";case O:return(o._context.displayName||"Context")+".Consumer";case C:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case j:return c=o.displayName||null,c!==null?c:we(o.type)||"Memo";case X:c=o._payload,o=o._init;try{return we(o(c))}catch{}}return null}var Ae=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Le=[],ee=-1;function be(o){return{current:o}}function Ge(o){0>ee||(o.current=Le[ee],Le[ee]=null,ee--)}function Ye(o,c){ee++,Le[ee]=o.current,o.current=c}var xe=be(null),Ke=be(null),et=be(null),xt=be(null);function bt(o,c){switch(Ye(et,c),Ye(Ke,o),Ye(xe,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?$M(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=$M(c),o=YM(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Ge(xe),Ye(xe,o)}function Kt(){Ge(xe),Ge(Ke),Ge(et)}function Wt(o){o.memoizedState!==null&&Ye(xt,o);var c=xe.current,p=YM(c,o.type);c!==p&&(Ye(Ke,o),Ye(xe,p))}function tn(o){Ke.current===o&&(Ge(xe),Ge(Ke)),xt.current===o&&(Ge(xt),m0._currentValue=de)}var un=Object.prototype.hasOwnProperty,Jt=n.unstable_scheduleCallback,ie=n.unstable_cancelCallback,_t=n.unstable_shouldYield,ut=n.unstable_requestPaint,pt=n.unstable_now,Ze=n.unstable_getCurrentPriorityLevel,Ot=n.unstable_ImmediatePriority,ft=n.unstable_UserBlockingPriority,St=n.unstable_NormalPriority,on=n.unstable_LowPriority,re=n.unstable_IdlePriority,q=n.log,Ce=n.unstable_setDisableYieldValue,We=null,Qe=null;function He(o){if(typeof q=="function"&&Ce(o),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(We,o)}catch{}}var Ut=Math.clz32?Math.clz32:$t,wt=Math.log,Gt=Math.LN2;function $t(o){return o>>>=0,o===0?32:31-(wt(o)/Gt|0)|0}var rt=256,Tt=4194304;function Ct(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function pe(o,c,p){var v=o.pendingLanes;if(v===0)return 0;var E=0,A=o.suspendedLanes,G=o.pingedLanes;o=o.warmLanes;var J=v&134217727;return J!==0?(v=J&~A,v!==0?E=Ct(v):(G&=J,G!==0?E=Ct(G):p||(p=J&~o,p!==0&&(E=Ct(p))))):(J=v&~A,J!==0?E=Ct(J):G!==0?E=Ct(G):p||(p=v&~o,p!==0&&(E=Ct(p)))),E===0?0:c!==0&&c!==E&&(c&A)===0&&(A=E&-E,p=c&-c,A>=p||A===32&&(p&4194048)!==0)?c:E}function Re(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function yt(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function he(){var o=rt;return rt<<=1,(rt&4194048)===0&&(rt=256),o}function vt(){var o=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),o}function at(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function At(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ct(o,c,p,v,E,A){var G=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var J=o.entanglements,me=o.expirationTimes,Fe=o.hiddenUpdates;for(p=G&~p;0<p;){var ot=31-Ut(p),mt=1<<ot;J[ot]=0,me[ot]=-1;var Xe=Fe[ot];if(Xe!==null)for(Fe[ot]=null,ot=0;ot<Xe.length;ot++){var qe=Xe[ot];qe!==null&&(qe.lane&=-536870913)}p&=~mt}v!==0&&Be(o,v,0),A!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=A&~(G&~c))}function Be(o,c,p){o.pendingLanes|=c,o.suspendedLanes&=~c;var v=31-Ut(c);o.entangledLanes|=c,o.entanglements[v]=o.entanglements[v]|1073741824|p&4194090}function Ft(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var v=31-Ut(p),E=1<<v;E&c|o[v]&c&&(o[v]|=c),p&=~E}}function Qt(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function _n(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function bn(){var o=le.p;return o!==0?o:(o=window.event,o===void 0?32:p4(o.type))}function mi(o,c){var p=le.p;try{return le.p=o,c()}finally{le.p=p}}var gi=Math.random().toString(36).slice(2),ei="__reactFiber$"+gi,Ti="__reactProps$"+gi,hr="__reactContainer$"+gi,Fr="__reactEvents$"+gi,Ki="__reactListeners$"+gi,ar="__reactHandles$"+gi,sr="__reactResources$"+gi,wr="__reactMarker$"+gi;function ui(o){delete o[ei],delete o[Ti],delete o[Fr],delete o[Ki],delete o[ar]}function yr(o){var c=o[ei];if(c)return c;for(var p=o.parentNode;p;){if(c=p[hr]||p[ei]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=JM(o);o!==null;){if(p=o[ei])return p;o=JM(o)}return c}o=p,p=o.parentNode}return null}function Ta(o){if(o=o[ei]||o[hr]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Ua(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(i(33))}function oa(o){var c=o[sr];return c||(c=o[sr]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Gi(o){o[wr]=!0}var Pa=new Set,Ar={};function la(o,c){Q(o,c),Q(o+"Capture",c)}function Q(o,c){for(Ar[o]=c,o=0;o<c.length;o++)Pa.add(c[o])}var Te=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ke={},je={};function Ne(o){return un.call(je,o)?!0:un.call(ke,o)?!1:Te.test(o)?je[o]=!0:(ke[o]=!0,!1)}function gt(o,c,p){if(Ne(c))if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var v=c.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+p)}}function Lt(o,c,p){if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+p)}}function Ht(o,c,p,v){if(v===null)o.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(c,p,""+v)}}var Bt,hn;function ln(o){if(Bt===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);Bt=c&&c[1]||"",hn=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bt+o+hn}var en=!1;function Cn(o,c){if(!o||en)return"";en=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(c){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(qe){var Xe=qe}Reflect.construct(o,[],mt)}else{try{mt.call()}catch(qe){Xe=qe}o.call(mt.prototype)}}else{try{throw Error()}catch(qe){Xe=qe}(mt=o())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(qe){if(qe&&Xe&&typeof qe.stack=="string")return[qe.stack,Xe.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),G=A[0],J=A[1];if(G&&J){var me=G.split(`
`),Fe=J.split(`
`);for(E=v=0;v<me.length&&!me[v].includes("DetermineComponentFrameRoot");)v++;for(;E<Fe.length&&!Fe[E].includes("DetermineComponentFrameRoot");)E++;if(v===me.length||E===Fe.length)for(v=me.length-1,E=Fe.length-1;1<=v&&0<=E&&me[v]!==Fe[E];)E--;for(;1<=v&&0<=E;v--,E--)if(me[v]!==Fe[E]){if(v!==1||E!==1)do if(v--,E--,0>E||me[v]!==Fe[E]){var ot=`
`+me[v].replace(" at new "," at ");return o.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",o.displayName)),ot}while(1<=v&&0<=E);break}}}finally{en=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?ln(p):""}function Ln(o){switch(o.tag){case 26:case 27:case 5:return ln(o.type);case 16:return ln("Lazy");case 13:return ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return Cn(o.type,!1);case 11:return Cn(o.type.render,!1);case 1:return Cn(o.type,!0);case 31:return ln("Activity");default:return""}}function Ci(o){try{var c="";do c+=Ln(o),o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Tn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ri(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function an(o){var c=ri(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),v=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,A=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return E.call(this)},set:function(G){v=""+G,A.call(this,G)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(G){v=""+G},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function yi(o){o._valueTracker||(o._valueTracker=an(o))}function Wn(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),v="";return o&&(v=ri(o)?o.checked?"true":"false":o.value),o=v,o!==p?(c.setValue(o),!0):!1}function ki(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ba=/[\n"\\]/g;function Ei(o){return o.replace(Ba,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ka(o,c,p,v,E,A,G,J){o.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?o.type=G:o.removeAttribute("type"),c!=null?G==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Tn(c)):o.value!==""+Tn(c)&&(o.value=""+Tn(c)):G!=="submit"&&G!=="reset"||o.removeAttribute("value"),c!=null?dr(o,G,Tn(c)):p!=null?dr(o,G,Tn(p)):v!=null&&o.removeAttribute("value"),E==null&&A!=null&&(o.defaultChecked=!!A),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?o.name=""+Tn(J):o.removeAttribute("name")}function Mi(o,c,p,v,E,A,G,J){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.type=A),c!=null||p!=null){if(!(A!=="submit"&&A!=="reset"||c!=null))return;p=p!=null?""+Tn(p):"",c=c!=null?""+Tn(c):p,J||c===o.value||(o.value=c),o.defaultValue=c}v=v??E,v=typeof v!="function"&&typeof v!="symbol"&&!!v,o.checked=J?o.checked:!!v,o.defaultChecked=!!v,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(o.name=G)}function dr(o,c,p){c==="number"&&ki(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function Zi(o,c,p,v){if(o=o.options,c){c={};for(var E=0;E<p.length;E++)c["$"+p[E]]=!0;for(p=0;p<o.length;p++)E=c.hasOwnProperty("$"+o[p].value),o[p].selected!==E&&(o[p].selected=E),E&&v&&(o[p].defaultSelected=!0)}else{for(p=""+Tn(p),c=null,E=0;E<o.length;E++){if(o[E].value===p){o[E].selected=!0,v&&(o[E].defaultSelected=!0);return}c!==null||o[E].disabled||(c=o[E])}c!==null&&(c.selected=!0)}}function or(o,c,p){if(c!=null&&(c=""+Tn(c),c!==o.value&&(o.value=c),p==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=p!=null?""+Tn(p):""}function lr(o,c,p,v){if(c==null){if(v!=null){if(p!=null)throw Error(i(92));if(Ae(v)){if(1<v.length)throw Error(i(93));v=v[0]}p=v}p==null&&(p=""),c=p}p=Tn(c),o.defaultValue=p,v=o.textContent,v===p&&v!==""&&v!==null&&(o.value=v)}function Rr(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var Ea=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ao(o,c,p){var v=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":v?o.setProperty(c,p):typeof p!="number"||p===0||Ea.has(c)?c==="float"?o.cssFloat=p:o[c]=(""+p).trim():o[c]=p+"px"}function Co(o,c,p){if(c!=null&&typeof c!="object")throw Error(i(62));if(o=o.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||c!=null&&c.hasOwnProperty(v)||(v.indexOf("--")===0?o.setProperty(v,""):v==="float"?o.cssFloat="":o[v]="");for(var E in c)v=c[E],c.hasOwnProperty(E)&&p[E]!==v&&ao(o,E,v)}else for(var A in c)c.hasOwnProperty(A)&&ao(o,A,c[A])}function ol(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),F=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function V(o){return F.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var fe=null;function De(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Je=null,Ue=null;function nt(o){var c=Ta(o);if(c&&(o=c.stateNode)){var p=o[Ti]||null;e:switch(o=c.stateNode,c.type){case"input":if(Ka(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ei(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var v=p[c];if(v!==o&&v.form===o.form){var E=v[Ti]||null;if(!E)throw Error(i(90));Ka(v,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<p.length;c++)v=p[c],v.form===o.form&&Wn(v)}break e;case"textarea":or(o,p.value,p.defaultValue);break e;case"select":c=p.value,c!=null&&Zi(o,!!p.multiple,c,!1)}}}var Mt=!1;function Xt(o,c,p){if(Mt)return o(c,p);Mt=!0;try{var v=o(c);return v}finally{if(Mt=!1,(Je!==null||Ue!==null)&&(Wo(),Je&&(c=Je,o=Ue,Ue=Je=null,nt(c),o)))for(c=0;c<o.length;c++)nt(o[c])}}function dn(o,c){var p=o.stateNode;if(p===null)return null;var v=p[Ti]||null;if(v===null)return null;p=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(o=o.type,v=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!v;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(i(231,c,typeof p));return p}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Un=!1;if(In)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){Un=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{Un=!1}var Yt=null,R=null,H=null;function W(){if(H)return H;var o,c=R,p=c.length,v,E="value"in Yt?Yt.value:Yt.textContent,A=E.length;for(o=0;o<p&&c[o]===E[o];o++);var G=p-o;for(v=1;v<=G&&c[p-v]===E[A-v];v++);return H=E.slice(o,1<v?1-v:void 0)}function Y(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function se(){return!0}function ae(){return!1}function oe(o){function c(p,v,E,A,G){this._reactName=p,this._targetInst=E,this.type=v,this.nativeEvent=A,this.target=G,this.currentTarget=null;for(var J in o)o.hasOwnProperty(J)&&(p=o[J],this[J]=p?p(A):A[J]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?se:ae,this.isPropagationStopped=ae,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){},isPersistent:se}),c}var ve={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ze=oe(ve),tt=m({},ve,{view:0,detail:0}),dt=oe(tt),Et,Nt,kt,mn=m({},tt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==kt&&(kt&&o.type==="mousemove"?(Et=o.screenX-kt.screenX,Nt=o.screenY-kt.screenY):Nt=Et=0,kt=o),Et)},movementY:function(o){return"movementY"in o?o.movementY:Nt}}),Bn=oe(mn),Oi=m({},mn,{dataTransfer:0}),Hi=oe(Oi),vi=m({},tt,{relatedTarget:0}),ua=oe(vi),ca=m({},ve,{animationName:0,elapsedTime:0,pseudoElement:0}),di=oe(ca),kr=m({},ve,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),so=oe(kr),ds=m({},ve,{data:0}),ku=oe(ds),ll={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dg(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=jc[o])?!!c[o]:!1}function uh(){return dg}var q1=m({},tt,{key:function(o){if(o.key){var c=ll[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Y(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Hu[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(o){return o.type==="keypress"?Y(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Y(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),pg=oe(q1),mg=m({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tp=oe(mg),$1=m({},tt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),gg=oe($1),Y1=m({},ve,{propertyName:0,elapsedTime:0,pseudoElement:0}),ul=oe(Y1),yg=m({},mn,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),W3=oe(yg),K1=m({},ve,{newState:0,oldState:0}),ql=oe(K1),cl=[9,13,27,32],ch=In&&"CompositionEvent"in window,Vu=null;In&&"documentMode"in document&&(Vu=document.documentMode);var fh=In&&"TextEvent"in window&&!Vu,hh=In&&(!ch||Vu&&8<Vu&&11>=Vu),$l=" ",fa=!1;function dh(o,c){switch(o){case"keyup":return cl.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vg(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Yl=!1;function ph(o,c){switch(o){case"compositionend":return vg(c);case"keypress":return c.which!==32?null:(fa=!0,$l);case"textInput":return o=c.data,o===$l&&fa?null:o;default:return null}}function _g(o,c){if(Yl)return o==="compositionend"||!ch&&dh(o,c)?(o=W(),H=R=Yt=null,Yl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return hh&&c.locale!=="ko"?null:c.data;default:return null}}var np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!np[o.type]:c==="textarea"}function Za(o,c,p,v){Je?Ue?Ue.push(v):Ue=[v]:Je=v,c=Yy(c,"onChange"),0<c.length&&(p=new ze("onChange","change",null,p,v),o.push({event:p,listeners:c}))}var Wc=null,Gu=null;function Z1(o){GM(o,0)}function mh(o){var c=Ua(o);if(Wn(c))return o}function ip(o,c){if(o==="change")return c}var rp=!1;if(In){var ap;if(In){var Xc="oninput"in document;if(!Xc){var qc=document.createElement("div");qc.setAttribute("oninput","return;"),Xc=typeof qc.oninput=="function"}ap=Xc}else ap=!1;rp=ap&&(!document.documentMode||9<document.documentMode)}function ur(){Wc&&(Wc.detachEvent("onpropertychange",Q1),Gu=Wc=null)}function Q1(o){if(o.propertyName==="value"&&mh(Gu)){var c=[];Za(c,Gu,o,De(o)),Xt(Z1,c)}}function X3(o,c,p){o==="focusin"?(ur(),Wc=c,Gu=p,Wc.attachEvent("onpropertychange",Q1)):o==="focusout"&&ur()}function J1(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return mh(Gu)}function gh(o,c){if(o==="click")return mh(c)}function Kl(o,c){if(o==="input"||o==="change")return mh(c)}function ey(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Qa=typeof Object.is=="function"?Object.is:ey;function oo(o,c){if(Qa(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),v=Object.keys(c);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var E=p[v];if(!un.call(c,E)||!Qa(o[E],c[E]))return!1}return!0}function Ja(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function xg(o,c){var p=Ja(o);o=0;for(var v;p;){if(p.nodeType===3){if(v=o+p.textContent.length,o<=c&&v>=c)return{node:p,offset:c-o};o=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Ja(p)}}function Sg(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Sg(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Tg(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=ki(o.document);c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=ki(o.document)}return c}function yh(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var Eg=In&&"documentMode"in document&&11>=document.documentMode,fl=null,sp=null,vh=null,op=!1;function Mg(o,c,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;op||fl==null||fl!==ki(v)||(v=fl,"selectionStart"in v&&yh(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),vh&&oo(vh,v)||(vh=v,v=Yy(sp,"onSelect"),0<v.length&&(c=new ze("onSelect","select",null,c,p),o.push({event:c,listeners:v}),c.target=fl)))}function ha(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Zl={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},lp={},ty={};In&&(ty=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function hl(o){if(lp[o])return lp[o];if(!Zl[o])return o;var c=Zl[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in ty)return lp[o]=c[p];return o}var za=hl("animationend"),wg=hl("animationiteration"),es=hl("animationstart"),ny=hl("transitionrun"),dl=hl("transitionstart"),$c=hl("transitioncancel"),pl=hl("transitionend"),up=new Map,_h="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_h.push("scrollEnd");function Jr(o,c){up.set(o,c),la(c,[o])}var Ag=new WeakMap;function da(o,c){if(typeof o=="object"&&o!==null){var p=Ag.get(o);return p!==void 0?p:(c={value:o,source:c,stack:Ci(c)},Ag.set(o,c),c)}return{value:o,source:c,stack:Ci(c)}}var Ma=[],zs=0,cp=0;function bh(){for(var o=zs,c=cp=zs=0;c<o;){var p=Ma[c];Ma[c++]=null;var v=Ma[c];Ma[c++]=null;var E=Ma[c];Ma[c++]=null;var A=Ma[c];if(Ma[c++]=null,v!==null&&E!==null){var G=v.pending;G===null?E.next=E:(E.next=G.next,G.next=E),v.pending=E}A!==0&&Rg(p,E,A)}}function Ql(o,c,p,v){Ma[zs++]=o,Ma[zs++]=c,Ma[zs++]=p,Ma[zs++]=v,cp|=v,o.lanes|=v,o=o.alternate,o!==null&&(o.lanes|=v)}function fp(o,c,p,v){return Ql(o,c,p,v),Yc(o)}function ml(o,c){return Ql(o,null,null,c),Yc(o)}function Rg(o,c,p){o.lanes|=p;var v=o.alternate;v!==null&&(v.lanes|=p);for(var E=!1,A=o.return;A!==null;)A.childLanes|=p,v=A.alternate,v!==null&&(v.childLanes|=p),A.tag===22&&(o=A.stateNode,o===null||o._visibility&1||(E=!0)),o=A,A=A.return;return o.tag===3?(A=o.stateNode,E&&c!==null&&(E=31-Ut(p),o=A.hiddenUpdates,v=o[E],v===null?o[E]=[c]:v.push(c),c.lane=p|536870912),A):null}function Yc(o){if(50<jo)throw jo=0,oc=null,Error(i(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Jl={};function Ng(o,c,p,v){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(o,c,p,v){return new Ng(o,c,p,v)}function xh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Nr(o,c){var p=o.alternate;return p===null?(p=ts(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function Cg(o,c){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,c=p.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function ea(o,c,p,v,E,A){var G=0;if(v=o,typeof o=="function")xh(o)&&(G=1);else if(typeof o=="string")G=WL(o,p,xe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case k:return o=ts(31,p,c,E),o.elementType=k,o.lanes=A,o;case x:return eu(p.children,E,A,c);case w:G=8,E|=24;break;case T:return o=ts(12,p,c,E|2),o.elementType=T,o.lanes=A,o;case P:return o=ts(13,p,c,E),o.elementType=P,o.lanes=A,o;case B:return o=ts(19,p,c,E),o.elementType=B,o.lanes=A,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case L:G=10;break e;case O:G=9;break e;case C:G=11;break e;case j:G=14;break e;case X:G=16,v=null;break e}G=29,p=Error(i(130,o===null?"null":typeof o,"")),v=null}return c=ts(G,p,c,E),c.elementType=o,c.type=v,c.lanes=A,c}function eu(o,c,p,v){return o=ts(7,o,v,c),o.lanes=p,o}function Sh(o,c,p){return o=ts(6,o,null,c),o.lanes=p,o}function hp(o,c,p){return c=ts(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Kc=[],ns=0,Th=null,Zc=0,pa=[],ps=0,tu=null,Oo=1,Do="";function gl(o,c){Kc[ns++]=Zc,Kc[ns++]=Th,Th=o,Zc=c}function dp(o,c,p){pa[ps++]=Oo,pa[ps++]=Do,pa[ps++]=tu,tu=o;var v=Oo;o=Do;var E=32-Ut(v)-1;v&=~(1<<E),p+=1;var A=32-Ut(c)+E;if(30<A){var G=E-E%5;A=(v&(1<<G)-1).toString(32),v>>=G,E-=G,Oo=1<<32-Ut(c)+E|p<<E|v,Do=A+o}else Oo=1<<A|p<<E|v,Do=o}function Og(o){o.return!==null&&(gl(o,1),dp(o,1,0))}function Dg(o){for(;o===Th;)Th=Kc[--ns],Kc[ns]=null,Zc=Kc[--ns],Kc[ns]=null;for(;o===tu;)tu=pa[--ps],pa[ps]=null,Do=pa[--ps],pa[ps]=null,Oo=pa[--ps],pa[ps]=null}var Fa=null,pr=null,wi=!1,Fs=null,ms=!1,pp=Error(i(519));function nu(o){var c=Error(i(418,""));throw ju(da(c,o)),pp}function iy(o){var c=o.stateNode,p=o.type,v=o.memoizedProps;switch(c[ei]=o,c[Ti]=v,p){case"dialog":ci("cancel",c),ci("close",c);break;case"iframe":case"object":case"embed":ci("load",c);break;case"video":case"audio":for(p=0;p<u0.length;p++)ci(u0[p],c);break;case"source":ci("error",c);break;case"img":case"image":case"link":ci("error",c),ci("load",c);break;case"details":ci("toggle",c);break;case"input":ci("invalid",c),Mi(c,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),yi(c);break;case"select":ci("invalid",c);break;case"textarea":ci("invalid",c),lr(c,v.value,v.defaultValue,v.children),yi(c)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||v.suppressHydrationWarning===!0||qM(c.textContent,p)?(v.popover!=null&&(ci("beforetoggle",c),ci("toggle",c)),v.onScroll!=null&&ci("scroll",c),v.onScrollEnd!=null&&ci("scrollend",c),v.onClick!=null&&(c.onclick=Ky),c=!0):c=!1,c||nu(o)}function Lg(o){for(Fa=o.return;Fa;)switch(Fa.tag){case 5:case 13:ms=!1;return;case 27:case 3:ms=!0;return;default:Fa=Fa.return}}function lo(o){if(o!==Fa)return!1;if(!wi)return Lg(o),wi=!0,!1;var c=o.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||hb(o.type,o.memoizedProps)),p=!p),p&&pr&&nu(o),Lg(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(p=o.data,p==="/$"){if(c===0){pr=Cl(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;o=o.nextSibling}pr=null}}else c===27?(c=pr,Tf(o.type)?(o=gb,gb=null,pr=o):pr=c):pr=Fa?Cl(o.stateNode.nextSibling):null;return!0}function Qc(){pr=Fa=null,wi=!1}function Li(){var o=Fs;return o!==null&&(En===null?En=o:En.push.apply(En,o),Fs=null),o}function ju(o){Fs===null?Fs=[o]:Fs.push(o)}var Ig=be(null),iu=null,yl=null;function ru(o,c,p){Ye(Ig,c._currentValue),c._currentValue=p}function vl(o){o._currentValue=Ig.current,Ge(Ig)}function Ug(o,c,p){for(;o!==null;){var v=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),o===p)break;o=o.return}}function Eh(o,c,p,v){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var A=E.dependencies;if(A!==null){var G=E.child;A=A.firstContext;e:for(;A!==null;){var J=A;A=E;for(var me=0;me<c.length;me++)if(J.context===c[me]){A.lanes|=p,J=A.alternate,J!==null&&(J.lanes|=p),Ug(A.return,p,o),v||(G=null);break e}A=J.next}}else if(E.tag===18){if(G=E.return,G===null)throw Error(i(341));G.lanes|=p,A=G.alternate,A!==null&&(A.lanes|=p),Ug(G,p,o),G=null}else G=E.child;if(G!==null)G.return=E;else for(G=E;G!==null;){if(G===o){G=null;break}if(E=G.sibling,E!==null){E.return=G.return,G=E;break}G=G.return}E=G}}function ks(o,c,p,v){o=null;for(var E=c,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var G=E.alternate;if(G===null)throw Error(i(387));if(G=G.memoizedProps,G!==null){var J=E.type;Qa(E.pendingProps.value,G.value)||(o!==null?o.push(J):o=[J])}}else if(E===xt.current){if(G=E.alternate,G===null)throw Error(i(387));G.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(m0):o=[m0])}E=E.return}o!==null&&Eh(c,o,p,v),c.flags|=262144}function Mh(o){for(o=o.firstContext;o!==null;){if(!Qa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Lo(o){iu=o,yl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function vr(o){return mp(iu,o)}function wh(o,c){return iu===null&&Lo(o),mp(o,c)}function mp(o,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},yl===null){if(o===null)throw Error(i(308));yl=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else yl=yl.next=c;return p}var Pg=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(p,v){o.push(v)}};this.abort=function(){c.aborted=!0,o.forEach(function(p){return p()})}},q3=n.unstable_scheduleCallback,ry=n.unstable_NormalPriority,Hr={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gp(){return{controller:new Pg,data:new Map,refCount:0}}function Jc(o){o.refCount--,o.refCount===0&&q3(ry,function(){o.controller.abort()})}var ef=null,Ah=0,kn=0,tf=null;function gs(o,c){if(ef===null){var p=ef=[];Ah=0,kn=ib(),tf={status:"pending",value:void 0,then:function(v){p.push(v)}}}return Ah++,c.then(yp,yp),c}function yp(){if(--Ah===0&&ef!==null){tf!==null&&(tf.status="fulfilled");var o=ef;ef=null,kn=0,tf=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function $3(o,c){var p=[],v={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return o.then(function(){v.status="fulfilled",v.value=c;for(var E=0;E<p.length;E++)(0,p[E])(c)},function(E){for(v.status="rejected",v.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),v}var Rh=Z.S;Z.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&gs(o,c),Rh!==null&&Rh(o,c)};var Hs=be(null);function au(){var o=Hs.current;return o!==null?o:zn.pooledCache}function Nh(o,c){c===null?Ye(Hs,Hs.current):Ye(Hs,c.pool)}function vp(){var o=au();return o===null?null:{parent:Hr._currentValue,pool:o}}var Ch=Error(i(460)),Bg=Error(i(474)),uo=Error(i(542)),Oh={then:function(){}};function _p(o){return o=o.status,o==="fulfilled"||o==="rejected"}function nf(){}function bp(o,c,p){switch(p=o[p],p===void 0?o.push(c):p!==c&&(c.then(nf,nf),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,ay(o),o;default:if(typeof c.status=="string")c.then(nf,nf);else{if(o=zn,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=c,o.status="pending",o.then(function(v){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=v}},function(v){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=v}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,ay(o),o}throw Vs=c,Ch}}var Vs=null;function zg(){if(Vs===null)throw Error(i(459));var o=Vs;return Vs=null,o}function ay(o){if(o===Ch||o===uo)throw Error(i(483))}var _l=!1;function Fg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function On(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Io(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function bl(o,c,p){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(Ii&2)!==0){var E=v.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),v.pending=c,c=Yc(o),Rg(o,null,p),c}return Ql(o,v,c,p),Yc(o)}function Wu(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var v=c.lanes;v&=o.pendingLanes,p|=v,c.lanes=p,Ft(o,p)}}function rf(o,c){var p=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var E=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var G={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};A===null?E=A=G:A=A.next=G,p=p.next}while(p!==null);A===null?E=A=c:A=A.next=c}else E=A=c;p={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}var kg=!1;function Dh(){if(kg){var o=tf;if(o!==null)throw o}}function af(o,c,p,v){kg=!1;var E=o.updateQueue;_l=!1;var A=E.firstBaseUpdate,G=E.lastBaseUpdate,J=E.shared.pending;if(J!==null){E.shared.pending=null;var me=J,Fe=me.next;me.next=null,G===null?A=Fe:G.next=Fe,G=me;var ot=o.alternate;ot!==null&&(ot=ot.updateQueue,J=ot.lastBaseUpdate,J!==G&&(J===null?ot.firstBaseUpdate=Fe:J.next=Fe,ot.lastBaseUpdate=me))}if(A!==null){var mt=E.baseState;G=0,ot=Fe=me=null,J=A;do{var Xe=J.lane&-536870913,qe=Xe!==J.lane;if(qe?(gn&Xe)===Xe:(v&Xe)===Xe){Xe!==0&&Xe===kn&&(kg=!0),ot!==null&&(ot=ot.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var Pn=o,wn=J;Xe=c;var nr=p;switch(wn.tag){case 1:if(Pn=wn.payload,typeof Pn=="function"){mt=Pn.call(nr,mt,Xe);break e}mt=Pn;break e;case 3:Pn.flags=Pn.flags&-65537|128;case 0:if(Pn=wn.payload,Xe=typeof Pn=="function"?Pn.call(nr,mt,Xe):Pn,Xe==null)break e;mt=m({},mt,Xe);break e;case 2:_l=!0}}Xe=J.callback,Xe!==null&&(o.flags|=64,qe&&(o.flags|=8192),qe=E.callbacks,qe===null?E.callbacks=[Xe]:qe.push(Xe))}else qe={lane:Xe,tag:J.tag,payload:J.payload,callback:J.callback,next:null},ot===null?(Fe=ot=qe,me=mt):ot=ot.next=qe,G|=Xe;if(J=J.next,J===null){if(J=E.shared.pending,J===null)break;qe=J,J=qe.next,qe.next=null,E.lastBaseUpdate=qe,E.shared.pending=null}}while(!0);ot===null&&(me=mt),E.baseState=me,E.firstBaseUpdate=Fe,E.lastBaseUpdate=ot,A===null&&(E.shared.lanes=0),vo|=G,o.lanes=G,o.memoizedState=mt}}function sf(o,c){if(typeof o!="function")throw Error(i(191,o));o.call(c)}function sy(o,c){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)sf(p[o],c)}var of=be(null),xp=be(0);function oy(o,c){o=$s,Ye(xp,o),Ye(of,c),$s=o|c.baseLanes}function Hg(){Ye(xp,$s),Ye(of,of.current)}function Lh(){$s=xp.current,Ge(of),Ge(xp)}var xl=0,Hn=null,zi=null,Vr=null,Sp=!1,su=!1,ka=!1,Xr=0,Gs=0,ma=null,ly=0;function Cr(){throw Error(i(321))}function wa(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!Qa(o[p],c[p]))return!1;return!0}function Sl(o,c,p,v,E,A){return xl=A,Hn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Z.H=o===null||o.memoizedState===null?Op:i0,ka=!1,A=p(v,E),ka=!1,su&&(A=cy(c,p,v,E)),uy(o),A}function uy(o){Z.H=Ph;var c=zi!==null&&zi.next!==null;if(xl=0,Vr=zi=Hn=null,Sp=!1,Gs=0,ma=null,c)throw Error(i(300));o===null||ta||(o=o.dependencies,o!==null&&Mh(o)&&(ta=!0))}function cy(o,c,p,v){Hn=o;var E=0;do{if(su&&(ma=null),Gs=0,su=!1,25<=E)throw Error(i(301));if(E+=1,Vr=zi=null,o.updateQueue!=null){var A=o.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}Z.H=Py,A=c(p,v)}while(su);return A}function Y3(){var o=Z.H,c=o.useState()[0];return c=typeof c.then=="function"?co(c):c,o=o.useState()[0],(zi!==null?zi.memoizedState:null)!==o&&(Hn.flags|=1024),c}function Vg(){var o=Xr!==0;return Xr=0,o}function Tp(o,c,p){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~p}function Gg(o){if(Sp){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Sp=!1}xl=0,Vr=zi=Hn=null,su=!1,Gs=Xr=0,ma=null}function Ha(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?Hn.memoizedState=Vr=o:Vr=Vr.next=o,Vr}function Gr(){if(zi===null){var o=Hn.alternate;o=o!==null?o.memoizedState:null}else o=zi.next;var c=Vr===null?Hn.memoizedState:Vr.next;if(c!==null)Vr=c,zi=o;else{if(o===null)throw Hn.alternate===null?Error(i(467)):Error(i(310));zi=o,o={memoizedState:zi.memoizedState,baseState:zi.baseState,baseQueue:zi.baseQueue,queue:zi.queue,next:null},Vr===null?Hn.memoizedState=Vr=o:Vr=Vr.next=o}return Vr}function ou(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function co(o){var c=Gs;return Gs+=1,ma===null&&(ma=[]),o=bp(ma,o,c),c=Hn,(Vr===null?c.memoizedState:Vr.next)===null&&(c=c.alternate,Z.H=c===null||c.memoizedState===null?Op:i0),o}function Ep(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return co(o);if(o.$$typeof===L)return vr(o)}throw Error(i(438,String(o)))}function jg(o){var c=null,p=Hn.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var v=Hn.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(c={data:v.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=ou(),Hn.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(o),v=0;v<o;v++)p[v]=U;return c.index++,p}function Tl(o,c){return typeof c=="function"?c(o):c}function lu(o){var c=Gr();return Wg(c,zi,o)}function Wg(o,c,p){var v=o.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=p;var E=o.baseQueue,A=v.pending;if(A!==null){if(E!==null){var G=E.next;E.next=A.next,A.next=G}c.baseQueue=E=A,v.pending=null}if(A=o.baseState,E===null)o.memoizedState=A;else{c=E.next;var J=G=null,me=null,Fe=c,ot=!1;do{var mt=Fe.lane&-536870913;if(mt!==Fe.lane?(gn&mt)===mt:(xl&mt)===mt){var Xe=Fe.revertLane;if(Xe===0)me!==null&&(me=me.next={lane:0,revertLane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),mt===kn&&(ot=!0);else if((xl&Xe)===Xe){Fe=Fe.next,Xe===kn&&(ot=!0);continue}else mt={lane:0,revertLane:Fe.revertLane,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},me===null?(J=me=mt,G=A):me=me.next=mt,Hn.lanes|=Xe,vo|=Xe;mt=Fe.action,ka&&p(A,mt),A=Fe.hasEagerState?Fe.eagerState:p(A,mt)}else Xe={lane:mt,revertLane:Fe.revertLane,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},me===null?(J=me=Xe,G=A):me=me.next=Xe,Hn.lanes|=mt,vo|=mt;Fe=Fe.next}while(Fe!==null&&Fe!==c);if(me===null?G=A:me.next=J,!Qa(A,o.memoizedState)&&(ta=!0,ot&&(p=tf,p!==null)))throw p;o.memoizedState=A,o.baseState=G,o.baseQueue=me,v.lastRenderedState=A}return E===null&&(v.lanes=0),[o.memoizedState,v.dispatch]}function Xg(o){var c=Gr(),p=c.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=o;var v=p.dispatch,E=p.pending,A=c.memoizedState;if(E!==null){p.pending=null;var G=E=E.next;do A=o(A,G.action),G=G.next;while(G!==E);Qa(A,c.memoizedState)||(ta=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),p.lastRenderedState=A}return[A,v]}function fy(o,c,p){var v=Hn,E=Gr(),A=wi;if(A){if(p===void 0)throw Error(i(407));p=p()}else p=c();var G=!Qa((zi||E).memoizedState,p);G&&(E.memoizedState=p,ta=!0),E=E.queue;var J=dy.bind(null,v,E,o);if(cf(2048,8,J,[o]),E.getSnapshot!==c||G||Vr!==null&&Vr.memoizedState.tag&1){if(v.flags|=2048,uf(9,Ih(),hy.bind(null,v,E,p,c),null),zn===null)throw Error(i(349));A||(xl&124)!==0||lf(v,c,p)}return p}function lf(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=Hn.updateQueue,c===null?(c=ou(),Hn.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function hy(o,c,p,v){c.value=p,c.getSnapshot=v,py(c)&&my(o)}function dy(o,c,p){return p(function(){py(c)&&my(o)})}function py(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!Qa(o,p)}catch{return!0}}function my(o){var c=ml(o,2);c!==null&&ja(c,o,2)}function qg(o){var c=Ha();if(typeof o=="function"){var p=o;if(o=p(),ka){He(!0);try{p()}finally{He(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:o},c}function gy(o,c,p,v){return o.baseState=p,Wg(o,zi,typeof v=="function"?v:Tl)}function K3(o,c,p,v,E){if(Cp(o))throw Error(i(485));if(o=c.action,o!==null){var A={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){A.listeners.push(G)}};Z.T!==null?p(!0):A.isTransition=!1,v(A),p=c.pending,p===null?(A.next=c.pending=A,yy(c,A)):(A.next=p.next,c.pending=p.next=A)}}function yy(o,c){var p=c.action,v=c.payload,E=o.state;if(c.isTransition){var A=Z.T,G={};Z.T=G;try{var J=p(E,v),me=Z.S;me!==null&&me(G,J),vy(o,c,J)}catch(Fe){$g(o,c,Fe)}finally{Z.T=A}}else try{A=p(E,v),vy(o,c,A)}catch(Fe){$g(o,c,Fe)}}function vy(o,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){_y(o,c,v)},function(v){return $g(o,c,v)}):_y(o,c,p)}function _y(o,c,p){c.status="fulfilled",c.value=p,by(c),o.state=p,c=o.pending,c!==null&&(p=c.next,p===c?o.pending=null:(p=p.next,c.next=p,yy(o,p)))}function $g(o,c,p){var v=o.pending;if(o.pending=null,v!==null){v=v.next;do c.status="rejected",c.reason=p,by(c),c=c.next;while(c!==v)}o.action=null}function by(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function Yg(o,c){return c}function xy(o,c){if(wi){var p=zn.formState;if(p!==null){e:{var v=Hn;if(wi){if(pr){t:{for(var E=pr,A=ms;E.nodeType!==8;){if(!A){E=null;break t}if(E=Cl(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){pr=Cl(E.nextSibling),v=E.data==="F!";break e}}nu(v)}v=!1}v&&(c=p[0])}}return p=Ha(),p.memoizedState=p.baseState=c,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yg,lastRenderedState:c},p.queue=v,p=Iy.bind(null,Hn,v),v.dispatch=p,v=qg(!1),A=Np.bind(null,Hn,!1,v.queue),v=Ha(),E={state:c,dispatch:null,action:o,pending:null},v.queue=E,p=K3.bind(null,Hn,E,A,p),E.dispatch=p,v.memoizedState=o,[c,p,!1]}function Sy(o){var c=Gr();return Ty(c,zi,o)}function Ty(o,c,p){if(c=Wg(o,c,Yg)[0],o=lu(Tl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var v=co(c)}catch(G){throw G===Ch?uo:G}else v=c;c=Gr();var E=c.queue,A=E.dispatch;return p!==c.memoizedState&&(Hn.flags|=2048,uf(9,Ih(),Z3.bind(null,E,p),null)),[v,A,o]}function Z3(o,c){o.action=c}function Ey(o){var c=Gr(),p=zi;if(p!==null)return Ty(c,p,o);Gr(),c=c.memoizedState,p=Gr();var v=p.queue.dispatch;return p.memoizedState=o,[c,v,!1]}function uf(o,c,p,v){return o={tag:o,create:p,deps:v,inst:c,next:null},c=Hn.updateQueue,c===null&&(c=ou(),Hn.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=o.next=o:(v=p.next,p.next=o,o.next=v,c.lastEffect=o),o}function Ih(){return{destroy:void 0,resource:void 0}}function Kg(){return Gr().memoizedState}function Mp(o,c,p,v){var E=Ha();v=v===void 0?null:v,Hn.flags|=o,E.memoizedState=uf(1|c,Ih(),p,v)}function cf(o,c,p,v){var E=Gr();v=v===void 0?null:v;var A=E.memoizedState.inst;zi!==null&&v!==null&&wa(v,zi.memoizedState.deps)?E.memoizedState=uf(c,A,p,v):(Hn.flags|=o,E.memoizedState=uf(1|c,A,p,v))}function Zg(o,c){Mp(8390656,8,o,c)}function Qg(o,c){cf(2048,8,o,c)}function wp(o,c){return cf(4,2,o,c)}function Ap(o,c){return cf(4,4,o,c)}function My(o,c){if(typeof c=="function"){o=o();var p=c(o);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function wy(o,c,p){p=p!=null?p.concat([o]):null,cf(4,4,My.bind(null,c,o),p)}function Jg(){}function Ay(o,c){var p=Gr();c=c===void 0?null:c;var v=p.memoizedState;return c!==null&&wa(c,v[1])?v[0]:(p.memoizedState=[o,c],o)}function e0(o,c){var p=Gr();c=c===void 0?null:c;var v=p.memoizedState;if(c!==null&&wa(c,v[1]))return v[0];if(v=o(),ka){He(!0);try{o()}finally{He(!1)}}return p.memoizedState=[v,c],v}function Rp(o,c,p){return p===void 0||(xl&1073741824)!==0?o.memoizedState=c:(o.memoizedState=p,o=Vp(),Hn.lanes|=o,vo|=o,p)}function Ry(o,c,p,v){return Qa(p,c)?p:of.current!==null?(o=Rp(o,p,v),Qa(o,c)||(ta=!0),o):(xl&42)===0?(ta=!0,o.memoizedState=p):(o=Vp(),Hn.lanes|=o,vo|=o,c)}function Ny(o,c,p,v,E){var A=le.p;le.p=A!==0&&8>A?A:8;var G=Z.T,J={};Z.T=J,Np(o,!1,c,p);try{var me=E(),Fe=Z.S;if(Fe!==null&&Fe(J,me),me!==null&&typeof me=="object"&&typeof me.then=="function"){var ot=$3(me,v);Uh(o,c,ot,xr(o))}else Uh(o,c,v,xr(o))}catch(mt){Uh(o,c,{then:function(){},status:"rejected",reason:mt},xr())}finally{le.p=A,Z.T=G}}function Q3(){}function t0(o,c,p,v){if(o.tag!==5)throw Error(i(476));var E=Cy(o).queue;Ny(o,E,c,de,p===null?Q3:function(){return Oy(o),p(v)})}function Cy(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:de},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:p},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function Oy(o){var c=Cy(o).next.queue;Uh(o,c,{},xr())}function n0(){return vr(m0)}function Dy(){return Gr().memoizedState}function Ly(){return Gr().memoizedState}function J3(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var p=xr();o=Io(p);var v=bl(c,o,p);v!==null&&(ja(v,c,p),Wu(v,c,p)),c={cache:gp()},o.payload=c;return}c=c.return}}function eb(o,c,p){var v=xr();p={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Cp(o)?Uy(c,p):(p=fp(o,c,p,v),p!==null&&(ja(p,o,v),ys(p,c,v)))}function Iy(o,c,p){var v=xr();Uh(o,c,p,v)}function Uh(o,c,p,v){var E={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Cp(o))Uy(c,E);else{var A=o.alternate;if(o.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var G=c.lastRenderedState,J=A(G,p);if(E.hasEagerState=!0,E.eagerState=J,Qa(J,G))return Ql(o,c,E,0),zn===null&&bh(),!1}catch{}finally{}if(p=fp(o,c,E,v),p!==null)return ja(p,o,v),ys(p,c,v),!0}return!1}function Np(o,c,p,v){if(v={lane:2,revertLane:ib(),action:v,hasEagerState:!1,eagerState:null,next:null},Cp(o)){if(c)throw Error(i(479))}else c=fp(o,p,v,2),c!==null&&ja(c,o,2)}function Cp(o){var c=o.alternate;return o===Hn||c!==null&&c===Hn}function Uy(o,c){su=Sp=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function ys(o,c,p){if((p&4194048)!==0){var v=c.lanes;v&=o.pendingLanes,p|=v,c.lanes=p,Ft(o,p)}}var Ph={readContext:vr,use:Ep,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useLayoutEffect:Cr,useInsertionEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useSyncExternalStore:Cr,useId:Cr,useHostTransitionStatus:Cr,useFormState:Cr,useActionState:Cr,useOptimistic:Cr,useMemoCache:Cr,useCacheRefresh:Cr},Op={readContext:vr,use:Ep,useCallback:function(o,c){return Ha().memoizedState=[o,c===void 0?null:c],o},useContext:vr,useEffect:Zg,useImperativeHandle:function(o,c,p){p=p!=null?p.concat([o]):null,Mp(4194308,4,My.bind(null,c,o),p)},useLayoutEffect:function(o,c){return Mp(4194308,4,o,c)},useInsertionEffect:function(o,c){Mp(4,2,o,c)},useMemo:function(o,c){var p=Ha();c=c===void 0?null:c;var v=o();if(ka){He(!0);try{o()}finally{He(!1)}}return p.memoizedState=[v,c],v},useReducer:function(o,c,p){var v=Ha();if(p!==void 0){var E=p(c);if(ka){He(!0);try{p(c)}finally{He(!1)}}}else E=c;return v.memoizedState=v.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},v.queue=o,o=o.dispatch=eb.bind(null,Hn,o),[v.memoizedState,o]},useRef:function(o){var c=Ha();return o={current:o},c.memoizedState=o},useState:function(o){o=qg(o);var c=o.queue,p=Iy.bind(null,Hn,c);return c.dispatch=p,[o.memoizedState,p]},useDebugValue:Jg,useDeferredValue:function(o,c){var p=Ha();return Rp(p,o,c)},useTransition:function(){var o=qg(!1);return o=Ny.bind(null,Hn,o.queue,!0,!1),Ha().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,p){var v=Hn,E=Ha();if(wi){if(p===void 0)throw Error(i(407));p=p()}else{if(p=c(),zn===null)throw Error(i(349));(gn&124)!==0||lf(v,c,p)}E.memoizedState=p;var A={value:p,getSnapshot:c};return E.queue=A,Zg(dy.bind(null,v,A,o),[o]),v.flags|=2048,uf(9,Ih(),hy.bind(null,v,A,p,c),null),p},useId:function(){var o=Ha(),c=zn.identifierPrefix;if(wi){var p=Do,v=Oo;p=(v&~(1<<32-Ut(v)-1)).toString(32)+p,c=""+c+"R"+p,p=Xr++,0<p&&(c+="H"+p.toString(32)),c+=""}else p=ly++,c=""+c+"r"+p.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:n0,useFormState:xy,useActionState:xy,useOptimistic:function(o){var c=Ha();c.memoizedState=c.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=Np.bind(null,Hn,!0,p),p.dispatch=c,[o,c]},useMemoCache:jg,useCacheRefresh:function(){return Ha().memoizedState=J3.bind(null,Hn)}},i0={readContext:vr,use:Ep,useCallback:Ay,useContext:vr,useEffect:Qg,useImperativeHandle:wy,useInsertionEffect:wp,useLayoutEffect:Ap,useMemo:e0,useReducer:lu,useRef:Kg,useState:function(){return lu(Tl)},useDebugValue:Jg,useDeferredValue:function(o,c){var p=Gr();return Ry(p,zi.memoizedState,o,c)},useTransition:function(){var o=lu(Tl)[0],c=Gr().memoizedState;return[typeof o=="boolean"?o:co(o),c]},useSyncExternalStore:fy,useId:Dy,useHostTransitionStatus:n0,useFormState:Sy,useActionState:Sy,useOptimistic:function(o,c){var p=Gr();return gy(p,zi,o,c)},useMemoCache:jg,useCacheRefresh:Ly},Py={readContext:vr,use:Ep,useCallback:Ay,useContext:vr,useEffect:Qg,useImperativeHandle:wy,useInsertionEffect:wp,useLayoutEffect:Ap,useMemo:e0,useReducer:Xg,useRef:Kg,useState:function(){return Xg(Tl)},useDebugValue:Jg,useDeferredValue:function(o,c){var p=Gr();return zi===null?Rp(p,o,c):Ry(p,zi.memoizedState,o,c)},useTransition:function(){var o=Xg(Tl)[0],c=Gr().memoizedState;return[typeof o=="boolean"?o:co(o),c]},useSyncExternalStore:fy,useId:Dy,useHostTransitionStatus:n0,useFormState:Ey,useActionState:Ey,useOptimistic:function(o,c){var p=Gr();return zi!==null?gy(p,zi,o,c):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:jg,useCacheRefresh:Ly},Xu=null,Bh=0;function zh(o){var c=Bh;return Bh+=1,Xu===null&&(Xu=[]),bp(Xu,o,c)}function ff(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Dp(o,c){throw c.$$typeof===g?Error(i(525)):(o=Object.prototype.toString.call(c),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function By(o){var c=o._init;return c(o._payload)}function zy(o){function c(Oe,Me){if(o){var Pe=Oe.deletions;Pe===null?(Oe.deletions=[Me],Oe.flags|=16):Pe.push(Me)}}function p(Oe,Me){if(!o)return null;for(;Me!==null;)c(Oe,Me),Me=Me.sibling;return null}function v(Oe){for(var Me=new Map;Oe!==null;)Oe.key!==null?Me.set(Oe.key,Oe):Me.set(Oe.index,Oe),Oe=Oe.sibling;return Me}function E(Oe,Me){return Oe=Nr(Oe,Me),Oe.index=0,Oe.sibling=null,Oe}function A(Oe,Me,Pe){return Oe.index=Pe,o?(Pe=Oe.alternate,Pe!==null?(Pe=Pe.index,Pe<Me?(Oe.flags|=67108866,Me):Pe):(Oe.flags|=67108866,Me)):(Oe.flags|=1048576,Me)}function G(Oe){return o&&Oe.alternate===null&&(Oe.flags|=67108866),Oe}function J(Oe,Me,Pe,ht){return Me===null||Me.tag!==6?(Me=Sh(Pe,Oe.mode,ht),Me.return=Oe,Me):(Me=E(Me,Pe),Me.return=Oe,Me)}function me(Oe,Me,Pe,ht){var nn=Pe.type;return nn===x?ot(Oe,Me,Pe.props.children,ht,Pe.key):Me!==null&&(Me.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===X&&By(nn)===Me.type)?(Me=E(Me,Pe.props),ff(Me,Pe),Me.return=Oe,Me):(Me=ea(Pe.type,Pe.key,Pe.props,null,Oe.mode,ht),ff(Me,Pe),Me.return=Oe,Me)}function Fe(Oe,Me,Pe,ht){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Pe.containerInfo||Me.stateNode.implementation!==Pe.implementation?(Me=hp(Pe,Oe.mode,ht),Me.return=Oe,Me):(Me=E(Me,Pe.children||[]),Me.return=Oe,Me)}function ot(Oe,Me,Pe,ht,nn){return Me===null||Me.tag!==7?(Me=eu(Pe,Oe.mode,ht,nn),Me.return=Oe,Me):(Me=E(Me,Pe),Me.return=Oe,Me)}function mt(Oe,Me,Pe){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=Sh(""+Me,Oe.mode,Pe),Me.return=Oe,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case y:return Pe=ea(Me.type,Me.key,Me.props,null,Oe.mode,Pe),ff(Pe,Me),Pe.return=Oe,Pe;case _:return Me=hp(Me,Oe.mode,Pe),Me.return=Oe,Me;case X:var ht=Me._init;return Me=ht(Me._payload),mt(Oe,Me,Pe)}if(Ae(Me)||ye(Me))return Me=eu(Me,Oe.mode,Pe,null),Me.return=Oe,Me;if(typeof Me.then=="function")return mt(Oe,zh(Me),Pe);if(Me.$$typeof===L)return mt(Oe,wh(Oe,Me),Pe);Dp(Oe,Me)}return null}function Xe(Oe,Me,Pe,ht){var nn=Me!==null?Me.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return nn!==null?null:J(Oe,Me,""+Pe,ht);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case y:return Pe.key===nn?me(Oe,Me,Pe,ht):null;case _:return Pe.key===nn?Fe(Oe,Me,Pe,ht):null;case X:return nn=Pe._init,Pe=nn(Pe._payload),Xe(Oe,Me,Pe,ht)}if(Ae(Pe)||ye(Pe))return nn!==null?null:ot(Oe,Me,Pe,ht,null);if(typeof Pe.then=="function")return Xe(Oe,Me,zh(Pe),ht);if(Pe.$$typeof===L)return Xe(Oe,Me,wh(Oe,Pe),ht);Dp(Oe,Pe)}return null}function qe(Oe,Me,Pe,ht,nn){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Oe=Oe.get(Pe)||null,J(Me,Oe,""+ht,nn);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case y:return Oe=Oe.get(ht.key===null?Pe:ht.key)||null,me(Me,Oe,ht,nn);case _:return Oe=Oe.get(ht.key===null?Pe:ht.key)||null,Fe(Me,Oe,ht,nn);case X:var si=ht._init;return ht=si(ht._payload),qe(Oe,Me,Pe,ht,nn)}if(Ae(ht)||ye(ht))return Oe=Oe.get(Pe)||null,ot(Me,Oe,ht,nn,null);if(typeof ht.then=="function")return qe(Oe,Me,Pe,zh(ht),nn);if(ht.$$typeof===L)return qe(Oe,Me,Pe,wh(Me,ht),nn);Dp(Me,ht)}return null}function Pn(Oe,Me,Pe,ht){for(var nn=null,si=null,fn=Me,Rn=Me=0,Na=null;fn!==null&&Rn<Pe.length;Rn++){fn.index>Rn?(Na=fn,fn=null):Na=fn.sibling;var Pi=Xe(Oe,fn,Pe[Rn],ht);if(Pi===null){fn===null&&(fn=Na);break}o&&fn&&Pi.alternate===null&&c(Oe,fn),Me=A(Pi,Me,Rn),si===null?nn=Pi:si.sibling=Pi,si=Pi,fn=Na}if(Rn===Pe.length)return p(Oe,fn),wi&&gl(Oe,Rn),nn;if(fn===null){for(;Rn<Pe.length;Rn++)fn=mt(Oe,Pe[Rn],ht),fn!==null&&(Me=A(fn,Me,Rn),si===null?nn=fn:si.sibling=fn,si=fn);return wi&&gl(Oe,Rn),nn}for(fn=v(fn);Rn<Pe.length;Rn++)Na=qe(fn,Oe,Rn,Pe[Rn],ht),Na!==null&&(o&&Na.alternate!==null&&fn.delete(Na.key===null?Rn:Na.key),Me=A(Na,Me,Rn),si===null?nn=Na:si.sibling=Na,si=Na);return o&&fn.forEach(function(Rf){return c(Oe,Rf)}),wi&&gl(Oe,Rn),nn}function wn(Oe,Me,Pe,ht){if(Pe==null)throw Error(i(151));for(var nn=null,si=null,fn=Me,Rn=Me=0,Na=null,Pi=Pe.next();fn!==null&&!Pi.done;Rn++,Pi=Pe.next()){fn.index>Rn?(Na=fn,fn=null):Na=fn.sibling;var Rf=Xe(Oe,fn,Pi.value,ht);if(Rf===null){fn===null&&(fn=Na);break}o&&fn&&Rf.alternate===null&&c(Oe,fn),Me=A(Rf,Me,Rn),si===null?nn=Rf:si.sibling=Rf,si=Rf,fn=Na}if(Pi.done)return p(Oe,fn),wi&&gl(Oe,Rn),nn;if(fn===null){for(;!Pi.done;Rn++,Pi=Pe.next())Pi=mt(Oe,Pi.value,ht),Pi!==null&&(Me=A(Pi,Me,Rn),si===null?nn=Pi:si.sibling=Pi,si=Pi);return wi&&gl(Oe,Rn),nn}for(fn=v(fn);!Pi.done;Rn++,Pi=Pe.next())Pi=qe(fn,Oe,Rn,Pi.value,ht),Pi!==null&&(o&&Pi.alternate!==null&&fn.delete(Pi.key===null?Rn:Pi.key),Me=A(Pi,Me,Rn),si===null?nn=Pi:si.sibling=Pi,si=Pi);return o&&fn.forEach(function(i8){return c(Oe,i8)}),wi&&gl(Oe,Rn),nn}function nr(Oe,Me,Pe,ht){if(typeof Pe=="object"&&Pe!==null&&Pe.type===x&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case y:e:{for(var nn=Pe.key;Me!==null;){if(Me.key===nn){if(nn=Pe.type,nn===x){if(Me.tag===7){p(Oe,Me.sibling),ht=E(Me,Pe.props.children),ht.return=Oe,Oe=ht;break e}}else if(Me.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===X&&By(nn)===Me.type){p(Oe,Me.sibling),ht=E(Me,Pe.props),ff(ht,Pe),ht.return=Oe,Oe=ht;break e}p(Oe,Me);break}else c(Oe,Me);Me=Me.sibling}Pe.type===x?(ht=eu(Pe.props.children,Oe.mode,ht,Pe.key),ht.return=Oe,Oe=ht):(ht=ea(Pe.type,Pe.key,Pe.props,null,Oe.mode,ht),ff(ht,Pe),ht.return=Oe,Oe=ht)}return G(Oe);case _:e:{for(nn=Pe.key;Me!==null;){if(Me.key===nn)if(Me.tag===4&&Me.stateNode.containerInfo===Pe.containerInfo&&Me.stateNode.implementation===Pe.implementation){p(Oe,Me.sibling),ht=E(Me,Pe.children||[]),ht.return=Oe,Oe=ht;break e}else{p(Oe,Me);break}else c(Oe,Me);Me=Me.sibling}ht=hp(Pe,Oe.mode,ht),ht.return=Oe,Oe=ht}return G(Oe);case X:return nn=Pe._init,Pe=nn(Pe._payload),nr(Oe,Me,Pe,ht)}if(Ae(Pe))return Pn(Oe,Me,Pe,ht);if(ye(Pe)){if(nn=ye(Pe),typeof nn!="function")throw Error(i(150));return Pe=nn.call(Pe),wn(Oe,Me,Pe,ht)}if(typeof Pe.then=="function")return nr(Oe,Me,zh(Pe),ht);if(Pe.$$typeof===L)return nr(Oe,Me,wh(Oe,Pe),ht);Dp(Oe,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,Me!==null&&Me.tag===6?(p(Oe,Me.sibling),ht=E(Me,Pe),ht.return=Oe,Oe=ht):(p(Oe,Me),ht=Sh(Pe,Oe.mode,ht),ht.return=Oe,Oe=ht),G(Oe)):p(Oe,Me)}return function(Oe,Me,Pe,ht){try{Bh=0;var nn=nr(Oe,Me,Pe,ht);return Xu=null,nn}catch(fn){if(fn===Ch||fn===uo)throw fn;var si=ts(29,fn,null,Oe.mode);return si.lanes=ht,si.return=Oe,si}finally{}}}var qu=zy(!0),Fy=zy(!1),ji=be(null),fo=null;function uu(o){var c=o.alternate;Ye(Or,Or.current&1),Ye(ji,o),fo===null&&(c===null||of.current!==null||c.memoizedState!==null)&&(fo=o)}function ky(o){if(o.tag===22){if(Ye(Or,Or.current),Ye(ji,o),fo===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(fo=o)}}else cu()}function cu(){Ye(Or,Or.current),Ye(ji,ji.current)}function Uo(o){Ge(ji),fo===o&&(fo=null),Ge(Or)}var Or=be(0);function El(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||mb(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function fu(o,c,p,v){c=o.memoizedState,p=p(v,c),p=p==null?c:m({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Va={enqueueSetState:function(o,c,p){o=o._reactInternals;var v=xr(),E=Io(v);E.payload=c,p!=null&&(E.callback=p),c=bl(o,E,v),c!==null&&(ja(c,o,v),Wu(c,o,v))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var v=xr(),E=Io(v);E.tag=1,E.payload=c,p!=null&&(E.callback=p),c=bl(o,E,v),c!==null&&(ja(c,o,v),Wu(c,o,v))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=xr(),v=Io(p);v.tag=2,c!=null&&(v.callback=c),c=bl(o,v,p),c!==null&&(ja(c,o,p),Wu(c,o,p))}};function Hy(o,c,p,v,E,A,G){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,A,G):c.prototype&&c.prototype.isPureReactComponent?!oo(p,v)||!oo(E,A):!0}function Vy(o,c,p,v){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,v),c.state!==o&&Va.enqueueReplaceState(c,c.state,null)}function Po(o,c){var p=c;if("ref"in c){p={};for(var v in c)v!=="ref"&&(p[v]=c[v])}if(o=o.defaultProps){p===c&&(p=m({},p));for(var E in o)p[E]===void 0&&(p[E]=o[E])}return p}var $u=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Fh(o){$u(o)}function Lp(o){console.error(o)}function Gy(o){$u(o)}function Ip(o,c){try{var p=o.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(v){setTimeout(function(){throw v})}}function js(o,c,p){try{var v=o.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Up(o,c,p){return p=Io(p),p.tag=3,p.payload={element:null},p.callback=function(){Ip(o,c)},p}function jy(o){return o=Io(o),o.tag=3,o}function Pp(o,c,p,v){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var A=v.value;o.payload=function(){return E(A)},o.callback=function(){js(c,p,v)}}var G=p.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(o.callback=function(){js(c,p,v),typeof E!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var J=v.stack;this.componentDidCatch(v.value,{componentStack:J!==null?J:""})})}function tb(o,c,p,v,E){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(c=p.alternate,c!==null&&ks(c,p,E,!0),p=ji.current,p!==null){switch(p.tag){case 13:return fo===null?h():p.alternate===null&&ir===0&&(ir=3),p.flags&=-257,p.flags|=65536,p.lanes=E,v===Oh?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([v]):c.add(v),$e(o,v,E)),!1;case 22:return p.flags|=65536,v===Oh?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([v]):p.add(v)),$e(o,v,E)),!1}throw Error(i(435,p.tag))}return $e(o,v,E),h(),!1}if(wi)return c=ji.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,v!==pp&&(o=Error(i(422),{cause:v}),ju(da(o,p)))):(v!==pp&&(c=Error(i(423),{cause:v}),ju(da(c,p))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,v=da(v,p),E=Up(o.stateNode,v,E),rf(o,E),ir!==4&&(ir=2)),!1;var A=Error(i(520),{cause:v});if(A=da(A,p),Ui===null?Ui=[A]:Ui.push(A),ir!==4&&(ir=2),c===null)return!0;v=da(v,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,o=E&-E,p.lanes|=o,o=Up(p.stateNode,v,o),rf(p,o),!1;case 1:if(c=p.type,A=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ms===null||!Ms.has(A))))return p.flags|=65536,E&=-E,p.lanes|=E,E=jy(E),Pp(E,o,p,v),rf(p,E),!1}p=p.return}while(p!==null);return!1}var Wy=Error(i(461)),ta=!1;function Dr(o,c,p,v){c.child=o===null?Fy(c,null,p,v):qu(c,o.child,p,v)}function is(o,c,p,v,E){p=p.render;var A=c.ref;if("ref"in v){var G={};for(var J in v)J!=="ref"&&(G[J]=v[J])}else G=v;return Lo(c),v=Sl(o,c,p,G,A,E),J=Vg(),o!==null&&!ta?(Tp(o,c,E),na(o,c,E)):(wi&&J&&Og(c),c.flags|=1,Dr(o,c,v,E),c.child)}function rs(o,c,p,v,E){if(o===null){var A=p.type;return typeof A=="function"&&!xh(A)&&A.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=A,r0(o,c,A,v,E)):(o=ea(p.type,null,v,c,c.mode,E),o.ref=c.ref,o.return=c,c.child=o)}if(A=o.child,!kh(o,E)){var G=A.memoizedProps;if(p=p.compare,p=p!==null?p:oo,p(G,v)&&o.ref===c.ref)return na(o,c,E)}return c.flags|=1,o=Nr(A,v),o.ref=c.ref,o.return=c,c.child=o}function r0(o,c,p,v,E){if(o!==null){var A=o.memoizedProps;if(oo(A,v)&&o.ref===c.ref)if(ta=!1,c.pendingProps=v=A,kh(o,E))(o.flags&131072)!==0&&(ta=!0);else return c.lanes=o.lanes,na(o,c,E)}return hf(o,c,p,v,E)}function Yu(o,c,p){var v=c.pendingProps,E=v.children,A=o!==null?o.memoizedState:null;if(v.mode==="hidden"){if((c.flags&128)!==0){if(v=A!==null?A.baseLanes|p:p,o!==null){for(E=c.child=o.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;c.childLanes=A&~v}else c.childLanes=0,c.child=null;return Ku(o,c,v,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Nh(c,A!==null?A.cachePool:null),A!==null?oy(c,A):Hg(),ky(c);else return c.lanes=c.childLanes=536870912,Ku(o,c,A!==null?A.baseLanes|p:p,p)}else A!==null?(Nh(c,A.cachePool),oy(c,A),cu(),c.memoizedState=null):(o!==null&&Nh(c,null),Hg(),cu());return Dr(o,c,E,p),c.child}function Ku(o,c,p,v){var E=au();return E=E===null?null:{parent:Hr._currentValue,pool:E},c.memoizedState={baseLanes:p,cachePool:E},o!==null&&Nh(c,null),Hg(),ky(c),o!==null&&ks(o,c,v,!0),null}function Zu(o,c){var p=c.ref;if(p===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(o===null||o.ref!==p)&&(c.flags|=4194816)}}function hf(o,c,p,v,E){return Lo(c),p=Sl(o,c,p,v,void 0,E),v=Vg(),o!==null&&!ta?(Tp(o,c,E),na(o,c,E)):(wi&&v&&Og(c),c.flags|=1,Dr(o,c,p,E),c.child)}function vs(o,c,p,v,E,A){return Lo(c),c.updateQueue=null,p=cy(c,v,p,E),uy(o),v=Vg(),o!==null&&!ta?(Tp(o,c,A),na(o,c,A)):(wi&&v&&Og(c),c.flags|=1,Dr(o,c,p,A),c.child)}function _s(o,c,p,v,E){if(Lo(c),c.stateNode===null){var A=Jl,G=p.contextType;typeof G=="object"&&G!==null&&(A=vr(G)),A=new p(v,A),c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Va,c.stateNode=A,A._reactInternals=c,A=c.stateNode,A.props=v,A.state=c.memoizedState,A.refs={},Fg(c),G=p.contextType,A.context=typeof G=="object"&&G!==null?vr(G):Jl,A.state=c.memoizedState,G=p.getDerivedStateFromProps,typeof G=="function"&&(fu(c,p,G,v),A.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(G=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),G!==A.state&&Va.enqueueReplaceState(A,A.state,null),af(c,v,A,E),Dh(),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308),v=!0}else if(o===null){A=c.stateNode;var J=c.memoizedProps,me=Po(p,J);A.props=me;var Fe=A.context,ot=p.contextType;G=Jl,typeof ot=="object"&&ot!==null&&(G=vr(ot));var mt=p.getDerivedStateFromProps;ot=typeof mt=="function"||typeof A.getSnapshotBeforeUpdate=="function",J=c.pendingProps!==J,ot||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(J||Fe!==G)&&Vy(c,A,v,G),_l=!1;var Xe=c.memoizedState;A.state=Xe,af(c,v,A,E),Dh(),Fe=c.memoizedState,J||Xe!==Fe||_l?(typeof mt=="function"&&(fu(c,p,mt,v),Fe=c.memoizedState),(me=_l||Hy(c,p,me,v,Xe,Fe,G))?(ot||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=Fe),A.props=v,A.state=Fe,A.context=G,v=me):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{A=c.stateNode,On(o,c),G=c.memoizedProps,ot=Po(p,G),A.props=ot,mt=c.pendingProps,Xe=A.context,Fe=p.contextType,me=Jl,typeof Fe=="object"&&Fe!==null&&(me=vr(Fe)),J=p.getDerivedStateFromProps,(Fe=typeof J=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(G!==mt||Xe!==me)&&Vy(c,A,v,me),_l=!1,Xe=c.memoizedState,A.state=Xe,af(c,v,A,E),Dh();var qe=c.memoizedState;G!==mt||Xe!==qe||_l||o!==null&&o.dependencies!==null&&Mh(o.dependencies)?(typeof J=="function"&&(fu(c,p,J,v),qe=c.memoizedState),(ot=_l||Hy(c,p,ot,v,Xe,qe,me)||o!==null&&o.dependencies!==null&&Mh(o.dependencies))?(Fe||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,qe,me),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,qe,me)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||G===o.memoizedProps&&Xe===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&Xe===o.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=qe),A.props=v,A.state=qe,A.context=me,v=ot):(typeof A.componentDidUpdate!="function"||G===o.memoizedProps&&Xe===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&Xe===o.memoizedState||(c.flags|=1024),v=!1)}return A=v,Zu(o,c),v=(c.flags&128)!==0,A||v?(A=c.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:A.render(),c.flags|=1,o!==null&&v?(c.child=qu(c,o.child,null,E),c.child=qu(c,null,p,E)):Dr(o,c,p,E),c.memoizedState=A.state,o=c.child):o=na(o,c,E),o}function hu(o,c,p,v){return Qc(),c.flags|=256,Dr(o,c,p,v),c.child}var ho={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function po(o){return{baseLanes:o,cachePool:vp()}}function qr(o,c,p){return o=o!==null?o.childLanes&~p:0,c&&(o|=Ys),o}function df(o,c,p){var v=c.pendingProps,E=!1,A=(c.flags&128)!==0,G;if((G=A)||(G=o!==null&&o.memoizedState===null?!1:(Or.current&2)!==0),G&&(E=!0,c.flags&=-129),G=(c.flags&32)!==0,c.flags&=-33,o===null){if(wi){if(E?uu(c):cu(),wi){var J=pr,me;if(me=J){e:{for(me=J,J=ms;me.nodeType!==8;){if(!J){J=null;break e}if(me=Cl(me.nextSibling),me===null){J=null;break e}}J=me}J!==null?(c.memoizedState={dehydrated:J,treeContext:tu!==null?{id:Oo,overflow:Do}:null,retryLane:536870912,hydrationErrors:null},me=ts(18,null,null,0),me.stateNode=J,me.return=c,c.child=me,Fa=c,pr=null,me=!0):me=!1}me||nu(c)}if(J=c.memoizedState,J!==null&&(J=J.dehydrated,J!==null))return mb(J)?c.lanes=32:c.lanes=536870912,null;Uo(c)}return J=v.children,v=v.fallback,E?(cu(),E=c.mode,J=Qu({mode:"hidden",children:J},E),v=eu(v,E,p,null),J.return=c,v.return=c,J.sibling=v,c.child=J,E=c.child,E.memoizedState=po(p),E.childLanes=qr(o,G,p),c.memoizedState=ho,v):(uu(c),Bo(c,J))}if(me=o.memoizedState,me!==null&&(J=me.dehydrated,J!==null)){if(A)c.flags&256?(uu(c),c.flags&=-257,c=ga(o,c,p)):c.memoizedState!==null?(cu(),c.child=o.child,c.flags|=128,c=null):(cu(),E=v.fallback,J=c.mode,v=Qu({mode:"visible",children:v.children},J),E=eu(E,J,p,null),E.flags|=2,v.return=c,E.return=c,v.sibling=E,c.child=v,qu(c,o.child,null,p),v=c.child,v.memoizedState=po(p),v.childLanes=qr(o,G,p),c.memoizedState=ho,c=E);else if(uu(c),mb(J)){if(G=J.nextSibling&&J.nextSibling.dataset,G)var Fe=G.dgst;G=Fe,v=Error(i(419)),v.stack="",v.digest=G,ju({value:v,source:null,stack:null}),c=ga(o,c,p)}else if(ta||ks(o,c,p,!1),G=(p&o.childLanes)!==0,ta||G){if(G=zn,G!==null&&(v=p&-p,v=(v&42)!==0?1:Qt(v),v=(v&(G.suspendedLanes|p))!==0?0:v,v!==0&&v!==me.retryLane))throw me.retryLane=v,ml(o,v),ja(G,o,v),Wy;J.data==="$?"||h(),c=ga(o,c,p)}else J.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=me.treeContext,pr=Cl(J.nextSibling),Fa=c,wi=!0,Fs=null,ms=!1,o!==null&&(pa[ps++]=Oo,pa[ps++]=Do,pa[ps++]=tu,Oo=o.id,Do=o.overflow,tu=c),c=Bo(c,v.children),c.flags|=4096);return c}return E?(cu(),E=v.fallback,J=c.mode,me=o.child,Fe=me.sibling,v=Nr(me,{mode:"hidden",children:v.children}),v.subtreeFlags=me.subtreeFlags&65011712,Fe!==null?E=Nr(Fe,E):(E=eu(E,J,p,null),E.flags|=2),E.return=c,v.return=c,v.sibling=E,c.child=v,v=E,E=c.child,J=o.child.memoizedState,J===null?J=po(p):(me=J.cachePool,me!==null?(Fe=Hr._currentValue,me=me.parent!==Fe?{parent:Fe,pool:Fe}:me):me=vp(),J={baseLanes:J.baseLanes|p,cachePool:me}),E.memoizedState=J,E.childLanes=qr(o,G,p),c.memoizedState=ho,v):(uu(c),p=o.child,o=p.sibling,p=Nr(p,{mode:"visible",children:v.children}),p.return=c,p.sibling=null,o!==null&&(G=c.deletions,G===null?(c.deletions=[o],c.flags|=16):G.push(o)),c.child=p,c.memoizedState=null,p)}function Bo(o,c){return c=Qu({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Qu(o,c){return o=ts(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function ga(o,c,p){return qu(c,o.child,null,p),o=Bo(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function ya(o,c,p){o.lanes|=c;var v=o.alternate;v!==null&&(v.lanes|=c),Ug(o.return,c,p)}function pi(o,c,p,v,E){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:E}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=v,A.tail=p,A.tailMode=E)}function Ws(o,c,p){var v=c.pendingProps,E=v.revealOrder,A=v.tail;if(Dr(o,c,v.children,p),v=Or.current,(v&2)!==0)v=v&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ya(o,p,c);else if(o.tag===19)ya(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}v&=1}switch(Ye(Or,v),E){case"forwards":for(p=c.child,E=null;p!==null;)o=p.alternate,o!==null&&El(o)===null&&(E=p),p=p.sibling;p=E,p===null?(E=c.child,c.child=null):(E=p.sibling,p.sibling=null),pi(c,!1,E,p,A);break;case"backwards":for(p=null,E=c.child,c.child=null;E!==null;){if(o=E.alternate,o!==null&&El(o)===null){c.child=E;break}o=E.sibling,E.sibling=p,p=E,E=o}pi(c,!0,p,null,A);break;case"together":pi(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function na(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),vo|=c.lanes,(p&c.childLanes)===0)if(o!==null){if(ks(o,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(i(153));if(c.child!==null){for(o=c.child,p=Nr(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Nr(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function kh(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Mh(o)))}function Xs(o,c,p){switch(c.tag){case 3:bt(c,c.stateNode.containerInfo),ru(c,Hr,o.memoizedState.cache),Qc();break;case 27:case 5:Wt(c);break;case 4:bt(c,c.stateNode.containerInfo);break;case 10:ru(c,c.type,c.memoizedProps.value);break;case 13:var v=c.memoizedState;if(v!==null)return v.dehydrated!==null?(uu(c),c.flags|=128,null):(p&c.child.childLanes)!==0?df(o,c,p):(uu(c),o=na(o,c,p),o!==null?o.sibling:null);uu(c);break;case 19:var E=(o.flags&128)!==0;if(v=(p&c.childLanes)!==0,v||(ks(o,c,p,!1),v=(p&c.childLanes)!==0),E){if(v)return Ws(o,c,p);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Ye(Or,Or.current),v)break;return null;case 22:case 23:return c.lanes=0,Yu(o,c,p);case 24:ru(c,Hr,o.memoizedState.cache)}return na(o,c,p)}function Ju(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps)ta=!0;else{if(!kh(o,p)&&(c.flags&128)===0)return ta=!1,Xs(o,c,p);ta=(o.flags&131072)!==0}else ta=!1,wi&&(c.flags&1048576)!==0&&dp(c,Zc,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var v=c.elementType,E=v._init;if(v=E(v._payload),c.type=v,typeof v=="function")xh(v)?(o=Po(v,o),c.tag=1,c=_s(null,c,v,o,p)):(c.tag=0,c=hf(null,c,v,o,p));else{if(v!=null){if(E=v.$$typeof,E===C){c.tag=11,c=is(null,c,v,o,p);break e}else if(E===j){c.tag=14,c=rs(null,c,v,o,p);break e}}throw c=we(v)||v,Error(i(306,c,""))}}return c;case 0:return hf(o,c,c.type,c.pendingProps,p);case 1:return v=c.type,E=Po(v,c.pendingProps),_s(o,c,v,E,p);case 3:e:{if(bt(c,c.stateNode.containerInfo),o===null)throw Error(i(387));v=c.pendingProps;var A=c.memoizedState;E=A.element,On(o,c),af(c,v,null,p);var G=c.memoizedState;if(v=G.cache,ru(c,Hr,v),v!==A.cache&&Eh(c,[Hr],p,!0),Dh(),v=G.element,A.isDehydrated)if(A={element:v,isDehydrated:!1,cache:G.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){c=hu(o,c,v,p);break e}else if(v!==E){E=da(Error(i(424)),c),ju(E),c=hu(o,c,v,p);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(pr=Cl(o.firstChild),Fa=c,wi=!0,Fs=null,ms=!0,p=Fy(c,null,v,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Qc(),v===E){c=na(o,c,p);break e}Dr(o,c,v,p)}c=c.child}return c;case 26:return Zu(o,c),o===null?(p=i4(c.type,null,c.pendingProps,null))?c.memoizedState=p:wi||(p=c.type,o=c.pendingProps,v=Zy(et.current).createElement(p),v[ei]=c,v[Ti]=o,Wa(v,p,o),Gi(v),c.stateNode=v):c.memoizedState=i4(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Wt(c),o===null&&wi&&(v=c.stateNode=e4(c.type,c.pendingProps,et.current),Fa=c,ms=!0,E=pr,Tf(c.type)?(gb=E,pr=Cl(v.firstChild)):pr=E),Dr(o,c,c.pendingProps.children,p),Zu(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&wi&&((E=v=pr)&&(v=DL(v,c.type,c.pendingProps,ms),v!==null?(c.stateNode=v,Fa=c,pr=Cl(v.firstChild),ms=!1,E=!0):E=!1),E||nu(c)),Wt(c),E=c.type,A=c.pendingProps,G=o!==null?o.memoizedProps:null,v=A.children,hb(E,A)?v=null:G!==null&&hb(E,G)&&(c.flags|=32),c.memoizedState!==null&&(E=Sl(o,c,Y3,null,null,p),m0._currentValue=E),Zu(o,c),Dr(o,c,v,p),c.child;case 6:return o===null&&wi&&((o=p=pr)&&(p=LL(p,c.pendingProps,ms),p!==null?(c.stateNode=p,Fa=c,pr=null,o=!0):o=!1),o||nu(c)),null;case 13:return df(o,c,p);case 4:return bt(c,c.stateNode.containerInfo),v=c.pendingProps,o===null?c.child=qu(c,null,v,p):Dr(o,c,v,p),c.child;case 11:return is(o,c,c.type,c.pendingProps,p);case 7:return Dr(o,c,c.pendingProps,p),c.child;case 8:return Dr(o,c,c.pendingProps.children,p),c.child;case 12:return Dr(o,c,c.pendingProps.children,p),c.child;case 10:return v=c.pendingProps,ru(c,c.type,v.value),Dr(o,c,v.children,p),c.child;case 9:return E=c.type._context,v=c.pendingProps.children,Lo(c),E=vr(E),v=v(E),c.flags|=1,Dr(o,c,v,p),c.child;case 14:return rs(o,c,c.type,c.pendingProps,p);case 15:return r0(o,c,c.type,c.pendingProps,p);case 19:return Ws(o,c,p);case 31:return v=c.pendingProps,p=c.mode,v={mode:v.mode,children:v.children},o===null?(p=Qu(v,p),p.ref=c.ref,c.child=p,p.return=c,c=p):(p=Nr(o.child,v),p.ref=c.ref,c.child=p,p.return=c,c=p),c;case 22:return Yu(o,c,p);case 24:return Lo(c),v=vr(Hr),o===null?(E=au(),E===null&&(E=zn,A=gp(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=p),E=A),c.memoizedState={parent:v,cache:E},Fg(c),ru(c,Hr,E)):((o.lanes&p)!==0&&(On(o,c),af(c,null,null,p),Dh()),E=o.memoizedState,A=c.memoizedState,E.parent!==v?(E={parent:v,cache:v},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),ru(c,Hr,v)):(v=A.cache,ru(c,Hr,v),v!==E.cache&&Eh(c,[Hr],p,!0))),Dr(o,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function mo(o){o.flags|=4}function Hh(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!l4(c)){if(c=ji.current,c!==null&&((gn&4194048)===gn?fo!==null:(gn&62914560)!==gn&&(gn&536870912)===0||c!==fo))throw Vs=Oh,Bg;o.flags|=8192}}function Ml(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?vt():536870912,o.lanes|=c,bi|=c)}function ec(o,c){if(!wi)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function Qi(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,v=0;if(c)for(var E=o.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags&65011712,v|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=v,o.childLanes=p,c}function a0(o,c,p){var v=c.pendingProps;switch(Dg(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qi(c),null;case 1:return Qi(c),null;case 3:return p=c.stateNode,v=null,o!==null&&(v=o.memoizedState.cache),c.memoizedState.cache!==v&&(c.flags|=2048),vl(Hr),Kt(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(lo(c)?mo(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Li())),Qi(c),null;case 26:return p=c.memoizedState,o===null?(mo(c),p!==null?(Qi(c),Hh(c,p)):(Qi(c),c.flags&=-16777217)):p?p!==o.memoizedState?(mo(c),Qi(c),Hh(c,p)):(Qi(c),c.flags&=-16777217):(o.memoizedProps!==v&&mo(c),Qi(c),c.flags&=-16777217),null;case 27:tn(c),p=et.current;var E=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==v&&mo(c);else{if(!v){if(c.stateNode===null)throw Error(i(166));return Qi(c),null}o=xe.current,lo(c)?iy(c):(o=e4(E,v,p),c.stateNode=o,mo(c))}return Qi(c),null;case 5:if(tn(c),p=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==v&&mo(c);else{if(!v){if(c.stateNode===null)throw Error(i(166));return Qi(c),null}if(o=xe.current,lo(c))iy(c);else{switch(E=Zy(et.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof v.is=="string"?E.createElement("select",{is:v.is}):E.createElement("select"),v.multiple?o.multiple=!0:v.size&&(o.size=v.size);break;default:o=typeof v.is=="string"?E.createElement(p,{is:v.is}):E.createElement(p)}}o[ei]=c,o[Ti]=v;e:for(E=c.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break e;for(;E.sibling===null;){if(E.return===null||E.return===c)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}c.stateNode=o;e:switch(Wa(o,p,v),p){case"button":case"input":case"select":case"textarea":o=!!v.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&mo(c)}}return Qi(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==v&&mo(c);else{if(typeof v!="string"&&c.stateNode===null)throw Error(i(166));if(o=et.current,lo(c)){if(o=c.stateNode,p=c.memoizedProps,v=null,E=Fa,E!==null)switch(E.tag){case 27:case 5:v=E.memoizedProps}o[ei]=c,o=!!(o.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||qM(o.nodeValue,p)),o||nu(c)}else o=Zy(o).createTextNode(v),o[ei]=c,c.stateNode=o}return Qi(c),null;case 13:if(v=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=lo(c),v!==null&&v.dehydrated!==null){if(o===null){if(!E)throw Error(i(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[ei]=c}else Qc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Qi(c),E=!1}else E=Li(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(Uo(c),c):(Uo(c),null)}if(Uo(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=v!==null,o=o!==null&&o.memoizedState!==null,p){v=c.child,E=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(E=v.alternate.memoizedState.cachePool.pool);var A=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==E&&(v.flags|=2048)}return p!==o&&p&&(c.child.flags|=8192),Ml(c,c.updateQueue),Qi(c),null;case 4:return Kt(),o===null&&ob(c.stateNode.containerInfo),Qi(c),null;case 10:return vl(c.type),Qi(c),null;case 19:if(Ge(Or),E=c.memoizedState,E===null)return Qi(c),null;if(v=(c.flags&128)!==0,A=E.rendering,A===null)if(v)ec(E,!1);else{if(ir!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(A=El(o),A!==null){for(c.flags|=128,ec(E,!1),o=A.updateQueue,c.updateQueue=o,Ml(c,o),c.subtreeFlags=0,o=p,p=c.child;p!==null;)Cg(p,o),p=p.sibling;return Ye(Or,Or.current&1|2),c.child}o=o.sibling}E.tail!==null&&pt()>Aa&&(c.flags|=128,v=!0,ec(E,!1),c.lanes=4194304)}else{if(!v)if(o=El(A),o!==null){if(c.flags|=128,v=!0,o=o.updateQueue,c.updateQueue=o,Ml(c,o),ec(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!wi)return Qi(c),null}else 2*pt()-E.renderingStartTime>Aa&&p!==536870912&&(c.flags|=128,v=!0,ec(E,!1),c.lanes=4194304);E.isBackwards?(A.sibling=c.child,c.child=A):(o=E.last,o!==null?o.sibling=A:c.child=A,E.last=A)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=pt(),c.sibling=null,o=Or.current,Ye(Or,v?o&1|2:o&1),c):(Qi(c),null);case 22:case 23:return Uo(c),Lh(),v=c.memoizedState!==null,o!==null?o.memoizedState!==null!==v&&(c.flags|=8192):v&&(c.flags|=8192),v?(p&536870912)!==0&&(c.flags&128)===0&&(Qi(c),c.subtreeFlags&6&&(c.flags|=8192)):Qi(c),p=c.updateQueue,p!==null&&Ml(c,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==p&&(c.flags|=2048),o!==null&&Ge(Hs),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),vl(Hr),Qi(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function pf(o,c){switch(Dg(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return vl(Hr),Kt(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return tn(c),null;case 13:if(Uo(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Qc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Ge(Or),null;case 4:return Kt(),null;case 10:return vl(c.type),null;case 22:case 23:return Uo(c),Lh(),o!==null&&Ge(Hs),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return vl(Hr),null;case 25:return null;default:return null}}function mf(o,c){switch(Dg(c),c.tag){case 3:vl(Hr),Kt();break;case 26:case 27:case 5:tn(c);break;case 4:Kt();break;case 13:Uo(c);break;case 19:Ge(Or);break;case 10:vl(c.type);break;case 22:case 23:Uo(c),Lh(),o!==null&&Ge(Hs);break;case 24:vl(Hr)}}function tc(o,c){try{var p=c.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var E=v.next;p=E;do{if((p.tag&o)===o){v=void 0;var A=p.create,G=p.inst;v=A(),G.destroy=v}p=p.next}while(p!==E)}}catch(J){Ee(c,c.return,J)}}function bs(o,c,p){try{var v=c.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var A=E.next;v=A;do{if((v.tag&o)===o){var G=v.inst,J=G.destroy;if(J!==void 0){G.destroy=void 0,E=c;var me=p,Fe=J;try{Fe()}catch(ot){Ee(E,me,ot)}}}v=v.next}while(v!==A)}}catch(ot){Ee(c,c.return,ot)}}function nc(o){var c=o.updateQueue;if(c!==null){var p=o.stateNode;try{sy(c,p)}catch(v){Ee(o,o.return,v)}}}function wl(o,c,p){p.props=Po(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(v){Ee(o,c,v)}}function ic(o,c){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var v=o.stateNode;break;case 30:v=o.stateNode;break;default:v=o.stateNode}typeof p=="function"?o.refCleanup=p(v):p.current=v}}catch(E){Ee(o,c,E)}}function zo(o,c){var p=o.ref,v=o.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(E){Ee(o,c,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){Ee(o,c,E)}else p.current=null}function gf(o){var c=o.type,p=o.memoizedProps,v=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(E){Ee(o,o.return,E)}}function Vh(o,c,p){try{var v=o.stateNode;AL(v,o.type,p,c),v[Ti]=c}catch(E){Ee(o,o.return,E)}}function Gh(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Tf(o.type)||o.tag===4}function du(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Gh(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Tf(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function pu(o,c,p){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(o),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=Ky));else if(v!==4&&(v===27&&Tf(o.type)&&(p=o.stateNode,c=null),o=o.child,o!==null))for(pu(o,c,p),o=o.sibling;o!==null;)pu(o,c,p),o=o.sibling}function mu(o,c,p){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(v!==4&&(v===27&&Tf(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(mu(o,c,p),o=o.sibling;o!==null;)mu(o,c,p),o=o.sibling}function gu(o){var c=o.stateNode,p=o.memoizedProps;try{for(var v=o.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);Wa(c,v,p),c[ei]=o,c[Ti]=p}catch(A){Ee(o,o.return,A)}}var Fo=!1,Ji=!1,yf=!1,xs=typeof WeakSet=="function"?WeakSet:Set,Wi=null;function $r(o,c){if(o=o.containerInfo,cb=iv,o=Tg(o),yh(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var E=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{p.nodeType,A.nodeType}catch{p=null;break e}var G=0,J=-1,me=-1,Fe=0,ot=0,mt=o,Xe=null;t:for(;;){for(var qe;mt!==p||E!==0&&mt.nodeType!==3||(J=G+E),mt!==A||v!==0&&mt.nodeType!==3||(me=G+v),mt.nodeType===3&&(G+=mt.nodeValue.length),(qe=mt.firstChild)!==null;)Xe=mt,mt=qe;for(;;){if(mt===o)break t;if(Xe===p&&++Fe===E&&(J=G),Xe===A&&++ot===v&&(me=G),(qe=mt.nextSibling)!==null)break;mt=Xe,Xe=mt.parentNode}mt=qe}p=J===-1||me===-1?null:{start:J,end:me}}else p=null}p=p||{start:0,end:0}}else p=null;for(fb={focusedElem:o,selectionRange:p},iv=!1,Wi=c;Wi!==null;)if(c=Wi,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,Wi=o;else for(;Wi!==null;){switch(c=Wi,A=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&A!==null){o=void 0,p=c,E=A.memoizedProps,A=A.memoizedState,v=p.stateNode;try{var Pn=Po(p.type,E,p.elementType===p.type);o=v.getSnapshotBeforeUpdate(Pn,A),v.__reactInternalSnapshotBeforeUpdate=o}catch(wn){Ee(p,p.return,wn)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,p=o.nodeType,p===9)pb(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":pb(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=c.sibling,o!==null){o.return=c.return,Wi=o;break}Wi=c.return}}function Al(o,c,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:Ga(o,p),v&4&&tc(5,p);break;case 1:if(Ga(o,p),v&4)if(o=p.stateNode,c===null)try{o.componentDidMount()}catch(G){Ee(p,p.return,G)}else{var E=Po(p.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(E,c,o.__reactInternalSnapshotBeforeUpdate)}catch(G){Ee(p,p.return,G)}}v&64&&nc(p),v&512&&ic(p,p.return);break;case 3:if(Ga(o,p),v&64&&(o=p.updateQueue,o!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{sy(o,c)}catch(G){Ee(p,p.return,G)}}break;case 27:c===null&&v&4&&gu(p);case 26:case 5:Ga(o,p),c===null&&v&4&&gf(p),v&512&&ic(p,p.return);break;case 12:Ga(o,p);break;case 13:Ga(o,p),v&4&&yu(o,p),v&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=rr.bind(null,p),IL(o,p))));break;case 22:if(v=p.memoizedState!==null||Fo,!v){c=c!==null&&c.memoizedState!==null||Ji,E=Fo;var A=Ji;Fo=v,(Ji=c)&&!A?ko(o,p,(p.subtreeFlags&8772)!==0):Ga(o,p),Fo=E,Ji=A}break;case 30:break;default:Ga(o,p)}}function Xn(o){var c=o.alternate;c!==null&&(o.alternate=null,Xn(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&ui(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var xn=null,_i=!1;function qs(o,c,p){for(p=p.child;p!==null;)rc(o,c,p),p=p.sibling}function rc(o,c,p){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(We,p)}catch{}switch(p.tag){case 26:Ji||zo(p,c),qs(o,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Ji||zo(p,c);var v=xn,E=_i;Tf(p.type)&&(xn=p.stateNode,_i=!1),qs(o,c,p),f0(p.stateNode),xn=v,_i=E;break;case 5:Ji||zo(p,c);case 6:if(v=xn,E=_i,xn=null,qs(o,c,p),xn=v,_i=E,xn!==null)if(_i)try{(xn.nodeType===9?xn.body:xn.nodeName==="HTML"?xn.ownerDocument.body:xn).removeChild(p.stateNode)}catch(A){Ee(p,c,A)}else try{xn.removeChild(p.stateNode)}catch(A){Ee(p,c,A)}break;case 18:xn!==null&&(_i?(o=xn,QM(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),_0(o)):QM(xn,p.stateNode));break;case 4:v=xn,E=_i,xn=p.stateNode.containerInfo,_i=!0,qs(o,c,p),xn=v,_i=E;break;case 0:case 11:case 14:case 15:Ji||bs(2,p,c),Ji||bs(4,p,c),qs(o,c,p);break;case 1:Ji||(zo(p,c),v=p.stateNode,typeof v.componentWillUnmount=="function"&&wl(p,c,v)),qs(o,c,p);break;case 21:qs(o,c,p);break;case 22:Ji=(v=Ji)||p.memoizedState!==null,qs(o,c,p),Ji=v;break;default:qs(o,c,p)}}function yu(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{_0(o)}catch(p){Ee(c,c.return,p)}}function Bp(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new xs),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new xs),c;default:throw Error(i(435,o.tag))}}function ac(o,c){var p=Bp(o);c.forEach(function(v){var E=Dn.bind(null,o,v);p.has(v)||(p.add(v),v.then(E,E))})}function ia(o,c){var p=c.deletions;if(p!==null)for(var v=0;v<p.length;v++){var E=p[v],A=o,G=c,J=G;e:for(;J!==null;){switch(J.tag){case 27:if(Tf(J.type)){xn=J.stateNode,_i=!1;break e}break;case 5:xn=J.stateNode,_i=!1;break e;case 3:case 4:xn=J.stateNode.containerInfo,_i=!0;break e}J=J.return}if(xn===null)throw Error(i(160));rc(A,G,E),xn=null,_i=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)zp(c,o),c=c.sibling}var go=null;function zp(o,c){var p=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ia(c,o),_r(o),v&4&&(bs(3,o,o.return),tc(3,o),bs(5,o,o.return));break;case 1:ia(c,o),_r(o),v&512&&(Ji||p===null||zo(p,p.return)),v&64&&Fo&&(o=o.updateQueue,o!==null&&(v=o.callbacks,v!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var E=go;if(ia(c,o),_r(o),v&512&&(Ji||p===null||zo(p,p.return)),v&4){var A=p!==null?p.memoizedState:null;if(v=o.memoizedState,p===null)if(v===null)if(o.stateNode===null){e:{v=o.type,p=o.memoizedProps,E=E.ownerDocument||E;t:switch(v){case"title":A=E.getElementsByTagName("title")[0],(!A||A[wr]||A[ei]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(v),E.head.insertBefore(A,E.querySelector("head > title"))),Wa(A,v,p),A[ei]=o,Gi(A),v=A;break e;case"link":var G=s4("link","href",E).get(v+(p.href||""));if(G){for(var J=0;J<G.length;J++)if(A=G[J],A.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&A.getAttribute("rel")===(p.rel==null?null:p.rel)&&A.getAttribute("title")===(p.title==null?null:p.title)&&A.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){G.splice(J,1);break t}}A=E.createElement(v),Wa(A,v,p),E.head.appendChild(A);break;case"meta":if(G=s4("meta","content",E).get(v+(p.content||""))){for(J=0;J<G.length;J++)if(A=G[J],A.getAttribute("content")===(p.content==null?null:""+p.content)&&A.getAttribute("name")===(p.name==null?null:p.name)&&A.getAttribute("property")===(p.property==null?null:p.property)&&A.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&A.getAttribute("charset")===(p.charSet==null?null:p.charSet)){G.splice(J,1);break t}}A=E.createElement(v),Wa(A,v,p),E.head.appendChild(A);break;default:throw Error(i(468,v))}A[ei]=o,Gi(A),v=A}o.stateNode=v}else o4(E,o.type,o.stateNode);else o.stateNode=a4(E,v,o.memoizedProps);else A!==v?(A===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):A.count--,v===null?o4(E,o.type,o.stateNode):a4(E,v,o.memoizedProps)):v===null&&o.stateNode!==null&&Vh(o,o.memoizedProps,p.memoizedProps)}break;case 27:ia(c,o),_r(o),v&512&&(Ji||p===null||zo(p,p.return)),p!==null&&v&4&&Vh(o,o.memoizedProps,p.memoizedProps);break;case 5:if(ia(c,o),_r(o),v&512&&(Ji||p===null||zo(p,p.return)),o.flags&32){E=o.stateNode;try{Rr(E,"")}catch(qe){Ee(o,o.return,qe)}}v&4&&o.stateNode!=null&&(E=o.memoizedProps,Vh(o,E,p!==null?p.memoizedProps:E)),v&1024&&(yf=!0);break;case 6:if(ia(c,o),_r(o),v&4){if(o.stateNode===null)throw Error(i(162));v=o.memoizedProps,p=o.stateNode;try{p.nodeValue=v}catch(qe){Ee(o,o.return,qe)}}break;case 3:if(ev=null,E=go,go=Qy(c.containerInfo),ia(c,o),go=E,_r(o),v&4&&p!==null&&p.memoizedState.isDehydrated)try{_0(c.containerInfo)}catch(qe){Ee(o,o.return,qe)}yf&&(yf=!1,vu(o));break;case 4:v=go,go=Qy(o.stateNode.containerInfo),ia(c,o),_r(o),go=v;break;case 12:ia(c,o),_r(o);break;case 13:ia(c,o),_r(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Vi=pt()),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,ac(o,v)));break;case 22:E=o.memoizedState!==null;var me=p!==null&&p.memoizedState!==null,Fe=Fo,ot=Ji;if(Fo=Fe||E,Ji=ot||me,ia(c,o),Ji=ot,Fo=Fe,_r(o),v&8192)e:for(c=o.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(p===null||me||Fo||Ji||Ss(o)),p=null,c=o;;){if(c.tag===5||c.tag===26){if(p===null){me=p=c;try{if(A=me.stateNode,E)G=A.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{J=me.stateNode;var mt=me.memoizedProps.style,Xe=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;J.style.display=Xe==null||typeof Xe=="boolean"?"":(""+Xe).trim()}}catch(qe){Ee(me,me.return,qe)}}}else if(c.tag===6){if(p===null){me=c;try{me.stateNode.nodeValue=E?"":me.memoizedProps}catch(qe){Ee(me,me.return,qe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}v&4&&(v=o.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,ac(o,p))));break;case 19:ia(c,o),_r(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,ac(o,v)));break;case 30:break;case 21:break;default:ia(c,o),_r(o)}}function _r(o){var c=o.flags;if(c&2){try{for(var p,v=o.return;v!==null;){if(Gh(v)){p=v;break}v=v.return}if(p==null)throw Error(i(160));switch(p.tag){case 27:var E=p.stateNode,A=du(o);mu(o,A,E);break;case 5:var G=p.stateNode;p.flags&32&&(Rr(G,""),p.flags&=-33);var J=du(o);mu(o,J,G);break;case 3:case 4:var me=p.stateNode.containerInfo,Fe=du(o);pu(o,Fe,me);break;default:throw Error(i(161))}}catch(ot){Ee(o,o.return,ot)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function vu(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;vu(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Ga(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Al(o,c.alternate,c),c=c.sibling}function Ss(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:bs(4,c,c.return),Ss(c);break;case 1:zo(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&wl(c,c.return,p),Ss(c);break;case 27:f0(c.stateNode);case 26:case 5:zo(c,c.return),Ss(c);break;case 22:c.memoizedState===null&&Ss(c);break;case 30:Ss(c);break;default:Ss(c)}o=o.sibling}}function ko(o,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var v=c.alternate,E=o,A=c,G=A.flags;switch(A.tag){case 0:case 11:case 15:ko(E,A,p),tc(4,A);break;case 1:if(ko(E,A,p),v=A,E=v.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Fe){Ee(v,v.return,Fe)}if(v=A,E=v.updateQueue,E!==null){var J=v.stateNode;try{var me=E.shared.hiddenCallbacks;if(me!==null)for(E.shared.hiddenCallbacks=null,E=0;E<me.length;E++)sf(me[E],J)}catch(Fe){Ee(v,v.return,Fe)}}p&&G&64&&nc(A),ic(A,A.return);break;case 27:gu(A);case 26:case 5:ko(E,A,p),p&&v===null&&G&4&&gf(A),ic(A,A.return);break;case 12:ko(E,A,p);break;case 13:ko(E,A,p),p&&G&4&&yu(E,A);break;case 22:A.memoizedState===null&&ko(E,A,p),ic(A,A.return);break;case 30:break;default:ko(E,A,p)}c=c.sibling}}function Fp(o,c){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&Jc(p))}function kp(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Jc(o))}function Xi(o,c,p,v){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Hp(o,c,p,v),c=c.sibling}function Hp(o,c,p,v){var E=c.flags;switch(c.tag){case 0:case 11:case 15:Xi(o,c,p,v),E&2048&&tc(9,c);break;case 1:Xi(o,c,p,v);break;case 3:Xi(o,c,p,v),E&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Jc(o)));break;case 12:if(E&2048){Xi(o,c,p,v),o=c.stateNode;try{var A=c.memoizedProps,G=A.id,J=A.onPostCommit;typeof J=="function"&&J(G,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(me){Ee(c,c.return,me)}}else Xi(o,c,p,v);break;case 13:Xi(o,c,p,v);break;case 23:break;case 22:A=c.stateNode,G=c.alternate,c.memoizedState!==null?A._visibility&2?Xi(o,c,p,v):yo(o,c):A._visibility&2?Xi(o,c,p,v):(A._visibility|=2,Rl(o,c,p,v,(c.subtreeFlags&10256)!==0)),E&2048&&Fp(G,c);break;case 24:Xi(o,c,p,v),E&2048&&kp(c.alternate,c);break;default:Xi(o,c,p,v)}}function Rl(o,c,p,v,E){for(E=E&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var A=o,G=c,J=p,me=v,Fe=G.flags;switch(G.tag){case 0:case 11:case 15:Rl(A,G,J,me,E),tc(8,G);break;case 23:break;case 22:var ot=G.stateNode;G.memoizedState!==null?ot._visibility&2?Rl(A,G,J,me,E):yo(A,G):(ot._visibility|=2,Rl(A,G,J,me,E)),E&&Fe&2048&&Fp(G.alternate,G);break;case 24:Rl(A,G,J,me,E),E&&Fe&2048&&kp(G.alternate,G);break;default:Rl(A,G,J,me,E)}c=c.sibling}}function yo(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=o,v=c,E=v.flags;switch(v.tag){case 22:yo(p,v),E&2048&&Fp(v.alternate,v);break;case 24:yo(p,v),E&2048&&kp(v.alternate,v);break;default:yo(p,v)}c=c.sibling}}var Ts=8192;function vf(o){if(o.subtreeFlags&Ts)for(o=o.child;o!==null;)Xy(o),o=o.sibling}function Xy(o){switch(o.tag){case 26:vf(o),o.flags&Ts&&o.memoizedState!==null&&qL(go,o.memoizedState,o.memoizedProps);break;case 5:vf(o);break;case 3:case 4:var c=go;go=Qy(o.stateNode.containerInfo),vf(o),go=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Ts,Ts=16777216,vf(o),Ts=c):vf(o));break;default:vf(o)}}function qy(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function er(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var v=c[p];Wi=v,Vo(v,o)}qy(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)s0(o),o=o.sibling}function s0(o){switch(o.tag){case 0:case 11:case 15:er(o),o.flags&2048&&bs(9,o,o.return);break;case 3:er(o);break;case 12:er(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,Ho(o)):er(o);break;default:er(o)}}function Ho(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var v=c[p];Wi=v,Vo(v,o)}qy(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:bs(8,c,c.return),Ho(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,Ho(c));break;default:Ho(c)}o=o.sibling}}function Vo(o,c){for(;Wi!==null;){var p=Wi;switch(p.tag){case 0:case 11:case 15:bs(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Jc(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Wi=v;else e:for(p=o;Wi!==null;){v=Wi;var E=v.sibling,A=v.return;if(Xn(v),v===p){Wi=null;break e}if(E!==null){E.return=A,Wi=E;break e}Wi=A}}}var br={getCacheForType:function(o){var c=vr(Hr),p=c.data.get(o);return p===void 0&&(p=o(),c.data.set(o,p)),p}},o0=typeof WeakMap=="function"?WeakMap:Map,Ii=0,zn=null,Qn=null,gn=0,jn=0,mr=null,Es=!1,_f=!1,bf=!1,$s=0,ir=0,vo=0,Go=0,sc=0,Ys=0,bi=0,Ui=null,En=null,ai=!1,Vi=0,Aa=1/0,Ks=null,Ms=null,Yr=0,Ra=null,qi=null,ws=0,Nl=0,jh=null,As=null,jo=0,oc=null;function xr(){if((Ii&2)!==0&&gn!==0)return gn&-gn;if(Z.T!==null){var o=kn;return o!==0?o:ib()}return bn()}function Vp(){Ys===0&&(Ys=(gn&536870912)===0||wi?he():536870912);var o=ji.current;return o!==null&&(o.flags|=32),Ys}function ja(o,c,p){(o===zn&&(jn===2||jn===9)||o.cancelPendingCommit!==null)&&(bu(o,0),_o(o,gn,Ys,!1)),At(o,p),((Ii&2)===0||o!==zn)&&(o===zn&&((Ii&2)===0&&(Go|=p),ir===4&&_o(o,gn,Ys,!1)),Tu(o))}function xf(o,c,p){if((Ii&6)!==0)throw Error(i(327));var v=!p&&(c&124)===0&&(c&o.expiredLanes)===0||Re(o,c),E=v?M(o,c):d(o,c,!0),A=v;do{if(E===0){_f&&!v&&_o(o,c,0,!1);break}else{if(p=o.current.alternate,A&&!_u(p)){E=d(o,c,!1),A=!1;continue}if(E===2){if(A=c,o.errorRecoveryDisabledLanes&A)var G=0;else G=o.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){c=G;e:{var J=o;E=Ui;var me=J.current.memoizedState.isDehydrated;if(me&&(bu(J,G).flags|=256),G=d(J,G,!1),G!==2){if(bf&&!me){J.errorRecoveryDisabledLanes|=A,Go|=A,E=4;break e}A=En,En=E,A!==null&&(En===null?En=A:En.push.apply(En,A))}E=G}if(A=!1,E!==2)continue}}if(E===1){bu(o,0),_o(o,c,0,!0);break}e:{switch(v=o,A=E,A){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:_o(v,c,Ys,!Es);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(E=Vi+300-pt(),10<E)){if(_o(v,c,Ys,!Es),pe(v,0,!0)!==0)break e;v.timeoutHandle=KM(Wh.bind(null,v,p,En,Ks,ai,c,Ys,Go,bi,Es,A,2,-0,0),E);break e}Wh(v,p,En,Ks,ai,c,Ys,Go,bi,Es,A,0,-0,0)}}break}while(!0);Tu(o)}function Wh(o,c,p,v,E,A,G,J,me,Fe,ot,mt,Xe,qe){if(o.timeoutHandle=-1,mt=c.subtreeFlags,(mt&8192||(mt&16785408)===16785408)&&(p0={stylesheets:null,count:0,unsuspend:XL},Xy(c),mt=$L(),mt!==null)){o.cancelPendingCommit=mt(Dt.bind(null,o,c,A,p,v,E,G,J,me,ot,1,Xe,qe)),_o(o,A,G,!Fe);return}Dt(o,c,A,p,v,E,G,J,me)}function _u(o){for(var c=o;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var E=p[v],A=E.getSnapshot;E=E.value;try{if(!Qa(A(),E))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function _o(o,c,p,v){c&=~sc,c&=~Go,o.suspendedLanes|=c,o.pingedLanes&=~c,v&&(o.warmLanes|=c),v=o.expirationTimes;for(var E=c;0<E;){var A=31-Ut(E),G=1<<A;v[A]=-1,E&=~G}p!==0&&Be(o,p,c)}function Wo(){return(Ii&6)===0?(l0(0),!1):!0}function lc(){if(Qn!==null){if(jn===0)var o=Qn.return;else o=Qn,yl=iu=null,Gg(o),Xu=null,Bh=0,o=Qn;for(;o!==null;)mf(o.alternate,o),o=o.return;Qn=null}}function bu(o,c){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,NL(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),lc(),zn=o,Qn=p=Nr(o.current,null),gn=c,jn=0,mr=null,Es=!1,_f=Re(o,c),bf=!1,bi=Ys=sc=Go=vo=ir=0,En=Ui=null,ai=!1,(c&8)!==0&&(c|=c&32);var v=o.entangledLanes;if(v!==0)for(o=o.entanglements,v&=c;0<v;){var E=31-Ut(v),A=1<<E;c|=o[E],v&=~A}return $s=c,bh(),p}function Gp(o,c){Hn=null,Z.H=Ph,c===Ch||c===uo?(c=zg(),jn=3):c===Bg?(c=zg(),jn=4):jn=c===Wy?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,mr=c,Qn===null&&(ir=1,Ip(o,da(c,o.current)))}function Sf(){var o=Z.H;return Z.H=Ph,o===null?Ph:o}function jp(){var o=Z.A;return Z.A=br,o}function h(){ir=4,Es||(gn&4194048)!==gn&&ji.current!==null||(_f=!0),(vo&134217727)===0&&(Go&134217727)===0||zn===null||_o(zn,gn,Ys,!1)}function d(o,c,p){var v=Ii;Ii|=2;var E=Sf(),A=jp();(zn!==o||gn!==c)&&(Ks=null,bu(o,c)),c=!1;var G=ir;e:do try{if(jn!==0&&Qn!==null){var J=Qn,me=mr;switch(jn){case 8:lc(),G=6;break e;case 3:case 2:case 9:case 6:ji.current===null&&(c=!0);var Fe=jn;if(jn=0,mr=null,ge(o,J,me,Fe),p&&_f){G=0;break e}break;default:Fe=jn,jn=0,mr=null,ge(o,J,me,Fe)}}b(),G=ir;break}catch(ot){Gp(o,ot)}while(!0);return c&&o.shellSuspendCounter++,yl=iu=null,Ii=v,Z.H=E,Z.A=A,Qn===null&&(zn=null,gn=0,bh()),G}function b(){for(;Qn!==null;)I(Qn)}function M(o,c){var p=Ii;Ii|=2;var v=Sf(),E=jp();zn!==o||gn!==c?(Ks=null,Aa=pt()+500,bu(o,c)):_f=Re(o,c);e:do try{if(jn!==0&&Qn!==null){c=Qn;var A=mr;t:switch(jn){case 1:jn=0,mr=null,ge(o,c,A,1);break;case 2:case 9:if(_p(A)){jn=0,mr=null,ne(c);break}c=function(){jn!==2&&jn!==9||zn!==o||(jn=7),Tu(o)},A.then(c,c);break e;case 3:jn=7;break e;case 4:jn=5;break e;case 7:_p(A)?(jn=0,mr=null,ne(c)):(jn=0,mr=null,ge(o,c,A,7));break;case 5:var G=null;switch(Qn.tag){case 26:G=Qn.memoizedState;case 5:case 27:var J=Qn;if(!G||l4(G)){jn=0,mr=null;var me=J.sibling;if(me!==null)Qn=me;else{var Fe=J.return;Fe!==null?(Qn=Fe,Ie(Fe)):Qn=null}break t}}jn=0,mr=null,ge(o,c,A,5);break;case 6:jn=0,mr=null,ge(o,c,A,6);break;case 8:lc(),ir=6;break e;default:throw Error(i(462))}}N();break}catch(ot){Gp(o,ot)}while(!0);return yl=iu=null,Z.H=v,Z.A=E,Ii=p,Qn!==null?0:(zn=null,gn=0,bh(),ir)}function N(){for(;Qn!==null&&!_t();)I(Qn)}function I(o){var c=Ju(o.alternate,o,$s);o.memoizedProps=o.pendingProps,c===null?Ie(o):Qn=c}function ne(o){var c=o,p=c.alternate;switch(c.tag){case 15:case 0:c=vs(p,c,c.pendingProps,c.type,void 0,gn);break;case 11:c=vs(p,c,c.pendingProps,c.type.render,c.ref,gn);break;case 5:Gg(c);default:mf(p,c),c=Qn=Cg(c,$s),c=Ju(p,c,$s)}o.memoizedProps=o.pendingProps,c===null?Ie(o):Qn=c}function ge(o,c,p,v){yl=iu=null,Gg(c),Xu=null,Bh=0;var E=c.return;try{if(tb(o,E,c,p,gn)){ir=1,Ip(o,da(p,o.current)),Qn=null;return}}catch(A){if(E!==null)throw Qn=E,A;ir=1,Ip(o,da(p,o.current)),Qn=null;return}c.flags&32768?(wi||v===1?o=!0:_f||(gn&536870912)!==0?o=!1:(Es=o=!0,(v===2||v===9||v===3||v===6)&&(v=ji.current,v!==null&&v.tag===13&&(v.flags|=16384))),st(c,o)):Ie(c)}function Ie(o){var c=o;do{if((c.flags&32768)!==0){st(c,Es);return}o=c.return;var p=a0(c.alternate,c,$s);if(p!==null){Qn=p;return}if(c=c.sibling,c!==null){Qn=c;return}Qn=c=o}while(c!==null);ir===0&&(ir=5)}function st(o,c){do{var p=pf(o.alternate,o);if(p!==null){p.flags&=32767,Qn=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(o=o.sibling,o!==null)){Qn=o;return}Qn=o=p}while(o!==null);ir=6,Qn=null}function Dt(o,c,p,v,E,A,G,J,me){o.cancelPendingCommit=null;do xu();while(Yr!==0);if((Ii&6)!==0)throw Error(i(327));if(c!==null){if(c===o.current)throw Error(i(177));if(A=c.lanes|c.childLanes,A|=cp,ct(o,p,A,G,J,me),o===zn&&(Qn=zn=null,gn=0),qi=c,Ra=o,ws=p,Nl=A,jh=E,As=v,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Ai(St,function(){return Su(),null})):(o.callbackNode=null,o.callbackPriority=0),v=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||v){v=Z.T,Z.T=null,E=le.p,le.p=2,G=Ii,Ii|=4;try{$r(o,c,p)}finally{Ii=G,le.p=E,Z.T=v}}Yr=1,qt(),Zt(),Fn()}}function qt(){if(Yr===1){Yr=0;var o=Ra,c=qi,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=Z.T,Z.T=null;var v=le.p;le.p=2;var E=Ii;Ii|=4;try{zp(c,o);var A=fb,G=Tg(o.containerInfo),J=A.focusedElem,me=A.selectionRange;if(G!==J&&J&&J.ownerDocument&&Sg(J.ownerDocument.documentElement,J)){if(me!==null&&yh(J)){var Fe=me.start,ot=me.end;if(ot===void 0&&(ot=Fe),"selectionStart"in J)J.selectionStart=Fe,J.selectionEnd=Math.min(ot,J.value.length);else{var mt=J.ownerDocument||document,Xe=mt&&mt.defaultView||window;if(Xe.getSelection){var qe=Xe.getSelection(),Pn=J.textContent.length,wn=Math.min(me.start,Pn),nr=me.end===void 0?wn:Math.min(me.end,Pn);!qe.extend&&wn>nr&&(G=nr,nr=wn,wn=G);var Oe=xg(J,wn),Me=xg(J,nr);if(Oe&&Me&&(qe.rangeCount!==1||qe.anchorNode!==Oe.node||qe.anchorOffset!==Oe.offset||qe.focusNode!==Me.node||qe.focusOffset!==Me.offset)){var Pe=mt.createRange();Pe.setStart(Oe.node,Oe.offset),qe.removeAllRanges(),wn>nr?(qe.addRange(Pe),qe.extend(Me.node,Me.offset)):(Pe.setEnd(Me.node,Me.offset),qe.addRange(Pe))}}}}for(mt=[],qe=J;qe=qe.parentNode;)qe.nodeType===1&&mt.push({element:qe,left:qe.scrollLeft,top:qe.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<mt.length;J++){var ht=mt[J];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}iv=!!cb,fb=cb=null}finally{Ii=E,le.p=v,Z.T=p}}o.current=c,Yr=2}}function Zt(){if(Yr===2){Yr=0;var o=Ra,c=qi,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=Z.T,Z.T=null;var v=le.p;le.p=2;var E=Ii;Ii|=4;try{Al(o,c.alternate,c)}finally{Ii=E,le.p=v,Z.T=p}}Yr=3}}function Fn(){if(Yr===4||Yr===3){Yr=0,ut();var o=Ra,c=qi,p=ws,v=As;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Yr=5:(Yr=0,qi=Ra=null,Rs(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(Ms=null),_n(p),c=c.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(We,c,void 0,(c.current.flags&128)===128)}catch{}if(v!==null){c=Z.T,E=le.p,le.p=2,Z.T=null;try{for(var A=o.onRecoverableError,G=0;G<v.length;G++){var J=v[G];A(J.value,{componentStack:J.stack})}}finally{Z.T=c,le.p=E}}(ws&3)!==0&&xu(),Tu(o),E=o.pendingLanes,(p&4194090)!==0&&(E&42)!==0?o===oc?jo++:(jo=0,oc=o):jo=0,l0(0)}}function Rs(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Jc(c)))}function xu(o){return qt(),Zt(),Fn(),Su()}function Su(){if(Yr!==5)return!1;var o=Ra,c=Nl;Nl=0;var p=_n(ws),v=Z.T,E=le.p;try{le.p=32>p?32:p,Z.T=null,p=jh,jh=null;var A=Ra,G=ws;if(Yr=0,qi=Ra=null,ws=0,(Ii&6)!==0)throw Error(i(331));var J=Ii;if(Ii|=4,s0(A.current),Hp(A,A.current,G,p),Ii=J,l0(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(We,A)}catch{}return!0}finally{le.p=E,Z.T=v,Rs(o,c)}}function Ve(o,c,p){c=da(p,c),c=Up(o.stateNode,c,2),o=bl(o,c,2),o!==null&&(At(o,2),Tu(o))}function Ee(o,c,p){if(o.tag===3)Ve(o,o,p);else for(;c!==null;){if(c.tag===3){Ve(c,o,p);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ms===null||!Ms.has(v))){o=da(p,o),p=jy(2),v=bl(c,p,2),v!==null&&(Pp(p,v,c,o),At(v,2),Tu(v));break}}c=c.return}}function $e(o,c,p){var v=o.pingCache;if(v===null){v=o.pingCache=new o0;var E=new Set;v.set(c,E)}else E=v.get(c),E===void 0&&(E=new Set,v.set(c,E));E.has(p)||(bf=!0,E.add(p),o=Rt.bind(null,o,c,p),c.then(o,o))}function Rt(o,c,p){var v=o.pingCache;v!==null&&v.delete(c),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,zn===o&&(gn&p)===p&&(ir===4||ir===3&&(gn&62914560)===gn&&300>pt()-Vi?(Ii&2)===0&&bu(o,0):sc|=p,bi===gn&&(bi=0)),Tu(o)}function cn(o,c){c===0&&(c=vt()),o=ml(o,c),o!==null&&(At(o,c),Tu(o))}function rr(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),cn(o,p)}function Dn(o,c){var p=0;switch(o.tag){case 13:var v=o.stateNode,E=o.memoizedState;E!==null&&(p=E.retryLane);break;case 19:v=o.stateNode;break;case 22:v=o.stateNode._retryCache;break;default:throw Error(i(314))}v!==null&&v.delete(c),cn(o,p)}function Ai(o,c){return Jt(o,c)}var Lr=null,ti=null,Xo=!1,Wp=!1,nb=!1,Xh=0;function Tu(o){o!==ti&&o.next===null&&(ti===null?Lr=ti=o:ti=ti.next=o),Wp=!0,Xo||(Xo=!0,bL())}function l0(o,c){if(!nb&&Wp){nb=!0;do for(var p=!1,v=Lr;v!==null;){if(o!==0){var E=v.pendingLanes;if(E===0)var A=0;else{var G=v.suspendedLanes,J=v.pingedLanes;A=(1<<31-Ut(42|o)+1)-1,A&=E&~(G&~J),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(p=!0,kM(v,A))}else A=gn,A=pe(v,v===zn?A:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(A&3)===0||Re(v,A)||(p=!0,kM(v,A));v=v.next}while(p);nb=!1}}function _L(){BM()}function BM(){Wp=Xo=!1;var o=0;Xh!==0&&(RL()&&(o=Xh),Xh=0);for(var c=pt(),p=null,v=Lr;v!==null;){var E=v.next,A=zM(v,c);A===0?(v.next=null,p===null?Lr=E:p.next=E,E===null&&(ti=p)):(p=v,(o!==0||(A&3)!==0)&&(Wp=!0)),v=E}l0(o)}function zM(o,c){for(var p=o.suspendedLanes,v=o.pingedLanes,E=o.expirationTimes,A=o.pendingLanes&-62914561;0<A;){var G=31-Ut(A),J=1<<G,me=E[G];me===-1?((J&p)===0||(J&v)!==0)&&(E[G]=yt(J,c)):me<=c&&(o.expiredLanes|=J),A&=~J}if(c=zn,p=gn,p=pe(o,o===c?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v=o.callbackNode,p===0||o===c&&(jn===2||jn===9)||o.cancelPendingCommit!==null)return v!==null&&v!==null&&ie(v),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||Re(o,p)){if(c=p&-p,c===o.callbackPriority)return c;switch(v!==null&&ie(v),_n(p)){case 2:case 8:p=ft;break;case 32:p=St;break;case 268435456:p=re;break;default:p=St}return v=FM.bind(null,o),p=Jt(p,v),o.callbackPriority=c,o.callbackNode=p,c}return v!==null&&v!==null&&ie(v),o.callbackPriority=2,o.callbackNode=null,2}function FM(o,c){if(Yr!==0&&Yr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(xu()&&o.callbackNode!==p)return null;var v=gn;return v=pe(o,o===zn?v:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v===0?null:(xf(o,v,c),zM(o,pt()),o.callbackNode!=null&&o.callbackNode===p?FM.bind(null,o):null)}function kM(o,c){if(xu())return null;xf(o,c,!0)}function bL(){CL(function(){(Ii&6)!==0?Jt(Ot,_L):BM()})}function ib(){return Xh===0&&(Xh=he()),Xh}function HM(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:V(""+o)}function VM(o,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,o.id&&p.setAttribute("form",o.id),c.parentNode.insertBefore(p,c),o=new FormData(o),p.parentNode.removeChild(p),o}function xL(o,c,p,v,E){if(c==="submit"&&p&&p.stateNode===E){var A=HM((E[Ti]||null).action),G=v.submitter;G&&(c=(c=G[Ti]||null)?HM(c.formAction):G.getAttribute("formAction"),c!==null&&(A=c,G=null));var J=new ze("action","action",null,v,E);o.push({event:J,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Xh!==0){var me=G?VM(E,G):new FormData(E);t0(p,{pending:!0,data:me,method:E.method,action:A},null,me)}}else typeof A=="function"&&(J.preventDefault(),me=G?VM(E,G):new FormData(E),t0(p,{pending:!0,data:me,method:E.method,action:A},A,me))},currentTarget:E}]})}}for(var rb=0;rb<_h.length;rb++){var ab=_h[rb],SL=ab.toLowerCase(),TL=ab[0].toUpperCase()+ab.slice(1);Jr(SL,"on"+TL)}Jr(za,"onAnimationEnd"),Jr(wg,"onAnimationIteration"),Jr(es,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(ny,"onTransitionRun"),Jr(dl,"onTransitionStart"),Jr($c,"onTransitionCancel"),Jr(pl,"onTransitionEnd"),Q("onMouseEnter",["mouseout","mouseover"]),Q("onMouseLeave",["mouseout","mouseover"]),Q("onPointerEnter",["pointerout","pointerover"]),Q("onPointerLeave",["pointerout","pointerover"]),la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),la("onBeforeInput",["compositionend","keypress","textInput","paste"]),la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var u0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(u0));function GM(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var v=o[p],E=v.event;v=v.listeners;e:{var A=void 0;if(c)for(var G=v.length-1;0<=G;G--){var J=v[G],me=J.instance,Fe=J.currentTarget;if(J=J.listener,me!==A&&E.isPropagationStopped())break e;A=J,E.currentTarget=Fe;try{A(E)}catch(ot){$u(ot)}E.currentTarget=null,A=me}else for(G=0;G<v.length;G++){if(J=v[G],me=J.instance,Fe=J.currentTarget,J=J.listener,me!==A&&E.isPropagationStopped())break e;A=J,E.currentTarget=Fe;try{A(E)}catch(ot){$u(ot)}E.currentTarget=null,A=me}}}}function ci(o,c){var p=c[Fr];p===void 0&&(p=c[Fr]=new Set);var v=o+"__bubble";p.has(v)||(jM(c,o,2,!1),p.add(v))}function sb(o,c,p){var v=0;c&&(v|=4),jM(p,o,v,c)}var $y="_reactListening"+Math.random().toString(36).slice(2);function ob(o){if(!o[$y]){o[$y]=!0,Pa.forEach(function(p){p!=="selectionchange"&&(EL.has(p)||sb(p,!1,o),sb(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[$y]||(c[$y]=!0,sb("selectionchange",!1,c))}}function jM(o,c,p,v){switch(p4(c)){case 2:var E=ZL;break;case 8:E=QL;break;default:E=xb}p=E.bind(null,c,p,o),E=void 0,!Un||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),v?E!==void 0?o.addEventListener(c,p,{capture:!0,passive:E}):o.addEventListener(c,p,!0):E!==void 0?o.addEventListener(c,p,{passive:E}):o.addEventListener(c,p,!1)}function lb(o,c,p,v,E){var A=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var G=v.tag;if(G===3||G===4){var J=v.stateNode.containerInfo;if(J===E)break;if(G===4)for(G=v.return;G!==null;){var me=G.tag;if((me===3||me===4)&&G.stateNode.containerInfo===E)return;G=G.return}for(;J!==null;){if(G=yr(J),G===null)return;if(me=G.tag,me===5||me===6||me===26||me===27){v=A=G;continue e}J=J.parentNode}}v=v.return}Xt(function(){var Fe=A,ot=De(p),mt=[];e:{var Xe=up.get(o);if(Xe!==void 0){var qe=ze,Pn=o;switch(o){case"keypress":if(Y(p)===0)break e;case"keydown":case"keyup":qe=pg;break;case"focusin":Pn="focus",qe=ua;break;case"focusout":Pn="blur",qe=ua;break;case"beforeblur":case"afterblur":qe=ua;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=Bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=Hi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=gg;break;case za:case wg:case es:qe=di;break;case pl:qe=ul;break;case"scroll":case"scrollend":qe=dt;break;case"wheel":qe=W3;break;case"copy":case"cut":case"paste":qe=so;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=tp;break;case"toggle":case"beforetoggle":qe=ql}var wn=(c&4)!==0,nr=!wn&&(o==="scroll"||o==="scrollend"),Oe=wn?Xe!==null?Xe+"Capture":null:Xe;wn=[];for(var Me=Fe,Pe;Me!==null;){var ht=Me;if(Pe=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Pe===null||Oe===null||(ht=dn(Me,Oe),ht!=null&&wn.push(c0(Me,ht,Pe))),nr)break;Me=Me.return}0<wn.length&&(Xe=new qe(Xe,Pn,null,p,ot),mt.push({event:Xe,listeners:wn}))}}if((c&7)===0){e:{if(Xe=o==="mouseover"||o==="pointerover",qe=o==="mouseout"||o==="pointerout",Xe&&p!==fe&&(Pn=p.relatedTarget||p.fromElement)&&(yr(Pn)||Pn[hr]))break e;if((qe||Xe)&&(Xe=ot.window===ot?ot:(Xe=ot.ownerDocument)?Xe.defaultView||Xe.parentWindow:window,qe?(Pn=p.relatedTarget||p.toElement,qe=Fe,Pn=Pn?yr(Pn):null,Pn!==null&&(nr=a(Pn),wn=Pn.tag,Pn!==nr||wn!==5&&wn!==27&&wn!==6)&&(Pn=null)):(qe=null,Pn=Fe),qe!==Pn)){if(wn=Bn,ht="onMouseLeave",Oe="onMouseEnter",Me="mouse",(o==="pointerout"||o==="pointerover")&&(wn=tp,ht="onPointerLeave",Oe="onPointerEnter",Me="pointer"),nr=qe==null?Xe:Ua(qe),Pe=Pn==null?Xe:Ua(Pn),Xe=new wn(ht,Me+"leave",qe,p,ot),Xe.target=nr,Xe.relatedTarget=Pe,ht=null,yr(ot)===Fe&&(wn=new wn(Oe,Me+"enter",Pn,p,ot),wn.target=Pe,wn.relatedTarget=nr,ht=wn),nr=ht,qe&&Pn)t:{for(wn=qe,Oe=Pn,Me=0,Pe=wn;Pe;Pe=Xp(Pe))Me++;for(Pe=0,ht=Oe;ht;ht=Xp(ht))Pe++;for(;0<Me-Pe;)wn=Xp(wn),Me--;for(;0<Pe-Me;)Oe=Xp(Oe),Pe--;for(;Me--;){if(wn===Oe||Oe!==null&&wn===Oe.alternate)break t;wn=Xp(wn),Oe=Xp(Oe)}wn=null}else wn=null;qe!==null&&WM(mt,Xe,qe,wn,!1),Pn!==null&&nr!==null&&WM(mt,nr,Pn,wn,!0)}}e:{if(Xe=Fe?Ua(Fe):window,qe=Xe.nodeName&&Xe.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Xe.type==="file")var nn=ip;else if(bg(Xe))if(rp)nn=Kl;else{nn=J1;var si=X3}else qe=Xe.nodeName,!qe||qe.toLowerCase()!=="input"||Xe.type!=="checkbox"&&Xe.type!=="radio"?Fe&&ol(Fe.elementType)&&(nn=ip):nn=gh;if(nn&&(nn=nn(o,Fe))){Za(mt,nn,p,ot);break e}si&&si(o,Xe,Fe),o==="focusout"&&Fe&&Xe.type==="number"&&Fe.memoizedProps.value!=null&&dr(Xe,"number",Xe.value)}switch(si=Fe?Ua(Fe):window,o){case"focusin":(bg(si)||si.contentEditable==="true")&&(fl=si,sp=Fe,vh=null);break;case"focusout":vh=sp=fl=null;break;case"mousedown":op=!0;break;case"contextmenu":case"mouseup":case"dragend":op=!1,Mg(mt,p,ot);break;case"selectionchange":if(Eg)break;case"keydown":case"keyup":Mg(mt,p,ot)}var fn;if(ch)e:{switch(o){case"compositionstart":var Rn="onCompositionStart";break e;case"compositionend":Rn="onCompositionEnd";break e;case"compositionupdate":Rn="onCompositionUpdate";break e}Rn=void 0}else Yl?dh(o,p)&&(Rn="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Rn="onCompositionStart");Rn&&(hh&&p.locale!=="ko"&&(Yl||Rn!=="onCompositionStart"?Rn==="onCompositionEnd"&&Yl&&(fn=W()):(Yt=ot,R="value"in Yt?Yt.value:Yt.textContent,Yl=!0)),si=Yy(Fe,Rn),0<si.length&&(Rn=new ku(Rn,o,null,p,ot),mt.push({event:Rn,listeners:si}),fn?Rn.data=fn:(fn=vg(p),fn!==null&&(Rn.data=fn)))),(fn=fh?ph(o,p):_g(o,p))&&(Rn=Yy(Fe,"onBeforeInput"),0<Rn.length&&(si=new ku("onBeforeInput","beforeinput",null,p,ot),mt.push({event:si,listeners:Rn}),si.data=fn)),xL(mt,o,Fe,p,ot)}GM(mt,c)})}function c0(o,c,p){return{instance:o,listener:c,currentTarget:p}}function Yy(o,c){for(var p=c+"Capture",v=[];o!==null;){var E=o,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=dn(o,p),E!=null&&v.unshift(c0(o,E,A)),E=dn(o,c),E!=null&&v.push(c0(o,E,A))),o.tag===3)return v;o=o.return}return[]}function Xp(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function WM(o,c,p,v,E){for(var A=c._reactName,G=[];p!==null&&p!==v;){var J=p,me=J.alternate,Fe=J.stateNode;if(J=J.tag,me!==null&&me===v)break;J!==5&&J!==26&&J!==27||Fe===null||(me=Fe,E?(Fe=dn(p,A),Fe!=null&&G.unshift(c0(p,Fe,me))):E||(Fe=dn(p,A),Fe!=null&&G.push(c0(p,Fe,me)))),p=p.return}G.length!==0&&o.push({event:c,listeners:G})}var ML=/\r\n?/g,wL=/\u0000|\uFFFD/g;function XM(o){return(typeof o=="string"?o:""+o).replace(ML,`
`).replace(wL,"")}function qM(o,c){return c=XM(c),XM(o)===c}function Ky(){}function tr(o,c,p,v,E,A){switch(p){case"children":typeof v=="string"?c==="body"||c==="textarea"&&v===""||Rr(o,v):(typeof v=="number"||typeof v=="bigint")&&c!=="body"&&Rr(o,""+v);break;case"className":Lt(o,"class",v);break;case"tabIndex":Lt(o,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Lt(o,p,v);break;case"style":Co(o,v,A);break;case"data":if(c!=="object"){Lt(o,"data",v);break}case"src":case"href":if(v===""&&(c!=="a"||p!=="href")){o.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(p);break}v=V(""+v),o.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(p==="formAction"?(c!=="input"&&tr(o,c,"name",E.name,E,null),tr(o,c,"formEncType",E.formEncType,E,null),tr(o,c,"formMethod",E.formMethod,E,null),tr(o,c,"formTarget",E.formTarget,E,null)):(tr(o,c,"encType",E.encType,E,null),tr(o,c,"method",E.method,E,null),tr(o,c,"target",E.target,E,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(p);break}v=V(""+v),o.setAttribute(p,v);break;case"onClick":v!=null&&(o.onclick=Ky);break;case"onScroll":v!=null&&ci("scroll",o);break;case"onScrollEnd":v!=null&&ci("scrollend",o);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"multiple":o.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":o.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){o.removeAttribute("xlink:href");break}p=V(""+v),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(p,""+v):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":v===!0?o.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(p,v):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?o.setAttribute(p,v):o.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?o.removeAttribute(p):o.setAttribute(p,v);break;case"popover":ci("beforetoggle",o),ci("toggle",o),gt(o,"popover",v);break;case"xlinkActuate":Ht(o,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Ht(o,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Ht(o,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Ht(o,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Ht(o,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Ht(o,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Ht(o,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Ht(o,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Ht(o,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":gt(o,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=D.get(p)||p,gt(o,p,v))}}function ub(o,c,p,v,E,A){switch(p){case"style":Co(o,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"children":typeof v=="string"?Rr(o,v):(typeof v=="number"||typeof v=="bigint")&&Rr(o,""+v);break;case"onScroll":v!=null&&ci("scroll",o);break;case"onScrollEnd":v!=null&&ci("scrollend",o);break;case"onClick":v!=null&&(o.onclick=Ky);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ar.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),c=p.slice(2,E?p.length-7:void 0),A=o[Ti]||null,A=A!=null?A[p]:null,typeof A=="function"&&o.removeEventListener(c,A,E),typeof v=="function")){typeof A!="function"&&A!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(c,v,E);break e}p in o?o[p]=v:v===!0?o.setAttribute(p,""):gt(o,p,v)}}}function Wa(o,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ci("error",o),ci("load",o);var v=!1,E=!1,A;for(A in p)if(p.hasOwnProperty(A)){var G=p[A];if(G!=null)switch(A){case"src":v=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:tr(o,c,A,G,p,null)}}E&&tr(o,c,"srcSet",p.srcSet,p,null),v&&tr(o,c,"src",p.src,p,null);return;case"input":ci("invalid",o);var J=A=G=E=null,me=null,Fe=null;for(v in p)if(p.hasOwnProperty(v)){var ot=p[v];if(ot!=null)switch(v){case"name":E=ot;break;case"type":G=ot;break;case"checked":me=ot;break;case"defaultChecked":Fe=ot;break;case"value":A=ot;break;case"defaultValue":J=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,c));break;default:tr(o,c,v,ot,p,null)}}Mi(o,A,J,me,Fe,G,E,!1),yi(o);return;case"select":ci("invalid",o),v=G=A=null;for(E in p)if(p.hasOwnProperty(E)&&(J=p[E],J!=null))switch(E){case"value":A=J;break;case"defaultValue":G=J;break;case"multiple":v=J;default:tr(o,c,E,J,p,null)}c=A,p=G,o.multiple=!!v,c!=null?Zi(o,!!v,c,!1):p!=null&&Zi(o,!!v,p,!0);return;case"textarea":ci("invalid",o),A=E=v=null;for(G in p)if(p.hasOwnProperty(G)&&(J=p[G],J!=null))switch(G){case"value":v=J;break;case"defaultValue":E=J;break;case"children":A=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(91));break;default:tr(o,c,G,J,p,null)}lr(o,v,E,A),yi(o);return;case"option":for(me in p)if(p.hasOwnProperty(me)&&(v=p[me],v!=null))switch(me){case"selected":o.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:tr(o,c,me,v,p,null)}return;case"dialog":ci("beforetoggle",o),ci("toggle",o),ci("cancel",o),ci("close",o);break;case"iframe":case"object":ci("load",o);break;case"video":case"audio":for(v=0;v<u0.length;v++)ci(u0[v],o);break;case"image":ci("error",o),ci("load",o);break;case"details":ci("toggle",o);break;case"embed":case"source":case"link":ci("error",o),ci("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Fe in p)if(p.hasOwnProperty(Fe)&&(v=p[Fe],v!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:tr(o,c,Fe,v,p,null)}return;default:if(ol(c)){for(ot in p)p.hasOwnProperty(ot)&&(v=p[ot],v!==void 0&&ub(o,c,ot,v,p,void 0));return}}for(J in p)p.hasOwnProperty(J)&&(v=p[J],v!=null&&tr(o,c,J,v,p,null))}function AL(o,c,p,v){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,G=null,J=null,me=null,Fe=null,ot=null;for(qe in p){var mt=p[qe];if(p.hasOwnProperty(qe)&&mt!=null)switch(qe){case"checked":break;case"value":break;case"defaultValue":me=mt;default:v.hasOwnProperty(qe)||tr(o,c,qe,null,v,mt)}}for(var Xe in v){var qe=v[Xe];if(mt=p[Xe],v.hasOwnProperty(Xe)&&(qe!=null||mt!=null))switch(Xe){case"type":A=qe;break;case"name":E=qe;break;case"checked":Fe=qe;break;case"defaultChecked":ot=qe;break;case"value":G=qe;break;case"defaultValue":J=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(i(137,c));break;default:qe!==mt&&tr(o,c,Xe,qe,v,mt)}}Ka(o,G,J,me,Fe,ot,A,E);return;case"select":qe=G=J=Xe=null;for(A in p)if(me=p[A],p.hasOwnProperty(A)&&me!=null)switch(A){case"value":break;case"multiple":qe=me;default:v.hasOwnProperty(A)||tr(o,c,A,null,v,me)}for(E in v)if(A=v[E],me=p[E],v.hasOwnProperty(E)&&(A!=null||me!=null))switch(E){case"value":Xe=A;break;case"defaultValue":J=A;break;case"multiple":G=A;default:A!==me&&tr(o,c,E,A,v,me)}c=J,p=G,v=qe,Xe!=null?Zi(o,!!p,Xe,!1):!!v!=!!p&&(c!=null?Zi(o,!!p,c,!0):Zi(o,!!p,p?[]:"",!1));return;case"textarea":qe=Xe=null;for(J in p)if(E=p[J],p.hasOwnProperty(J)&&E!=null&&!v.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:tr(o,c,J,null,v,E)}for(G in v)if(E=v[G],A=p[G],v.hasOwnProperty(G)&&(E!=null||A!=null))switch(G){case"value":Xe=E;break;case"defaultValue":qe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==A&&tr(o,c,G,E,v,A)}or(o,Xe,qe);return;case"option":for(var Pn in p)if(Xe=p[Pn],p.hasOwnProperty(Pn)&&Xe!=null&&!v.hasOwnProperty(Pn))switch(Pn){case"selected":o.selected=!1;break;default:tr(o,c,Pn,null,v,Xe)}for(me in v)if(Xe=v[me],qe=p[me],v.hasOwnProperty(me)&&Xe!==qe&&(Xe!=null||qe!=null))switch(me){case"selected":o.selected=Xe&&typeof Xe!="function"&&typeof Xe!="symbol";break;default:tr(o,c,me,Xe,v,qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wn in p)Xe=p[wn],p.hasOwnProperty(wn)&&Xe!=null&&!v.hasOwnProperty(wn)&&tr(o,c,wn,null,v,Xe);for(Fe in v)if(Xe=v[Fe],qe=p[Fe],v.hasOwnProperty(Fe)&&Xe!==qe&&(Xe!=null||qe!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(i(137,c));break;default:tr(o,c,Fe,Xe,v,qe)}return;default:if(ol(c)){for(var nr in p)Xe=p[nr],p.hasOwnProperty(nr)&&Xe!==void 0&&!v.hasOwnProperty(nr)&&ub(o,c,nr,void 0,v,Xe);for(ot in v)Xe=v[ot],qe=p[ot],!v.hasOwnProperty(ot)||Xe===qe||Xe===void 0&&qe===void 0||ub(o,c,ot,Xe,v,qe);return}}for(var Oe in p)Xe=p[Oe],p.hasOwnProperty(Oe)&&Xe!=null&&!v.hasOwnProperty(Oe)&&tr(o,c,Oe,null,v,Xe);for(mt in v)Xe=v[mt],qe=p[mt],!v.hasOwnProperty(mt)||Xe===qe||Xe==null&&qe==null||tr(o,c,mt,Xe,v,qe)}var cb=null,fb=null;function Zy(o){return o.nodeType===9?o:o.ownerDocument}function $M(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YM(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function hb(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var db=null;function RL(){var o=window.event;return o&&o.type==="popstate"?o===db?!1:(db=o,!0):(db=null,!1)}var KM=typeof setTimeout=="function"?setTimeout:void 0,NL=typeof clearTimeout=="function"?clearTimeout:void 0,ZM=typeof Promise=="function"?Promise:void 0,CL=typeof queueMicrotask=="function"?queueMicrotask:typeof ZM<"u"?function(o){return ZM.resolve(null).then(o).catch(OL)}:KM;function OL(o){setTimeout(function(){throw o})}function Tf(o){return o==="head"}function QM(o,c){var p=c,v=0,E=0;do{var A=p.nextSibling;if(o.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(0<v&&8>v){p=v;var G=o.ownerDocument;if(p&1&&f0(G.documentElement),p&2&&f0(G.body),p&4)for(p=G.head,f0(p),G=p.firstChild;G;){var J=G.nextSibling,me=G.nodeName;G[wr]||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&G.rel.toLowerCase()==="stylesheet"||p.removeChild(G),G=J}}if(E===0){o.removeChild(A),_0(c);return}E--}else p==="$"||p==="$?"||p==="$!"?E++:v=p.charCodeAt(0)-48;else v=0;p=A}while(p);_0(c)}function pb(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":pb(p),ui(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function DL(o,c,p,v){for(;o.nodeType===1;){var E=p;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!v&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(v){if(!o[wr])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(A=o.getAttribute("rel"),A==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(A!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(A=o.getAttribute("src"),(A!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===A)return o}else return o;if(o=Cl(o.nextSibling),o===null)break}return null}function LL(o,c,p){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=Cl(o.nextSibling),o===null))return null;return o}function mb(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function IL(o,c){var p=o.ownerDocument;if(o.data!=="$?"||p.readyState==="complete")c();else{var v=function(){c(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),o._reactRetry=v}}function Cl(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var gb=null;function JM(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}function e4(o,c,p){switch(c=Zy(p),o){case"html":if(o=c.documentElement,!o)throw Error(i(452));return o;case"head":if(o=c.head,!o)throw Error(i(453));return o;case"body":if(o=c.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function f0(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);ui(o)}var qo=new Map,t4=new Set;function Qy(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var uc=le.d;le.d={f:UL,r:PL,D:BL,C:zL,L:FL,m:kL,X:VL,S:HL,M:GL};function UL(){var o=uc.f(),c=Wo();return o||c}function PL(o){var c=Ta(o);c!==null&&c.tag===5&&c.type==="form"?Oy(c):uc.r(o)}var qp=typeof document>"u"?null:document;function n4(o,c,p){var v=qp;if(v&&typeof c=="string"&&c){var E=Ei(c);E='link[rel="'+o+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),t4.has(E)||(t4.add(E),o={rel:o,crossOrigin:p,href:c},v.querySelector(E)===null&&(c=v.createElement("link"),Wa(c,"link",o),Gi(c),v.head.appendChild(c)))}}function BL(o){uc.D(o),n4("dns-prefetch",o,null)}function zL(o,c){uc.C(o,c),n4("preconnect",o,c)}function FL(o,c,p){uc.L(o,c,p);var v=qp;if(v&&o&&c){var E='link[rel="preload"][as="'+Ei(c)+'"]';c==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ei(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ei(p.imageSizes)+'"]')):E+='[href="'+Ei(o)+'"]';var A=E;switch(c){case"style":A=$p(o);break;case"script":A=Yp(o)}qo.has(A)||(o=m({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:o,as:c},p),qo.set(A,o),v.querySelector(E)!==null||c==="style"&&v.querySelector(h0(A))||c==="script"&&v.querySelector(d0(A))||(c=v.createElement("link"),Wa(c,"link",o),Gi(c),v.head.appendChild(c)))}}function kL(o,c){uc.m(o,c);var p=qp;if(p&&o){var v=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+Ei(v)+'"][href="'+Ei(o)+'"]',A=E;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Yp(o)}if(!qo.has(A)&&(o=m({rel:"modulepreload",href:o},c),qo.set(A,o),p.querySelector(E)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(d0(A)))return}v=p.createElement("link"),Wa(v,"link",o),Gi(v),p.head.appendChild(v)}}}function HL(o,c,p){uc.S(o,c,p);var v=qp;if(v&&o){var E=oa(v).hoistableStyles,A=$p(o);c=c||"default";var G=E.get(A);if(!G){var J={loading:0,preload:null};if(G=v.querySelector(h0(A)))J.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},p),(p=qo.get(A))&&yb(o,p);var me=G=v.createElement("link");Gi(me),Wa(me,"link",o),me._p=new Promise(function(Fe,ot){me.onload=Fe,me.onerror=ot}),me.addEventListener("load",function(){J.loading|=1}),me.addEventListener("error",function(){J.loading|=2}),J.loading|=4,Jy(G,c,v)}G={type:"stylesheet",instance:G,count:1,state:J},E.set(A,G)}}}function VL(o,c){uc.X(o,c);var p=qp;if(p&&o){var v=oa(p).hoistableScripts,E=Yp(o),A=v.get(E);A||(A=p.querySelector(d0(E)),A||(o=m({src:o,async:!0},c),(c=qo.get(E))&&vb(o,c),A=p.createElement("script"),Gi(A),Wa(A,"link",o),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(E,A))}}function GL(o,c){uc.M(o,c);var p=qp;if(p&&o){var v=oa(p).hoistableScripts,E=Yp(o),A=v.get(E);A||(A=p.querySelector(d0(E)),A||(o=m({src:o,async:!0,type:"module"},c),(c=qo.get(E))&&vb(o,c),A=p.createElement("script"),Gi(A),Wa(A,"link",o),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(E,A))}}function i4(o,c,p,v){var E=(E=et.current)?Qy(E):null;if(!E)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=$p(p.href),p=oa(E).hoistableStyles,v=p.get(c),v||(v={type:"style",instance:null,count:0,state:null},p.set(c,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=$p(p.href);var A=oa(E).hoistableStyles,G=A.get(o);if(G||(E=E.ownerDocument||E,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(o,G),(A=E.querySelector(h0(o)))&&!A._p&&(G.instance=A,G.state.loading=5),qo.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},qo.set(o,p),A||jL(E,o,p,G.state))),c&&v===null)throw Error(i(528,""));return G}if(c&&v!==null)throw Error(i(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Yp(p),p=oa(E).hoistableScripts,v=p.get(c),v||(v={type:"script",instance:null,count:0,state:null},p.set(c,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function $p(o){return'href="'+Ei(o)+'"'}function h0(o){return'link[rel="stylesheet"]['+o+"]"}function r4(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function jL(o,c,p,v){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?v.loading=1:(c=o.createElement("link"),v.preload=c,c.addEventListener("load",function(){return v.loading|=1}),c.addEventListener("error",function(){return v.loading|=2}),Wa(c,"link",p),Gi(c),o.head.appendChild(c))}function Yp(o){return'[src="'+Ei(o)+'"]'}function d0(o){return"script[async]"+o}function a4(o,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var v=o.querySelector('style[data-href~="'+Ei(p.href)+'"]');if(v)return c.instance=v,Gi(v),v;var E=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(o.ownerDocument||o).createElement("style"),Gi(v),Wa(v,"style",E),Jy(v,p.precedence,o),c.instance=v;case"stylesheet":E=$p(p.href);var A=o.querySelector(h0(E));if(A)return c.state.loading|=4,c.instance=A,Gi(A),A;v=r4(p),(E=qo.get(E))&&yb(v,E),A=(o.ownerDocument||o).createElement("link"),Gi(A);var G=A;return G._p=new Promise(function(J,me){G.onload=J,G.onerror=me}),Wa(A,"link",v),c.state.loading|=4,Jy(A,p.precedence,o),c.instance=A;case"script":return A=Yp(p.src),(E=o.querySelector(d0(A)))?(c.instance=E,Gi(E),E):(v=p,(E=qo.get(A))&&(v=m({},p),vb(v,E)),o=o.ownerDocument||o,E=o.createElement("script"),Gi(E),Wa(E,"link",v),o.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(v=c.instance,c.state.loading|=4,Jy(v,p.precedence,o));return c.instance}function Jy(o,c,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=v.length?v[v.length-1]:null,A=E,G=0;G<v.length;G++){var J=v[G];if(J.dataset.precedence===c)A=J;else if(A!==E)break}A?A.parentNode.insertBefore(o,A.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(o,c.firstChild))}function yb(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function vb(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var ev=null;function s4(o,c,p){if(ev===null){var v=new Map,E=ev=new Map;E.set(p,v)}else E=ev,v=E.get(p),v||(v=new Map,E.set(p,v));if(v.has(o))return v;for(v.set(o,null),p=p.getElementsByTagName(o),E=0;E<p.length;E++){var A=p[E];if(!(A[wr]||A[ei]||o==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var G=A.getAttribute(c)||"";G=o+G;var J=v.get(G);J?J.push(A):v.set(G,[A])}}return v}function o4(o,c,p){o=o.ownerDocument||o,o.head.insertBefore(p,c==="title"?o.querySelector("head > title"):null)}function WL(o,c,p){if(p===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function l4(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var p0=null;function XL(){}function qL(o,c,p){if(p0===null)throw Error(i(475));var v=p0;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=$p(p.href),A=o.querySelector(h0(E));if(A){o=A._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(v.count++,v=tv.bind(v),o.then(v,v)),c.state.loading|=4,c.instance=A,Gi(A);return}A=o.ownerDocument||o,p=r4(p),(E=qo.get(E))&&yb(p,E),A=A.createElement("link"),Gi(A);var G=A;G._p=new Promise(function(J,me){G.onload=J,G.onerror=me}),Wa(A,"link",p),c.instance=A}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(v.count++,c=tv.bind(v),o.addEventListener("load",c),o.addEventListener("error",c))}}function $L(){if(p0===null)throw Error(i(475));var o=p0;return o.stylesheets&&o.count===0&&_b(o,o.stylesheets),0<o.count?function(c){var p=setTimeout(function(){if(o.stylesheets&&_b(o,o.stylesheets),o.unsuspend){var v=o.unsuspend;o.unsuspend=null,v()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(p)}}:null}function tv(){if(this.count--,this.count===0){if(this.stylesheets)_b(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var nv=null;function _b(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,nv=new Map,c.forEach(YL,o),nv=null,tv.call(o))}function YL(o,c){if(!(c.state.loading&4)){var p=nv.get(o);if(p)var v=p.get(null);else{p=new Map,nv.set(o,p);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var G=E[A];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(p.set(G.dataset.precedence,G),v=G)}v&&p.set(null,v)}E=c.instance,G=E.getAttribute("data-precedence"),A=p.get(G)||v,A===v&&p.set(null,E),p.set(G,E),this.count++,v=tv.bind(this),E.addEventListener("load",v),E.addEventListener("error",v),A?A.parentNode.insertBefore(E,A.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),c.state.loading|=4}}var m0={$$typeof:L,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function KL(o,c,p,v,E,A,G,J){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=at(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=at(0),this.hiddenUpdates=at(null),this.identifierPrefix=v,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function u4(o,c,p,v,E,A,G,J,me,Fe,ot,mt){return o=new KL(o,c,p,G,J,me,Fe,mt),c=1,A===!0&&(c|=24),A=ts(3,null,null,c),o.current=A,A.stateNode=o,c=gp(),c.refCount++,o.pooledCache=c,c.refCount++,A.memoizedState={element:v,isDehydrated:p,cache:c},Fg(A),o}function c4(o){return o?(o=Jl,o):Jl}function f4(o,c,p,v,E,A){E=c4(E),v.context===null?v.context=E:v.pendingContext=E,v=Io(c),v.payload={element:p},A=A===void 0?null:A,A!==null&&(v.callback=A),p=bl(o,v,c),p!==null&&(ja(p,o,c),Wu(p,o,c))}function h4(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function bb(o,c){h4(o,c),(o=o.alternate)&&h4(o,c)}function d4(o){if(o.tag===13){var c=ml(o,67108864);c!==null&&ja(c,o,67108864),bb(o,67108864)}}var iv=!0;function ZL(o,c,p,v){var E=Z.T;Z.T=null;var A=le.p;try{le.p=2,xb(o,c,p,v)}finally{le.p=A,Z.T=E}}function QL(o,c,p,v){var E=Z.T;Z.T=null;var A=le.p;try{le.p=8,xb(o,c,p,v)}finally{le.p=A,Z.T=E}}function xb(o,c,p,v){if(iv){var E=Sb(v);if(E===null)lb(o,c,v,rv,p),m4(o,v);else if(e8(E,o,c,p,v))v.stopPropagation();else if(m4(o,v),c&4&&-1<JL.indexOf(o)){for(;E!==null;){var A=Ta(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var G=Ct(A.pendingLanes);if(G!==0){var J=A;for(J.pendingLanes|=2,J.entangledLanes|=2;G;){var me=1<<31-Ut(G);J.entanglements[1]|=me,G&=~me}Tu(A),(Ii&6)===0&&(Aa=pt()+500,l0(0))}}break;case 13:J=ml(A,2),J!==null&&ja(J,A,2),Wo(),bb(A,2)}if(A=Sb(v),A===null&&lb(o,c,v,rv,p),A===E)break;E=A}E!==null&&v.stopPropagation()}else lb(o,c,v,null,p)}}function Sb(o){return o=De(o),Tb(o)}var rv=null;function Tb(o){if(rv=null,o=yr(o),o!==null){var c=a(o);if(c===null)o=null;else{var p=c.tag;if(p===13){if(o=s(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return rv=o,null}function p4(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ze()){case Ot:return 2;case ft:return 8;case St:case on:return 32;case re:return 268435456;default:return 32}default:return 32}}var Eb=!1,Ef=null,Mf=null,wf=null,g0=new Map,y0=new Map,Af=[],JL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m4(o,c){switch(o){case"focusin":case"focusout":Ef=null;break;case"dragenter":case"dragleave":Mf=null;break;case"mouseover":case"mouseout":wf=null;break;case"pointerover":case"pointerout":g0.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":y0.delete(c.pointerId)}}function v0(o,c,p,v,E,A){return o===null||o.nativeEvent!==A?(o={blockedOn:c,domEventName:p,eventSystemFlags:v,nativeEvent:A,targetContainers:[E]},c!==null&&(c=Ta(c),c!==null&&d4(c)),o):(o.eventSystemFlags|=v,c=o.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),o)}function e8(o,c,p,v,E){switch(c){case"focusin":return Ef=v0(Ef,o,c,p,v,E),!0;case"dragenter":return Mf=v0(Mf,o,c,p,v,E),!0;case"mouseover":return wf=v0(wf,o,c,p,v,E),!0;case"pointerover":var A=E.pointerId;return g0.set(A,v0(g0.get(A)||null,o,c,p,v,E)),!0;case"gotpointercapture":return A=E.pointerId,y0.set(A,v0(y0.get(A)||null,o,c,p,v,E)),!0}return!1}function g4(o){var c=yr(o.target);if(c!==null){var p=a(c);if(p!==null){if(c=p.tag,c===13){if(c=s(p),c!==null){o.blockedOn=c,mi(o.priority,function(){if(p.tag===13){var v=xr();v=Qt(v);var E=ml(p,v);E!==null&&ja(E,p,v),bb(p,v)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function av(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=Sb(o.nativeEvent);if(p===null){p=o.nativeEvent;var v=new p.constructor(p.type,p);fe=v,p.target.dispatchEvent(v),fe=null}else return c=Ta(p),c!==null&&d4(c),o.blockedOn=p,!1;c.shift()}return!0}function y4(o,c,p){av(o)&&p.delete(c)}function t8(){Eb=!1,Ef!==null&&av(Ef)&&(Ef=null),Mf!==null&&av(Mf)&&(Mf=null),wf!==null&&av(wf)&&(wf=null),g0.forEach(y4),y0.forEach(y4)}function sv(o,c){o.blockedOn===c&&(o.blockedOn=null,Eb||(Eb=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,t8)))}var ov=null;function v4(o){ov!==o&&(ov=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ov===o&&(ov=null);for(var c=0;c<o.length;c+=3){var p=o[c],v=o[c+1],E=o[c+2];if(typeof v!="function"){if(Tb(v||p)===null)continue;break}var A=Ta(p);A!==null&&(o.splice(c,3),c-=3,t0(A,{pending:!0,data:E,method:p.method,action:v},v,E))}}))}function _0(o){function c(me){return sv(me,o)}Ef!==null&&sv(Ef,o),Mf!==null&&sv(Mf,o),wf!==null&&sv(wf,o),g0.forEach(c),y0.forEach(c);for(var p=0;p<Af.length;p++){var v=Af[p];v.blockedOn===o&&(v.blockedOn=null)}for(;0<Af.length&&(p=Af[0],p.blockedOn===null);)g4(p),p.blockedOn===null&&Af.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var E=p[v],A=p[v+1],G=E[Ti]||null;if(typeof A=="function")G||v4(p);else if(G){var J=null;if(A&&A.hasAttribute("formAction")){if(E=A,G=A[Ti]||null)J=G.formAction;else if(Tb(E)!==null)continue}else J=G.action;typeof J=="function"?p[v+1]=J:(p.splice(v,3),v-=3),v4(p)}}}function Mb(o){this._internalRoot=o}lv.prototype.render=Mb.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(i(409));var p=c.current,v=xr();f4(p,v,o,c,null,null)},lv.prototype.unmount=Mb.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;f4(o.current,2,null,o,null,null),Wo(),c[hr]=null}};function lv(o){this._internalRoot=o}lv.prototype.unstable_scheduleHydration=function(o){if(o){var c=bn();o={blockedOn:null,target:o,priority:c};for(var p=0;p<Af.length&&c!==0&&c<Af[p].priority;p++);Af.splice(p,0,o),p===0&&g4(o)}};var _4=e.version;if(_4!=="19.1.0")throw Error(i(527,_4,"19.1.0"));le.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=u(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var n8={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uv.isDisabled&&uv.supportsFiber)try{We=uv.inject(n8),Qe=uv}catch{}}return x0.createRoot=function(o,c){if(!r(o))throw Error(i(299));var p=!1,v="",E=Fh,A=Lp,G=Gy,J=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(G=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(J=c.unstable_transitionCallbacks)),c=u4(o,1,!1,null,null,p,v,E,A,G,J,null),o[hr]=c.current,ob(o),new Mb(c)},x0.hydrateRoot=function(o,c,p){if(!r(o))throw Error(i(299));var v=!1,E="",A=Fh,G=Lp,J=Gy,me=null,Fe=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(A=p.onUncaughtError),p.onCaughtError!==void 0&&(G=p.onCaughtError),p.onRecoverableError!==void 0&&(J=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(me=p.unstable_transitionCallbacks),p.formState!==void 0&&(Fe=p.formState)),c=u4(o,1,!0,c,p??null,v,E,A,G,J,me,Fe),c.context=c4(null),p=c.current,v=xr(),v=Qt(v),E=Io(v),E.callback=null,bl(p,E,v),p=v,c.current.lanes=p,At(c,p),Tu(c),o[hr]=c.current,ob(o),new lv(c)},x0.version="19.1.0",x0}var C4;function d8(){if(C4)return Rb.exports;C4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rb.exports=h8(),Rb.exports}var p8=d8(),Db={exports:{}},cc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O4;function m8(){return O4||(O4=1,cc.ConcurrentRoot=1,cc.ContinuousEventPriority=8,cc.DefaultEventPriority=32,cc.DiscreteEventPriority=2,cc.IdleEventPriority=268435456,cc.LegacyRoot=0,cc.NoEventPriority=0),cc}var D4;function g8(){return D4||(D4=1,Db.exports=m8()),Db.exports}var m2=g8();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const $f="178",dd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},pd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},$N=0,OS=1,YN=2,y8=3,KN=0,$_=1,Q0=2,Il=3,Bu=0,fs=1,Eo=2,wc=0,Rd=1,DS=2,LS=3,IS=4,ZN=5,kf=100,QN=101,JN=102,eC=103,tC=104,nC=200,iC=201,rC=202,aC=203,z2=204,F2=205,sC=206,oC=207,lC=208,uC=209,cC=210,fC=211,hC=212,dC=213,pC=214,k2=0,H2=1,V2=2,Dd=3,G2=4,j2=5,W2=6,X2=7,O1=0,mC=1,gC=2,Lu=0,yC=1,vC=2,_C=3,rE=4,bC=5,xC=6,SC=7,US="attached",TC="detached",Y_=300,Nc=301,Yf=302,f1=303,h1=304,ng=306,Kf=1e3,Mo=1001,Bm=1002,_a=1003,K_=1004,v8=1004,bd=1005,_8=1005,Tr=1006,Cm=1007,b8=1007,Jo=1008,x8=1008,tl=1009,aE=1010,sE=1011,zm=1012,Z_=1013,Cc=1014,Ls=1015,$d=1016,Q_=1017,J_=1018,Fm=1020,oE=35902,lE=1021,uE=1022,cs=1023,km=1026,Hm=1027,e3=1028,D1=1029,cE=1030,t3=1031,S8=1032,n3=1033,J0=33776,e1=33777,t1=33778,n1=33779,q2=35840,$2=35841,Y2=35842,K2=35843,Z2=36196,Q2=37492,J2=37496,e_=37808,t_=37809,n_=37810,i_=37811,r_=37812,a_=37813,s_=37814,o_=37815,l_=37816,u_=37817,c_=37818,f_=37819,h_=37820,d_=37821,i1=36492,p_=36494,m_=36495,fE=36283,g_=36284,y_=36285,v_=36286,EC=2200,MC=2201,wC=2202,Vm=2300,Gm=2301,g2=2302,xd=2400,Sd=2401,d1=2402,i3=2500,hE=2501,AC=0,dE=1,__=2,RC=3200,NC=3201,T8=3202,E8=3203,Hc=0,CC=1,xc="",Zr="srgb",$a="srgb-linear",p1="linear",$i="srgb",M8=0,md=7680,w8=7681,A8=7682,R8=7683,N8=34055,C8=34056,O8=5386,D8=512,L8=513,I8=514,U8=515,P8=516,B8=517,z8=518,PS=519,OC=512,DC=513,LC=514,pE=515,IC=516,UC=517,PC=518,BC=519,m1=35044,zC=35048,F8=35040,k8=35045,H8=35049,V8=35041,G8=35046,j8=35050,W8=35042,X8="100",BS="300 es",el=2e3,g1=2001,q8={COMPUTE:"compute",RENDER:"render"},$8={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Y8={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Fu=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const ss=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let L4=1234567;const Nd=Math.PI/180,jm=180/Math.PI;function wo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ss[n&255]+ss[n>>8&255]+ss[n>>16&255]+ss[n>>24&255]+"-"+ss[e&255]+ss[e>>8&255]+"-"+ss[e>>16&15|64]+ss[e>>24&255]+"-"+ss[t&63|128]+ss[t>>8&255]+"-"+ss[t>>16&255]+ss[t>>24&255]+ss[i&255]+ss[i>>8&255]+ss[i>>16&255]+ss[i>>24&255]).toLowerCase()}function Vn(n,e,t){return Math.max(e,Math.min(t,n))}function mE(n,e){return(n%e+e)%e}function K8(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Z8(n,e,t){return n!==e?(t-n)/(e-n):0}function r1(n,e,t){return(1-t)*n+t*e}function Q8(n,e,t,i){return r1(n,e,1-Math.exp(-t*i))}function J8(n,e=1){return e-Math.abs(mE(n,e*2)-e)}function eI(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function tI(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function nI(n,e){return n+Math.floor(Math.random()*(e-n+1))}function iI(n,e){return n+Math.random()*(e-n)}function rI(n){return n*(.5-Math.random())}function aI(n){n!==void 0&&(L4=n);let e=L4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function sI(n){return n*Nd}function oI(n){return n*jm}function lI(n){return(n&n-1)===0&&n!==0}function uI(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function cI(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function fI(n,e,t,i,r){const a=Math.cos,s=Math.sin,l=a(t/2),u=s(t/2),f=a((e+i)/2),m=s((e+i)/2),g=a((e-i)/2),y=s((e-i)/2),_=a((i-e)/2),x=s((i-e)/2);switch(r){case"XYX":n.set(l*m,u*g,u*y,l*f);break;case"YZY":n.set(u*y,l*m,u*g,l*f);break;case"ZXZ":n.set(u*g,u*y,l*m,l*f);break;case"XZX":n.set(l*m,u*x,u*_,l*f);break;case"YXY":n.set(u*_,l*m,u*x,l*f);break;case"ZYZ":n.set(u*x,u*_,l*m,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Os(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function qn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Fi={DEG2RAD:Nd,RAD2DEG:jm,generateUUID:wo,clamp:Vn,euclideanModulo:mE,mapLinear:K8,inverseLerp:Z8,lerp:r1,damp:Q8,pingpong:J8,smoothstep:eI,smootherstep:tI,randInt:nI,randFloat:iI,randFloatSpread:rI,seededRandom:aI,degToRad:sI,radToDeg:oI,isPowerOfTwo:lI,ceilPowerOfTwo:uI,floorPowerOfTwo:cI,setQuaternionFromProperEuler:fI,normalize:qn,denormalize:Os};class it{constructor(e=0,t=0){it.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Vn(this.x,e.x,t.x),this.y=Vn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Vn(this.x,e,t),this.y=Vn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Vn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class An{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,s,l){let u=i[r+0],f=i[r+1],m=i[r+2],g=i[r+3];const y=a[s+0],_=a[s+1],x=a[s+2],w=a[s+3];if(l===0){e[t+0]=u,e[t+1]=f,e[t+2]=m,e[t+3]=g;return}if(l===1){e[t+0]=y,e[t+1]=_,e[t+2]=x,e[t+3]=w;return}if(g!==w||u!==y||f!==_||m!==x){let T=1-l;const S=u*y+f*_+m*x+g*w,O=S>=0?1:-1,L=1-S*S;if(L>Number.EPSILON){const P=Math.sqrt(L),B=Math.atan2(P,S*O);T=Math.sin(T*B)/P,l=Math.sin(l*B)/P}const C=l*O;if(u=u*T+y*C,f=f*T+_*C,m=m*T+x*C,g=g*T+w*C,T===1-l){const P=1/Math.sqrt(u*u+f*f+m*m+g*g);u*=P,f*=P,m*=P,g*=P}}e[t]=u,e[t+1]=f,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,r,a,s){const l=i[r],u=i[r+1],f=i[r+2],m=i[r+3],g=a[s],y=a[s+1],_=a[s+2],x=a[s+3];return e[t]=l*x+m*g+u*_-f*y,e[t+1]=u*x+m*y+f*g-l*_,e[t+2]=f*x+m*_+l*y-u*g,e[t+3]=m*x-l*g-u*y-f*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,s=e._order,l=Math.cos,u=Math.sin,f=l(i/2),m=l(r/2),g=l(a/2),y=u(i/2),_=u(r/2),x=u(a/2);switch(s){case"XYZ":this._x=y*m*g+f*_*x,this._y=f*_*g-y*m*x,this._z=f*m*x+y*_*g,this._w=f*m*g-y*_*x;break;case"YXZ":this._x=y*m*g+f*_*x,this._y=f*_*g-y*m*x,this._z=f*m*x-y*_*g,this._w=f*m*g+y*_*x;break;case"ZXY":this._x=y*m*g-f*_*x,this._y=f*_*g+y*m*x,this._z=f*m*x+y*_*g,this._w=f*m*g-y*_*x;break;case"ZYX":this._x=y*m*g-f*_*x,this._y=f*_*g+y*m*x,this._z=f*m*x-y*_*g,this._w=f*m*g+y*_*x;break;case"YZX":this._x=y*m*g+f*_*x,this._y=f*_*g+y*m*x,this._z=f*m*x-y*_*g,this._w=f*m*g-y*_*x;break;case"XZY":this._x=y*m*g-f*_*x,this._y=f*_*g-y*m*x,this._z=f*m*x+y*_*g,this._w=f*m*g+y*_*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],s=t[1],l=t[5],u=t[9],f=t[2],m=t[6],g=t[10],y=i+l+g;if(y>0){const _=.5/Math.sqrt(y+1);this._w=.25/_,this._x=(m-u)*_,this._y=(a-f)*_,this._z=(s-r)*_}else if(i>l&&i>g){const _=2*Math.sqrt(1+i-l-g);this._w=(m-u)/_,this._x=.25*_,this._y=(r+s)/_,this._z=(a+f)/_}else if(l>g){const _=2*Math.sqrt(1+l-i-g);this._w=(a-f)/_,this._x=(r+s)/_,this._y=.25*_,this._z=(u+m)/_}else{const _=2*Math.sqrt(1+g-i-l);this._w=(s-r)/_,this._x=(a+f)/_,this._y=(u+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,s=e._w,l=t._x,u=t._y,f=t._z,m=t._w;return this._x=i*m+s*l+r*f-a*u,this._y=r*m+s*u+a*l-i*f,this._z=a*m+s*f+i*u-r*l,this._w=s*m-i*l-r*u-a*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,a=this._z,s=this._w;let l=s*e._w+i*e._x+r*e._y+a*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=s,this._x=i,this._y=r,this._z=a,this;const u=1-l*l;if(u<=Number.EPSILON){const _=1-t;return this._w=_*s+t*this._w,this._x=_*i+t*this._x,this._y=_*r+t*this._y,this._z=_*a+t*this._z,this.normalize(),this}const f=Math.sqrt(u),m=Math.atan2(f,l),g=Math.sin((1-t)*m)/f,y=Math.sin(t*m)/f;return this._w=s*g+this._w*y,this._x=i*g+this._x*y,this._y=r*g+this._y*y,this._z=a*g+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ${constructor(e=0,t=0,i=0){$.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(I4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(I4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,s=e.y,l=e.z,u=e.w,f=2*(s*r-l*i),m=2*(l*t-a*r),g=2*(a*i-s*t);return this.x=t+u*f+s*g-l*m,this.y=i+u*m+l*f-a*g,this.z=r+u*g+a*m-s*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Vn(this.x,e.x,t.x),this.y=Vn(this.y,e.y,t.y),this.z=Vn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Vn(this.x,e,t),this.y=Vn(this.y,e,t),this.z=Vn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,s=t.x,l=t.y,u=t.z;return this.x=r*u-a*l,this.y=a*s-i*u,this.z=i*l-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Lb.copy(this).projectOnVector(e),this.sub(Lb)}reflect(e){return this.sub(Lb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Vn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Lb=new $,I4=new An;class Sn{constructor(e,t,i,r,a,s,l,u,f){Sn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,l,u,f)}set(e,t,i,r,a,s,l,u,f){const m=this.elements;return m[0]=e,m[1]=r,m[2]=l,m[3]=t,m[4]=a,m[5]=u,m[6]=i,m[7]=s,m[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],l=i[3],u=i[6],f=i[1],m=i[4],g=i[7],y=i[2],_=i[5],x=i[8],w=r[0],T=r[3],S=r[6],O=r[1],L=r[4],C=r[7],P=r[2],B=r[5],j=r[8];return a[0]=s*w+l*O+u*P,a[3]=s*T+l*L+u*B,a[6]=s*S+l*C+u*j,a[1]=f*w+m*O+g*P,a[4]=f*T+m*L+g*B,a[7]=f*S+m*C+g*j,a[2]=y*w+_*O+x*P,a[5]=y*T+_*L+x*B,a[8]=y*S+_*C+x*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],f=e[7],m=e[8];return t*s*m-t*l*f-i*a*m+i*l*u+r*a*f-r*s*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],f=e[7],m=e[8],g=m*s-l*f,y=l*u-m*a,_=f*a-s*u,x=t*g+i*y+r*_;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=g*w,e[1]=(r*f-m*i)*w,e[2]=(l*i-r*s)*w,e[3]=y*w,e[4]=(m*t-r*u)*w,e[5]=(r*a-l*t)*w,e[6]=_*w,e[7]=(i*u-f*t)*w,e[8]=(s*t-i*a)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,s,l){const u=Math.cos(a),f=Math.sin(a);return this.set(i*u,i*f,-i*(u*s+f*l)+s+e,-r*f,r*u,-r*(-f*s+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(Ib.makeScale(e,t)),this}rotate(e){return this.premultiply(Ib.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ib.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Ib=new Sn;function FC(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const hI={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Am(n,e){return new hI[n](e)}function y1(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function kC(){const n=y1("canvas");return n.style.display="block",n}const U4={};function Om(n){n in U4||(U4[n]=!0,console.warn(n))}function dI(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}function pI(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function mI(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const P4=new Sn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),B4=new Sn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function gI(){const n={enabled:!0,workingColorSpace:$a,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===$i&&(r.r=Ac(r.r),r.g=Ac(r.g),r.b=Ac(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===$i&&(r.r=Dm(r.r),r.g=Dm(r.g),r.b=Dm(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===xc?p1:this.spaces[r].transfer},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return Om("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return Om("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[$a]:{primaries:e,whitePoint:i,transfer:p1,toXYZ:P4,fromXYZ:B4,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Zr},outputColorSpaceConfig:{drawingBufferColorSpace:Zr}},[Zr]:{primaries:e,whitePoint:i,transfer:$i,toXYZ:P4,fromXYZ:B4,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Zr}}}),n}const fi=gI();function Ac(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Dm(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Kp;class HC{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Kp===void 0&&(Kp=y1("canvas")),Kp.width=e.width,Kp.height=e.height;const r=Kp.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Kp}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=y1("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=Ac(a[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ac(t[i]/255)*255):t[i]=Ac(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let yI=0;class Vf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:yI++}),this.uuid=wo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,l=r.length;s<l;s++)r[s].isDataTexture?a.push(Ub(r[s].image)):a.push(Ub(r[s]))}else a=Ub(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function Ub(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?HC.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let vI=0;const Pb=new $;class Mr extends Fu{constructor(e=Mr.DEFAULT_IMAGE,t=Mr.DEFAULT_MAPPING,i=Mo,r=Mo,a=Tr,s=Jo,l=cs,u=tl,f=Mr.DEFAULT_ANISOTROPY,m=xc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:vI++}),this.uuid=wo(),this.name="",this.source=new Vf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new it(0,0),this.repeat=new it(1,1),this.center=new it(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Pb).x}get height(){return this.source.getSize(Pb).y}get depth(){return this.source.getSize(Pb).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Y_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kf:e.x=e.x-Math.floor(e.x);break;case Mo:e.x=e.x<0?0:1;break;case Bm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Kf:e.y=e.y-Math.floor(e.y);break;case Mo:e.y=e.y<0?0:1;break;case Bm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Mr.DEFAULT_IMAGE=null;Mr.DEFAULT_MAPPING=Y_;Mr.DEFAULT_ANISOTROPY=1;class Di{constructor(e=0,t=0,i=0,r=1){Di.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const u=e.elements,f=u[0],m=u[4],g=u[8],y=u[1],_=u[5],x=u[9],w=u[2],T=u[6],S=u[10];if(Math.abs(m-y)<.01&&Math.abs(g-w)<.01&&Math.abs(x-T)<.01){if(Math.abs(m+y)<.1&&Math.abs(g+w)<.1&&Math.abs(x+T)<.1&&Math.abs(f+_+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const L=(f+1)/2,C=(_+1)/2,P=(S+1)/2,B=(m+y)/4,j=(g+w)/4,X=(x+T)/4;return L>C&&L>P?L<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(L),r=B/i,a=j/i):C>P?C<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(C),i=B/r,a=X/r):P<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(P),i=j/a,r=X/a),this.set(i,r,a,t),this}let O=Math.sqrt((T-x)*(T-x)+(g-w)*(g-w)+(y-m)*(y-m));return Math.abs(O)<.001&&(O=1),this.x=(T-x)/O,this.y=(g-w)/O,this.z=(y-m)/O,this.w=Math.acos((f+_+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Vn(this.x,e.x,t.x),this.y=Vn(this.y,e.y,t.y),this.z=Vn(this.z,e.z,t.z),this.w=Vn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Vn(this.x,e,t),this.y=Vn(this.y,e,t),this.z=Vn(this.z,e,t),this.w=Vn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class gE extends Fu{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Tr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Di(0,0,e,t),this.scissorTest=!1,this.viewport=new Di(0,0,e,t);const r={width:e,height:t,depth:i.depth},a=new Mr(r);this.textures=[];const s=i.count;for(let l=0;l<s;l++)this.textures[l]=a.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Tr,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Vf(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hl extends gE{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class r3 extends Mr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=_a,this.minFilter=_a,this.wrapR=Mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _I extends Hl{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new r3(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class a3 extends Mr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=_a,this.minFilter=_a,this.wrapR=Mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bI extends Hl{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new a3(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class qa{constructor(e=new $(1/0,1/0,1/0),t=new $(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ol.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ol.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ol.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,l=a.count;s<l;s++)e.isMesh===!0?e.getVertexPosition(s,Ol):Ol.fromBufferAttribute(a,s),Ol.applyMatrix4(e.matrixWorld),this.expandByPoint(Ol);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),cv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),cv.copy(i.boundingBox)),cv.applyMatrix4(e.matrixWorld),this.union(cv)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ol),Ol.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(S0),fv.subVectors(this.max,S0),Zp.subVectors(e.a,S0),Qp.subVectors(e.b,S0),Jp.subVectors(e.c,S0),Nf.subVectors(Qp,Zp),Cf.subVectors(Jp,Qp),qh.subVectors(Zp,Jp);let t=[0,-Nf.z,Nf.y,0,-Cf.z,Cf.y,0,-qh.z,qh.y,Nf.z,0,-Nf.x,Cf.z,0,-Cf.x,qh.z,0,-qh.x,-Nf.y,Nf.x,0,-Cf.y,Cf.x,0,-qh.y,qh.x,0];return!Bb(t,Zp,Qp,Jp,fv)||(t=[1,0,0,0,1,0,0,0,1],!Bb(t,Zp,Qp,Jp,fv))?!1:(hv.crossVectors(Nf,Cf),t=[hv.x,hv.y,hv.z],Bb(t,Zp,Qp,Jp,fv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ol).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ol).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(fc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const fc=[new $,new $,new $,new $,new $,new $,new $,new $],Ol=new $,cv=new qa,Zp=new $,Qp=new $,Jp=new $,Nf=new $,Cf=new $,qh=new $,S0=new $,fv=new $,hv=new $,$h=new $;function Bb(n,e,t,i,r){for(let a=0,s=n.length-3;a<=s;a+=3){$h.fromArray(n,a);const l=r.x*Math.abs($h.x)+r.y*Math.abs($h.y)+r.z*Math.abs($h.z),u=e.dot($h),f=t.dot($h),m=i.dot($h);if(Math.max(-Math.max(u,f,m),Math.min(u,f,m))>l)return!1}return!0}const xI=new qa,T0=new $,zb=new $;class Da{constructor(e=new $,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):xI.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;T0.subVectors(e,this.center);const t=T0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(T0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(T0.copy(e.center).add(zb)),this.expandByPoint(T0.copy(e.center).sub(zb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const hc=new $,Fb=new $,dv=new $,Of=new $,kb=new $,pv=new $,Hb=new $;class Yd{constructor(e=new $,t=new $(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,hc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=hc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(hc.copy(this.origin).addScaledVector(this.direction,t),hc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Fb.copy(e).add(t).multiplyScalar(.5),dv.copy(t).sub(e).normalize(),Of.copy(this.origin).sub(Fb);const a=e.distanceTo(t)*.5,s=-this.direction.dot(dv),l=Of.dot(this.direction),u=-Of.dot(dv),f=Of.lengthSq(),m=Math.abs(1-s*s);let g,y,_,x;if(m>0)if(g=s*u-l,y=s*l-u,x=a*m,g>=0)if(y>=-x)if(y<=x){const w=1/m;g*=w,y*=w,_=g*(g+s*y+2*l)+y*(s*g+y+2*u)+f}else y=a,g=Math.max(0,-(s*y+l)),_=-g*g+y*(y+2*u)+f;else y=-a,g=Math.max(0,-(s*y+l)),_=-g*g+y*(y+2*u)+f;else y<=-x?(g=Math.max(0,-(-s*a+l)),y=g>0?-a:Math.min(Math.max(-a,-u),a),_=-g*g+y*(y+2*u)+f):y<=x?(g=0,y=Math.min(Math.max(-a,-u),a),_=y*(y+2*u)+f):(g=Math.max(0,-(s*a+l)),y=g>0?a:Math.min(Math.max(-a,-u),a),_=-g*g+y*(y+2*u)+f);else y=s>0?-a:a,g=Math.max(0,-(s*y+l)),_=-g*g+y*(y+2*u)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(Fb).addScaledVector(dv,y),_}intersectSphere(e,t){hc.subVectors(e.center,this.origin);const i=hc.dot(this.direction),r=hc.dot(hc)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),l=i-s,u=i+s;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,s,l,u;const f=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,y=this.origin;return f>=0?(i=(e.min.x-y.x)*f,r=(e.max.x-y.x)*f):(i=(e.max.x-y.x)*f,r=(e.min.x-y.x)*f),m>=0?(a=(e.min.y-y.y)*m,s=(e.max.y-y.y)*m):(a=(e.max.y-y.y)*m,s=(e.min.y-y.y)*m),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),g>=0?(l=(e.min.z-y.z)*g,u=(e.max.z-y.z)*g):(l=(e.max.z-y.z)*g,u=(e.min.z-y.z)*g),i>u||l>r)||((l>i||i!==i)&&(i=l),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,hc)!==null}intersectTriangle(e,t,i,r,a){kb.subVectors(t,e),pv.subVectors(i,e),Hb.crossVectors(kb,pv);let s=this.direction.dot(Hb),l;if(s>0){if(r)return null;l=1}else if(s<0)l=-1,s=-s;else return null;Of.subVectors(this.origin,e);const u=l*this.direction.dot(pv.crossVectors(Of,pv));if(u<0)return null;const f=l*this.direction.dot(kb.cross(Of));if(f<0||u+f>s)return null;const m=-l*Of.dot(Hb);return m<0?null:this.at(m/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class sn{constructor(e,t,i,r,a,s,l,u,f,m,g,y,_,x,w,T){sn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,l,u,f,m,g,y,_,x,w,T)}set(e,t,i,r,a,s,l,u,f,m,g,y,_,x,w,T){const S=this.elements;return S[0]=e,S[4]=t,S[8]=i,S[12]=r,S[1]=a,S[5]=s,S[9]=l,S[13]=u,S[2]=f,S[6]=m,S[10]=g,S[14]=y,S[3]=_,S[7]=x,S[11]=w,S[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new sn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/em.setFromMatrixColumn(e,0).length(),a=1/em.setFromMatrixColumn(e,1).length(),s=1/em.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),f=Math.sin(r),m=Math.cos(a),g=Math.sin(a);if(e.order==="XYZ"){const y=s*m,_=s*g,x=l*m,w=l*g;t[0]=u*m,t[4]=-u*g,t[8]=f,t[1]=_+x*f,t[5]=y-w*f,t[9]=-l*u,t[2]=w-y*f,t[6]=x+_*f,t[10]=s*u}else if(e.order==="YXZ"){const y=u*m,_=u*g,x=f*m,w=f*g;t[0]=y+w*l,t[4]=x*l-_,t[8]=s*f,t[1]=s*g,t[5]=s*m,t[9]=-l,t[2]=_*l-x,t[6]=w+y*l,t[10]=s*u}else if(e.order==="ZXY"){const y=u*m,_=u*g,x=f*m,w=f*g;t[0]=y-w*l,t[4]=-s*g,t[8]=x+_*l,t[1]=_+x*l,t[5]=s*m,t[9]=w-y*l,t[2]=-s*f,t[6]=l,t[10]=s*u}else if(e.order==="ZYX"){const y=s*m,_=s*g,x=l*m,w=l*g;t[0]=u*m,t[4]=x*f-_,t[8]=y*f+w,t[1]=u*g,t[5]=w*f+y,t[9]=_*f-x,t[2]=-f,t[6]=l*u,t[10]=s*u}else if(e.order==="YZX"){const y=s*u,_=s*f,x=l*u,w=l*f;t[0]=u*m,t[4]=w-y*g,t[8]=x*g+_,t[1]=g,t[5]=s*m,t[9]=-l*m,t[2]=-f*m,t[6]=_*g+x,t[10]=y-w*g}else if(e.order==="XZY"){const y=s*u,_=s*f,x=l*u,w=l*f;t[0]=u*m,t[4]=-g,t[8]=f*m,t[1]=y*g+w,t[5]=s*m,t[9]=_*g-x,t[2]=x*g-_,t[6]=l*m,t[10]=w*g+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(SI,e,TI)}lookAt(e,t,i){const r=this.elements;return bo.subVectors(e,t),bo.lengthSq()===0&&(bo.z=1),bo.normalize(),Df.crossVectors(i,bo),Df.lengthSq()===0&&(Math.abs(i.z)===1?bo.x+=1e-4:bo.z+=1e-4,bo.normalize(),Df.crossVectors(i,bo)),Df.normalize(),mv.crossVectors(bo,Df),r[0]=Df.x,r[4]=mv.x,r[8]=bo.x,r[1]=Df.y,r[5]=mv.y,r[9]=bo.y,r[2]=Df.z,r[6]=mv.z,r[10]=bo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],l=i[4],u=i[8],f=i[12],m=i[1],g=i[5],y=i[9],_=i[13],x=i[2],w=i[6],T=i[10],S=i[14],O=i[3],L=i[7],C=i[11],P=i[15],B=r[0],j=r[4],X=r[8],k=r[12],U=r[1],K=r[5],ye=r[9],ue=r[13],we=r[2],Ae=r[6],Z=r[10],le=r[14],de=r[3],Le=r[7],ee=r[11],be=r[15];return a[0]=s*B+l*U+u*we+f*de,a[4]=s*j+l*K+u*Ae+f*Le,a[8]=s*X+l*ye+u*Z+f*ee,a[12]=s*k+l*ue+u*le+f*be,a[1]=m*B+g*U+y*we+_*de,a[5]=m*j+g*K+y*Ae+_*Le,a[9]=m*X+g*ye+y*Z+_*ee,a[13]=m*k+g*ue+y*le+_*be,a[2]=x*B+w*U+T*we+S*de,a[6]=x*j+w*K+T*Ae+S*Le,a[10]=x*X+w*ye+T*Z+S*ee,a[14]=x*k+w*ue+T*le+S*be,a[3]=O*B+L*U+C*we+P*de,a[7]=O*j+L*K+C*Ae+P*Le,a[11]=O*X+L*ye+C*Z+P*ee,a[15]=O*k+L*ue+C*le+P*be,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],s=e[1],l=e[5],u=e[9],f=e[13],m=e[2],g=e[6],y=e[10],_=e[14],x=e[3],w=e[7],T=e[11],S=e[15];return x*(+a*u*g-r*f*g-a*l*y+i*f*y+r*l*_-i*u*_)+w*(+t*u*_-t*f*y+a*s*y-r*s*_+r*f*m-a*u*m)+T*(+t*f*g-t*l*_-a*s*g+i*s*_+a*l*m-i*f*m)+S*(-r*l*m-t*u*g+t*l*y+r*s*g-i*s*y+i*u*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],f=e[7],m=e[8],g=e[9],y=e[10],_=e[11],x=e[12],w=e[13],T=e[14],S=e[15],O=g*T*f-w*y*f+w*u*_-l*T*_-g*u*S+l*y*S,L=x*y*f-m*T*f-x*u*_+s*T*_+m*u*S-s*y*S,C=m*w*f-x*g*f+x*l*_-s*w*_-m*l*S+s*g*S,P=x*g*u-m*w*u-x*l*y+s*w*y+m*l*T-s*g*T,B=t*O+i*L+r*C+a*P;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const j=1/B;return e[0]=O*j,e[1]=(w*y*a-g*T*a-w*r*_+i*T*_+g*r*S-i*y*S)*j,e[2]=(l*T*a-w*u*a+w*r*f-i*T*f-l*r*S+i*u*S)*j,e[3]=(g*u*a-l*y*a-g*r*f+i*y*f+l*r*_-i*u*_)*j,e[4]=L*j,e[5]=(m*T*a-x*y*a+x*r*_-t*T*_-m*r*S+t*y*S)*j,e[6]=(x*u*a-s*T*a-x*r*f+t*T*f+s*r*S-t*u*S)*j,e[7]=(s*y*a-m*u*a+m*r*f-t*y*f-s*r*_+t*u*_)*j,e[8]=C*j,e[9]=(x*g*a-m*w*a-x*i*_+t*w*_+m*i*S-t*g*S)*j,e[10]=(s*w*a-x*l*a+x*i*f-t*w*f-s*i*S+t*l*S)*j,e[11]=(m*l*a-s*g*a-m*i*f+t*g*f+s*i*_-t*l*_)*j,e[12]=P*j,e[13]=(m*w*r-x*g*r+x*i*y-t*w*y-m*i*T+t*g*T)*j,e[14]=(x*l*r-s*w*r-x*i*u+t*w*u+s*i*T-t*l*T)*j,e[15]=(s*g*r-m*l*r+m*i*u-t*g*u-s*i*y+t*l*y)*j,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,s=e.x,l=e.y,u=e.z,f=a*s,m=a*l;return this.set(f*s+i,f*l-r*u,f*u+r*l,0,f*l+r*u,m*l+i,m*u-r*s,0,f*u-r*l,m*u+r*s,a*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,s=t._y,l=t._z,u=t._w,f=a+a,m=s+s,g=l+l,y=a*f,_=a*m,x=a*g,w=s*m,T=s*g,S=l*g,O=u*f,L=u*m,C=u*g,P=i.x,B=i.y,j=i.z;return r[0]=(1-(w+S))*P,r[1]=(_+C)*P,r[2]=(x-L)*P,r[3]=0,r[4]=(_-C)*B,r[5]=(1-(y+S))*B,r[6]=(T+O)*B,r[7]=0,r[8]=(x+L)*j,r[9]=(T-O)*j,r[10]=(1-(y+w))*j,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let a=em.set(r[0],r[1],r[2]).length();const s=em.set(r[4],r[5],r[6]).length(),l=em.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],Dl.copy(this);const f=1/a,m=1/s,g=1/l;return Dl.elements[0]*=f,Dl.elements[1]*=f,Dl.elements[2]*=f,Dl.elements[4]*=m,Dl.elements[5]*=m,Dl.elements[6]*=m,Dl.elements[8]*=g,Dl.elements[9]*=g,Dl.elements[10]*=g,t.setFromRotationMatrix(Dl),i.x=a,i.y=s,i.z=l,this}makePerspective(e,t,i,r,a,s,l=el){const u=this.elements,f=2*a/(t-e),m=2*a/(i-r),g=(t+e)/(t-e),y=(i+r)/(i-r);let _,x;if(l===el)_=-(s+a)/(s-a),x=-2*s*a/(s-a);else if(l===g1)_=-s/(s-a),x=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=f,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=m,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=_,u[14]=x,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,a,s,l=el){const u=this.elements,f=1/(t-e),m=1/(i-r),g=1/(s-a),y=(t+e)*f,_=(i+r)*m;let x,w;if(l===el)x=(s+a)*g,w=-2*g;else if(l===g1)x=a*g,w=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-y,u[1]=0,u[5]=2*m,u[9]=0,u[13]=-_,u[2]=0,u[6]=0,u[10]=w,u[14]=-x,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const em=new $,Dl=new sn,SI=new $(0,0,0),TI=new $(1,1,1),Df=new $,mv=new $,bo=new $,z4=new sn,F4=new An;class Ya{constructor(e=0,t=0,i=0,r=Ya.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],l=r[8],u=r[1],f=r[5],m=r[9],g=r[2],y=r[6],_=r[10];switch(t){case"XYZ":this._y=Math.asin(Vn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Vn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-g,a),this._z=0);break;case"ZXY":this._x=Math.asin(Vn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-Vn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,_),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(Vn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,f),this._y=Math.atan2(-g,a)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-Vn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-m,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return z4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(z4,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return F4.setFromEuler(this),this.setFromQuaternion(F4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ya.DEFAULT_ORDER="XYZ";let Wm=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},EI=0;const k4=new $,tm=new An,dc=new sn,gv=new $,E0=new $,MI=new $,wI=new An,H4=new $(1,0,0),V4=new $(0,1,0),G4=new $(0,0,1),j4={type:"added"},AI={type:"removed"},nm={type:"childadded",child:null},Vb={type:"childremoved",child:null};class ii extends Fu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:EI++}),this.uuid=wo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ii.DEFAULT_UP.clone();const e=new $,t=new Ya,i=new An,r=new $(1,1,1);function a(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new sn},normalMatrix:{value:new Sn}}),this.matrix=new sn,this.matrixWorld=new sn,this.matrixAutoUpdate=ii.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Wm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return tm.setFromAxisAngle(e,t),this.quaternion.multiply(tm),this}rotateOnWorldAxis(e,t){return tm.setFromAxisAngle(e,t),this.quaternion.premultiply(tm),this}rotateX(e){return this.rotateOnAxis(H4,e)}rotateY(e){return this.rotateOnAxis(V4,e)}rotateZ(e){return this.rotateOnAxis(G4,e)}translateOnAxis(e,t){return k4.copy(e).applyQuaternion(this.quaternion),this.position.add(k4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(H4,e)}translateY(e){return this.translateOnAxis(V4,e)}translateZ(e){return this.translateOnAxis(G4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(dc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?gv.copy(e):gv.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),E0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?dc.lookAt(E0,gv,this.up):dc.lookAt(gv,E0,this.up),this.quaternion.setFromRotationMatrix(dc),r&&(dc.extractRotation(r.matrixWorld),tm.setFromRotationMatrix(dc),this.quaternion.premultiply(tm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(j4),nm.child=e,this.dispatchEvent(nm),nm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(AI),Vb.child=e,this.dispatchEvent(Vb),Vb.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),dc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),dc.multiply(e.parent.matrixWorld)),e.applyMatrix4(dc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(j4),nm.child=e,this.dispatchEvent(nm),nm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(E0,e,MI),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(E0,wI,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(l=>({...l})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let f=0,m=u.length;f<m;f++){const g=u[f];a(e.shapes,g)}else a(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(a(e.materials,this.material[u]));r.material=l}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];r.animations.push(a(e.animations,u))}}if(t){const l=s(e.geometries),u=s(e.materials),f=s(e.textures),m=s(e.images),g=s(e.shapes),y=s(e.skeletons),_=s(e.animations),x=s(e.nodes);l.length>0&&(i.geometries=l),u.length>0&&(i.materials=u),f.length>0&&(i.textures=f),m.length>0&&(i.images=m),g.length>0&&(i.shapes=g),y.length>0&&(i.skeletons=y),_.length>0&&(i.animations=_),x.length>0&&(i.nodes=x)}return i.object=r,i;function s(l){const u=[];for(const f in l){const m=l[f];delete m.metadata,u.push(m)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}ii.DEFAULT_UP=new $(0,1,0);ii.DEFAULT_MATRIX_AUTO_UPDATE=!0;ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ll=new $,pc=new $,Gb=new $,mc=new $,im=new $,rm=new $,W4=new $,jb=new $,Wb=new $,Xb=new $,qb=new Di,$b=new Di,Yb=new Di;class io{constructor(e=new $,t=new $,i=new $){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ll.subVectors(e,t),r.cross(Ll);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){Ll.subVectors(r,t),pc.subVectors(i,t),Gb.subVectors(e,t);const s=Ll.dot(Ll),l=Ll.dot(pc),u=Ll.dot(Gb),f=pc.dot(pc),m=pc.dot(Gb),g=s*f-l*l;if(g===0)return a.set(0,0,0),null;const y=1/g,_=(f*u-l*m)*y,x=(s*m-l*u)*y;return a.set(1-_-x,x,_)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,mc)===null?!1:mc.x>=0&&mc.y>=0&&mc.x+mc.y<=1}static getInterpolation(e,t,i,r,a,s,l,u){return this.getBarycoord(e,t,i,r,mc)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(a,mc.x),u.addScaledVector(s,mc.y),u.addScaledVector(l,mc.z),u)}static getInterpolatedAttribute(e,t,i,r,a,s){return qb.setScalar(0),$b.setScalar(0),Yb.setScalar(0),qb.fromBufferAttribute(e,t),$b.fromBufferAttribute(e,i),Yb.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(qb,a.x),s.addScaledVector($b,a.y),s.addScaledVector(Yb,a.z),s}static isFrontFacing(e,t,i,r){return Ll.subVectors(i,t),pc.subVectors(e,t),Ll.cross(pc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ll.subVectors(this.c,this.b),pc.subVectors(this.a,this.b),Ll.cross(pc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return io.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return io.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return io.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return io.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return io.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let s,l;im.subVectors(r,i),rm.subVectors(a,i),jb.subVectors(e,i);const u=im.dot(jb),f=rm.dot(jb);if(u<=0&&f<=0)return t.copy(i);Wb.subVectors(e,r);const m=im.dot(Wb),g=rm.dot(Wb);if(m>=0&&g<=m)return t.copy(r);const y=u*g-m*f;if(y<=0&&u>=0&&m<=0)return s=u/(u-m),t.copy(i).addScaledVector(im,s);Xb.subVectors(e,a);const _=im.dot(Xb),x=rm.dot(Xb);if(x>=0&&_<=x)return t.copy(a);const w=_*f-u*x;if(w<=0&&f>=0&&x<=0)return l=f/(f-x),t.copy(i).addScaledVector(rm,l);const T=m*x-_*g;if(T<=0&&g-m>=0&&_-x>=0)return W4.subVectors(a,r),l=(g-m)/(g-m+(_-x)),t.copy(r).addScaledVector(W4,l);const S=1/(T+w+y);return s=w*S,l=y*S,t.copy(i).addScaledVector(im,s).addScaledVector(rm,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const VC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lf={h:0,s:0,l:0},yv={h:0,s:0,l:0};function Kb(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Pt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Zr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,fi.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=fi.workingColorSpace){return this.r=e,this.g=t,this.b=i,fi.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=fi.workingColorSpace){if(e=mE(e,1),t=Vn(t,0,1),i=Vn(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,s=2*i-a;this.r=Kb(s,a,e+1/3),this.g=Kb(s,a,e),this.b=Kb(s,a,e-1/3)}return fi.colorSpaceToWorking(this,r),this}setStyle(e,t=Zr){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],l=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Zr){const i=VC[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ac(e.r),this.g=Ac(e.g),this.b=Ac(e.b),this}copyLinearToSRGB(e){return this.r=Dm(e.r),this.g=Dm(e.g),this.b=Dm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zr){return fi.workingToColorSpace(os.copy(this),e),Math.round(Vn(os.r*255,0,255))*65536+Math.round(Vn(os.g*255,0,255))*256+Math.round(Vn(os.b*255,0,255))}getHexString(e=Zr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=fi.workingColorSpace){fi.workingToColorSpace(os.copy(this),t);const i=os.r,r=os.g,a=os.b,s=Math.max(i,r,a),l=Math.min(i,r,a);let u,f;const m=(l+s)/2;if(l===s)u=0,f=0;else{const g=s-l;switch(f=m<=.5?g/(s+l):g/(2-s-l),s){case i:u=(r-a)/g+(r<a?6:0);break;case r:u=(a-i)/g+2;break;case a:u=(i-r)/g+4;break}u/=6}return e.h=u,e.s=f,e.l=m,e}getRGB(e,t=fi.workingColorSpace){return fi.workingToColorSpace(os.copy(this),t),e.r=os.r,e.g=os.g,e.b=os.b,e}getStyle(e=Zr){fi.workingToColorSpace(os.copy(this),e);const t=os.r,i=os.g,r=os.b;return e!==Zr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Lf),this.setHSL(Lf.h+e,Lf.s+t,Lf.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Lf),e.getHSL(yv);const i=r1(Lf.h,yv.h,t),r=r1(Lf.s,yv.s,t),a=r1(Lf.l,yv.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const os=new Pt;Pt.NAMES=VC;let RI=0;class aa extends Fu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:RI++}),this.uuid=wo(),this.name="",this.type="Material",this.blending=Rd,this.side=Bu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=z2,this.blendDst=F2,this.blendEquation=kf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Pt(0,0,0),this.blendAlpha=0,this.depthFunc=Dd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=PS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=md,this.stencilZFail=md,this.stencilZPass=md,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Rd&&(i.blending=this.blending),this.side!==Bu&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==z2&&(i.blendSrc=this.blendSrc),this.blendDst!==F2&&(i.blendDst=this.blendDst),this.blendEquation!==kf&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Dd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==PS&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==md&&(i.stencilFail=this.stencilFail),this.stencilZFail!==md&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==md&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const l in a){const u=a[l];delete u.metadata,s.push(u)}return s}if(t){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Is extends aa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ya,this.combine=O1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Sc=NI();function NI(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):f<-14?(i[u]=1024>>-f-14,i[u|256]=1024>>-f-14|32768,r[u]=-f-1,r[u|256]=-f-1):f<=15?(i[u]=f+15<<10,i[u|256]=f+15<<10|32768,r[u]=13,r[u|256]=13):f<128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,m=0;for(;(f&8388608)===0;)f<<=1,m-=8388608;f&=-8388609,m+=947912704,a[u]=f|m}for(let u=1024;u<2048;++u)a[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)s[u]=u<<23;s[31]=1199570944,s[32]=2147483648;for(let u=33;u<63;++u)s[u]=2147483648+(u-32<<23);s[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:l}}function Js(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Vn(n,-65504,65504),Sc.floatView[0]=n;const e=Sc.uint32View[0],t=e>>23&511;return Sc.baseTable[t]+((e&8388607)>>Sc.shiftTable[t])}function j0(n){const e=n>>10;return Sc.uint32View[0]=Sc.mantissaTable[Sc.offsetTable[e]+(n&1023)]+Sc.exponentTable[e],Sc.floatView[0]}class CI{static toHalfFloat(e){return Js(e)}static fromHalfFloat(e){return j0(e)}}const ra=new $,vv=new it;let OI=0;class Gn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:OI++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=m1,this.updateRanges=[],this.gpuType=Ls,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)vv.fromBufferAttribute(this,t),vv.applyMatrix3(e),this.setXY(t,vv.x,vv.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ra.fromBufferAttribute(this,t),ra.applyMatrix3(e),this.setXYZ(t,ra.x,ra.y,ra.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ra.fromBufferAttribute(this,t),ra.applyMatrix4(e),this.setXYZ(t,ra.x,ra.y,ra.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ra.fromBufferAttribute(this,t),ra.applyNormalMatrix(e),this.setXYZ(t,ra.x,ra.y,ra.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ra.fromBufferAttribute(this,t),ra.transformDirection(e),this.setXYZ(t,ra.x,ra.y,ra.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Os(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=qn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Os(t,this.array)),t}setX(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Os(t,this.array)),t}setY(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Os(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Os(t,this.array)),t}setW(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),i=qn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),i=qn(i,this.array),r=qn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),i=qn(i,this.array),r=qn(r,this.array),a=qn(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==m1&&(e.usage=this.usage),e}}class DI extends Gn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class LI extends Gn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class II extends Gn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class UI extends Gn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class yE extends Gn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class PI extends Gn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class vE extends Gn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class BI extends Gn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=j0(this.array[e*this.itemSize]);return this.normalized&&(t=Os(t,this.array)),t}setX(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize]=Js(t),this}getY(e){let t=j0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Os(t,this.array)),t}setY(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+1]=Js(t),this}getZ(e){let t=j0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Os(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+2]=Js(t),this}getW(e){let t=j0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Os(t,this.array)),t}setW(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+3]=Js(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),i=qn(i,this.array)),this.array[e+0]=Js(t),this.array[e+1]=Js(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),i=qn(i,this.array),r=qn(r,this.array)),this.array[e+0]=Js(t),this.array[e+1]=Js(i),this.array[e+2]=Js(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),i=qn(i,this.array),r=qn(r,this.array),a=qn(a,this.array)),this.array[e+0]=Js(t),this.array[e+1]=Js(i),this.array[e+2]=Js(r),this.array[e+3]=Js(a),this}}class rn extends Gn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let zI=0;const $o=new sn,Zb=new ii,am=new $,xo=new qa,M0=new qa,Ca=new $;class Nn extends Fu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zI++}),this.uuid=wo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(FC(e)?vE:yE)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Sn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return $o.makeRotationFromQuaternion(e),this.applyMatrix4($o),this}rotateX(e){return $o.makeRotationX(e),this.applyMatrix4($o),this}rotateY(e){return $o.makeRotationY(e),this.applyMatrix4($o),this}rotateZ(e){return $o.makeRotationZ(e),this.applyMatrix4($o),this}translate(e,t,i){return $o.makeTranslation(e,t,i),this.applyMatrix4($o),this}scale(e,t,i){return $o.makeScale(e,t,i),this.applyMatrix4($o),this}lookAt(e){return Zb.lookAt(e),Zb.updateMatrix(),this.applyMatrix4(Zb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(am).negate(),this.translate(am.x,am.y,am.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new rn(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new $(-1/0,-1/0,-1/0),new $(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];xo.setFromBufferAttribute(a),this.morphTargetsRelative?(Ca.addVectors(this.boundingBox.min,xo.min),this.boundingBox.expandByPoint(Ca),Ca.addVectors(this.boundingBox.max,xo.max),this.boundingBox.expandByPoint(Ca)):(this.boundingBox.expandByPoint(xo.min),this.boundingBox.expandByPoint(xo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Da);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new $,1/0);return}if(e){const i=this.boundingSphere.center;if(xo.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const l=t[a];M0.setFromBufferAttribute(l),this.morphTargetsRelative?(Ca.addVectors(xo.min,M0.min),xo.expandByPoint(Ca),Ca.addVectors(xo.max,M0.max),xo.expandByPoint(Ca)):(xo.expandByPoint(M0.min),xo.expandByPoint(M0.max))}xo.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)Ca.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(Ca));if(t)for(let a=0,s=t.length;a<s;a++){const l=t[a],u=this.morphTargetsRelative;for(let f=0,m=l.count;f<m;f++)Ca.fromBufferAttribute(l,f),u&&(am.fromBufferAttribute(e,f),Ca.add(am)),r=Math.max(r,i.distanceToSquared(Ca))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gn(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),l=[],u=[];for(let X=0;X<i.count;X++)l[X]=new $,u[X]=new $;const f=new $,m=new $,g=new $,y=new it,_=new it,x=new it,w=new $,T=new $;function S(X,k,U){f.fromBufferAttribute(i,X),m.fromBufferAttribute(i,k),g.fromBufferAttribute(i,U),y.fromBufferAttribute(a,X),_.fromBufferAttribute(a,k),x.fromBufferAttribute(a,U),m.sub(f),g.sub(f),_.sub(y),x.sub(y);const K=1/(_.x*x.y-x.x*_.y);isFinite(K)&&(w.copy(m).multiplyScalar(x.y).addScaledVector(g,-_.y).multiplyScalar(K),T.copy(g).multiplyScalar(_.x).addScaledVector(m,-x.x).multiplyScalar(K),l[X].add(w),l[k].add(w),l[U].add(w),u[X].add(T),u[k].add(T),u[U].add(T))}let O=this.groups;O.length===0&&(O=[{start:0,count:e.count}]);for(let X=0,k=O.length;X<k;++X){const U=O[X],K=U.start,ye=U.count;for(let ue=K,we=K+ye;ue<we;ue+=3)S(e.getX(ue+0),e.getX(ue+1),e.getX(ue+2))}const L=new $,C=new $,P=new $,B=new $;function j(X){P.fromBufferAttribute(r,X),B.copy(P);const k=l[X];L.copy(k),L.sub(P.multiplyScalar(P.dot(k))).normalize(),C.crossVectors(B,k);const K=C.dot(u[X])<0?-1:1;s.setXYZW(X,L.x,L.y,L.z,K)}for(let X=0,k=O.length;X<k;++X){const U=O[X],K=U.start,ye=U.count;for(let ue=K,we=K+ye;ue<we;ue+=3)j(e.getX(ue+0)),j(e.getX(ue+1)),j(e.getX(ue+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Gn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let y=0,_=i.count;y<_;y++)i.setXYZ(y,0,0,0);const r=new $,a=new $,s=new $,l=new $,u=new $,f=new $,m=new $,g=new $;if(e)for(let y=0,_=e.count;y<_;y+=3){const x=e.getX(y+0),w=e.getX(y+1),T=e.getX(y+2);r.fromBufferAttribute(t,x),a.fromBufferAttribute(t,w),s.fromBufferAttribute(t,T),m.subVectors(s,a),g.subVectors(r,a),m.cross(g),l.fromBufferAttribute(i,x),u.fromBufferAttribute(i,w),f.fromBufferAttribute(i,T),l.add(m),u.add(m),f.add(m),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(T,f.x,f.y,f.z)}else for(let y=0,_=t.count;y<_;y+=3)r.fromBufferAttribute(t,y+0),a.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),m.subVectors(s,a),g.subVectors(r,a),m.cross(g),i.setXYZ(y+0,m.x,m.y,m.z),i.setXYZ(y+1,m.x,m.y,m.z),i.setXYZ(y+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ca.fromBufferAttribute(e,t),Ca.normalize(),e.setXYZ(t,Ca.x,Ca.y,Ca.z)}toNonIndexed(){function e(l,u){const f=l.array,m=l.itemSize,g=l.normalized,y=new f.constructor(u.length*m);let _=0,x=0;for(let w=0,T=u.length;w<T;w++){l.isInterleavedBufferAttribute?_=u[w]*l.data.stride+l.offset:_=u[w]*m;for(let S=0;S<m;S++)y[x++]=f[_++]}return new Gn(y,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Nn,i=this.index.array,r=this.attributes;for(const l in r){const u=r[l],f=e(u,i);t.setAttribute(l,f)}const a=this.morphAttributes;for(const l in a){const u=[],f=a[l];for(let m=0,g=f.length;m<g;m++){const y=f[m],_=e(y,i);u.push(_)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let l=0,u=s.length;l<u;l++){const f=s[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const f=i[u];e.data.attributes[u]=f.toJSON(e.data)}const r={};let a=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],m=[];for(let g=0,y=f.length;g<y;g++){const _=f[g];m.push(_.toJSON(e.data))}m.length>0&&(r[u]=m,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere=l.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const f in r){const m=r[f];this.setAttribute(f,m.clone(t))}const a=e.morphAttributes;for(const f in a){const m=[],g=a[f];for(let y=0,_=g.length;y<_;y++)m.push(g[y].clone(t));this.morphAttributes[f]=m}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,m=s.length;f<m;f++){const g=s[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const X4=new sn,Yh=new Yd,_v=new Da,q4=new $,bv=new $,xv=new $,Sv=new $,Qb=new $,Tv=new $,$4=new $,Ev=new $;class Br extends ii{constructor(e=new Nn,t=new Is){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(a&&l){Tv.set(0,0,0);for(let u=0,f=a.length;u<f;u++){const m=l[u],g=a[u];m!==0&&(Qb.fromBufferAttribute(g,e),s?Tv.addScaledVector(Qb,m):Tv.addScaledVector(Qb.sub(t),m))}t.add(Tv)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),_v.copy(i.boundingSphere),_v.applyMatrix4(a),Yh.copy(e.ray).recast(e.near),!(_v.containsPoint(Yh.origin)===!1&&(Yh.intersectSphere(_v,q4)===null||Yh.origin.distanceToSquared(q4)>(e.far-e.near)**2))&&(X4.copy(a).invert(),Yh.copy(e.ray).applyMatrix4(X4),!(i.boundingBox!==null&&Yh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Yh)))}_computeIntersections(e,t,i){let r;const a=this.geometry,s=this.material,l=a.index,u=a.attributes.position,f=a.attributes.uv,m=a.attributes.uv1,g=a.attributes.normal,y=a.groups,_=a.drawRange;if(l!==null)if(Array.isArray(s))for(let x=0,w=y.length;x<w;x++){const T=y[x],S=s[T.materialIndex],O=Math.max(T.start,_.start),L=Math.min(l.count,Math.min(T.start+T.count,_.start+_.count));for(let C=O,P=L;C<P;C+=3){const B=l.getX(C),j=l.getX(C+1),X=l.getX(C+2);r=Mv(this,S,e,i,f,m,g,B,j,X),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=T.materialIndex,t.push(r))}}else{const x=Math.max(0,_.start),w=Math.min(l.count,_.start+_.count);for(let T=x,S=w;T<S;T+=3){const O=l.getX(T),L=l.getX(T+1),C=l.getX(T+2);r=Mv(this,s,e,i,f,m,g,O,L,C),r&&(r.faceIndex=Math.floor(T/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(s))for(let x=0,w=y.length;x<w;x++){const T=y[x],S=s[T.materialIndex],O=Math.max(T.start,_.start),L=Math.min(u.count,Math.min(T.start+T.count,_.start+_.count));for(let C=O,P=L;C<P;C+=3){const B=C,j=C+1,X=C+2;r=Mv(this,S,e,i,f,m,g,B,j,X),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=T.materialIndex,t.push(r))}}else{const x=Math.max(0,_.start),w=Math.min(u.count,_.start+_.count);for(let T=x,S=w;T<S;T+=3){const O=T,L=T+1,C=T+2;r=Mv(this,s,e,i,f,m,g,O,L,C),r&&(r.faceIndex=Math.floor(T/3),t.push(r))}}}}function FI(n,e,t,i,r,a,s,l){let u;if(e.side===fs?u=i.intersectTriangle(s,a,r,!0,l):u=i.intersectTriangle(r,a,s,e.side===Bu,l),u===null)return null;Ev.copy(l),Ev.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Ev);return f<t.near||f>t.far?null:{distance:f,point:Ev.clone(),object:n}}function Mv(n,e,t,i,r,a,s,l,u,f){n.getVertexPosition(l,bv),n.getVertexPosition(u,xv),n.getVertexPosition(f,Sv);const m=FI(n,e,t,i,bv,xv,Sv,$4);if(m){const g=new $;io.getBarycoord($4,bv,xv,Sv,g),r&&(m.uv=io.getInterpolatedAttribute(r,l,u,f,g,new it)),a&&(m.uv1=io.getInterpolatedAttribute(a,l,u,f,g,new it)),s&&(m.normal=io.getInterpolatedAttribute(s,l,u,f,g,new $),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const y={a:l,b:u,c:f,normal:new $,materialIndex:0};io.getNormal(bv,xv,Sv,y.normal),m.face=y,m.barycoord=g}return m}class Kd extends Nn{constructor(e=1,t=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const l=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const u=[],f=[],m=[],g=[];let y=0,_=0;x("z","y","x",-1,-1,i,t,e,s,a,0),x("z","y","x",1,-1,i,t,-e,s,a,1),x("x","z","y",1,1,e,i,t,r,s,2),x("x","z","y",1,-1,e,i,-t,r,s,3),x("x","y","z",1,-1,e,t,i,r,a,4),x("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(u),this.setAttribute("position",new rn(f,3)),this.setAttribute("normal",new rn(m,3)),this.setAttribute("uv",new rn(g,2));function x(w,T,S,O,L,C,P,B,j,X,k){const U=C/j,K=P/X,ye=C/2,ue=P/2,we=B/2,Ae=j+1,Z=X+1;let le=0,de=0;const Le=new $;for(let ee=0;ee<Z;ee++){const be=ee*K-ue;for(let Ge=0;Ge<Ae;Ge++){const Ye=Ge*U-ye;Le[w]=Ye*O,Le[T]=be*L,Le[S]=we,f.push(Le.x,Le.y,Le.z),Le[w]=0,Le[T]=0,Le[S]=B>0?1:-1,m.push(Le.x,Le.y,Le.z),g.push(Ge/j),g.push(1-ee/X),le+=1}}for(let ee=0;ee<X;ee++)for(let be=0;be<j;be++){const Ge=y+be+Ae*ee,Ye=y+be+Ae*(ee+1),xe=y+(be+1)+Ae*(ee+1),Ke=y+(be+1)+Ae*ee;u.push(Ge,Ye,Ke),u.push(Ye,xe,Ke),de+=6}l.addGroup(_,de,k),_+=de,y+=le}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Xm(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Cs(n){const e={};for(let t=0;t<n.length;t++){const i=Xm(n[t]);for(const r in i)e[r]=i[r]}return e}function kI(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function GC(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fi.workingColorSpace}const _E={clone:Xm,merge:Cs};var HI=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VI=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class nl extends aa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HI,this.fragmentShader=VI,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xm(e.uniforms),this.uniformsGroups=kI(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class s3 extends ii{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new sn,this.projectionMatrix=new sn,this.projectionMatrixInverse=new sn,this.coordinateSystem=el}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const If=new $,Y4=new it,K4=new it;let Wr=class extends s3{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=jm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Nd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jm*2*Math.atan(Math.tan(Nd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){If.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(If.x,If.y).multiplyScalar(-e/If.z),If.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(If.x,If.y).multiplyScalar(-e/If.z)}getViewSize(e,t){return this.getViewBounds(e,Y4,K4),t.subVectors(K4,Y4)}setViewOffset(e,t,i,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Nd*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const u=s.fullWidth,f=s.fullHeight;a+=s.offsetX*r/u,t-=s.offsetY*i/f,r*=s.width/u,i*=s.height/f}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const sm=-90,om=1;class jC extends ii{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Wr(sm,om,e,t);r.layers=this.layers,this.add(r);const a=new Wr(sm,om,e,t);a.layers=this.layers,this.add(a);const s=new Wr(sm,om,e,t);s.layers=this.layers,this.add(s);const l=new Wr(sm,om,e,t);l.layers=this.layers,this.add(l);const u=new Wr(sm,om,e,t);u.layers=this.layers,this.add(u);const f=new Wr(sm,om,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,s,l,u]=t;for(const f of t)this.remove(f);if(e===el)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===g1)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,l,u,f,m]=this.children,g=e.getRenderTarget(),y=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,u),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,r),e.render(t,m),e.setRenderTarget(g,y,_),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class L1 extends Mr{constructor(e=[],t=Nc,i,r,a,s,l,u,f,m){super(e,t,i,r,a,s,l,u,f,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class WC extends Hl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new L1(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Kd(5,5,5),a=new nl({name:"CubemapFromEquirect",uniforms:Xm(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:fs,blending:wc});a.uniforms.tEquirect.value=t;const s=new Br(r,a),l=t.minFilter;return t.minFilter===Jo&&(t.minFilter=Tr),new jC(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(a)}}class Us extends ii{constructor(){super(),this.isGroup=!0,this.type="Group"}}const GI={type:"move"};class y2{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Us,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Us,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Us,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,s=null;const l=this._targetRay,u=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const w of e.hand.values()){const T=t.getJointPose(w,i),S=this._getHandJoint(f,w);T!==null&&(S.matrix.fromArray(T.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=T.radius),S.visible=T!==null}const m=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],y=m.position.distanceTo(g.position),_=.02,x=.005;f.inputState.pinching&&y>_+x?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&y<=_-x&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(GI)))}return l!==null&&(l.visible=r!==null),u!==null&&(u.visible=a!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Us;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class o3{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Pt(e),this.density=t}clone(){return new o3(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class l3{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Pt(e),this.near=t,this.far=i}clone(){return new l3(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class bE extends ii{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ya,this.environmentIntensity=1,this.environmentRotation=new Ya,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class I1{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=m1,this.updateRanges=[],this.version=0,this.uuid=wo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ns=new $;class Zf{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ns.fromBufferAttribute(this,t),Ns.applyMatrix4(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ns.fromBufferAttribute(this,t),Ns.applyNormalMatrix(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ns.fromBufferAttribute(this,t),Ns.transformDirection(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Os(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=qn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Os(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Os(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Os(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Os(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=qn(t,this.array),i=qn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=qn(t,this.array),i=qn(i,this.array),r=qn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=qn(t,this.array),i=qn(i,this.array),r=qn(r,this.array),a=qn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new Gn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Zf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class xE extends aa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let lm;const w0=new $,um=new $,cm=new $,fm=new it,A0=new it,XC=new sn,wv=new $,R0=new $,Av=new $,Z4=new it,Jb=new it,Q4=new it;class qC extends ii{constructor(e=new xE){if(super(),this.isSprite=!0,this.type="Sprite",lm===void 0){lm=new Nn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new I1(t,5);lm.setIndex([0,1,2,0,2,3]),lm.setAttribute("position",new Zf(i,3,0,!1)),lm.setAttribute("uv",new Zf(i,2,3,!1))}this.geometry=lm,this.material=e,this.center=new it(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),um.setFromMatrixScale(this.matrixWorld),XC.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),cm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&um.multiplyScalar(-cm.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;Rv(wv.set(-.5,-.5,0),cm,s,um,r,a),Rv(R0.set(.5,-.5,0),cm,s,um,r,a),Rv(Av.set(.5,.5,0),cm,s,um,r,a),Z4.set(0,0),Jb.set(1,0),Q4.set(1,1);let l=e.ray.intersectTriangle(wv,R0,Av,!1,w0);if(l===null&&(Rv(R0.set(-.5,.5,0),cm,s,um,r,a),Jb.set(0,1),l=e.ray.intersectTriangle(wv,Av,R0,!1,w0),l===null))return;const u=e.ray.origin.distanceTo(w0);u<e.near||u>e.far||t.push({distance:u,point:w0.clone(),uv:io.getInterpolation(w0,wv,R0,Av,Z4,Jb,Q4,new it),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Rv(n,e,t,i,r,a){fm.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(A0.x=a*fm.x-r*fm.y,A0.y=r*fm.x+a*fm.y):A0.copy(fm),n.copy(e),n.x+=A0.x,n.y+=A0.y,n.applyMatrix4(XC)}const Nv=new $,J4=new $;class $C extends ii{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Nv.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Nv);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Nv.setFromMatrixPosition(e.matrixWorld),J4.setFromMatrixPosition(this.matrixWorld);const i=Nv.distanceTo(J4)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),i>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const ew=new $,tw=new Di,nw=new Di,jI=new $,iw=new sn,Cv=new $,ex=new Da,rw=new sn,tx=new Yd;class u3 extends Br{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=US,this.bindMatrix=new sn,this.bindMatrixInverse=new sn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new qa),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Cv),this.boundingBox.expandByPoint(Cv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Da),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Cv),this.boundingSphere.expandByPoint(Cv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ex.copy(this.boundingSphere),ex.applyMatrix4(r),e.ray.intersectsSphere(ex)!==!1&&(rw.copy(r).invert(),tx.copy(e.ray).applyMatrix4(rw),!(this.boundingBox!==null&&tx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,tx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Di,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===US?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===TC?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;tw.fromBufferAttribute(r.attributes.skinIndex,e),nw.fromBufferAttribute(r.attributes.skinWeight,e),ew.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=nw.getComponent(a);if(s!==0){const l=tw.getComponent(a);iw.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(jI.copy(ew).applyMatrix4(iw),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class c3 extends ii{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Iu extends Mr{constructor(e=null,t=1,i=1,r,a,s,l,u,f=_a,m=_a,g,y){super(null,s,l,u,f,m,r,a,g,y),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const aw=new sn,WI=new sn;class ig{constructor(e=[],t=[]){this.uuid=wo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new sn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new sn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const l=e[a]?e[a].matrixWorld:WI;aw.multiplyMatrices(l,t[a]),aw.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new ig(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Iu(t,e,e,cs,Ls);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new c3),this.bones.push(s),this.boneInverses.push(new sn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const s=t[r];e.bones.push(s.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Ld extends Gn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const hm=new sn,sw=new sn,Ov=[],ow=new qa,XI=new sn,N0=new Br,C0=new Da;class SE extends Br{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ld(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,XI)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new qa),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,hm),ow.copy(e.boundingBox).applyMatrix4(hm),this.boundingBox.union(ow)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Da),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,hm),C0.copy(e.boundingSphere).applyMatrix4(hm),this.boundingSphere.union(C0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let l=0;l<i.length;l++)i[l]=r[s+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(N0.geometry=this.geometry,N0.material=this.material,N0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),C0.copy(this.boundingSphere),C0.applyMatrix4(i),e.ray.intersectsSphere(C0)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,hm),sw.multiplyMatrices(i,hm),N0.matrixWorld=sw,N0.raycast(e,Ov);for(let s=0,l=Ov.length;s<l;s++){const u=Ov[s];u.instanceId=a,u.object=this,t.push(u)}Ov.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ld(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Iu(new Float32Array(r*this.count),r,this.count,e3,Ls));const a=this.morphTexture.source.data.data;let s=0;for(let f=0;f<i.length;f++)s+=i[f];const l=this.geometry.morphTargetsRelative?1:1-s,u=r*e;a[u]=l,a.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const nx=new $,qI=new $,$I=new Sn;class vc{constructor(e=new $(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=nx.subVectors(i,t).cross(qI.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(nx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||$I.getNormalMatrix(e),r=this.coplanarPoint(nx).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Kh=new Da,YI=new it(.5,.5),Dv=new $;class rg{constructor(e=new vc,t=new vc,i=new vc,r=new vc,a=new vc,s=new vc){this.planes=[e,t,i,r,a,s]}set(e,t,i,r,a,s){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(a),l[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=el){const i=this.planes,r=e.elements,a=r[0],s=r[1],l=r[2],u=r[3],f=r[4],m=r[5],g=r[6],y=r[7],_=r[8],x=r[9],w=r[10],T=r[11],S=r[12],O=r[13],L=r[14],C=r[15];if(i[0].setComponents(u-a,y-f,T-_,C-S).normalize(),i[1].setComponents(u+a,y+f,T+_,C+S).normalize(),i[2].setComponents(u+s,y+m,T+x,C+O).normalize(),i[3].setComponents(u-s,y-m,T-x,C-O).normalize(),i[4].setComponents(u-l,y-g,T-w,C-L).normalize(),t===el)i[5].setComponents(u+l,y+g,T+w,C+L).normalize();else if(t===g1)i[5].setComponents(l,g,w,L).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Kh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Kh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Kh)}intersectsSprite(e){Kh.center.set(0,0,0);const t=YI.distanceTo(e.center);return Kh.radius=.7071067811865476+t,Kh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Kh)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Dv.x=r.normal.x>0?e.max.x:e.min.x,Dv.y=r.normal.y>0?e.max.y:e.min.y,Dv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Dv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Eu=new sn,Mu=new rg;class f3{constructor(){this.coordinateSystem=el}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Eu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Mu.setFromProjectionMatrix(Eu,this.coordinateSystem),Mu.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Eu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Mu.setFromProjectionMatrix(Eu,this.coordinateSystem),Mu.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Eu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Mu.setFromProjectionMatrix(Eu,this.coordinateSystem),Mu.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Eu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Mu.setFromProjectionMatrix(Eu,this.coordinateSystem),Mu.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Eu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Mu.setFromProjectionMatrix(Eu,this.coordinateSystem),Mu.containsPoint(e))return!0}return!1}clone(){return new f3}}function ix(n,e){return n-e}function KI(n,e){return n.z-e.z}function ZI(n,e){return e.z-n.z}class QI{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const l=a[this.index];s.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const Zs=new sn,JI=new Pt(1,1,1),lw=new rg,eU=new f3,Lv=new qa,Zh=new Da,O0=new $,uw=new $,tU=new $,rx=new QI,ls=new Br,Iv=[];function nU(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Qh(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class YC extends Br{constructor(e,t,i=t*2,r){super(new Nn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Iu(t,e,e,cs,Ls);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Iu(t,e,e,D1,Cc);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Iu(t,e,e,cs,Ls);i.colorSpace=fi.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:l,itemSize:u,normalized:f}=s,m=new l.constructor(i*u),g=new Gn(m,u,f);t.setAttribute(a,g)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Gn(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qa);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Zs),this.getBoundingBoxAt(a,Lv).applyMatrix4(Zs),e.union(Lv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Da);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Zs),this.getBoundingSphereAt(a,Zh).applyMatrix4(Zs),e.union(Zh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ix),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Zs.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(JI.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ix),u=this._availableGeometryIds.shift(),a[u]=r):(u=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(u,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=t.getIndex(),l=this._geometryInfo[e];if(r&&s.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const m in i.attributes){const g=t.getAttribute(m),y=i.getAttribute(m);nU(g,y,u);const _=g.itemSize;for(let x=g.count,w=f;x<w;x++){const T=u+x;for(let S=0;S<_;S++)y.setComponent(T,S,0)}y.needsUpdate=!0,y.addUpdateRange(u*_,f*_)}if(r){const m=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let y=0;y<s.count;y++)a.setX(m+y,u+s.getX(y));for(let y=s.count,_=g;y<_;y++)a.setX(m+y,u);a.needsUpdate=!0,a.addUpdateRange(m,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((s,l)=>l).sort((s,l)=>i[s].vertexStart-i[l].vertexStart),a=this.geometry;for(let s=0,l=i.length;s<l;s++){const u=r[s],f=i[u];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:y}=f,_=a.index,x=_.array,w=e-g;for(let T=m;T<m+y;T++)x[T]=x[T]+w;_.array.copyWithin(t,m,m+y),_.addUpdateRange(t,y),f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=f,y=a.attributes;for(const _ in y){const x=y[_],{array:w,itemSize:T}=x;w.copyWithin(e*T,m*T,(m+g)*T),x.addUpdateRange(e*T,g*T)}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new qa,s=i.index,l=i.attributes.position;for(let u=r.start,f=r.start+r.count;u<f;u++){let m=u;s&&(m=s.getX(m)),a.expandByPoint(O0.fromBufferAttribute(l,m))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new Da;this.getBoundingBoxAt(e,Lv),Lv.getCenter(a.center);const s=i.index,l=i.attributes.position;let u=0;for(let f=r.start,m=r.start+r.count;f<m;f++){let g=f;s&&(g=s.getX(g)),O0.fromBufferAttribute(l,g),u=Math.max(u,a.center.distanceToSquared(O0))}a.radius=Math.sqrt(u),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(ix);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);Qh(this._multiDrawCounts,r),Qh(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Qh(s.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Qh(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),Qh(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(u=>u.indexStart+u.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Nn,this._initializeGeometry(a));const s=this.geometry;a.index&&Qh(a.index.array,s.index.array);for(const l in a.attributes)Qh(a.attributes[l].array,s.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;ls.material=this.material,ls.geometry.index=s.index,ls.geometry.attributes=s.attributes,ls.geometry.boundingBox===null&&(ls.geometry.boundingBox=new qa),ls.geometry.boundingSphere===null&&(ls.geometry.boundingSphere=new Da);for(let l=0,u=i.length;l<u;l++){if(!i[l].visible||!i[l].active)continue;const f=i[l].geometryIndex,m=r[f];ls.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(l,ls.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,ls.geometry.boundingBox),this.getBoundingSphereAt(f,ls.geometry.boundingSphere),ls.raycast(e,Iv);for(let g=0,y=Iv.length;g<y;g++){const _=Iv[g];_.object=this,_.batchId=l,t.push(_)}Iv.length=0}ls.material=null,ls.geometry.index=null,ls.geometry.attributes={},ls.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),l=s===null?1:s.array.BYTES_PER_ELEMENT,u=this._instanceInfo,f=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,y=this.perObjectFrustumCulled,_=this._indirectTexture,x=_.image.data,w=i.isArrayCamera?eU:lw;y&&!i.isArrayCamera&&(Zs.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),lw.setFromProjectionMatrix(Zs,e.coordinateSystem));let T=0;if(this.sortObjects){Zs.copy(this.matrixWorld).invert(),O0.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Zs),uw.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Zs);for(let L=0,C=u.length;L<C;L++)if(u[L].visible&&u[L].active){const P=u[L].geometryIndex;this.getMatrixAt(L,Zs),this.getBoundingSphereAt(P,Zh).applyMatrix4(Zs);let B=!1;if(y&&(B=!w.intersectsSphere(Zh,i)),!B){const j=g[P],X=tU.subVectors(Zh.center,O0).dot(uw);rx.push(j.start,j.count,X,L)}}const S=rx.list,O=this.customSort;O===null?S.sort(a.transparent?ZI:KI):O.call(this,S,i);for(let L=0,C=S.length;L<C;L++){const P=S[L];f[T]=P.start*l,m[T]=P.count,x[T]=P.index,T++}rx.reset()}else for(let S=0,O=u.length;S<O;S++)if(u[S].visible&&u[S].active){const L=u[S].geometryIndex;let C=!1;if(y&&(this.getMatrixAt(S,Zs),this.getBoundingSphereAt(L,Zh).applyMatrix4(Zs),C=!w.intersectsSphere(Zh,i)),!C){const P=g[L];f[T]=P.start*l,m[T]=P.count,x[T]=S,T++}}_.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}}class sa extends aa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Pt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const b_=new $,x_=new $,cw=new sn,D0=new Yd,Uv=new Da,ax=new $,fw=new $;class zu extends ii{constructor(e=new Nn,t=new sa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)b_.fromBufferAttribute(t,r-1),x_.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=b_.distanceTo(x_);e.setAttribute("lineDistance",new rn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Uv.copy(i.boundingSphere),Uv.applyMatrix4(r),Uv.radius+=a,e.ray.intersectsSphere(Uv)===!1)return;cw.copy(r).invert(),D0.copy(e.ray).applyMatrix4(cw);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=this.isLineSegments?2:1,m=i.index,y=i.attributes.position;if(m!==null){const _=Math.max(0,s.start),x=Math.min(m.count,s.start+s.count);for(let w=_,T=x-1;w<T;w+=f){const S=m.getX(w),O=m.getX(w+1),L=Pv(this,e,D0,u,S,O,w);L&&t.push(L)}if(this.isLineLoop){const w=m.getX(x-1),T=m.getX(_),S=Pv(this,e,D0,u,w,T,x-1);S&&t.push(S)}}else{const _=Math.max(0,s.start),x=Math.min(y.count,s.start+s.count);for(let w=_,T=x-1;w<T;w+=f){const S=Pv(this,e,D0,u,w,w+1,w);S&&t.push(S)}if(this.isLineLoop){const w=Pv(this,e,D0,u,x-1,_,x-1);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function Pv(n,e,t,i,r,a,s){const l=n.geometry.attributes.position;if(b_.fromBufferAttribute(l,r),x_.fromBufferAttribute(l,a),t.distanceSqToSegment(b_,x_,ax,fw)>i)return;ax.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(ax);if(!(f<e.near||f>e.far))return{distance:f,point:fw.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const hw=new $,dw=new $;class ro extends zu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)hw.fromBufferAttribute(t,r),dw.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+hw.distanceTo(dw);e.setAttribute("lineDistance",new rn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class TE extends zu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class h3 extends aa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const pw=new sn,zS=new Yd,Bv=new Da,zv=new $;class EE extends ii{constructor(e=new Nn,t=new h3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Bv.copy(i.boundingSphere),Bv.applyMatrix4(r),Bv.radius+=a,e.ray.intersectsSphere(Bv)===!1)return;pw.copy(r).invert(),zS.copy(e.ray).applyMatrix4(pw);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=i.index,g=i.attributes.position;if(f!==null){const y=Math.max(0,s.start),_=Math.min(f.count,s.start+s.count);for(let x=y,w=_;x<w;x++){const T=f.getX(x);zv.fromBufferAttribute(g,T),mw(zv,T,u,r,e,t,this)}}else{const y=Math.max(0,s.start),_=Math.min(g.count,s.start+s.count);for(let x=y,w=_;x<w;x++)zv.fromBufferAttribute(g,x),mw(zv,x,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const l=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function mw(n,e,t,i,r,a,s){const l=zS.distanceSqToPoint(n);if(l<t){const u=new $;zS.closestPointToPoint(n,u),u.applyMatrix4(i);const f=r.ray.origin.distanceTo(u);if(f<r.near||f>r.far)return;a.push({distance:f,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class KC extends Mr{constructor(e,t,i,r,a=Tr,s=Tr,l,u,f){super(e,t,i,r,a,s,l,u,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class iU extends KC{constructor(e,t,i,r,a,s,l,u){super({},e,t,i,r,a,s,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class rU extends Mr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=_a,this.minFilter=_a,this.generateMipmaps=!1,this.needsUpdate=!0}}class d3 extends Mr{constructor(e,t,i,r,a,s,l,u,f,m,g,y){super(null,s,l,u,f,m,r,a,g,y),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class aU extends d3{constructor(e,t,i,r,a,s){super(e,t,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Mo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class sU extends d3{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Nc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class oU extends Mr{constructor(e,t,i,r,a,s,l,u,f){super(e,t,i,r,a,s,l,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class p3 extends Mr{constructor(e,t,i=Cc,r,a,s,l=_a,u=_a,f,m=km,g=1){if(m!==km&&m!==Hm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const y={width:e,height:t,depth:g};super(y,r,a,s,l,u,m,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Vf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class m3 extends Nn{constructor(e=1,t=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],l=[],u=[],f=[],m=t/2,g=Math.PI/2*e,y=t,_=2*g+y,x=i*2+a,w=r+1,T=new $,S=new $;for(let O=0;O<=x;O++){let L=0,C=0,P=0,B=0;if(O<=i){const k=O/i,U=k*Math.PI/2;C=-m-e*Math.cos(U),P=e*Math.sin(U),B=-e*Math.cos(U),L=k*g}else if(O<=i+a){const k=(O-i)/a;C=-m+k*t,P=e,B=0,L=g+k*y}else{const k=(O-i-a)/i,U=k*Math.PI/2;C=m+e*Math.sin(U),P=e*Math.cos(U),B=e*Math.sin(U),L=g+y+k*g}const j=Math.max(0,Math.min(1,L/_));let X=0;O===0?X=.5/r:O===x&&(X=-.5/r);for(let k=0;k<=r;k++){const U=k/r,K=U*Math.PI*2,ye=Math.sin(K),ue=Math.cos(K);S.x=-P*ue,S.y=C,S.z=P*ye,l.push(S.x,S.y,S.z),T.set(-P*ue,B,P*ye),T.normalize(),u.push(T.x,T.y,T.z),f.push(U+X,j)}if(O>0){const k=(O-1)*w;for(let U=0;U<r;U++){const K=k+U,ye=k+U+1,ue=O*w+U,we=O*w+U+1;s.push(K,ye,ue),s.push(ye,we,ue)}}}this.setIndex(s),this.setAttribute("position",new rn(l,3)),this.setAttribute("normal",new rn(u,3)),this.setAttribute("uv",new rn(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m3(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class g3 extends Nn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],s=[],l=[],u=[],f=new $,m=new it;s.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let g=0,y=3;g<=t;g++,y+=3){const _=i+g/t*r;f.x=e*Math.cos(_),f.y=e*Math.sin(_),s.push(f.x,f.y,f.z),l.push(0,0,1),m.x=(s[y]/e+1)/2,m.y=(s[y+1]/e+1)/2,u.push(m.x,m.y)}for(let g=1;g<=t;g++)a.push(g,g+1,0);this.setIndex(a),this.setAttribute("position",new rn(s,3)),this.setAttribute("normal",new rn(l,3)),this.setAttribute("uv",new rn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new g3(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class U1 extends Nn{constructor(e=1,t=1,i=1,r=32,a=1,s=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:u};const f=this;r=Math.floor(r),a=Math.floor(a);const m=[],g=[],y=[],_=[];let x=0;const w=[],T=i/2;let S=0;O(),s===!1&&(e>0&&L(!0),t>0&&L(!1)),this.setIndex(m),this.setAttribute("position",new rn(g,3)),this.setAttribute("normal",new rn(y,3)),this.setAttribute("uv",new rn(_,2));function O(){const C=new $,P=new $;let B=0;const j=(t-e)/i;for(let X=0;X<=a;X++){const k=[],U=X/a,K=U*(t-e)+e;for(let ye=0;ye<=r;ye++){const ue=ye/r,we=ue*u+l,Ae=Math.sin(we),Z=Math.cos(we);P.x=K*Ae,P.y=-U*i+T,P.z=K*Z,g.push(P.x,P.y,P.z),C.set(Ae,j,Z).normalize(),y.push(C.x,C.y,C.z),_.push(ue,1-U),k.push(x++)}w.push(k)}for(let X=0;X<r;X++)for(let k=0;k<a;k++){const U=w[k][X],K=w[k+1][X],ye=w[k+1][X+1],ue=w[k][X+1];(e>0||k!==0)&&(m.push(U,K,ue),B+=3),(t>0||k!==a-1)&&(m.push(K,ye,ue),B+=3)}f.addGroup(S,B,0),S+=B}function L(C){const P=x,B=new it,j=new $;let X=0;const k=C===!0?e:t,U=C===!0?1:-1;for(let ye=1;ye<=r;ye++)g.push(0,T*U,0),y.push(0,U,0),_.push(.5,.5),x++;const K=x;for(let ye=0;ye<=r;ye++){const we=ye/r*u+l,Ae=Math.cos(we),Z=Math.sin(we);j.x=k*Z,j.y=T*U,j.z=k*Ae,g.push(j.x,j.y,j.z),y.push(0,U,0),B.x=Ae*.5+.5,B.y=Z*.5*U+.5,_.push(B.x,B.y),x++}for(let ye=0;ye<r;ye++){const ue=P+ye,we=K+ye;C===!0?m.push(we,we+1,ue):m.push(we+1,we,ue),X+=3}f.addGroup(S,X,C===!0?1:2),S+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U1(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class P1 extends U1{constructor(e=1,t=1,i=32,r=1,a=!1,s=0,l=Math.PI*2){super(0,e,t,i,r,a,s,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:l}}static fromJSON(e){return new P1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class rh extends Nn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],s=[];l(r),f(i),m(),this.setAttribute("position",new rn(a,3)),this.setAttribute("normal",new rn(a.slice(),3)),this.setAttribute("uv",new rn(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(O){const L=new $,C=new $,P=new $;for(let B=0;B<t.length;B+=3)_(t[B+0],L),_(t[B+1],C),_(t[B+2],P),u(L,C,P,O)}function u(O,L,C,P){const B=P+1,j=[];for(let X=0;X<=B;X++){j[X]=[];const k=O.clone().lerp(C,X/B),U=L.clone().lerp(C,X/B),K=B-X;for(let ye=0;ye<=K;ye++)ye===0&&X===B?j[X][ye]=k:j[X][ye]=k.clone().lerp(U,ye/K)}for(let X=0;X<B;X++)for(let k=0;k<2*(B-X)-1;k++){const U=Math.floor(k/2);k%2===0?(y(j[X][U+1]),y(j[X+1][U]),y(j[X][U])):(y(j[X][U+1]),y(j[X+1][U+1]),y(j[X+1][U]))}}function f(O){const L=new $;for(let C=0;C<a.length;C+=3)L.x=a[C+0],L.y=a[C+1],L.z=a[C+2],L.normalize().multiplyScalar(O),a[C+0]=L.x,a[C+1]=L.y,a[C+2]=L.z}function m(){const O=new $;for(let L=0;L<a.length;L+=3){O.x=a[L+0],O.y=a[L+1],O.z=a[L+2];const C=T(O)/2/Math.PI+.5,P=S(O)/Math.PI+.5;s.push(C,1-P)}x(),g()}function g(){for(let O=0;O<s.length;O+=6){const L=s[O+0],C=s[O+2],P=s[O+4],B=Math.max(L,C,P),j=Math.min(L,C,P);B>.9&&j<.1&&(L<.2&&(s[O+0]+=1),C<.2&&(s[O+2]+=1),P<.2&&(s[O+4]+=1))}}function y(O){a.push(O.x,O.y,O.z)}function _(O,L){const C=O*3;L.x=e[C+0],L.y=e[C+1],L.z=e[C+2]}function x(){const O=new $,L=new $,C=new $,P=new $,B=new it,j=new it,X=new it;for(let k=0,U=0;k<a.length;k+=9,U+=6){O.set(a[k+0],a[k+1],a[k+2]),L.set(a[k+3],a[k+4],a[k+5]),C.set(a[k+6],a[k+7],a[k+8]),B.set(s[U+0],s[U+1]),j.set(s[U+2],s[U+3]),X.set(s[U+4],s[U+5]),P.copy(O).add(L).add(C).divideScalar(3);const K=T(P);w(B,U+0,O,K),w(j,U+2,L,K),w(X,U+4,C,K)}}function w(O,L,C,P){P<0&&O.x===1&&(s[L]=O.x-1),C.x===0&&C.z===0&&(s[L]=P/2/Math.PI+.5)}function T(O){return Math.atan2(O.z,-O.x)}function S(O){return Math.atan2(-O.y,Math.sqrt(O.x*O.x+O.z*O.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rh(e.vertices,e.indices,e.radius,e.details)}}class y3 extends rh{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new y3(e.radius,e.detail)}}const Fv=new $,kv=new $,sx=new $,Hv=new io;class ZC extends Nn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(Nd*t),s=e.getIndex(),l=e.getAttribute("position"),u=s?s.count:l.count,f=[0,0,0],m=["a","b","c"],g=new Array(3),y={},_=[];for(let x=0;x<u;x+=3){s?(f[0]=s.getX(x),f[1]=s.getX(x+1),f[2]=s.getX(x+2)):(f[0]=x,f[1]=x+1,f[2]=x+2);const{a:w,b:T,c:S}=Hv;if(w.fromBufferAttribute(l,f[0]),T.fromBufferAttribute(l,f[1]),S.fromBufferAttribute(l,f[2]),Hv.getNormal(sx),g[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,g[1]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,g[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let O=0;O<3;O++){const L=(O+1)%3,C=g[O],P=g[L],B=Hv[m[O]],j=Hv[m[L]],X=`${C}_${P}`,k=`${P}_${C}`;k in y&&y[k]?(sx.dot(y[k].normal)<=a&&(_.push(B.x,B.y,B.z),_.push(j.x,j.y,j.z)),y[k]=null):X in y||(y[X]={index0:f[O],index1:f[L],normal:sx.clone()})}}for(const x in y)if(y[x]){const{index0:w,index1:T}=y[x];Fv.fromBufferAttribute(l,w),kv.fromBufferAttribute(l,T),_.push(Fv.x,Fv.y,Fv.z),_.push(kv.x,kv.y,kv.z)}this.setAttribute("position",new rn(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class jl{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let s;t?s=t:s=e*i[a-1];let l=0,u=a-1,f;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),f=i[r]-s,f<0)l=r+1;else if(f>0)u=r-1;else{u=r;break}if(r=u,i[r]===s)return r/(a-1);const m=i[r],y=i[r+1]-m,_=(s-m)/y;return(r+_)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),l=this.getPoint(a),u=t||(s.isVector2?new it:new $);return u.copy(l).sub(s).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new $,r=[],a=[],s=[],l=new $,u=new sn;for(let _=0;_<=e;_++){const x=_/e;r[_]=this.getTangentAt(x,new $)}a[0]=new $,s[0]=new $;let f=Number.MAX_VALUE;const m=Math.abs(r[0].x),g=Math.abs(r[0].y),y=Math.abs(r[0].z);m<=f&&(f=m,i.set(1,0,0)),g<=f&&(f=g,i.set(0,1,0)),y<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],l),s[0].crossVectors(r[0],a[0]);for(let _=1;_<=e;_++){if(a[_]=a[_-1].clone(),s[_]=s[_-1].clone(),l.crossVectors(r[_-1],r[_]),l.length()>Number.EPSILON){l.normalize();const x=Math.acos(Vn(r[_-1].dot(r[_]),-1,1));a[_].applyMatrix4(u.makeRotationAxis(l,x))}s[_].crossVectors(r[_],a[_])}if(t===!0){let _=Math.acos(Vn(a[0].dot(a[e]),-1,1));_/=e,r[0].dot(l.crossVectors(a[0],a[e]))>0&&(_=-_);for(let x=1;x<=e;x++)a[x].applyMatrix4(u.makeRotationAxis(r[x],_*x)),s[x].crossVectors(r[x],a[x])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class v3 extends jl{constructor(e=0,t=0,i=1,r=1,a=0,s=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new it){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const l=this.aStartAngle+e*a;let u=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),y=u-this.aX,_=f-this.aY;u=y*m-_*g+this.aX,f=y*g+_*m+this.aY}return i.set(u,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class QC extends v3{constructor(e,t,i,r,a,s){super(e,t,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function ME(){let n=0,e=0,t=0,i=0;function r(a,s,l,u){n=a,e=l,t=-3*a+3*s-2*l-u,i=2*a-2*s+l+u}return{initCatmullRom:function(a,s,l,u,f){r(s,l,f*(l-a),f*(u-s))},initNonuniformCatmullRom:function(a,s,l,u,f,m,g){let y=(s-a)/f-(l-a)/(f+m)+(l-s)/m,_=(l-s)/m-(u-s)/(m+g)+(u-l)/g;y*=m,_*=m,r(s,l,y,_)},calc:function(a){const s=a*a,l=s*a;return n+e*a+t*s+i*l}}}const Vv=new $,ox=new ME,lx=new ME,ux=new ME;class JC extends jl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new $){const i=t,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let l=Math.floor(s),u=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:u===0&&l===a-1&&(l=a-2,u=1);let f,m;this.closed||l>0?f=r[(l-1)%a]:(Vv.subVectors(r[0],r[1]).add(r[0]),f=Vv);const g=r[l%a],y=r[(l+1)%a];if(this.closed||l+2<a?m=r[(l+2)%a]:(Vv.subVectors(r[a-1],r[a-2]).add(r[a-1]),m=Vv),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let x=Math.pow(f.distanceToSquared(g),_),w=Math.pow(g.distanceToSquared(y),_),T=Math.pow(y.distanceToSquared(m),_);w<1e-4&&(w=1),x<1e-4&&(x=w),T<1e-4&&(T=w),ox.initNonuniformCatmullRom(f.x,g.x,y.x,m.x,x,w,T),lx.initNonuniformCatmullRom(f.y,g.y,y.y,m.y,x,w,T),ux.initNonuniformCatmullRom(f.z,g.z,y.z,m.z,x,w,T)}else this.curveType==="catmullrom"&&(ox.initCatmullRom(f.x,g.x,y.x,m.x,this.tension),lx.initCatmullRom(f.y,g.y,y.y,m.y,this.tension),ux.initCatmullRom(f.z,g.z,y.z,m.z,this.tension));return i.set(ox.calc(u),lx.calc(u),ux.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new $().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function gw(n,e,t,i,r){const a=(i-e)*.5,s=(r-t)*.5,l=n*n,u=n*l;return(2*t-2*i+a+s)*u+(-3*t+3*i-2*a-s)*l+a*n+t}function lU(n,e){const t=1-n;return t*t*e}function uU(n,e){return 2*(1-n)*n*e}function cU(n,e){return n*n*e}function a1(n,e,t,i){return lU(n,e)+uU(n,t)+cU(n,i)}function fU(n,e){const t=1-n;return t*t*t*e}function hU(n,e){const t=1-n;return 3*t*t*n*e}function dU(n,e){return 3*(1-n)*n*n*e}function pU(n,e){return n*n*n*e}function s1(n,e,t,i,r){return fU(n,e)+hU(n,t)+dU(n,i)+pU(n,r)}class wE extends jl{constructor(e=new it,t=new it,i=new it,r=new it){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new it){const i=t,r=this.v0,a=this.v1,s=this.v2,l=this.v3;return i.set(s1(e,r.x,a.x,s.x,l.x),s1(e,r.y,a.y,s.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class e5 extends jl{constructor(e=new $,t=new $,i=new $,r=new $){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new $){const i=t,r=this.v0,a=this.v1,s=this.v2,l=this.v3;return i.set(s1(e,r.x,a.x,s.x,l.x),s1(e,r.y,a.y,s.y,l.y),s1(e,r.z,a.z,s.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class AE extends jl{constructor(e=new it,t=new it){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new it){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new it){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class t5 extends jl{constructor(e=new $,t=new $){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new $){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RE extends jl{constructor(e=new it,t=new it,i=new it){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new it){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(a1(e,r.x,a.x,s.x),a1(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class NE extends jl{constructor(e=new $,t=new $,i=new $){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new $){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(a1(e,r.x,a.x,s.x),a1(e,r.y,a.y,s.y),a1(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CE extends jl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new it){const i=t,r=this.points,a=(r.length-1)*e,s=Math.floor(a),l=a-s,u=r[s===0?s:s-1],f=r[s],m=r[s>r.length-2?r.length-1:s+1],g=r[s>r.length-3?r.length-1:s+2];return i.set(gw(l,u.x,f.x,m.x,g.x),gw(l,u.y,f.y,m.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new it().fromArray(r))}return this}}var S_=Object.freeze({__proto__:null,ArcCurve:QC,CatmullRomCurve3:JC,CubicBezierCurve:wE,CubicBezierCurve3:e5,EllipseCurve:v3,LineCurve:AE,LineCurve3:t5,QuadraticBezierCurve:RE,QuadraticBezierCurve3:NE,SplineCurve:CE});class n5 extends jl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new S_[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,l=this.curves[a],u=l.getLength(),f=u===0?0:1-s/u;return l.getPointAt(f,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],l=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,u=s.getPoints(l);for(let f=0;f<u.length;f++){const m=u[f];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new S_[r.type]().fromJSON(r))}return this}}class T_ extends n5{constructor(e){super(),this.type="Path",this.currentPoint=new it,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new AE(this.currentPoint.clone(),new it(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new RE(this.currentPoint.clone(),new it(e,t),new it(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,s){const l=new wE(this.currentPoint.clone(),new it(e,t),new it(i,r),new it(a,s));return this.curves.push(l),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new CE(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,s){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,i,r,a,s),this}absarc(e,t,i,r,a,s){return this.absellipse(e,t,i,i,r,a,s),this}ellipse(e,t,i,r,a,s,l,u){const f=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+f,t+m,i,r,a,s,l,u),this}absellipse(e,t,i,r,a,s,l,u){const f=new v3(e,t,i,r,a,s,l,u);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const m=f.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Cd extends T_{constructor(e){super(e),this.uuid=wo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new T_().fromJSON(r))}return this}}function mU(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let a=i5(n,0,r,t,!0);const s=[];if(!a||a.next===a.prev)return s;let l,u,f;if(i&&(a=bU(n,e,a,t)),n.length>80*t){l=1/0,u=1/0;let m=-1/0,g=-1/0;for(let y=t;y<r;y+=t){const _=n[y],x=n[y+1];_<l&&(l=_),x<u&&(u=x),_>m&&(m=_),x>g&&(g=x)}f=Math.max(m-l,g-u),f=f!==0?32767/f:0}return v1(a,s,t,l,u,f,0),s}function i5(n,e,t,i,r){let a;if(r===OU(n,e,t,i)>0)for(let s=e;s<t;s+=i)a=yw(s/i|0,n[s],n[s+1],a);else for(let s=t-i;s>=e;s-=i)a=yw(s/i|0,n[s],n[s+1],a);return a&&qm(a,a.next)&&(b1(a),a=a.next),a}function Id(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(qm(t,t.next)||Pr(t.prev,t,t.next)===0)){if(b1(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function v1(n,e,t,i,r,a,s){if(!n)return;!s&&a&&MU(n,i,r,a);let l=n;for(;n.prev!==n.next;){const u=n.prev,f=n.next;if(a?yU(n,i,r,a):gU(n)){e.push(u.i,n.i,f.i),b1(n),n=f.next,l=f.next;continue}if(n=f,n===l){s?s===1?(n=vU(Id(n),e),v1(n,e,t,i,r,a,2)):s===2&&_U(n,e,t,i,r,a):v1(Id(n),e,t,i,r,a,1);break}}}function gU(n){const e=n.prev,t=n,i=n.next;if(Pr(e,t,i)>=0)return!1;const r=e.x,a=t.x,s=i.x,l=e.y,u=t.y,f=i.y,m=Math.min(r,a,s),g=Math.min(l,u,f),y=Math.max(r,a,s),_=Math.max(l,u,f);let x=i.next;for(;x!==e;){if(x.x>=m&&x.x<=y&&x.y>=g&&x.y<=_&&W0(r,l,a,u,s,f,x.x,x.y)&&Pr(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function yU(n,e,t,i){const r=n.prev,a=n,s=n.next;if(Pr(r,a,s)>=0)return!1;const l=r.x,u=a.x,f=s.x,m=r.y,g=a.y,y=s.y,_=Math.min(l,u,f),x=Math.min(m,g,y),w=Math.max(l,u,f),T=Math.max(m,g,y),S=FS(_,x,e,t,i),O=FS(w,T,e,t,i);let L=n.prevZ,C=n.nextZ;for(;L&&L.z>=S&&C&&C.z<=O;){if(L.x>=_&&L.x<=w&&L.y>=x&&L.y<=T&&L!==r&&L!==s&&W0(l,m,u,g,f,y,L.x,L.y)&&Pr(L.prev,L,L.next)>=0||(L=L.prevZ,C.x>=_&&C.x<=w&&C.y>=x&&C.y<=T&&C!==r&&C!==s&&W0(l,m,u,g,f,y,C.x,C.y)&&Pr(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;L&&L.z>=S;){if(L.x>=_&&L.x<=w&&L.y>=x&&L.y<=T&&L!==r&&L!==s&&W0(l,m,u,g,f,y,L.x,L.y)&&Pr(L.prev,L,L.next)>=0)return!1;L=L.prevZ}for(;C&&C.z<=O;){if(C.x>=_&&C.x<=w&&C.y>=x&&C.y<=T&&C!==r&&C!==s&&W0(l,m,u,g,f,y,C.x,C.y)&&Pr(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function vU(n,e){let t=n;do{const i=t.prev,r=t.next.next;!qm(i,r)&&a5(i,t,t.next,r)&&_1(i,r)&&_1(r,i)&&(e.push(i.i,t.i,r.i),b1(t),b1(t.next),t=n=r),t=t.next}while(t!==n);return Id(t)}function _U(n,e,t,i,r,a){let s=n;do{let l=s.next.next;for(;l!==s.prev;){if(s.i!==l.i&&RU(s,l)){let u=s5(s,l);s=Id(s,s.next),u=Id(u,u.next),v1(s,e,t,i,r,a,0),v1(u,e,t,i,r,a,0);return}l=l.next}s=s.next}while(s!==n)}function bU(n,e,t,i){const r=[];for(let a=0,s=e.length;a<s;a++){const l=e[a]*i,u=a<s-1?e[a+1]*i:n.length,f=i5(n,l,u,i,!1);f===f.next&&(f.steiner=!0),r.push(AU(f))}r.sort(xU);for(let a=0;a<r.length;a++)t=SU(r[a],t);return t}function xU(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function SU(n,e){const t=TU(n,e);if(!t)return e;const i=s5(t,n);return Id(i,i.next),Id(t,t.next)}function TU(n,e){let t=e;const i=n.x,r=n.y;let a=-1/0,s;if(qm(n,t))return t;do{if(qm(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const g=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=i&&g>a&&(a=g,s=t.x<t.next.x?t:t.next,g===i))return s}t=t.next}while(t!==e);if(!s)return null;const l=s,u=s.x,f=s.y;let m=1/0;t=s;do{if(i>=t.x&&t.x>=u&&i!==t.x&&r5(r<f?i:a,r,u,f,r<f?a:i,r,t.x,t.y)){const g=Math.abs(r-t.y)/(i-t.x);_1(t,n)&&(g<m||g===m&&(t.x>s.x||t.x===s.x&&EU(s,t)))&&(s=t,m=g)}t=t.next}while(t!==l);return s}function EU(n,e){return Pr(n.prev,n,e.prev)<0&&Pr(e.next,n,n.next)<0}function MU(n,e,t,i){let r=n;do r.z===0&&(r.z=FS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,wU(r)}function wU(n){let e,t=1;do{let i=n,r;n=null;let a=null;for(e=0;i;){e++;let s=i,l=0;for(let f=0;f<t&&(l++,s=s.nextZ,!!s);f++);let u=t;for(;l>0||u>0&&s;)l!==0&&(u===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,l--):(r=s,s=s.nextZ,u--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;i=s}a.nextZ=null,t*=2}while(e>1);return n}function FS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function AU(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function r5(n,e,t,i,r,a,s,l){return(r-s)*(e-l)>=(n-s)*(a-l)&&(n-s)*(i-l)>=(t-s)*(e-l)&&(t-s)*(a-l)>=(r-s)*(i-l)}function W0(n,e,t,i,r,a,s,l){return!(n===s&&e===l)&&r5(n,e,t,i,r,a,s,l)}function RU(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!NU(n,e)&&(_1(n,e)&&_1(e,n)&&CU(n,e)&&(Pr(n.prev,n,e.prev)||Pr(n,e.prev,e))||qm(n,e)&&Pr(n.prev,n,n.next)>0&&Pr(e.prev,e,e.next)>0)}function Pr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function qm(n,e){return n.x===e.x&&n.y===e.y}function a5(n,e,t,i){const r=jv(Pr(n,e,t)),a=jv(Pr(n,e,i)),s=jv(Pr(t,i,n)),l=jv(Pr(t,i,e));return!!(r!==a&&s!==l||r===0&&Gv(n,t,e)||a===0&&Gv(n,i,e)||s===0&&Gv(t,n,i)||l===0&&Gv(t,e,i))}function Gv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function jv(n){return n>0?1:n<0?-1:0}function NU(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&a5(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function _1(n,e){return Pr(n.prev,n,n.next)<0?Pr(n,e,n.next)>=0&&Pr(n,n.prev,e)>=0:Pr(n,e,n.prev)<0||Pr(n,n.next,e)<0}function CU(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function s5(n,e){const t=kS(n.i,n.x,n.y),i=kS(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function yw(n,e,t,i){const r=kS(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function b1(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function kS(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function OU(n,e,t,i){let r=0;for(let a=e,s=t-i;a<t;a+=i)r+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return r}class DU{static triangulate(e,t,i=2){return mU(e,t,i)}}class Bl{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Bl.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];vw(e),_w(i,e);let s=e.length;t.forEach(vw);for(let u=0;u<t.length;u++)r.push(s),s+=t[u].length,_w(i,t[u]);const l=DU.triangulate(i,r);for(let u=0;u<l.length;u+=3)a.push(l.slice(u,u+3));return a}}function vw(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function _w(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class _3 extends Nn{constructor(e=new Cd([new it(.5,.5),new it(-.5,.5),new it(-.5,-.5),new it(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];s(f)}this.setAttribute("position",new rn(r,3)),this.setAttribute("uv",new rn(a,2)),this.computeVertexNormals();function s(l){const u=[],f=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:_-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,O=t.UVGenerator!==void 0?t.UVGenerator:LU;let L,C=!1,P,B,j,X;S&&(L=S.getSpacedPoints(m),C=!0,y=!1,P=S.computeFrenetFrames(m,!1),B=new $,j=new $,X=new $),y||(T=0,_=0,x=0,w=0);const k=l.extractPoints(f);let U=k.shape;const K=k.holes;if(!Bl.isClockWise(U)){U=U.reverse();for(let ie=0,_t=K.length;ie<_t;ie++){const ut=K[ie];Bl.isClockWise(ut)&&(K[ie]=ut.reverse())}}function ue(ie){const ut=10000000000000001e-36;let pt=ie[0];for(let Ze=1;Ze<=ie.length;Ze++){const Ot=Ze%ie.length,ft=ie[Ot],St=ft.x-pt.x,on=ft.y-pt.y,re=St*St+on*on,q=Math.max(Math.abs(ft.x),Math.abs(ft.y),Math.abs(pt.x),Math.abs(pt.y)),Ce=ut*q*q;if(re<=Ce){ie.splice(Ot,1),Ze--;continue}pt=ft}}ue(U),K.forEach(ue);const we=K.length,Ae=U;for(let ie=0;ie<we;ie++){const _t=K[ie];U=U.concat(_t)}function Z(ie,_t,ut){return _t||console.error("THREE.ExtrudeGeometry: vec does not exist"),ie.clone().addScaledVector(_t,ut)}const le=U.length;function de(ie,_t,ut){let pt,Ze,Ot;const ft=ie.x-_t.x,St=ie.y-_t.y,on=ut.x-ie.x,re=ut.y-ie.y,q=ft*ft+St*St,Ce=ft*re-St*on;if(Math.abs(Ce)>Number.EPSILON){const We=Math.sqrt(q),Qe=Math.sqrt(on*on+re*re),He=_t.x-St/We,Ut=_t.y+ft/We,wt=ut.x-re/Qe,Gt=ut.y+on/Qe,$t=((wt-He)*re-(Gt-Ut)*on)/(ft*re-St*on);pt=He+ft*$t-ie.x,Ze=Ut+St*$t-ie.y;const rt=pt*pt+Ze*Ze;if(rt<=2)return new it(pt,Ze);Ot=Math.sqrt(rt/2)}else{let We=!1;ft>Number.EPSILON?on>Number.EPSILON&&(We=!0):ft<-Number.EPSILON?on<-Number.EPSILON&&(We=!0):Math.sign(St)===Math.sign(re)&&(We=!0),We?(pt=-St,Ze=ft,Ot=Math.sqrt(q)):(pt=ft,Ze=St,Ot=Math.sqrt(q/2))}return new it(pt/Ot,Ze/Ot)}const Le=[];for(let ie=0,_t=Ae.length,ut=_t-1,pt=ie+1;ie<_t;ie++,ut++,pt++)ut===_t&&(ut=0),pt===_t&&(pt=0),Le[ie]=de(Ae[ie],Ae[ut],Ae[pt]);const ee=[];let be,Ge=Le.concat();for(let ie=0,_t=we;ie<_t;ie++){const ut=K[ie];be=[];for(let pt=0,Ze=ut.length,Ot=Ze-1,ft=pt+1;pt<Ze;pt++,Ot++,ft++)Ot===Ze&&(Ot=0),ft===Ze&&(ft=0),be[pt]=de(ut[pt],ut[Ot],ut[ft]);ee.push(be),Ge=Ge.concat(be)}let Ye;if(T===0)Ye=Bl.triangulateShape(Ae,K);else{const ie=[],_t=[];for(let ut=0;ut<T;ut++){const pt=ut/T,Ze=_*Math.cos(pt*Math.PI/2),Ot=x*Math.sin(pt*Math.PI/2)+w;for(let ft=0,St=Ae.length;ft<St;ft++){const on=Z(Ae[ft],Le[ft],Ot);Kt(on.x,on.y,-Ze),pt===0&&ie.push(on)}for(let ft=0,St=we;ft<St;ft++){const on=K[ft];be=ee[ft];const re=[];for(let q=0,Ce=on.length;q<Ce;q++){const We=Z(on[q],be[q],Ot);Kt(We.x,We.y,-Ze),pt===0&&re.push(We)}pt===0&&_t.push(re)}}Ye=Bl.triangulateShape(ie,_t)}const xe=Ye.length,Ke=x+w;for(let ie=0;ie<le;ie++){const _t=y?Z(U[ie],Ge[ie],Ke):U[ie];C?(j.copy(P.normals[0]).multiplyScalar(_t.x),B.copy(P.binormals[0]).multiplyScalar(_t.y),X.copy(L[0]).add(j).add(B),Kt(X.x,X.y,X.z)):Kt(_t.x,_t.y,0)}for(let ie=1;ie<=m;ie++)for(let _t=0;_t<le;_t++){const ut=y?Z(U[_t],Ge[_t],Ke):U[_t];C?(j.copy(P.normals[ie]).multiplyScalar(ut.x),B.copy(P.binormals[ie]).multiplyScalar(ut.y),X.copy(L[ie]).add(j).add(B),Kt(X.x,X.y,X.z)):Kt(ut.x,ut.y,g/m*ie)}for(let ie=T-1;ie>=0;ie--){const _t=ie/T,ut=_*Math.cos(_t*Math.PI/2),pt=x*Math.sin(_t*Math.PI/2)+w;for(let Ze=0,Ot=Ae.length;Ze<Ot;Ze++){const ft=Z(Ae[Ze],Le[Ze],pt);Kt(ft.x,ft.y,g+ut)}for(let Ze=0,Ot=K.length;Ze<Ot;Ze++){const ft=K[Ze];be=ee[Ze];for(let St=0,on=ft.length;St<on;St++){const re=Z(ft[St],be[St],pt);C?Kt(re.x,re.y+L[m-1].y,L[m-1].x+ut):Kt(re.x,re.y,g+ut)}}}et(),xt();function et(){const ie=r.length/3;if(y){let _t=0,ut=le*_t;for(let pt=0;pt<xe;pt++){const Ze=Ye[pt];Wt(Ze[2]+ut,Ze[1]+ut,Ze[0]+ut)}_t=m+T*2,ut=le*_t;for(let pt=0;pt<xe;pt++){const Ze=Ye[pt];Wt(Ze[0]+ut,Ze[1]+ut,Ze[2]+ut)}}else{for(let _t=0;_t<xe;_t++){const ut=Ye[_t];Wt(ut[2],ut[1],ut[0])}for(let _t=0;_t<xe;_t++){const ut=Ye[_t];Wt(ut[0]+le*m,ut[1]+le*m,ut[2]+le*m)}}i.addGroup(ie,r.length/3-ie,0)}function xt(){const ie=r.length/3;let _t=0;bt(Ae,_t),_t+=Ae.length;for(let ut=0,pt=K.length;ut<pt;ut++){const Ze=K[ut];bt(Ze,_t),_t+=Ze.length}i.addGroup(ie,r.length/3-ie,1)}function bt(ie,_t){let ut=ie.length;for(;--ut>=0;){const pt=ut;let Ze=ut-1;Ze<0&&(Ze=ie.length-1);for(let Ot=0,ft=m+T*2;Ot<ft;Ot++){const St=le*Ot,on=le*(Ot+1),re=_t+pt+St,q=_t+Ze+St,Ce=_t+Ze+on,We=_t+pt+on;tn(re,q,Ce,We)}}}function Kt(ie,_t,ut){u.push(ie),u.push(_t),u.push(ut)}function Wt(ie,_t,ut){un(ie),un(_t),un(ut);const pt=r.length/3,Ze=O.generateTopUV(i,r,pt-3,pt-2,pt-1);Jt(Ze[0]),Jt(Ze[1]),Jt(Ze[2])}function tn(ie,_t,ut,pt){un(ie),un(_t),un(pt),un(_t),un(ut),un(pt);const Ze=r.length/3,Ot=O.generateSideWallUV(i,r,Ze-6,Ze-3,Ze-2,Ze-1);Jt(Ot[0]),Jt(Ot[1]),Jt(Ot[3]),Jt(Ot[1]),Jt(Ot[2]),Jt(Ot[3])}function un(ie){r.push(u[ie*3+0]),r.push(u[ie*3+1]),r.push(u[ie*3+2])}function Jt(ie){a.push(ie.x),a.push(ie.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return IU(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const l=t[e.shapes[a]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new S_[r.type]().fromJSON(r)),new _3(i,e.options)}}const LU={generateTopUV:function(n,e,t,i,r){const a=e[t*3],s=e[t*3+1],l=e[i*3],u=e[i*3+1],f=e[r*3],m=e[r*3+1];return[new it(a,s),new it(l,u),new it(f,m)]},generateSideWallUV:function(n,e,t,i,r,a){const s=e[t*3],l=e[t*3+1],u=e[t*3+2],f=e[i*3],m=e[i*3+1],g=e[i*3+2],y=e[r*3],_=e[r*3+1],x=e[r*3+2],w=e[a*3],T=e[a*3+1],S=e[a*3+2];return Math.abs(l-m)<Math.abs(s-f)?[new it(s,1-u),new it(f,1-g),new it(y,1-x),new it(w,1-S)]:[new it(l,1-u),new it(m,1-g),new it(_,1-x),new it(T,1-S)]}};function IU(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class b3 extends rh{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new b3(e.radius,e.detail)}}class x3 extends Nn{constructor(e=[new it(0,-.5),new it(.5,0),new it(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Vn(r,0,Math.PI*2);const a=[],s=[],l=[],u=[],f=[],m=1/t,g=new $,y=new it,_=new $,x=new $,w=new $;let T=0,S=0;for(let O=0;O<=e.length-1;O++)switch(O){case 0:T=e[O+1].x-e[O].x,S=e[O+1].y-e[O].y,_.x=S*1,_.y=-T,_.z=S*0,w.copy(_),_.normalize(),u.push(_.x,_.y,_.z);break;case e.length-1:u.push(w.x,w.y,w.z);break;default:T=e[O+1].x-e[O].x,S=e[O+1].y-e[O].y,_.x=S*1,_.y=-T,_.z=S*0,x.copy(_),_.x+=w.x,_.y+=w.y,_.z+=w.z,_.normalize(),u.push(_.x,_.y,_.z),w.copy(x)}for(let O=0;O<=t;O++){const L=i+O*m*r,C=Math.sin(L),P=Math.cos(L);for(let B=0;B<=e.length-1;B++){g.x=e[B].x*C,g.y=e[B].y,g.z=e[B].x*P,s.push(g.x,g.y,g.z),y.x=O/t,y.y=B/(e.length-1),l.push(y.x,y.y);const j=u[3*B+0]*C,X=u[3*B+1],k=u[3*B+0]*P;f.push(j,X,k)}}for(let O=0;O<t;O++)for(let L=0;L<e.length-1;L++){const C=L+O*e.length,P=C,B=C+e.length,j=C+e.length+1,X=C+1;a.push(P,B,X),a.push(j,X,B)}this.setIndex(a),this.setAttribute("position",new rn(s,3)),this.setAttribute("uv",new rn(l,2)),this.setAttribute("normal",new rn(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x3(e.points,e.segments,e.phiStart,e.phiLength)}}class B1 extends rh{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new B1(e.radius,e.detail)}}class ag extends Nn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,s=t/2,l=Math.floor(i),u=Math.floor(r),f=l+1,m=u+1,g=e/l,y=t/u,_=[],x=[],w=[],T=[];for(let S=0;S<m;S++){const O=S*y-s;for(let L=0;L<f;L++){const C=L*g-a;x.push(C,-O,0),w.push(0,0,1),T.push(L/l),T.push(1-S/u)}}for(let S=0;S<u;S++)for(let O=0;O<l;O++){const L=O+f*S,C=O+f*(S+1),P=O+1+f*(S+1),B=O+1+f*S;_.push(L,C,B),_.push(C,P,B)}this.setIndex(_),this.setAttribute("position",new rn(x,3)),this.setAttribute("normal",new rn(w,3)),this.setAttribute("uv",new rn(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ag(e.width,e.height,e.widthSegments,e.heightSegments)}}class S3 extends Nn{constructor(e=.5,t=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const l=[],u=[],f=[],m=[];let g=e;const y=(t-e)/r,_=new $,x=new it;for(let w=0;w<=r;w++){for(let T=0;T<=i;T++){const S=a+T/i*s;_.x=g*Math.cos(S),_.y=g*Math.sin(S),u.push(_.x,_.y,_.z),f.push(0,0,1),x.x=(_.x/t+1)/2,x.y=(_.y/t+1)/2,m.push(x.x,x.y)}g+=y}for(let w=0;w<r;w++){const T=w*(i+1);for(let S=0;S<i;S++){const O=S+T,L=O,C=O+i+1,P=O+i+2,B=O+1;l.push(L,C,B),l.push(C,P,B)}}this.setIndex(l),this.setAttribute("position",new rn(u,3)),this.setAttribute("normal",new rn(f,3)),this.setAttribute("uv",new rn(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S3(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class T3 extends Nn{constructor(e=new Cd([new it(0,.5),new it(-.5,-.5),new it(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],s=[];let l=0,u=0;if(Array.isArray(e)===!1)f(e);else for(let m=0;m<e.length;m++)f(e[m]),this.addGroup(l,u,m),l+=u,u=0;this.setIndex(i),this.setAttribute("position",new rn(r,3)),this.setAttribute("normal",new rn(a,3)),this.setAttribute("uv",new rn(s,2));function f(m){const g=r.length/3,y=m.extractPoints(t);let _=y.shape;const x=y.holes;Bl.isClockWise(_)===!1&&(_=_.reverse());for(let T=0,S=x.length;T<S;T++){const O=x[T];Bl.isClockWise(O)===!0&&(x[T]=O.reverse())}const w=Bl.triangulateShape(_,x);for(let T=0,S=x.length;T<S;T++){const O=x[T];_=_.concat(O)}for(let T=0,S=_.length;T<S;T++){const O=_[T];r.push(O.x,O.y,0),a.push(0,0,1),s.push(O.x,O.y)}for(let T=0,S=w.length;T<S;T++){const O=w[T],L=O[0]+g,C=O[1]+g,P=O[2]+g;i.push(L,C,P),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return UU(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=t[e.shapes[r]];i.push(s)}return new T3(i,e.curveSegments)}}function UU(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class z1 extends Nn{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,s=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(s+l,Math.PI);let f=0;const m=[],g=new $,y=new $,_=[],x=[],w=[],T=[];for(let S=0;S<=i;S++){const O=[],L=S/i;let C=0;S===0&&s===0?C=.5/t:S===i&&u===Math.PI&&(C=-.5/t);for(let P=0;P<=t;P++){const B=P/t;g.x=-e*Math.cos(r+B*a)*Math.sin(s+L*l),g.y=e*Math.cos(s+L*l),g.z=e*Math.sin(r+B*a)*Math.sin(s+L*l),x.push(g.x,g.y,g.z),y.copy(g).normalize(),w.push(y.x,y.y,y.z),T.push(B+C,1-L),O.push(f++)}m.push(O)}for(let S=0;S<i;S++)for(let O=0;O<t;O++){const L=m[S][O+1],C=m[S][O],P=m[S+1][O],B=m[S+1][O+1];(S!==0||s>0)&&_.push(L,C,B),(S!==i-1||u<Math.PI)&&_.push(C,P,B)}this.setIndex(_),this.setAttribute("position",new rn(x,3)),this.setAttribute("normal",new rn(w,3)),this.setAttribute("uv",new rn(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class E3 extends rh{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new E3(e.radius,e.detail)}}class M3 extends Nn{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],l=[],u=[],f=[],m=new $,g=new $,y=new $;for(let _=0;_<=i;_++)for(let x=0;x<=r;x++){const w=x/r*a,T=_/i*Math.PI*2;g.x=(e+t*Math.cos(T))*Math.cos(w),g.y=(e+t*Math.cos(T))*Math.sin(w),g.z=t*Math.sin(T),l.push(g.x,g.y,g.z),m.x=e*Math.cos(w),m.y=e*Math.sin(w),y.subVectors(g,m).normalize(),u.push(y.x,y.y,y.z),f.push(x/r),f.push(_/i)}for(let _=1;_<=i;_++)for(let x=1;x<=r;x++){const w=(r+1)*_+x-1,T=(r+1)*(_-1)+x-1,S=(r+1)*(_-1)+x,O=(r+1)*_+x;s.push(w,T,O),s.push(T,S,O)}this.setIndex(s),this.setAttribute("position",new rn(l,3)),this.setAttribute("normal",new rn(u,3)),this.setAttribute("uv",new rn(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new M3(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class w3 extends Nn{constructor(e=1,t=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const l=[],u=[],f=[],m=[],g=new $,y=new $,_=new $,x=new $,w=new $,T=new $,S=new $;for(let L=0;L<=i;++L){const C=L/i*a*Math.PI*2;O(C,a,s,e,_),O(C+.01,a,s,e,x),T.subVectors(x,_),S.addVectors(x,_),w.crossVectors(T,S),S.crossVectors(w,T),w.normalize(),S.normalize();for(let P=0;P<=r;++P){const B=P/r*Math.PI*2,j=-t*Math.cos(B),X=t*Math.sin(B);g.x=_.x+(j*S.x+X*w.x),g.y=_.y+(j*S.y+X*w.y),g.z=_.z+(j*S.z+X*w.z),u.push(g.x,g.y,g.z),y.subVectors(g,_).normalize(),f.push(y.x,y.y,y.z),m.push(L/i),m.push(P/r)}}for(let L=1;L<=i;L++)for(let C=1;C<=r;C++){const P=(r+1)*(L-1)+(C-1),B=(r+1)*L+(C-1),j=(r+1)*L+C,X=(r+1)*(L-1)+C;l.push(P,B,X),l.push(B,j,X)}this.setIndex(l),this.setAttribute("position",new rn(u,3)),this.setAttribute("normal",new rn(f,3)),this.setAttribute("uv",new rn(m,2));function O(L,C,P,B,j){const X=Math.cos(L),k=Math.sin(L),U=P/C*L,K=Math.cos(U);j.x=B*(2+K)*.5*X,j.y=B*(2+K)*k*.5,j.z=B*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w3(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class A3 extends Nn{constructor(e=new NE(new $(-1,-1,0),new $(-1,1,0),new $(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const l=new $,u=new $,f=new it;let m=new $;const g=[],y=[],_=[],x=[];w(),this.setIndex(x),this.setAttribute("position",new rn(g,3)),this.setAttribute("normal",new rn(y,3)),this.setAttribute("uv",new rn(_,2));function w(){for(let L=0;L<t;L++)T(L);T(a===!1?t:0),O(),S()}function T(L){m=e.getPointAt(L/t,m);const C=s.normals[L],P=s.binormals[L];for(let B=0;B<=r;B++){const j=B/r*Math.PI*2,X=Math.sin(j),k=-Math.cos(j);u.x=k*C.x+X*P.x,u.y=k*C.y+X*P.y,u.z=k*C.z+X*P.z,u.normalize(),y.push(u.x,u.y,u.z),l.x=m.x+i*u.x,l.y=m.y+i*u.y,l.z=m.z+i*u.z,g.push(l.x,l.y,l.z)}}function S(){for(let L=1;L<=t;L++)for(let C=1;C<=r;C++){const P=(r+1)*(L-1)+(C-1),B=(r+1)*L+(C-1),j=(r+1)*L+C,X=(r+1)*(L-1)+C;x.push(P,B,X),x.push(B,j,X)}}function O(){for(let L=0;L<=t;L++)for(let C=0;C<=r;C++)f.x=L/t,f.y=C/r,_.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new A3(new S_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class o5 extends Nn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new $,a=new $;if(e.index!==null){const s=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,m=u.length;f<m;++f){const g=u[f],y=g.start,_=g.count;for(let x=y,w=y+_;x<w;x+=3)for(let T=0;T<3;T++){const S=l.getX(x+T),O=l.getX(x+(T+1)%3);r.fromBufferAttribute(s,S),a.fromBufferAttribute(s,O),bw(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let l=0,u=s.count/3;l<u;l++)for(let f=0;f<3;f++){const m=3*l+f,g=3*l+(f+1)%3;r.fromBufferAttribute(s,m),a.fromBufferAttribute(s,g),bw(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new rn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function bw(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var xw=Object.freeze({__proto__:null,BoxGeometry:Kd,CapsuleGeometry:m3,CircleGeometry:g3,ConeGeometry:P1,CylinderGeometry:U1,DodecahedronGeometry:y3,EdgesGeometry:ZC,ExtrudeGeometry:_3,IcosahedronGeometry:b3,LatheGeometry:x3,OctahedronGeometry:B1,PlaneGeometry:ag,PolyhedronGeometry:rh,RingGeometry:S3,ShapeGeometry:T3,SphereGeometry:z1,TetrahedronGeometry:E3,TorusGeometry:M3,TorusKnotGeometry:w3,TubeGeometry:A3,WireframeGeometry:o5});class l5 extends aa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Pt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class u5 extends nl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class F1 extends aa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Pt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ya,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rl extends F1{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new it(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Vn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Pt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Pt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class c5 extends aa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Pt(16777215),this.specular=new Pt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ya,this.combine=O1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class f5 extends aa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class h5 extends aa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class d5 extends aa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ya,this.combine=O1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class OE extends aa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=RC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class DE extends aa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class p5 extends aa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class m5 extends sa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Td(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function g5(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function y5(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function HS(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,s=0;s!==i;++a){const l=t[a]*e;for(let u=0;u!==e;++u)r[s++]=n[l+u]}return r}function LE(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),t.push(s)),a=n[r++];while(a!==void 0)}function PU(n,e,t,i,r=30){const a=n.clone();a.name=e;const s=[];for(let u=0;u<a.tracks.length;++u){const f=a.tracks[u],m=f.getValueSize(),g=[],y=[];for(let _=0;_<f.times.length;++_){const x=f.times[_]*r;if(!(x<t||x>=i)){g.push(f.times[_]);for(let w=0;w<m;++w)y.push(f.values[_*m+w])}}g.length!==0&&(f.times=Td(g,f.times.constructor),f.values=Td(y,f.values.constructor),s.push(f))}a.tracks=s;let l=1/0;for(let u=0;u<a.tracks.length;++u)l>a.tracks[u].times[0]&&(l=a.tracks[u].times[0]);for(let u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*l);return a.resetDuration(),a}function BU(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let s=0;s<r;++s){const l=t.tracks[s],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const f=n.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===u});if(f===void 0)continue;let m=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let y=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);const x=l.times.length-1;let w;if(a<=l.times[0]){const S=m,O=g-m;w=l.values.slice(S,O)}else if(a>=l.times[x]){const S=x*g+m,O=S+g-m;w=l.values.slice(S,O)}else{const S=l.createInterpolant(),O=m,L=g-m;S.evaluate(a),w=S.resultBuffer.slice(O,L)}u==="quaternion"&&new An().fromArray(w).normalize().conjugate().toArray(w);const T=f.times.length;for(let S=0;S<T;++S){const O=S*_+y;if(u==="quaternion")An.multiplyQuaternionsFlat(f.values,O,w,0,f.values,O);else{const L=_-y*2;for(let C=0;C<L;++C)f.values[O+C]-=w[C]}}}return n.blendMode=hE,n}class zU{static convertArray(e,t){return Td(e,t)}static isTypedArray(e){return g5(e)}static getKeyframeOrder(e){return y5(e)}static sortedArray(e,t,i){return HS(e,t,i)}static flattenJSON(e,t,i,r){LE(e,t,i,r)}static subclip(e,t,i,r,a=30){return PU(e,t,i,r,a)}static makeClipAdditive(e,t=0,i=e,r=30){return BU(e,t,i,r)}}class sg{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(a=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=a)){const l=t[1];e<l&&(i=2,a=l);for(let u=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=a,a=t[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const l=i+s>>>1;e<t[l]?s=l:i=l+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=i[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class v5 extends sg{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:xd,endingEnd:xd}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,s=e+1,l=r[a],u=r[s];if(l===void 0)switch(this.getSettings_().endingStart){case Sd:a=e,l=2*t-i;break;case d1:a=r.length-2,l=t+r[a]-r[a+1];break;default:a=e,l=i}if(u===void 0)switch(this.getSettings_().endingEnd){case Sd:s=e,u=2*i-t;break;case d1:s=1,u=i+r[1]-r[0];break;default:s=e-1,u=t}const f=(i-t)*.5,m=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(u-i),this._offsetPrev=a*m,this._offsetNext=s*m}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,u=e*l,f=u-l,m=this._offsetPrev,g=this._offsetNext,y=this._weightPrev,_=this._weightNext,x=(i-t)/(r-t),w=x*x,T=w*x,S=-y*T+2*y*w-y*x,O=(1+y)*T+(-1.5-2*y)*w+(-.5+y)*x+1,L=(-1-_)*T+(1.5+_)*w+.5*x,C=_*T-_*w;for(let P=0;P!==l;++P)a[P]=S*s[m+P]+O*s[f+P]+L*s[u+P]+C*s[g+P];return a}}class IE extends sg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,u=e*l,f=u-l,m=(i-t)/(r-t),g=1-m;for(let y=0;y!==l;++y)a[y]=s[f+y]*g+s[u+y]*m;return a}}class _5 extends sg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class al{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Td(t,this.TimeBufferType),this.values=Td(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Td(e.times,Array),values:Td(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new _5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new IE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new v5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Vm:t=this.InterpolantFactoryMethodDiscrete;break;case Gm:t=this.InterpolantFactoryMethodLinear;break;case g2:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Vm;case this.InterpolantFactoryMethodLinear:return Gm;case this.InterpolantFactoryMethodSmooth:return g2}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const l=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*l,s*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let l=0;l!==a;l++){const u=i[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(s!==null&&s>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,s),e=!1;break}s=u}if(r!==void 0&&g5(r))for(let l=0,u=r.length;l!==u;++l){const f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===g2,a=e.length-1;let s=1;for(let l=1;l<a;++l){let u=!1;const f=e[l],m=e[l+1];if(f!==m&&(l!==1||f!==e[0]))if(r)u=!0;else{const g=l*i,y=g-i,_=g+i;for(let x=0;x!==i;++x){const w=t[g+x];if(w!==t[y+x]||w!==t[_+x]){u=!0;break}}}if(u){if(l!==s){e[s]=e[l];const g=l*i,y=s*i;for(let _=0;_!==i;++_)t[y+_]=t[g+_]}++s}}if(a>0){e[s]=e[a];for(let l=a*i,u=s*i,f=0;f!==i;++f)t[u+f]=t[l+f];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}al.prototype.ValueTypeName="";al.prototype.TimeBufferType=Float32Array;al.prototype.ValueBufferType=Float32Array;al.prototype.DefaultInterpolation=Gm;class Zd extends al{constructor(e,t,i){super(e,t,i)}}Zd.prototype.ValueTypeName="bool";Zd.prototype.ValueBufferType=Array;Zd.prototype.DefaultInterpolation=Vm;Zd.prototype.InterpolantFactoryMethodLinear=void 0;Zd.prototype.InterpolantFactoryMethodSmooth=void 0;class UE extends al{constructor(e,t,i,r){super(e,t,i,r)}}UE.prototype.ValueTypeName="color";class Ud extends al{constructor(e,t,i,r){super(e,t,i,r)}}Ud.prototype.ValueTypeName="number";class b5 extends sg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,u=(i-t)/(r-t);let f=e*l;for(let m=f+l;f!==m;f+=4)An.slerpFlat(a,0,s,f-l,s,f,u);return a}}class Pd extends al{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new b5(this.times,this.values,this.getValueSize(),e)}}Pd.prototype.ValueTypeName="quaternion";Pd.prototype.InterpolantFactoryMethodSmooth=void 0;class Qd extends al{constructor(e,t,i){super(e,t,i)}}Qd.prototype.ValueTypeName="string";Qd.prototype.ValueBufferType=Array;Qd.prototype.DefaultInterpolation=Vm;Qd.prototype.InterpolantFactoryMethodLinear=void 0;Qd.prototype.InterpolantFactoryMethodSmooth=void 0;class Bd extends al{constructor(e,t,i,r){super(e,t,i,r)}}Bd.prototype.ValueTypeName="vector";class $m{constructor(e="",t=-1,i=[],r=i3){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=wo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,l=i.length;s!==l;++s)t.push(kU(i[s]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=i.length;a!==s;++a)t.push(al.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,s=[];for(let l=0;l<a;l++){let u=[],f=[];u.push((l+a-1)%a,l,(l+1)%a),f.push(0,1,0);const m=y5(u);u=HS(u,1,m),f=HS(f,1,m),!r&&u[0]===0&&(u.push(a),f.push(f[0])),s.push(new Ud(".morphTargetInfluences["+t[l].name+"]",u,f).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const f=e[l],m=f.name.match(a);if(m&&m.length>1){const g=m[1];let y=r[g];y||(r[g]=y=[]),y.push(f)}}const s=[];for(const l in r)s.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(g,y,_,x,w){if(_.length!==0){const T=[],S=[];LE(_,T,S,x),T.length!==0&&w.push(new g(y,T,S))}},r=[],a=e.name||"default",s=e.fps||30,l=e.blendMode;let u=e.length||-1;const f=e.hierarchy||[];for(let g=0;g<f.length;g++){const y=f[g].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const _={};let x;for(x=0;x<y.length;x++)if(y[x].morphTargets)for(let w=0;w<y[x].morphTargets.length;w++)_[y[x].morphTargets[w]]=-1;for(const w in _){const T=[],S=[];for(let O=0;O!==y[x].morphTargets.length;++O){const L=y[x];T.push(L.time),S.push(L.morphTarget===w?1:0)}r.push(new Ud(".morphTargetInfluence["+w+"]",T,S))}u=_.length*s}else{const _=".bones["+t[g].name+"]";i(Bd,_+".position",y,"pos",r),i(Pd,_+".quaternion",y,"rot",r),i(Bd,_+".scale",y,"scl",r)}}return r.length===0?null:new this(a,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function FU(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ud;case"vector":case"vector2":case"vector3":case"vector4":return Bd;case"color":return UE;case"quaternion":return Pd;case"bool":case"boolean":return Zd;case"string":return Qd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function kU(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=FU(n.type);if(n.times===void 0){const t=[],i=[];LE(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Cu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class PE{constructor(e,t,i){const r=this;let a=!1,s=0,l=0,u;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){l++,a===!1&&r.onStart!==void 0&&r.onStart(m,s,l),a=!0},this.itemEnd=function(m){s++,r.onProgress!==void 0&&r.onProgress(m,s,l),s===l&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(m){r.onError!==void 0&&r.onError(m)},this.resolveURL=function(m){return u?u(m):m},this.setURLModifier=function(m){return u=m,this},this.addHandler=function(m,g){return f.push(m,g),this},this.removeHandler=function(m){const g=f.indexOf(m);return g!==-1&&f.splice(g,2),this},this.getHandler=function(m){for(let g=0,y=f.length;g<y;g+=2){const _=f[g],x=f[g+1];if(_.global&&(_.lastIndex=0),_.test(m))return x}return null}}}const x5=new PE;class Bs{constructor(e){this.manager=e!==void 0?e:x5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Bs.DEFAULT_MATERIAL_NAME="__DEFAULT";const gc={};class HU extends Error{constructor(e,t){super(e),this.response=t}}class Vl extends Bs{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Cu.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(gc[e]!==void 0){gc[e].push({onLoad:t,onProgress:i,onError:r});return}gc[e]=[],gc[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const m=gc[e],g=f.body.getReader(),y=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=y?parseInt(y):0,x=_!==0;let w=0;const T=new ReadableStream({start(S){O();function O(){g.read().then(({done:L,value:C})=>{if(L)S.close();else{w+=C.byteLength;const P=new ProgressEvent("progress",{lengthComputable:x,loaded:w,total:_});for(let B=0,j=m.length;B<j;B++){const X=m[B];X.onProgress&&X.onProgress(P)}S.enqueue(C),O()}},L=>{S.error(L)})}}});return new Response(T)}else throw new HU(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(m=>new DOMParser().parseFromString(m,l));case"json":return f.json();default:if(l==="")return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),y=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(y);return f.arrayBuffer().then(x=>_.decode(x))}}}).then(f=>{Cu.add(`file:${e}`,f);const m=gc[e];delete gc[e];for(let g=0,y=m.length;g<y;g++){const _=m[g];_.onLoad&&_.onLoad(f)}}).catch(f=>{const m=gc[e];if(m===void 0)throw this.manager.itemError(e),f;delete gc[e];for(let g=0,y=m.length;g<y;g++){const _=m[g];_.onError&&_.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class VU extends Bs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Vl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=$m.parse(e[i]);t.push(r)}return t}}class GU extends Bs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=[],l=new d3,u=new Vl(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(a.withCredentials);let f=0;function m(g){u.load(e[g],function(y){const _=a.parse(y,!0);s[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(l.minFilter=Tr),l.image=s,l.format=_.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let g=0,y=e.length;g<y;++g)m(g);else u.load(e,function(g){const y=a.parse(g,!0);if(y.isCubemap){const _=y.mipmaps.length/y.mipmapCount;for(let x=0;x<_;x++){s[x]={mipmaps:[]};for(let w=0;w<y.mipmapCount;w++)s[x].mipmaps.push(y.mipmaps[x*y.mipmapCount+w]),s[x].format=y.format,s[x].width=y.width,s[x].height=y.height}l.image=s}else l.image.width=y.width,l.image.height=y.height,l.mipmaps=y.mipmaps;y.mipmapCount===1&&(l.minFilter=Tr),l.format=y.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}const dm=new WeakMap;class Ym extends Bs{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Cu.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let g=dm.get(s);g===void 0&&(g=[],dm.set(s,g)),g.push({onLoad:t,onError:r})}return s}const l=y1("img");function u(){m(),t&&t(this);const g=dm.get(this)||[];for(let y=0;y<g.length;y++){const _=g[y];_.onLoad&&_.onLoad(this)}dm.delete(this),a.manager.itemEnd(e)}function f(g){m(),r&&r(g),Cu.remove(`image:${e}`);const y=dm.get(this)||[];for(let _=0;_<y.length;_++){const x=y[_];x.onError&&x.onError(g)}dm.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function m(){l.removeEventListener("load",u,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),Cu.add(`image:${e}`,l),a.manager.itemStart(e),l.src=e,l}}class jU extends Bs{constructor(e){super(e)}load(e,t,i,r){const a=new L1;a.colorSpace=Zr;const s=new Ym(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let l=0;function u(f){s.load(e[f],function(m){a.images[f]=m,l++,l===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let f=0;f<e.length;++f)u(f);return a}}class WU extends Bs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Iu,l=new Vl(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(a.withCredentials),l.load(e,function(u){let f;try{f=a.parse(u)}catch(m){if(r!==void 0)r(m);else{console.error(m);return}}f.image!==void 0?s.image=f.image:f.data!==void 0&&(s.image.width=f.width,s.image.height=f.height,s.image.data=f.data),s.wrapS=f.wrapS!==void 0?f.wrapS:Mo,s.wrapT=f.wrapT!==void 0?f.wrapT:Mo,s.magFilter=f.magFilter!==void 0?f.magFilter:Tr,s.minFilter=f.minFilter!==void 0?f.minFilter:Tr,s.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(s.colorSpace=f.colorSpace),f.flipY!==void 0&&(s.flipY=f.flipY),f.format!==void 0&&(s.format=f.format),f.type!==void 0&&(s.type=f.type),f.mipmaps!==void 0&&(s.mipmaps=f.mipmaps,s.minFilter=Jo),f.mipmapCount===1&&(s.minFilter=Tr),f.generateMipmaps!==void 0&&(s.generateMipmaps=f.generateMipmaps),s.needsUpdate=!0,t&&t(s,f)},i,r),s}}class S5 extends Bs{constructor(e){super(e)}load(e,t,i,r){const a=new Mr,s=new Ym(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(l){a.image=l,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class ah extends ii{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Pt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class T5 extends ah{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Pt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const cx=new sn,Sw=new $,Tw=new $;class BE{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new it(512,512),this.mapType=tl,this.map=null,this.mapPass=null,this.matrix=new sn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new rg,this._frameExtents=new it(1,1),this._viewportCount=1,this._viewports=[new Di(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Sw.setFromMatrixPosition(e.matrixWorld),t.position.copy(Sw),Tw.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Tw),t.updateMatrixWorld(),cx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(cx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class XU extends BE{constructor(){super(new Wr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=jm*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class zE extends ah{constructor(e,t,i=0,r=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.target=new ii,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new XU}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Ew=new sn,L0=new $,fx=new $;class qU extends BE{constructor(){super(new Wr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new it(4,2),this._viewportCount=6,this._viewports=[new Di(2,1,1,1),new Di(0,1,1,1),new Di(3,1,1,1),new Di(1,1,1,1),new Di(3,0,1,1),new Di(1,0,1,1)],this._cubeDirections=[new $(1,0,0),new $(-1,0,0),new $(0,0,1),new $(0,0,-1),new $(0,1,0),new $(0,-1,0)],this._cubeUps=[new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,0,1),new $(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),L0.setFromMatrixPosition(e.matrixWorld),i.position.copy(L0),fx.copy(i.position),fx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(fx),i.updateMatrixWorld(),r.makeTranslation(-L0.x,-L0.y,-L0.z),Ew.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ew)}}class FE extends ah{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new qU}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Rc extends s3{constructor(e=-1,t=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,l=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,s=a+f*this.view.width,l-=m*this.view.offsetY,u=l-m*this.view.height}this.projectionMatrix.makeOrthographic(a,s,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class $U extends BE{constructor(){super(new Rc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class kE extends ah{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.target=new ii,this.shadow=new $U}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class E5 extends ah{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class M5 extends ah{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class w5{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*r)),t.addScaledVector(s[5],1.092548*(r*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(i*a)),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*r),t.addScaledVector(s[5],2*.429043*r*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*i*a),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class A5 extends ah{constructor(e=new w5,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class R3 extends Bs{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,s=new Vl(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Pt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new Pt().setHex(s.value);break;case"v2":r.uniforms[a].value=new it().fromArray(s.value);break;case"v3":r.uniforms[a].value=new $().fromArray(s.value);break;case"v4":r.uniforms[a].value=new Di().fromArray(s.value);break;case"m3":r.uniforms[a].value=new Sn().fromArray(s.value);break;case"m4":r.uniforms[a].value=new sn().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new it().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new it().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return R3.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:l5,SpriteMaterial:xE,RawShaderMaterial:u5,ShaderMaterial:nl,PointsMaterial:h3,MeshPhysicalMaterial:rl,MeshStandardMaterial:F1,MeshPhongMaterial:c5,MeshToonMaterial:f5,MeshNormalMaterial:h5,MeshLambertMaterial:d5,MeshDepthMaterial:OE,MeshDistanceMaterial:DE,MeshBasicMaterial:Is,MeshMatcapMaterial:p5,LineDashedMaterial:m5,LineBasicMaterial:sa,Material:aa};return new t[e]}}class jf{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class R5 extends Nn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class N5 extends Bs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Vl(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(_,x){if(t[x]!==void 0)return t[x];const T=_.interleavedBuffers[x],S=a(_,T.buffer),O=Am(T.type,S),L=new I1(O,T.stride);return L.uuid=T.uuid,t[x]=L,L}function a(_,x){if(i[x]!==void 0)return i[x];const T=_.arrayBuffers[x],S=new Uint32Array(T).buffer;return i[x]=S,S}const s=e.isInstancedBufferGeometry?new R5:new Nn,l=e.data.index;if(l!==void 0){const _=Am(l.type,l.array);s.setIndex(new Gn(_,1))}const u=e.data.attributes;for(const _ in u){const x=u[_];let w;if(x.isInterleavedBufferAttribute){const T=r(e.data,x.data);w=new Zf(T,x.itemSize,x.offset,x.normalized)}else{const T=Am(x.type,x.array),S=x.isInstancedBufferAttribute?Ld:Gn;w=new S(T,x.itemSize,x.normalized)}x.name!==void 0&&(w.name=x.name),x.usage!==void 0&&w.setUsage(x.usage),s.setAttribute(_,w)}const f=e.data.morphAttributes;if(f)for(const _ in f){const x=f[_],w=[];for(let T=0,S=x.length;T<S;T++){const O=x[T];let L;if(O.isInterleavedBufferAttribute){const C=r(e.data,O.data);L=new Zf(C,O.itemSize,O.offset,O.normalized)}else{const C=Am(O.type,O.array);L=new Gn(C,O.itemSize,O.normalized)}O.name!==void 0&&(L.name=O.name),w.push(L)}s.morphAttributes[_]=w}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let _=0,x=g.length;_!==x;++_){const w=g[_];s.addGroup(w.start,w.count,w.materialIndex)}const y=e.data.boundingSphere;return y!==void 0&&(s.boundingSphere=new Da().fromJSON(y)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class YU extends Bs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=this.path===""?jf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const l=new Vl(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let f=null;try{f=JSON.parse(u)}catch(g){r!==void 0&&r(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const m=f.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?jf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new Vl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),l=JSON.parse(s),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,s),u=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,a,u,l,i),m=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,m),this.bindLightTargets(f),t!==void 0){let g=!1;for(const y in s)if(s[y].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,s),u=this.parseObject(e.object,r,l,s,t),f=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,f),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new Cd().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const l=new ig().fromJSON(e[a],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new N5;for(let a=0,s=e.length;a<s;a++){let l;const u=e[a];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(u);break;default:u.type in xw?l=xw[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),i[u.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new R3;a.setTextures(t);for(let s=0,l=e.length;s<l;s++){const u=e[s];i[u.uuid]===void 0&&(i[u.uuid]=a.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=$m.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function s(u){return i.manager.itemStart(u),a.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const f=u,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return s(m)}else return u.data?{data:Am(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new PE(t);a=new Ym(u),a.setCrossOrigin(this.crossOrigin);for(let f=0,m=e.length;f<m;f++){const g=e[f],y=g.url;if(Array.isArray(y)){const _=[];for(let x=0,w=y.length;x<w;x++){const T=y[x],S=l(T);S!==null&&(S instanceof HTMLImageElement?_.push(S):_.push(new Iu(S.data,S.width,S.height)))}r[g.uuid]=new Vf(_)}else{const _=l(g.url);r[g.uuid]=new Vf(_)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(s){if(typeof s=="string"){const l=s,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(u)}else return s.data?{data:Am(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new Ym(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,l=e.length;s<l;s++){const u=e[s],f=u.url;if(Array.isArray(f)){const m=[];for(let g=0,y=f.length;g<y;g++){const _=f[g],x=await a(_);x!==null&&(x instanceof HTMLImageElement?m.push(x):m.push(new Iu(x.data,x.width,x.height)))}i[u.uuid]=new Vf(m)}else{const m=await a(u.url);i[u.uuid]=new Vf(m)}}}return i}parseTextures(e,t){function i(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const l=e[a];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=t[l.image],f=u.data;let m;Array.isArray(f)?(m=new L1,f.length===6&&(m.needsUpdate=!0)):(f&&f.data?m=new Iu:m=new Mr,f&&(m.needsUpdate=!0)),m.source=u,m.uuid=l.uuid,l.name!==void 0&&(m.name=l.name),l.mapping!==void 0&&(m.mapping=i(l.mapping,KU)),l.channel!==void 0&&(m.channel=l.channel),l.offset!==void 0&&m.offset.fromArray(l.offset),l.repeat!==void 0&&m.repeat.fromArray(l.repeat),l.center!==void 0&&m.center.fromArray(l.center),l.rotation!==void 0&&(m.rotation=l.rotation),l.wrap!==void 0&&(m.wrapS=i(l.wrap[0],Mw),m.wrapT=i(l.wrap[1],Mw)),l.format!==void 0&&(m.format=l.format),l.internalFormat!==void 0&&(m.internalFormat=l.internalFormat),l.type!==void 0&&(m.type=l.type),l.colorSpace!==void 0&&(m.colorSpace=l.colorSpace),l.minFilter!==void 0&&(m.minFilter=i(l.minFilter,ww)),l.magFilter!==void 0&&(m.magFilter=i(l.magFilter,ww)),l.anisotropy!==void 0&&(m.anisotropy=l.anisotropy),l.flipY!==void 0&&(m.flipY=l.flipY),l.generateMipmaps!==void 0&&(m.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(m.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(m.compareFunction=l.compareFunction),l.userData!==void 0&&(m.userData=l.userData),r[l.uuid]=m}return r}parseObject(e,t,i,r,a){let s;function l(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function u(y){if(y!==void 0){if(Array.isArray(y)){const _=[];for(let x=0,w=y.length;x<w;x++){const T=y[x];i[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),_.push(i[T])}return _}return i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),i[y]}}function f(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let m,g;switch(e.type){case"Scene":s=new bE,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Pt(e.background):s.background=f(e.background)),e.environment!==void 0&&(s.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new l3(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new o3(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Wr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Rc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new E5(e.color,e.intensity);break;case"DirectionalLight":s=new kE(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new FE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new M5(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new zE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new T5(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new A5().fromJSON(e);break;case"SkinnedMesh":m=l(e.geometry),g=u(e.material),s=new u3(m,g),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":m=l(e.geometry),g=u(e.material),s=new Br(m,g);break;case"InstancedMesh":m=l(e.geometry),g=u(e.material);const y=e.count,_=e.instanceMatrix,x=e.instanceColor;s=new SE(m,g,y),s.instanceMatrix=new Ld(new Float32Array(_.array),16),x!==void 0&&(s.instanceColor=new Ld(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":m=l(e.geometry),g=u(e.material),s=new YC(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),s.geometry=m,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(w=>{let T=null,S=null;return w.boundingBox!==void 0&&(T=new qa().fromJSON(w.boundingBox)),w.boundingSphere!==void 0&&(S=new Da().fromJSON(w.boundingSphere)),{...w,boundingBox:T,boundingSphere:S}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=f(e.matricesTexture.uuid),s._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new Da().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new qa().fromJSON(e.boundingBox));break;case"LOD":s=new $C;break;case"Line":s=new zu(l(e.geometry),u(e.material));break;case"LineLoop":s=new TE(l(e.geometry),u(e.material));break;case"LineSegments":s=new ro(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":s=new EE(l(e.geometry),u(e.material));break;case"Sprite":s=new qC(u(e.material));break;case"Group":s=new Us;break;case"Bone":s=new c3;break;default:s=new ii}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let _=0;_<y.length;_++)s.add(this.parseObject(y[_],t,i,r,a))}if(e.animations!==void 0){const y=e.animations;for(let _=0;_<y.length;_++){const x=y[_];s.animations.push(a[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const y=e.levels;for(let _=0;_<y.length;_++){const x=y[_],w=s.getObjectByProperty("uuid",x.object);w!==void 0&&s.addLevel(w,x.distance,x.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new ii}})}}const KU={UVMapping:Y_,CubeReflectionMapping:Nc,CubeRefractionMapping:Yf,EquirectangularReflectionMapping:f1,EquirectangularRefractionMapping:h1,CubeUVReflectionMapping:ng},Mw={RepeatWrapping:Kf,ClampToEdgeWrapping:Mo,MirroredRepeatWrapping:Bm},ww={NearestFilter:_a,NearestMipmapNearestFilter:K_,NearestMipmapLinearFilter:bd,LinearFilter:Tr,LinearMipmapNearestFilter:Cm,LinearMipmapLinearFilter:Jo},hx=new WeakMap;class C5 extends Bs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Cu.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(f=>{if(hx.has(s)===!0)r&&r(hx.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(f),a.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return Cu.add(`image-bitmap:${e}`,f),t&&t(f),a.manager.itemEnd(e),f}).catch(function(f){r&&r(f),hx.set(u,f),Cu.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Cu.add(`image-bitmap:${e}`,u),a.manager.itemStart(e)}}let Wv;class HE{static getContext(){return Wv===void 0&&(Wv=new(window.AudioContext||window.webkitAudioContext)),Wv}static setContext(e){Wv=e}}class ZU extends Bs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Vl(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(u){try{const f=u.slice(0);HE.getContext().decodeAudioData(f,function(g){t(g)}).catch(l)}catch(f){l(f)}},i,r);function l(u){r?r(u):console.error(u),a.manager.itemError(e)}}}const Aw=new sn,Rw=new sn,Jh=new sn;class QU{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Wr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Wr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Jh.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,s=t.near*Math.tan(Nd*t.fov*.5)/t.zoom;let l,u;Rw.elements[12]=-r,Aw.elements[12]=r,l=-s*t.aspect+a,u=s*t.aspect+a,Jh.elements[0]=2*t.near/(u-l),Jh.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(Jh),l=-s*t.aspect-a,u=s*t.aspect-a,Jh.elements[0]=2*t.near/(u-l),Jh.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(Jh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Rw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Aw)}}class O5 extends Wr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class VE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const ed=new $,dx=new An,JU=new $,td=new $,nd=new $;class eP extends ii{constructor(){super(),this.type="AudioListener",this.context=HE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new VE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ed,dx,JU),td.set(0,0,-1).applyQuaternion(dx),nd.set(0,1,0).applyQuaternion(dx),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ed.x,i),t.positionY.linearRampToValueAtTime(ed.y,i),t.positionZ.linearRampToValueAtTime(ed.z,i),t.forwardX.linearRampToValueAtTime(td.x,i),t.forwardY.linearRampToValueAtTime(td.y,i),t.forwardZ.linearRampToValueAtTime(td.z,i),t.upX.linearRampToValueAtTime(nd.x,i),t.upY.linearRampToValueAtTime(nd.y,i),t.upZ.linearRampToValueAtTime(nd.z,i)}else t.setPosition(ed.x,ed.y,ed.z),t.setOrientation(td.x,td.y,td.z,nd.x,nd.y,nd.z)}}class D5 extends ii{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const id=new $,Nw=new An,tP=new $,rd=new $;class nP extends D5{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(id,Nw,tP),rd.set(0,0,1).applyQuaternion(Nw);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(id.x,i),t.positionY.linearRampToValueAtTime(id.y,i),t.positionZ.linearRampToValueAtTime(id.z,i),t.orientationX.linearRampToValueAtTime(rd.x,i),t.orientationY.linearRampToValueAtTime(rd.y,i),t.orientationZ.linearRampToValueAtTime(rd.z,i)}else t.setPosition(id.x,id.y,id.z),t.setOrientation(rd.x,rd.y,rd.z)}}class iP{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class L5{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,s;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let l=0;l!==r;++l)i[a+l]=i[l];s=t}else{s+=t;const l=t/s;this._mixBufferRegion(i,a,0,l,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-a,t)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,f=t+t;u!==f;++u)if(i[u]!==i[u+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,s=r;a!==s;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){An.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const s=this._workIndex*a;An.multiplyQuaternionsFlat(e,s,e,t,e,i),An.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,a){const s=1-r;for(let l=0;l!==a;++l){const u=t+l;e[u]=e[u]*s+e[i+l]*r}}_lerpAdditive(e,t,i,r,a){for(let s=0;s!==a;++s){const l=t+s;e[l]=e[l]+e[i+s]*r}}}const GE="\\[\\]\\.:\\/",rP=new RegExp("["+GE+"]","g"),jE="[^"+GE+"]",aP="[^"+GE.replace("\\.","")+"]",sP=/((?:WC+[\/:])*)/.source.replace("WC",jE),oP=/(WCOD+)?/.source.replace("WCOD",aP),lP=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",jE),uP=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",jE),cP=new RegExp("^"+sP+oP+lP+uP+"$"),fP=["material","materials","bones","map"];class hP{constructor(e,t,i){const r=i||Ri.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ri{constructor(e,t,i){this.path=t,this.parsedPath=i||Ri.parseTrackName(t),this.node=Ri.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ri.Composite(e,t,i):new Ri(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(rP,"")}static parseTrackName(e){const t=cP.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);fP.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const l=a[s];if(l.name===t||l.uuid===t)return l;const u=i(l.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=Ri.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===f){f=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ri.Composite=hP;Ri.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ri.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ri.prototype.GetterByBindingType=[Ri.prototype._getValue_direct,Ri.prototype._getValue_array,Ri.prototype._getValue_arrayElement,Ri.prototype._getValue_toArray];Ri.prototype.SetterByBindingTypeAndVersioning=[[Ri.prototype._setValue_direct,Ri.prototype._setValue_direct_setNeedsUpdate,Ri.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ri.prototype._setValue_array,Ri.prototype._setValue_array_setNeedsUpdate,Ri.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ri.prototype._setValue_arrayElement,Ri.prototype._setValue_arrayElement_setNeedsUpdate,Ri.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ri.prototype._setValue_fromArray,Ri.prototype._setValue_fromArray_setNeedsUpdate,Ri.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class dP{constructor(){this.isAnimationObjectGroup=!0,this.uuid=wo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let l,u=e.length,f=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const y=arguments[m],_=y.uuid;let x=t[_];if(x===void 0){x=u++,t[_]=x,e.push(y);for(let w=0,T=s;w!==T;++w)a[w].push(new Ri(y,i[w],r[w]))}else if(x<f){l=e[x];const w=--f,T=e[w];t[T.uuid]=x,e[x]=T,t[_]=w,e[w]=y;for(let S=0,O=s;S!==O;++S){const L=a[S],C=L[w];let P=L[x];L[x]=C,P===void 0&&(P=new Ri(y,i[S],r[S])),L[w]=P}}else e[x]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,l=arguments.length;s!==l;++s){const u=arguments[s],f=u.uuid,m=t[f];if(m!==void 0&&m>=a){const g=a++,y=e[g];t[y.uuid]=m,e[m]=y,t[f]=g,e[g]=u;for(let _=0,x=r;_!==x;++_){const w=i[_],T=w[g],S=w[m];w[m]=T,w[g]=S}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let l=0,u=arguments.length;l!==u;++l){const f=arguments[l],m=f.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<a){const y=--a,_=e[y],x=--s,w=e[x];t[_.uuid]=g,e[g]=_,t[w.uuid]=y,e[y]=w,e.pop();for(let T=0,S=r;T!==S;++T){const O=i[T],L=O[y],C=O[x];O[g]=L,O[y]=C,O.pop()}}else{const y=--s,_=e[y];y>0&&(t[_.uuid]=g),e[g]=_,e.pop();for(let x=0,w=r;x!==w;++x){const T=i[x];T[g]=T[y],T.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,l=this._parsedPaths,u=this._objects,f=u.length,m=this.nCachedObjects_,g=new Array(f);r=a.length,i[e]=r,s.push(e),l.push(t),a.push(g);for(let y=m,_=u.length;y!==_;++y){const x=u[y];g[y]=new Ri(x,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length-1,u=s[l],f=e[l];t[f]=i,s[i]=u,s.pop(),a[i]=a[l],a.pop(),r[i]=r[l],r.pop()}}}class I5{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,s=a.length,l=new Array(s),u={endingStart:xd,endingEnd:xd};for(let f=0;f!==s;++f){const m=a[f].createInterpolant(null);l[f]=m,m.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=MC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,l=r/a;e.warp(1,s,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,s=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,f=l.sampleValues;return u[0]=a,u[1]=a+i,f[0]=e/s,f[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const u=(e-a)*i;u<0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);const s=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case hE:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(s),f[m].accumulateAdditive(l);break;case i3:default:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(s),f[m].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===wC;if(e===0)return a===-1?r:s&&(a&1)===1?t-r:r;if(i===EC){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,a+=Math.abs(l);const u=this.repetitions-a;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const f=e<0;this._setEndings(f,!f,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(s&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Sd,r.endingEnd=Sd):(e?r.endingStart=this.zeroSlopeAtStart?Sd:xd:r.endingStart=d1,t?r.endingEnd=this.zeroSlopeAtEnd?Sd:xd:r.endingEnd=d1)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const l=s.parameterPositions,u=s.sampleValues;return l[0]=a,u[0]=t,l[1]=a+e,u[1]=i,this}}const pP=new Float32Array(1);class mP extends Fu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,l=e._interpolants,u=i.uuid,f=this._bindingsByRootAndName;let m=f[u];m===void 0&&(m={},f[u]=m);for(let g=0;g!==a;++g){const y=r[g],_=y.name;let x=m[_];if(x!==void 0)++x.referenceCount,s[g]=x;else{if(x=s[g],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,u,_));continue}const w=t&&t._propertyBindings[g].binding.parsedPath;x=new L5(Ri.create(i,_,w),y.ValueTypeName,y.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,u,_),s[g]=x}l[g].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const l=s.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,l=s[a],u=l.knownActions,f=u[u.length-1],m=e._byClipCacheIndex;f._byClipCacheIndex=m,u[m]=f,u.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,y=(e._localRoot||this._root).uuid;delete g[y],u.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,l=s[r],u=t[t.length-1],f=e._cacheIndex;u._cacheIndex=f,t[f]=u,t.pop(),delete l[a],Object.keys(l).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new IE(new Float32Array(2),new Float32Array(2),1,pP),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let s=typeof e=="string"?$m.findByName(r,e):e;const l=s!==null?s.uuid:e,u=this._actionsByClip[l];let f=null;if(i===void 0&&(s!==null?i=s.blendMode:i=i3),u!==void 0){const g=u.actionByRoot[a];if(g!==void 0&&g.blendMode===i)return g;f=u.knownActions[0],s===null&&(s=f._clip)}if(s===null)return null;const m=new I5(this,s,t,i);return this._bindAction(m,f),this._addInactiveAction(m,l,a),m}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?$m.findByName(i,e):e,s=a?a.uuid:e,l=this._actionsByClip[s];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,a,s);const l=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)l[f].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let l=0,u=s.length;l!==u;++l){const f=s[l];this._deactivateAction(f);const m=f._cacheIndex,g=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const l=i[s].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const s in a){const l=a[s];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class gP extends gE{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new a3(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class WE{constructor(e){this.value=e}clone(){return new WE(this.value.clone===void 0?this.value:this.value.clone())}}let yP=0;class vP extends Fu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:yP++}),this.name="",this.usage=m1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class _P extends I1{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class VS{constructor(e,t,i,r,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Cw=new sn;class U5{constructor(e,t,i=0,r=1/0){this.ray=new Yd(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Wm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Cw.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Cw),this}intersectObject(e,t=!0,i=[]){return GS(e,this,i,t),i.sort(Ow),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)GS(e[r],this,i,t);return i.sort(Ow),i}}function Ow(n,e){return n.distance-e.distance}function GS(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let s=0,l=a.length;s<l;s++)GS(a[s],e,t,!0)}}class jS{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Vn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Vn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class bP{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class XE{constructor(e,t,i,r){XE.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const Dw=new it;class xP{constructor(e=new it(1/0,1/0),t=new it(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Dw.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Dw).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Lw=new $,Xv=new $;class SP{constructor(e=new $,t=new $){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Lw.subVectors(e,this.start),Xv.subVectors(this.end,this.start);const i=Xv.dot(Xv);let a=Xv.dot(Lw)/i;return t&&(a=Vn(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Iw=new $;class TP extends ii{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Nn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,l=1,u=32;s<u;s++,l++){const f=s/u*Math.PI*2,m=l/u*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new rn(r,3));const a=new sa({fog:!1,toneMapped:!1});this.cone=new ro(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Iw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Iw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Uf=new $,qv=new sn,px=new sn;class EP extends ro{constructor(e){const t=P5(e),i=new Nn,r=[],a=[],s=new Pt(0,0,1),l=new Pt(0,1,0);for(let f=0;f<t.length;f++){const m=t[f];m.parent&&m.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(s.r,s.g,s.b),a.push(l.r,l.g,l.b))}i.setAttribute("position",new rn(r,3)),i.setAttribute("color",new rn(a,3));const u=new sa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");px.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const l=t[a];l.parent&&l.parent.isBone&&(qv.multiplyMatrices(px,l.matrixWorld),Uf.setFromMatrixPosition(qv),r.setXYZ(s,Uf.x,Uf.y,Uf.z),qv.multiplyMatrices(px,l.parent.matrixWorld),Uf.setFromMatrixPosition(qv),r.setXYZ(s+1,Uf.x,Uf.y,Uf.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function P5(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...P5(n.children[t]));return e}class MP extends Br{constructor(e,t,i){const r=new z1(t,4,2),a=new Is({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const wP=new $,Uw=new Pt,Pw=new Pt;class AP extends ii{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new B1(t);r.rotateY(Math.PI*.5),this.material=new Is({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new Gn(s,3)),this.add(new Br(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Uw.copy(this.light.color),Pw.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?Uw:Pw;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(wP.setFromMatrixPosition(this.light.matrixWorld).negate())}}class RP extends ro{constructor(e=10,t=10,i=4473924,r=8947848){i=new Pt(i),r=new Pt(r);const a=t/2,s=e/t,l=e/2,u=[],f=[];for(let y=0,_=0,x=-l;y<=t;y++,x+=s){u.push(-l,0,x,l,0,x),u.push(x,0,-l,x,0,l);const w=y===a?i:r;w.toArray(f,_),_+=3,w.toArray(f,_),_+=3,w.toArray(f,_),_+=3,w.toArray(f,_),_+=3}const m=new Nn;m.setAttribute("position",new rn(u,3)),m.setAttribute("color",new rn(f,3));const g=new sa({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class NP extends ro{constructor(e=10,t=16,i=8,r=64,a=4473924,s=8947848){a=new Pt(a),s=new Pt(s);const l=[],u=[];if(t>1)for(let g=0;g<t;g++){const y=g/t*(Math.PI*2),_=Math.sin(y)*e,x=Math.cos(y)*e;l.push(0,0,0),l.push(_,0,x);const w=g&1?a:s;u.push(w.r,w.g,w.b),u.push(w.r,w.g,w.b)}for(let g=0;g<i;g++){const y=g&1?a:s,_=e-e/i*g;for(let x=0;x<r;x++){let w=x/r*(Math.PI*2),T=Math.sin(w)*_,S=Math.cos(w)*_;l.push(T,0,S),u.push(y.r,y.g,y.b),w=(x+1)/r*(Math.PI*2),T=Math.sin(w)*_,S=Math.cos(w)*_,l.push(T,0,S),u.push(y.r,y.g,y.b)}}const f=new Nn;f.setAttribute("position",new rn(l,3)),f.setAttribute("color",new rn(u,3));const m=new sa({vertexColors:!0,toneMapped:!1});super(f,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Bw=new $,$v=new $,zw=new $;class CP extends ii{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Nn;r.setAttribute("position",new rn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new sa({fog:!1,toneMapped:!1});this.lightPlane=new zu(r,a),this.add(this.lightPlane),r=new Nn,r.setAttribute("position",new rn([0,0,0,0,0,1],3)),this.targetLine=new zu(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Bw.setFromMatrixPosition(this.light.matrixWorld),$v.setFromMatrixPosition(this.light.target.matrixWorld),zw.subVectors($v,Bw),this.lightPlane.lookAt($v),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt($v),this.targetLine.scale.z=zw.length()}}const Yv=new $,jr=new s3;class OP extends ro{constructor(e){const t=new Nn,i=new sa({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(x,w){u(x),u(w)}function u(x){r.push(0,0,0),a.push(0,0,0),s[x]===void 0&&(s[x]=[]),s[x].push(r.length/3-1)}t.setAttribute("position",new rn(r,3)),t.setAttribute("color",new rn(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const f=new Pt(16755200),m=new Pt(16711680),g=new Pt(43775),y=new Pt(16777215),_=new Pt(3355443);this.setColors(f,m,g,y,_)}setColors(e,t,i,r,a){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,a.r,a.g,a.b),l.setXYZ(41,a.r,a.g,a.b),l.setXYZ(42,a.r,a.g,a.b),l.setXYZ(43,a.r,a.g,a.b),l.setXYZ(44,a.r,a.g,a.b),l.setXYZ(45,a.r,a.g,a.b),l.setXYZ(46,a.r,a.g,a.b),l.setXYZ(47,a.r,a.g,a.b),l.setXYZ(48,a.r,a.g,a.b),l.setXYZ(49,a.r,a.g,a.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;jr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const a=this.camera.coordinateSystem===el?-1:0;Kr("c",t,e,jr,0,0,a),Kr("t",t,e,jr,0,0,1),Kr("n1",t,e,jr,-i,-r,a),Kr("n2",t,e,jr,i,-r,a),Kr("n3",t,e,jr,-i,r,a),Kr("n4",t,e,jr,i,r,a),Kr("f1",t,e,jr,-i,-r,1),Kr("f2",t,e,jr,i,-r,1),Kr("f3",t,e,jr,-i,r,1),Kr("f4",t,e,jr,i,r,1),Kr("u1",t,e,jr,i*.7,r*1.1,a),Kr("u2",t,e,jr,-i*.7,r*1.1,a),Kr("u3",t,e,jr,0,r*2,a),Kr("cf1",t,e,jr,-i,0,1),Kr("cf2",t,e,jr,i,0,1),Kr("cf3",t,e,jr,0,-r,1),Kr("cf4",t,e,jr,0,r,1),Kr("cn1",t,e,jr,-i,0,a),Kr("cn2",t,e,jr,i,0,a),Kr("cn3",t,e,jr,0,-r,a),Kr("cn4",t,e,jr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Kr(n,e,t,i,r,a,s){Yv.set(r,a,s).unproject(i);const l=e[n];if(l!==void 0){const u=t.getAttribute("position");for(let f=0,m=l.length;f<m;f++)u.setXYZ(l[f],Yv.x,Yv.y,Yv.z)}}const Kv=new qa;class DP extends ro{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new Nn;a.setIndex(new Gn(i,1)),a.setAttribute("position",new Gn(r,3)),super(a,new sa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Kv.setFromObject(this.object),Kv.isEmpty())return;const e=Kv.min,t=Kv.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class LP extends ro{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Nn;a.setIndex(new Gn(i,1)),a.setAttribute("position",new rn(r,3)),super(a,new sa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class IP extends zu{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Nn;s.setAttribute("position",new rn(a,3)),s.computeBoundingSphere(),super(s,new sa({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Nn;u.setAttribute("position",new rn(l,3)),u.computeBoundingSphere(),this.add(new Br(u,new Is({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Fw=new $;let Zv,mx;class UP extends ii{constructor(e=new $(0,0,1),t=new $(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",Zv===void 0&&(Zv=new Nn,Zv.setAttribute("position",new rn([0,0,0,0,1,0],3)),mx=new P1(.5,1,5,1),mx.translate(0,-.5,0)),this.position.copy(t),this.line=new zu(Zv,new sa({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Br(mx,new Is({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Fw.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Fw,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class B5 extends ro{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Nn;r.setAttribute("position",new rn(t,3)),r.setAttribute("color",new rn(i,3));const a=new sa({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new Pt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class PP{constructor(){this.type="ShapePath",this.color=new Pt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new T_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,s){return this.currentPath.bezierCurveTo(e,t,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const O=[];for(let L=0,C=S.length;L<C;L++){const P=S[L],B=new Cd;B.curves=P.curves,O.push(B)}return O}function i(S,O){const L=O.length;let C=!1;for(let P=L-1,B=0;B<L;P=B++){let j=O[P],X=O[B],k=X.x-j.x,U=X.y-j.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(j=O[B],k=-k,X=O[P],U=-U),S.y<j.y||S.y>X.y)continue;if(S.y===j.y){if(S.x===j.x)return!0}else{const K=U*(S.x-j.x)-k*(S.y-j.y);if(K===0)return!0;if(K<0)continue;C=!C}}else{if(S.y!==j.y)continue;if(X.x<=S.x&&S.x<=j.x||j.x<=S.x&&S.x<=X.x)return!0}}return C}const r=Bl.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,l,u;const f=[];if(a.length===1)return l=a[0],u=new Cd,u.curves=l.curves,f.push(u),f;let m=!r(a[0].getPoints());m=e?!m:m;const g=[],y=[];let _=[],x=0,w;y[x]=void 0,_[x]=[];for(let S=0,O=a.length;S<O;S++)l=a[S],w=l.getPoints(),s=r(w),s=e?!s:s,s?(!m&&y[x]&&x++,y[x]={s:new Cd,p:w},y[x].s.curves=l.curves,m&&x++,_[x]=[]):_[x].push({h:l,p:w[0]});if(!y[0])return t(a);if(y.length>1){let S=!1,O=0;for(let L=0,C=y.length;L<C;L++)g[L]=[];for(let L=0,C=y.length;L<C;L++){const P=_[L];for(let B=0;B<P.length;B++){const j=P[B];let X=!0;for(let k=0;k<y.length;k++)i(j.p,y[k].p)&&(L!==k&&O++,X?(X=!1,g[k].push(j)):S=!0);X&&g[L].push(j)}}O>0&&S===!1&&(_=g)}let T;for(let S=0,O=y.length;S<O;S++){u=y[S].s,f.push(u),T=_[S];for(let L=0,C=T.length;L<C;L++)u.holes.push(T[L].h)}return f}}class BP extends Fu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function zP(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function FP(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function kP(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function WS(n,e,t,i){const r=HP(i);switch(t){case lE:return n*e;case e3:return n*e/r.components*r.byteLength;case D1:return n*e/r.components*r.byteLength;case cE:return n*e*2/r.components*r.byteLength;case t3:return n*e*2/r.components*r.byteLength;case uE:return n*e*3/r.components*r.byteLength;case cs:return n*e*4/r.components*r.byteLength;case n3:return n*e*4/r.components*r.byteLength;case J0:case e1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case t1:case n1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $2:case K2:return Math.max(n,16)*Math.max(e,8)/4;case q2:case Y2:return Math.max(n,8)*Math.max(e,8)/2;case Z2:case Q2:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case J2:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case e_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case t_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case n_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case i_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case r_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case a_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case s_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case o_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case l_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case u_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case c_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case f_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case h_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case d_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case i1:case p_:case m_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case fE:case g_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case y_:case v_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function HP(n){switch(n){case tl:case aE:return{byteLength:1,components:1};case zm:case sE:case $d:return{byteLength:2,components:1};case Q_:case J_:return{byteLength:2,components:4};case Cc:case Z_:case Ls:return{byteLength:4,components:1};case oE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class VP{static contain(e,t){return zP(e,t)}static cover(e,t){return FP(e,t)}static fill(e){return kP(e)}static getByteLength(e,t,i,r){return WS(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$f}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=$f);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function z5(){let n=null,e=!1,t=null,i=null;function r(a,s){t(a,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function GP(n){const e=new WeakMap;function t(l,u){const f=l.array,m=l.usage,g=f.byteLength,y=n.createBuffer();n.bindBuffer(u,y),n.bufferData(u,f,m),l.onUploadCallback();let _;if(f instanceof Float32Array)_=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)_=n.HALF_FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?_=n.HALF_FLOAT:_=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=n.SHORT;else if(f instanceof Uint32Array)_=n.UNSIGNED_INT;else if(f instanceof Int32Array)_=n.INT;else if(f instanceof Int8Array)_=n.BYTE;else if(f instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function i(l,u,f){const m=u.array,g=u.updateRanges;if(n.bindBuffer(f,l),g.length===0)n.bufferSubData(f,0,m);else{g.sort((_,x)=>_.start-x.start);let y=0;for(let _=1;_<g.length;_++){const x=g[y],w=g[_];w.start<=x.start+x.count+1?x.count=Math.max(x.count,w.start+w.count-x.start):(++y,g[y]=w)}g.length=y+1;for(let _=0,x=g.length;_<x;_++){const w=g[_];n.bufferSubData(f,w.start*m.BYTES_PER_ELEMENT,m,w.start,w.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(n.deleteBuffer(u.buffer),e.delete(l))}function s(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const m=e.get(l);(!m||m.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=e.get(l);if(f===void 0)e.set(l,t(l,u));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,l,u),f.version=l.version}}return{get:r,remove:a,update:s}}var jP=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,WP=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,XP=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,qP=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$P=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,YP=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,KP=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ZP=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,QP=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,JP=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,e7=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,t7=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,n7=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,i7=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,r7=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,a7=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,s7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,o7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,l7=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,u7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,c7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,f7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,h7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,d7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,p7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,m7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,g7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,y7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,v7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,_7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,b7="gl_FragColor = linearToOutputTexel( gl_FragColor );",x7=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,S7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,T7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,E7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,M7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,w7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,A7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,R7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,N7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,C7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,O7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,D7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,L7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,I7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,U7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,P7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,B7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,z7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,F7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,k7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,H7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,V7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,G7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,j7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,W7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,X7=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,q7=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$7=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Y7=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,K7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Z7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Q7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,J7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,e9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,t9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,n9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,i9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,r9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,a9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,s9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,o9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,l9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,u9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,c9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,f9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,h9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,d9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,p9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,m9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,g9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,y9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,v9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,_9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,b9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,x9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,S9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,T9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,E9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,M9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,w9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,A9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,R9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,N9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,C9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,O9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,D9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,L9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,I9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,U9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,P9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,B9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,z9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,F9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,k9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,H9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,V9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const G9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,j9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,W9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,X9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,q9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$9=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Y9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,K9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Z9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Q9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,J9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,eB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,rB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aB=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sB=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,lB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,cB=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,fB=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hB=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dB=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,pB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,vB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_B=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Yn={alphahash_fragment:jP,alphahash_pars_fragment:WP,alphamap_fragment:XP,alphamap_pars_fragment:qP,alphatest_fragment:$P,alphatest_pars_fragment:YP,aomap_fragment:KP,aomap_pars_fragment:ZP,batching_pars_vertex:QP,batching_vertex:JP,begin_vertex:e7,beginnormal_vertex:t7,bsdfs:n7,iridescence_fragment:i7,bumpmap_pars_fragment:r7,clipping_planes_fragment:a7,clipping_planes_pars_fragment:s7,clipping_planes_pars_vertex:o7,clipping_planes_vertex:l7,color_fragment:u7,color_pars_fragment:c7,color_pars_vertex:f7,color_vertex:h7,common:d7,cube_uv_reflection_fragment:p7,defaultnormal_vertex:m7,displacementmap_pars_vertex:g7,displacementmap_vertex:y7,emissivemap_fragment:v7,emissivemap_pars_fragment:_7,colorspace_fragment:b7,colorspace_pars_fragment:x7,envmap_fragment:S7,envmap_common_pars_fragment:T7,envmap_pars_fragment:E7,envmap_pars_vertex:M7,envmap_physical_pars_fragment:P7,envmap_vertex:w7,fog_vertex:A7,fog_pars_vertex:R7,fog_fragment:N7,fog_pars_fragment:C7,gradientmap_pars_fragment:O7,lightmap_pars_fragment:D7,lights_lambert_fragment:L7,lights_lambert_pars_fragment:I7,lights_pars_begin:U7,lights_toon_fragment:B7,lights_toon_pars_fragment:z7,lights_phong_fragment:F7,lights_phong_pars_fragment:k7,lights_physical_fragment:H7,lights_physical_pars_fragment:V7,lights_fragment_begin:G7,lights_fragment_maps:j7,lights_fragment_end:W7,logdepthbuf_fragment:X7,logdepthbuf_pars_fragment:q7,logdepthbuf_pars_vertex:$7,logdepthbuf_vertex:Y7,map_fragment:K7,map_pars_fragment:Z7,map_particle_fragment:Q7,map_particle_pars_fragment:J7,metalnessmap_fragment:e9,metalnessmap_pars_fragment:t9,morphinstance_vertex:n9,morphcolor_vertex:i9,morphnormal_vertex:r9,morphtarget_pars_vertex:a9,morphtarget_vertex:s9,normal_fragment_begin:o9,normal_fragment_maps:l9,normal_pars_fragment:u9,normal_pars_vertex:c9,normal_vertex:f9,normalmap_pars_fragment:h9,clearcoat_normal_fragment_begin:d9,clearcoat_normal_fragment_maps:p9,clearcoat_pars_fragment:m9,iridescence_pars_fragment:g9,opaque_fragment:y9,packing:v9,premultiplied_alpha_fragment:_9,project_vertex:b9,dithering_fragment:x9,dithering_pars_fragment:S9,roughnessmap_fragment:T9,roughnessmap_pars_fragment:E9,shadowmap_pars_fragment:M9,shadowmap_pars_vertex:w9,shadowmap_vertex:A9,shadowmask_pars_fragment:R9,skinbase_vertex:N9,skinning_pars_vertex:C9,skinning_vertex:O9,skinnormal_vertex:D9,specularmap_fragment:L9,specularmap_pars_fragment:I9,tonemapping_fragment:U9,tonemapping_pars_fragment:P9,transmission_fragment:B9,transmission_pars_fragment:z9,uv_pars_fragment:F9,uv_pars_vertex:k9,uv_vertex:H9,worldpos_vertex:V9,background_vert:G9,background_frag:j9,backgroundCube_vert:W9,backgroundCube_frag:X9,cube_vert:q9,cube_frag:$9,depth_vert:Y9,depth_frag:K9,distanceRGBA_vert:Z9,distanceRGBA_frag:Q9,equirect_vert:J9,equirect_frag:eB,linedashed_vert:tB,linedashed_frag:nB,meshbasic_vert:iB,meshbasic_frag:rB,meshlambert_vert:aB,meshlambert_frag:sB,meshmatcap_vert:oB,meshmatcap_frag:lB,meshnormal_vert:uB,meshnormal_frag:cB,meshphong_vert:fB,meshphong_frag:hB,meshphysical_vert:dB,meshphysical_frag:pB,meshtoon_vert:mB,meshtoon_frag:gB,points_vert:yB,points_frag:vB,shadow_vert:_B,shadow_frag:bB,sprite_vert:xB,sprite_frag:SB},Vt={common:{diffuse:{value:new Pt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Sn}},envmap:{envMap:{value:null},envMapRotation:{value:new Sn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Sn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Sn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Sn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Sn},normalScale:{value:new it(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Sn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Sn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Sn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Sn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0},uvTransform:{value:new Sn}},sprite:{diffuse:{value:new Pt(16777215)},opacity:{value:1},center:{value:new it(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0}}},Ul={basic:{uniforms:Cs([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.fog]),vertexShader:Yn.meshbasic_vert,fragmentShader:Yn.meshbasic_frag},lambert:{uniforms:Cs([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,Vt.lights,{emissive:{value:new Pt(0)}}]),vertexShader:Yn.meshlambert_vert,fragmentShader:Yn.meshlambert_frag},phong:{uniforms:Cs([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,Vt.lights,{emissive:{value:new Pt(0)},specular:{value:new Pt(1118481)},shininess:{value:30}}]),vertexShader:Yn.meshphong_vert,fragmentShader:Yn.meshphong_frag},standard:{uniforms:Cs([Vt.common,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.roughnessmap,Vt.metalnessmap,Vt.fog,Vt.lights,{emissive:{value:new Pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yn.meshphysical_vert,fragmentShader:Yn.meshphysical_frag},toon:{uniforms:Cs([Vt.common,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.gradientmap,Vt.fog,Vt.lights,{emissive:{value:new Pt(0)}}]),vertexShader:Yn.meshtoon_vert,fragmentShader:Yn.meshtoon_frag},matcap:{uniforms:Cs([Vt.common,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,{matcap:{value:null}}]),vertexShader:Yn.meshmatcap_vert,fragmentShader:Yn.meshmatcap_frag},points:{uniforms:Cs([Vt.points,Vt.fog]),vertexShader:Yn.points_vert,fragmentShader:Yn.points_frag},dashed:{uniforms:Cs([Vt.common,Vt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yn.linedashed_vert,fragmentShader:Yn.linedashed_frag},depth:{uniforms:Cs([Vt.common,Vt.displacementmap]),vertexShader:Yn.depth_vert,fragmentShader:Yn.depth_frag},normal:{uniforms:Cs([Vt.common,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,{opacity:{value:1}}]),vertexShader:Yn.meshnormal_vert,fragmentShader:Yn.meshnormal_frag},sprite:{uniforms:Cs([Vt.sprite,Vt.fog]),vertexShader:Yn.sprite_vert,fragmentShader:Yn.sprite_frag},background:{uniforms:{uvTransform:{value:new Sn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Yn.background_vert,fragmentShader:Yn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Sn}},vertexShader:Yn.backgroundCube_vert,fragmentShader:Yn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Yn.cube_vert,fragmentShader:Yn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yn.equirect_vert,fragmentShader:Yn.equirect_frag},distanceRGBA:{uniforms:Cs([Vt.common,Vt.displacementmap,{referencePosition:{value:new $},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yn.distanceRGBA_vert,fragmentShader:Yn.distanceRGBA_frag},shadow:{uniforms:Cs([Vt.lights,Vt.fog,{color:{value:new Pt(0)},opacity:{value:1}}]),vertexShader:Yn.shadow_vert,fragmentShader:Yn.shadow_frag}};Ul.physical={uniforms:Cs([Ul.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Sn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Sn},clearcoatNormalScale:{value:new it(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Sn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Sn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Sn},sheen:{value:0},sheenColor:{value:new Pt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Sn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Sn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Sn},transmissionSamplerSize:{value:new it},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Sn},attenuationDistance:{value:0},attenuationColor:{value:new Pt(0)},specularColor:{value:new Pt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Sn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Sn},anisotropyVector:{value:new it},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Sn}}]),vertexShader:Yn.meshphysical_vert,fragmentShader:Yn.meshphysical_frag};const Qv={r:0,b:0,g:0},ad=new Ya,TB=new sn;function EB(n,e,t,i,r,a,s){const l=new Pt(0);let u=a===!0?0:1,f,m,g=null,y=0,_=null;function x(L){let C=L.isScene===!0?L.background:null;return C&&C.isTexture&&(C=(L.backgroundBlurriness>0?t:e).get(C)),C}function w(L){let C=!1;const P=x(L);P===null?S(l,u):P&&P.isColor&&(S(P,1),C=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?i.buffers.color.setClear(0,0,0,1,s):B==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||C)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function T(L,C){const P=x(C);P&&(P.isCubeTexture||P.mapping===ng)?(m===void 0&&(m=new Br(new Kd(1,1,1),new nl({name:"BackgroundCubeMaterial",uniforms:Xm(Ul.backgroundCube.uniforms),vertexShader:Ul.backgroundCube.vertexShader,fragmentShader:Ul.backgroundCube.fragmentShader,side:fs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(B,j,X){this.matrixWorld.copyPosition(X.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),ad.copy(C.backgroundRotation),ad.x*=-1,ad.y*=-1,ad.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(ad.y*=-1,ad.z*=-1),m.material.uniforms.envMap.value=P,m.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(TB.makeRotationFromEuler(ad)),m.material.toneMapped=fi.getTransfer(P.colorSpace)!==$i,(g!==P||y!==P.version||_!==n.toneMapping)&&(m.material.needsUpdate=!0,g=P,y=P.version,_=n.toneMapping),m.layers.enableAll(),L.unshift(m,m.geometry,m.material,0,0,null)):P&&P.isTexture&&(f===void 0&&(f=new Br(new ag(2,2),new nl({name:"BackgroundMaterial",uniforms:Xm(Ul.background.uniforms),vertexShader:Ul.background.vertexShader,fragmentShader:Ul.background.fragmentShader,side:Bu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=P,f.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,f.material.toneMapped=fi.getTransfer(P.colorSpace)!==$i,P.matrixAutoUpdate===!0&&P.updateMatrix(),f.material.uniforms.uvTransform.value.copy(P.matrix),(g!==P||y!==P.version||_!==n.toneMapping)&&(f.material.needsUpdate=!0,g=P,y=P.version,_=n.toneMapping),f.layers.enableAll(),L.unshift(f,f.geometry,f.material,0,0,null))}function S(L,C){L.getRGB(Qv,GC(n)),i.buffers.color.setClear(Qv.r,Qv.g,Qv.b,C,s)}function O(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(L,C=1){l.set(L),u=C,S(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(L){u=L,S(l,u)},render:w,addToRenderList:T,dispose:O}}function MB(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=y(null);let a=r,s=!1;function l(U,K,ye,ue,we){let Ae=!1;const Z=g(ue,ye,K);a!==Z&&(a=Z,f(a.object)),Ae=_(U,ue,ye,we),Ae&&x(U,ue,ye,we),we!==null&&e.update(we,n.ELEMENT_ARRAY_BUFFER),(Ae||s)&&(s=!1,C(U,K,ye,ue),we!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(we).buffer))}function u(){return n.createVertexArray()}function f(U){return n.bindVertexArray(U)}function m(U){return n.deleteVertexArray(U)}function g(U,K,ye){const ue=ye.wireframe===!0;let we=i[U.id];we===void 0&&(we={},i[U.id]=we);let Ae=we[K.id];Ae===void 0&&(Ae={},we[K.id]=Ae);let Z=Ae[ue];return Z===void 0&&(Z=y(u()),Ae[ue]=Z),Z}function y(U){const K=[],ye=[],ue=[];for(let we=0;we<t;we++)K[we]=0,ye[we]=0,ue[we]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:ye,attributeDivisors:ue,object:U,attributes:{},index:null}}function _(U,K,ye,ue){const we=a.attributes,Ae=K.attributes;let Z=0;const le=ye.getAttributes();for(const de in le)if(le[de].location>=0){const ee=we[de];let be=Ae[de];if(be===void 0&&(de==="instanceMatrix"&&U.instanceMatrix&&(be=U.instanceMatrix),de==="instanceColor"&&U.instanceColor&&(be=U.instanceColor)),ee===void 0||ee.attribute!==be||be&&ee.data!==be.data)return!0;Z++}return a.attributesNum!==Z||a.index!==ue}function x(U,K,ye,ue){const we={},Ae=K.attributes;let Z=0;const le=ye.getAttributes();for(const de in le)if(le[de].location>=0){let ee=Ae[de];ee===void 0&&(de==="instanceMatrix"&&U.instanceMatrix&&(ee=U.instanceMatrix),de==="instanceColor"&&U.instanceColor&&(ee=U.instanceColor));const be={};be.attribute=ee,ee&&ee.data&&(be.data=ee.data),we[de]=be,Z++}a.attributes=we,a.attributesNum=Z,a.index=ue}function w(){const U=a.newAttributes;for(let K=0,ye=U.length;K<ye;K++)U[K]=0}function T(U){S(U,0)}function S(U,K){const ye=a.newAttributes,ue=a.enabledAttributes,we=a.attributeDivisors;ye[U]=1,ue[U]===0&&(n.enableVertexAttribArray(U),ue[U]=1),we[U]!==K&&(n.vertexAttribDivisor(U,K),we[U]=K)}function O(){const U=a.newAttributes,K=a.enabledAttributes;for(let ye=0,ue=K.length;ye<ue;ye++)K[ye]!==U[ye]&&(n.disableVertexAttribArray(ye),K[ye]=0)}function L(U,K,ye,ue,we,Ae,Z){Z===!0?n.vertexAttribIPointer(U,K,ye,we,Ae):n.vertexAttribPointer(U,K,ye,ue,we,Ae)}function C(U,K,ye,ue){w();const we=ue.attributes,Ae=ye.getAttributes(),Z=K.defaultAttributeValues;for(const le in Ae){const de=Ae[le];if(de.location>=0){let Le=we[le];if(Le===void 0&&(le==="instanceMatrix"&&U.instanceMatrix&&(Le=U.instanceMatrix),le==="instanceColor"&&U.instanceColor&&(Le=U.instanceColor)),Le!==void 0){const ee=Le.normalized,be=Le.itemSize,Ge=e.get(Le);if(Ge===void 0)continue;const Ye=Ge.buffer,xe=Ge.type,Ke=Ge.bytesPerElement,et=xe===n.INT||xe===n.UNSIGNED_INT||Le.gpuType===Z_;if(Le.isInterleavedBufferAttribute){const xt=Le.data,bt=xt.stride,Kt=Le.offset;if(xt.isInstancedInterleavedBuffer){for(let Wt=0;Wt<de.locationSize;Wt++)S(de.location+Wt,xt.meshPerAttribute);U.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=xt.meshPerAttribute*xt.count)}else for(let Wt=0;Wt<de.locationSize;Wt++)T(de.location+Wt);n.bindBuffer(n.ARRAY_BUFFER,Ye);for(let Wt=0;Wt<de.locationSize;Wt++)L(de.location+Wt,be/de.locationSize,xe,ee,bt*Ke,(Kt+be/de.locationSize*Wt)*Ke,et)}else{if(Le.isInstancedBufferAttribute){for(let xt=0;xt<de.locationSize;xt++)S(de.location+xt,Le.meshPerAttribute);U.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let xt=0;xt<de.locationSize;xt++)T(de.location+xt);n.bindBuffer(n.ARRAY_BUFFER,Ye);for(let xt=0;xt<de.locationSize;xt++)L(de.location+xt,be/de.locationSize,xe,ee,be*Ke,be/de.locationSize*xt*Ke,et)}}else if(Z!==void 0){const ee=Z[le];if(ee!==void 0)switch(ee.length){case 2:n.vertexAttrib2fv(de.location,ee);break;case 3:n.vertexAttrib3fv(de.location,ee);break;case 4:n.vertexAttrib4fv(de.location,ee);break;default:n.vertexAttrib1fv(de.location,ee)}}}}O()}function P(){X();for(const U in i){const K=i[U];for(const ye in K){const ue=K[ye];for(const we in ue)m(ue[we].object),delete ue[we];delete K[ye]}delete i[U]}}function B(U){if(i[U.id]===void 0)return;const K=i[U.id];for(const ye in K){const ue=K[ye];for(const we in ue)m(ue[we].object),delete ue[we];delete K[ye]}delete i[U.id]}function j(U){for(const K in i){const ye=i[K];if(ye[U.id]===void 0)continue;const ue=ye[U.id];for(const we in ue)m(ue[we].object),delete ue[we];delete ye[U.id]}}function X(){k(),s=!0,a!==r&&(a=r,f(a.object))}function k(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:X,resetDefaultState:k,dispose:P,releaseStatesOfGeometry:B,releaseStatesOfProgram:j,initAttributes:w,enableAttribute:T,disableUnusedAttributes:O}}function wB(n,e,t){let i;function r(f){i=f}function a(f,m){n.drawArrays(i,f,m),t.update(m,i,1)}function s(f,m,g){g!==0&&(n.drawArraysInstanced(i,f,m,g),t.update(m,i,g))}function l(f,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,m,0,g);let _=0;for(let x=0;x<g;x++)_+=m[x];t.update(_,i,1)}function u(f,m,g,y){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let x=0;x<f.length;x++)s(f[x],m[x],y[x]);else{_.multiDrawArraysInstancedWEBGL(i,f,0,m,0,y,0,g);let x=0;for(let w=0;w<g;w++)x+=m[w]*y[w];t.update(x,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function AB(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const j=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(j.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(j){return!(j!==cs&&i.convert(j)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(j){const X=j===$d&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(j!==tl&&i.convert(j)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&j!==Ls&&!X)}function u(j){if(j==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";j="mediump"}return j==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const m=u(f);m!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const g=t.logarithmicDepthBuffer===!0,y=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),_=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=n.getParameter(n.MAX_TEXTURE_SIZE),T=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),O=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),L=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),P=x>0,B=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:u,textureFormatReadable:s,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reverseDepthBuffer:y,maxTextures:_,maxVertexTextures:x,maxTextureSize:w,maxCubemapSize:T,maxAttributes:S,maxVertexUniforms:O,maxVaryings:L,maxFragmentUniforms:C,vertexTextures:P,maxSamples:B}}function RB(n){const e=this;let t=null,i=0,r=!1,a=!1;const s=new vc,l=new Sn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const _=g.length!==0||y||i!==0||r;return r=y,i=g.length,_},this.beginShadows=function(){a=!0,m(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(g,y){t=m(g,y,0)},this.setState=function(g,y,_){const x=g.clippingPlanes,w=g.clipIntersection,T=g.clipShadows,S=n.get(g);if(!r||x===null||x.length===0||a&&!T)a?m(null):f();else{const O=a?0:i,L=O*4;let C=S.clippingState||null;u.value=C,C=m(x,y,L,_);for(let P=0;P!==L;++P)C[P]=t[P];S.clippingState=C,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=O}};function f(){u.value!==t&&(u.value=t,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(g,y,_,x){const w=g!==null?g.length:0;let T=null;if(w!==0){if(T=u.value,x!==!0||T===null){const S=_+w*4,O=y.matrixWorldInverse;l.getNormalMatrix(O),(T===null||T.length<S)&&(T=new Float32Array(S));for(let L=0,C=_;L!==w;++L,C+=4)s.copy(g[L]).applyMatrix4(O,l),s.normal.toArray(T,C),T[C+3]=s.constant}u.value=T,u.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,T}}function NB(n){let e=new WeakMap;function t(s,l){return l===f1?s.mapping=Nc:l===h1&&(s.mapping=Yf),s}function i(s){if(s&&s.isTexture){const l=s.mapping;if(l===f1||l===h1)if(e.has(s)){const u=e.get(s).texture;return t(u,s.mapping)}else{const u=s.image;if(u&&u.height>0){const f=new WC(u.height);return f.fromEquirectangularTexture(n,s),e.set(s,f),s.addEventListener("dispose",r),t(f.texture,s.mapping)}else return null}}return s}function r(s){const l=s.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const Rm=4,kw=[.125,.215,.35,.446,.526,.582],yd=20,gx=new Rc,Hw=new Pt;let yx=null,vx=0,_x=0,bx=!1;const gd=(1+Math.sqrt(5))/2,pm=1/gd,Vw=[new $(-gd,pm,0),new $(gd,pm,0),new $(-pm,0,gd),new $(pm,0,gd),new $(0,gd,-pm),new $(0,gd,pm),new $(-1,1,-1),new $(1,1,-1),new $(-1,1,1),new $(1,1,1)],CB=new $;class XS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,a={}){const{size:s=256,position:l=CB}=a;yx=this._renderer.getRenderTarget(),vx=this._renderer.getActiveCubeFace(),_x=this._renderer.getActiveMipmapLevel(),bx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,i,r,u,l),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Ww(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=jw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yx,vx,_x),this._renderer.xr.enabled=bx,e.scissorTest=!1,Jv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Nc||e.mapping===Yf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),yx=this._renderer.getRenderTarget(),vx=this._renderer.getActiveCubeFace(),_x=this._renderer.getActiveMipmapLevel(),bx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Tr,minFilter:Tr,generateMipmaps:!1,type:$d,format:cs,colorSpace:$a,depthBuffer:!1},r=Gw(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Gw(e,t,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=OB(a)),this._blurMaterial=DB(a,e,t)}return r}_compileMaterial(e){const t=new Br(this._lodPlanes[0],e);this._renderer.compile(t,gx)}_sceneToCubeUV(e,t,i,r,a){const u=new Wr(90,1,t,i),f=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,_=g.toneMapping;g.getClearColor(Hw),g.toneMapping=Lu,g.autoClear=!1;const x=new Is({name:"PMREM.Background",side:fs,depthWrite:!1,depthTest:!1}),w=new Br(new Kd,x);let T=!1;const S=e.background;S?S.isColor&&(x.color.copy(S),e.background=null,T=!0):(x.color.copy(Hw),T=!0);for(let O=0;O<6;O++){const L=O%3;L===0?(u.up.set(0,f[O],0),u.position.set(a.x,a.y,a.z),u.lookAt(a.x+m[O],a.y,a.z)):L===1?(u.up.set(0,0,f[O]),u.position.set(a.x,a.y,a.z),u.lookAt(a.x,a.y+m[O],a.z)):(u.up.set(0,f[O],0),u.position.set(a.x,a.y,a.z),u.lookAt(a.x,a.y,a.z+m[O]));const C=this._cubeSize;Jv(r,L*C,O>2?C:0,C,C),g.setRenderTarget(r),T&&g.render(w,u),g.render(e,u)}w.geometry.dispose(),w.material.dispose(),g.toneMapping=_,g.autoClear=y,e.background=S}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Nc||e.mapping===Yf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Ww()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=jw());const a=r?this._cubemapMaterial:this._equirectMaterial,s=new Br(this._lodPlanes[0],a),l=a.uniforms;l.envMap.value=e;const u=this._cubeSize;Jv(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(s,gx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let a=1;a<r;a++){const s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),l=Vw[(r-a-1)%Vw.length];this._blur(e,a-1,a,s,l)}t.autoClear=i}_blur(e,t,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,s,l){const u=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new Br(this._lodPlanes[r],f),y=f.uniforms,_=this._sizeLods[i]-1,x=isFinite(a)?Math.PI/(2*_):2*Math.PI/(2*yd-1),w=a/x,T=isFinite(a)?1+Math.floor(m*w):yd;T>yd&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${yd}`);const S=[];let O=0;for(let j=0;j<yd;++j){const X=j/w,k=Math.exp(-X*X/2);S.push(k),j===0?O+=k:j<T&&(O+=2*k)}for(let j=0;j<S.length;j++)S[j]=S[j]/O;y.envMap.value=e.texture,y.samples.value=T,y.weights.value=S,y.latitudinal.value=s==="latitudinal",l&&(y.poleAxis.value=l);const{_lodMax:L}=this;y.dTheta.value=x,y.mipInt.value=L-i;const C=this._sizeLods[r],P=3*C*(r>L-Rm?r-L+Rm:0),B=4*(this._cubeSize-C);Jv(t,P,B,3*C,2*C),u.setRenderTarget(t),u.render(g,gx)}}function OB(n){const e=[],t=[],i=[];let r=n;const a=n-Rm+1+kw.length;for(let s=0;s<a;s++){const l=Math.pow(2,r);t.push(l);let u=1/l;s>n-Rm?u=kw[s-n+Rm-1]:s===0&&(u=0),i.push(u);const f=1/(l-2),m=-f,g=1+f,y=[m,m,g,m,g,g,m,m,g,g,m,g],_=6,x=6,w=3,T=2,S=1,O=new Float32Array(w*x*_),L=new Float32Array(T*x*_),C=new Float32Array(S*x*_);for(let B=0;B<_;B++){const j=B%3*2/3-1,X=B>2?0:-1,k=[j,X,0,j+2/3,X,0,j+2/3,X+1,0,j,X,0,j+2/3,X+1,0,j,X+1,0];O.set(k,w*x*B),L.set(y,T*x*B);const U=[B,B,B,B,B,B];C.set(U,S*x*B)}const P=new Nn;P.setAttribute("position",new Gn(O,w)),P.setAttribute("uv",new Gn(L,T)),P.setAttribute("faceIndex",new Gn(C,S)),e.push(P),r>Rm&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Gw(n,e,t){const i=new Hl(n,e,t);return i.texture.mapping=ng,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Jv(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function DB(n,e,t){const i=new Float32Array(yd),r=new $(0,1,0);return new nl({name:"SphericalGaussianBlur",defines:{n:yd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:qE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:wc,depthTest:!1,depthWrite:!1})}function jw(){return new nl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:qE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:wc,depthTest:!1,depthWrite:!1})}function Ww(){return new nl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:qE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:wc,depthTest:!1,depthWrite:!1})}function qE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function LB(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const u=l.mapping,f=u===f1||u===h1,m=u===Nc||u===Yf;if(f||m){let g=e.get(l);const y=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==y)return t===null&&(t=new XS(n)),g=f?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const _=l.image;return f&&_&&_.height>0||m&&_&&r(_)?(t===null&&(t=new XS(n)),g=f?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",a),g.texture):null}}}return l}function r(l){let u=0;const f=6;for(let m=0;m<f;m++)l[m]!==void 0&&u++;return u===f}function a(l){const u=l.target;u.removeEventListener("dispose",a);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function IB(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Om("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function UB(n,e,t,i){const r={},a=new WeakMap;function s(g){const y=g.target;y.index!==null&&e.remove(y.index);for(const x in y.attributes)e.remove(y.attributes[x]);y.removeEventListener("dispose",s),delete r[y.id];const _=a.get(y);_&&(e.remove(_),a.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function l(g,y){return r[y.id]===!0||(y.addEventListener("dispose",s),r[y.id]=!0,t.memory.geometries++),y}function u(g){const y=g.attributes;for(const _ in y)e.update(y[_],n.ARRAY_BUFFER)}function f(g){const y=[],_=g.index,x=g.attributes.position;let w=0;if(_!==null){const O=_.array;w=_.version;for(let L=0,C=O.length;L<C;L+=3){const P=O[L+0],B=O[L+1],j=O[L+2];y.push(P,B,B,j,j,P)}}else if(x!==void 0){const O=x.array;w=x.version;for(let L=0,C=O.length/3-1;L<C;L+=3){const P=L+0,B=L+1,j=L+2;y.push(P,B,B,j,j,P)}}else return;const T=new(FC(y)?vE:yE)(y,1);T.version=w;const S=a.get(g);S&&e.remove(S),a.set(g,T)}function m(g){const y=a.get(g);if(y){const _=g.index;_!==null&&y.version<_.version&&f(g)}else f(g);return a.get(g)}return{get:l,update:u,getWireframeAttribute:m}}function PB(n,e,t){let i;function r(y){i=y}let a,s;function l(y){a=y.type,s=y.bytesPerElement}function u(y,_){n.drawElements(i,_,a,y*s),t.update(_,i,1)}function f(y,_,x){x!==0&&(n.drawElementsInstanced(i,_,a,y*s,x),t.update(_,i,x))}function m(y,_,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,_,0,a,y,0,x);let T=0;for(let S=0;S<x;S++)T+=_[S];t.update(T,i,1)}function g(y,_,x,w){if(x===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let S=0;S<y.length;S++)f(y[S]/s,_[S],w[S]);else{T.multiDrawElementsInstancedWEBGL(i,_,0,a,y,0,w,0,x);let S=0;for(let O=0;O<x;O++)S+=_[O]*w[O];t.update(S,i,1)}}this.setMode=r,this.setIndex=l,this.render=u,this.renderInstances=f,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function BB(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,l){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=l*(a/3);break;case n.LINES:t.lines+=l*(a/2);break;case n.LINE_STRIP:t.lines+=l*(a-1);break;case n.LINE_LOOP:t.lines+=l*a;break;case n.POINTS:t.points+=l*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function zB(n,e,t){const i=new WeakMap,r=new Di;function a(s,l,u){const f=s.morphTargetInfluences,m=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=m!==void 0?m.length:0;let y=i.get(l);if(y===void 0||y.count!==g){let U=function(){X.dispose(),i.delete(l),l.removeEventListener("dispose",U)};var _=U;y!==void 0&&y.texture.dispose();const x=l.morphAttributes.position!==void 0,w=l.morphAttributes.normal!==void 0,T=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],O=l.morphAttributes.normal||[],L=l.morphAttributes.color||[];let C=0;x===!0&&(C=1),w===!0&&(C=2),T===!0&&(C=3);let P=l.attributes.position.count*C,B=1;P>e.maxTextureSize&&(B=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const j=new Float32Array(P*B*4*g),X=new r3(j,P,B,g);X.type=Ls,X.needsUpdate=!0;const k=C*4;for(let K=0;K<g;K++){const ye=S[K],ue=O[K],we=L[K],Ae=P*B*4*K;for(let Z=0;Z<ye.count;Z++){const le=Z*k;x===!0&&(r.fromBufferAttribute(ye,Z),j[Ae+le+0]=r.x,j[Ae+le+1]=r.y,j[Ae+le+2]=r.z,j[Ae+le+3]=0),w===!0&&(r.fromBufferAttribute(ue,Z),j[Ae+le+4]=r.x,j[Ae+le+5]=r.y,j[Ae+le+6]=r.z,j[Ae+le+7]=0),T===!0&&(r.fromBufferAttribute(we,Z),j[Ae+le+8]=r.x,j[Ae+le+9]=r.y,j[Ae+le+10]=r.z,j[Ae+le+11]=we.itemSize===4?r.w:1)}}y={count:g,texture:X,size:new it(P,B)},i.set(l,y),l.addEventListener("dispose",U)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)u.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let x=0;for(let T=0;T<f.length;T++)x+=f[T];const w=l.morphTargetsRelative?1:1-x;u.getUniforms().setValue(n,"morphTargetBaseInfluence",w),u.getUniforms().setValue(n,"morphTargetInfluences",f)}u.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),u.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}return{update:a}}function FB(n,e,t,i){let r=new WeakMap;function a(u){const f=i.render.frame,m=u.geometry,g=e.get(u,m);if(r.get(g)!==f&&(e.update(g),r.set(g,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),r.get(u)!==f&&(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,f))),u.isSkinnedMesh){const y=u.skeleton;r.get(y)!==f&&(y.update(),r.set(y,f))}return g}function s(){r=new WeakMap}function l(u){const f=u.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:a,dispose:s}}const F5=new Mr,Xw=new p3(1,1),k5=new r3,H5=new a3,V5=new L1,qw=[],$w=[],Yw=new Float32Array(16),Kw=new Float32Array(9),Zw=new Float32Array(4);function og(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let a=qw[r];if(a===void 0&&(a=new Float32Array(r),qw[r]=a),e!==0){i.toArray(a,0);for(let s=1,l=0;s!==e;++s)l+=t,n[s].toArray(a,l)}return a}function ba(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function xa(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function N3(n,e){let t=$w[e];t===void 0&&(t=new Int32Array(e),$w[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function kB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function HB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ba(t,e))return;n.uniform2fv(this.addr,e),xa(t,e)}}function VB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ba(t,e))return;n.uniform3fv(this.addr,e),xa(t,e)}}function GB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ba(t,e))return;n.uniform4fv(this.addr,e),xa(t,e)}}function jB(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ba(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),xa(t,e)}else{if(ba(t,i))return;Zw.set(i),n.uniformMatrix2fv(this.addr,!1,Zw),xa(t,i)}}function WB(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ba(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),xa(t,e)}else{if(ba(t,i))return;Kw.set(i),n.uniformMatrix3fv(this.addr,!1,Kw),xa(t,i)}}function XB(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ba(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),xa(t,e)}else{if(ba(t,i))return;Yw.set(i),n.uniformMatrix4fv(this.addr,!1,Yw),xa(t,i)}}function qB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function $B(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ba(t,e))return;n.uniform2iv(this.addr,e),xa(t,e)}}function YB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ba(t,e))return;n.uniform3iv(this.addr,e),xa(t,e)}}function KB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ba(t,e))return;n.uniform4iv(this.addr,e),xa(t,e)}}function ZB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function QB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ba(t,e))return;n.uniform2uiv(this.addr,e),xa(t,e)}}function JB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ba(t,e))return;n.uniform3uiv(this.addr,e),xa(t,e)}}function ez(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ba(t,e))return;n.uniform4uiv(this.addr,e),xa(t,e)}}function tz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(Xw.compareFunction=pE,a=Xw):a=F5,t.setTexture2D(e||a,r)}function nz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||H5,r)}function iz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||V5,r)}function rz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||k5,r)}function az(n){switch(n){case 5126:return kB;case 35664:return HB;case 35665:return VB;case 35666:return GB;case 35674:return jB;case 35675:return WB;case 35676:return XB;case 5124:case 35670:return qB;case 35667:case 35671:return $B;case 35668:case 35672:return YB;case 35669:case 35673:return KB;case 5125:return ZB;case 36294:return QB;case 36295:return JB;case 36296:return ez;case 35678:case 36198:case 36298:case 36306:case 35682:return tz;case 35679:case 36299:case 36307:return nz;case 35680:case 36300:case 36308:case 36293:return iz;case 36289:case 36303:case 36311:case 36292:return rz}}function sz(n,e){n.uniform1fv(this.addr,e)}function oz(n,e){const t=og(e,this.size,2);n.uniform2fv(this.addr,t)}function lz(n,e){const t=og(e,this.size,3);n.uniform3fv(this.addr,t)}function uz(n,e){const t=og(e,this.size,4);n.uniform4fv(this.addr,t)}function cz(n,e){const t=og(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function fz(n,e){const t=og(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function hz(n,e){const t=og(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function dz(n,e){n.uniform1iv(this.addr,e)}function pz(n,e){n.uniform2iv(this.addr,e)}function mz(n,e){n.uniform3iv(this.addr,e)}function gz(n,e){n.uniform4iv(this.addr,e)}function yz(n,e){n.uniform1uiv(this.addr,e)}function vz(n,e){n.uniform2uiv(this.addr,e)}function _z(n,e){n.uniform3uiv(this.addr,e)}function bz(n,e){n.uniform4uiv(this.addr,e)}function xz(n,e,t){const i=this.cache,r=e.length,a=N3(t,r);ba(i,a)||(n.uniform1iv(this.addr,a),xa(i,a));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||F5,a[s])}function Sz(n,e,t){const i=this.cache,r=e.length,a=N3(t,r);ba(i,a)||(n.uniform1iv(this.addr,a),xa(i,a));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||H5,a[s])}function Tz(n,e,t){const i=this.cache,r=e.length,a=N3(t,r);ba(i,a)||(n.uniform1iv(this.addr,a),xa(i,a));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||V5,a[s])}function Ez(n,e,t){const i=this.cache,r=e.length,a=N3(t,r);ba(i,a)||(n.uniform1iv(this.addr,a),xa(i,a));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||k5,a[s])}function Mz(n){switch(n){case 5126:return sz;case 35664:return oz;case 35665:return lz;case 35666:return uz;case 35674:return cz;case 35675:return fz;case 35676:return hz;case 5124:case 35670:return dz;case 35667:case 35671:return pz;case 35668:case 35672:return mz;case 35669:case 35673:return gz;case 5125:return yz;case 36294:return vz;case 36295:return _z;case 36296:return bz;case 35678:case 36198:case 36298:case 36306:case 35682:return xz;case 35679:case 36299:case 36307:return Sz;case 35680:case 36300:case 36308:case 36293:return Tz;case 36289:case 36303:case 36311:case 36292:return Ez}}class wz{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=az(t.type)}}class Az{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Mz(t.type)}}class Rz{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const l=r[a];l.setValue(e,t[l.id],i)}}}const xx=/(\w+)(\])?(\[|\.)?/g;function Qw(n,e){n.seq.push(e),n.map[e.id]=e}function Nz(n,e,t){const i=n.name,r=i.length;for(xx.lastIndex=0;;){const a=xx.exec(i),s=xx.lastIndex;let l=a[1];const u=a[2]==="]",f=a[3];if(u&&(l=l|0),f===void 0||f==="["&&s+2===r){Qw(t,f===void 0?new wz(l,n,e):new Az(l,n,e));break}else{let g=t.map[l];g===void 0&&(g=new Rz(l),Qw(t,g)),t=g}}}class v2{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const a=e.getActiveUniform(t,r),s=e.getUniformLocation(t,a.name);Nz(a,s,this)}}setValue(e,t,i,r){const a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,s=t.length;a!==s;++a){const l=t[a],u=i[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function Jw(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Cz=37297;let Oz=0;function Dz(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=r;s<a;s++){const l=s+1;i.push(`${l===e?">":" "} ${l}: ${t[s]}`)}return i.join(`
`)}const eA=new Sn;function Lz(n){fi._getMatrix(eA,fi.workingColorSpace,n);const e=`mat3( ${eA.elements.map(t=>t.toFixed(4))} )`;switch(fi.getTransfer(n)){case p1:return[e,"LinearTransferOETF"];case $i:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function tA(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const s=parseInt(a[1]);return t.toUpperCase()+`

`+r+`

`+Dz(n.getShaderSource(e),s)}else return r}function Iz(n,e){const t=Lz(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Uz(n,e){let t;switch(e){case yC:t="Linear";break;case vC:t="Reinhard";break;case _C:t="Cineon";break;case rE:t="ACESFilmic";break;case xC:t="AgX";break;case SC:t="Neutral";break;case bC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const e2=new $;function Pz(){fi.getLuminanceCoefficients(e2);const n=e2.x.toFixed(4),e=e2.y.toFixed(4),t=e2.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Bz(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(X0).join(`
`)}function zz(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Fz(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r),s=a.name;let l=1;a.type===n.FLOAT_MAT2&&(l=2),a.type===n.FLOAT_MAT3&&(l=3),a.type===n.FLOAT_MAT4&&(l=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:l}}return t}function X0(n){return n!==""}function nA(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function iA(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kz=/^[ \t]*#include +<([\w\d./]+)>/gm;function qS(n){return n.replace(kz,Vz)}const Hz=new Map;function Vz(n,e){let t=Yn[e];if(t===void 0){const i=Hz.get(e);if(i!==void 0)t=Yn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return qS(t)}const Gz=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rA(n){return n.replace(Gz,jz)}function jz(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function aA(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Wz(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===$_?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Q0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Il&&(e="SHADOWMAP_TYPE_VSM"),e}function Xz(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Nc:case Yf:e="ENVMAP_TYPE_CUBE";break;case ng:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qz(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Yf:e="ENVMAP_MODE_REFRACTION";break}return e}function $z(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case O1:e="ENVMAP_BLENDING_MULTIPLY";break;case mC:e="ENVMAP_BLENDING_MIX";break;case gC:e="ENVMAP_BLENDING_ADD";break}return e}function Yz(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function Kz(n,e,t,i){const r=n.getContext(),a=t.defines;let s=t.vertexShader,l=t.fragmentShader;const u=Wz(t),f=Xz(t),m=qz(t),g=$z(t),y=Yz(t),_=Bz(t),x=zz(a),w=r.createProgram();let T,S,O=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(X0).join(`
`),T.length>0&&(T+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(X0).join(`
`),S.length>0&&(S+=`
`)):(T=[aA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(X0).join(`
`),S=[aA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Lu?"#define TONE_MAPPING":"",t.toneMapping!==Lu?Yn.tonemapping_pars_fragment:"",t.toneMapping!==Lu?Uz("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Yn.colorspace_pars_fragment,Iz("linearToOutputTexel",t.outputColorSpace),Pz(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(X0).join(`
`)),s=qS(s),s=nA(s,t),s=iA(s,t),l=qS(l),l=nA(l,t),l=iA(l,t),s=rA(s),l=rA(l),t.isRawShaderMaterial!==!0&&(O=`#version 300 es
`,T=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,S=["#define varying in",t.glslVersion===BS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===BS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const L=O+T+s,C=O+S+l,P=Jw(r,r.VERTEX_SHADER,L),B=Jw(r,r.FRAGMENT_SHADER,C);r.attachShader(w,P),r.attachShader(w,B),t.index0AttributeName!==void 0?r.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function j(K){if(n.debug.checkShaderErrors){const ye=r.getProgramInfoLog(w).trim(),ue=r.getShaderInfoLog(P).trim(),we=r.getShaderInfoLog(B).trim();let Ae=!0,Z=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(Ae=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,w,P,B);else{const le=tA(r,P,"vertex"),de=tA(r,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+K.name+`
Material Type: `+K.type+`

Program Info Log: `+ye+`
`+le+`
`+de)}else ye!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ye):(ue===""||we==="")&&(Z=!1);Z&&(K.diagnostics={runnable:Ae,programLog:ye,vertexShader:{log:ue,prefix:T},fragmentShader:{log:we,prefix:S}})}r.deleteShader(P),r.deleteShader(B),X=new v2(r,w),k=Fz(r,w)}let X;this.getUniforms=function(){return X===void 0&&j(this),X};let k;this.getAttributes=function(){return k===void 0&&j(this),k};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=r.getProgramParameter(w,Cz)),U},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Oz++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=P,this.fragmentShader=B,this}let Zz=0;class Qz{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Jz(e),t.set(e,i)),i}}class Jz{constructor(e){this.id=Zz++,this.code=e,this.usedTimes=0}}function eF(n,e,t,i,r,a,s){const l=new Wm,u=new Qz,f=new Set,m=[],g=r.logarithmicDepthBuffer,y=r.vertexTextures;let _=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(k){return f.add(k),k===0?"uv":`uv${k}`}function T(k,U,K,ye,ue){const we=ye.fog,Ae=ue.geometry,Z=k.isMeshStandardMaterial?ye.environment:null,le=(k.isMeshStandardMaterial?t:e).get(k.envMap||Z),de=le&&le.mapping===ng?le.image.height:null,Le=x[k.type];k.precision!==null&&(_=r.getMaxPrecision(k.precision),_!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",_,"instead."));const ee=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,be=ee!==void 0?ee.length:0;let Ge=0;Ae.morphAttributes.position!==void 0&&(Ge=1),Ae.morphAttributes.normal!==void 0&&(Ge=2),Ae.morphAttributes.color!==void 0&&(Ge=3);let Ye,xe,Ke,et;if(Le){const bn=Ul[Le];Ye=bn.vertexShader,xe=bn.fragmentShader}else Ye=k.vertexShader,xe=k.fragmentShader,u.update(k),Ke=u.getVertexShaderID(k),et=u.getFragmentShaderID(k);const xt=n.getRenderTarget(),bt=n.state.buffers.depth.getReversed(),Kt=ue.isInstancedMesh===!0,Wt=ue.isBatchedMesh===!0,tn=!!k.map,un=!!k.matcap,Jt=!!le,ie=!!k.aoMap,_t=!!k.lightMap,ut=!!k.bumpMap,pt=!!k.normalMap,Ze=!!k.displacementMap,Ot=!!k.emissiveMap,ft=!!k.metalnessMap,St=!!k.roughnessMap,on=k.anisotropy>0,re=k.clearcoat>0,q=k.dispersion>0,Ce=k.iridescence>0,We=k.sheen>0,Qe=k.transmission>0,He=on&&!!k.anisotropyMap,Ut=re&&!!k.clearcoatMap,wt=re&&!!k.clearcoatNormalMap,Gt=re&&!!k.clearcoatRoughnessMap,$t=Ce&&!!k.iridescenceMap,rt=Ce&&!!k.iridescenceThicknessMap,Tt=We&&!!k.sheenColorMap,Ct=We&&!!k.sheenRoughnessMap,pe=!!k.specularMap,Re=!!k.specularColorMap,yt=!!k.specularIntensityMap,he=Qe&&!!k.transmissionMap,vt=Qe&&!!k.thicknessMap,at=!!k.gradientMap,At=!!k.alphaMap,ct=k.alphaTest>0,Be=!!k.alphaHash,Ft=!!k.extensions;let Qt=Lu;k.toneMapped&&(xt===null||xt.isXRRenderTarget===!0)&&(Qt=n.toneMapping);const _n={shaderID:Le,shaderType:k.type,shaderName:k.name,vertexShader:Ye,fragmentShader:xe,defines:k.defines,customVertexShaderID:Ke,customFragmentShaderID:et,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:_,batching:Wt,batchingColor:Wt&&ue._colorsTexture!==null,instancing:Kt,instancingColor:Kt&&ue.instanceColor!==null,instancingMorph:Kt&&ue.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:xt===null?n.outputColorSpace:xt.isXRRenderTarget===!0?xt.texture.colorSpace:$a,alphaToCoverage:!!k.alphaToCoverage,map:tn,matcap:un,envMap:Jt,envMapMode:Jt&&le.mapping,envMapCubeUVHeight:de,aoMap:ie,lightMap:_t,bumpMap:ut,normalMap:pt,displacementMap:y&&Ze,emissiveMap:Ot,normalMapObjectSpace:pt&&k.normalMapType===CC,normalMapTangentSpace:pt&&k.normalMapType===Hc,metalnessMap:ft,roughnessMap:St,anisotropy:on,anisotropyMap:He,clearcoat:re,clearcoatMap:Ut,clearcoatNormalMap:wt,clearcoatRoughnessMap:Gt,dispersion:q,iridescence:Ce,iridescenceMap:$t,iridescenceThicknessMap:rt,sheen:We,sheenColorMap:Tt,sheenRoughnessMap:Ct,specularMap:pe,specularColorMap:Re,specularIntensityMap:yt,transmission:Qe,transmissionMap:he,thicknessMap:vt,gradientMap:at,opaque:k.transparent===!1&&k.blending===Rd&&k.alphaToCoverage===!1,alphaMap:At,alphaTest:ct,alphaHash:Be,combine:k.combine,mapUv:tn&&w(k.map.channel),aoMapUv:ie&&w(k.aoMap.channel),lightMapUv:_t&&w(k.lightMap.channel),bumpMapUv:ut&&w(k.bumpMap.channel),normalMapUv:pt&&w(k.normalMap.channel),displacementMapUv:Ze&&w(k.displacementMap.channel),emissiveMapUv:Ot&&w(k.emissiveMap.channel),metalnessMapUv:ft&&w(k.metalnessMap.channel),roughnessMapUv:St&&w(k.roughnessMap.channel),anisotropyMapUv:He&&w(k.anisotropyMap.channel),clearcoatMapUv:Ut&&w(k.clearcoatMap.channel),clearcoatNormalMapUv:wt&&w(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Gt&&w(k.clearcoatRoughnessMap.channel),iridescenceMapUv:$t&&w(k.iridescenceMap.channel),iridescenceThicknessMapUv:rt&&w(k.iridescenceThicknessMap.channel),sheenColorMapUv:Tt&&w(k.sheenColorMap.channel),sheenRoughnessMapUv:Ct&&w(k.sheenRoughnessMap.channel),specularMapUv:pe&&w(k.specularMap.channel),specularColorMapUv:Re&&w(k.specularColorMap.channel),specularIntensityMapUv:yt&&w(k.specularIntensityMap.channel),transmissionMapUv:he&&w(k.transmissionMap.channel),thicknessMapUv:vt&&w(k.thicknessMap.channel),alphaMapUv:At&&w(k.alphaMap.channel),vertexTangents:!!Ae.attributes.tangent&&(pt||on),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,pointsUvs:ue.isPoints===!0&&!!Ae.attributes.uv&&(tn||At),fog:!!we,useFog:k.fog===!0,fogExp2:!!we&&we.isFogExp2,flatShading:k.flatShading===!0&&k.wireframe===!1,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:bt,skinning:ue.isSkinnedMesh===!0,morphTargets:Ae.morphAttributes.position!==void 0,morphNormals:Ae.morphAttributes.normal!==void 0,morphColors:Ae.morphAttributes.color!==void 0,morphTargetsCount:be,morphTextureStride:Ge,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:k.dithering,shadowMapEnabled:n.shadowMap.enabled&&K.length>0,shadowMapType:n.shadowMap.type,toneMapping:Qt,decodeVideoTexture:tn&&k.map.isVideoTexture===!0&&fi.getTransfer(k.map.colorSpace)===$i,decodeVideoTextureEmissive:Ot&&k.emissiveMap.isVideoTexture===!0&&fi.getTransfer(k.emissiveMap.colorSpace)===$i,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Eo,flipSided:k.side===fs,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:Ft&&k.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ft&&k.extensions.multiDraw===!0||Wt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return _n.vertexUv1s=f.has(1),_n.vertexUv2s=f.has(2),_n.vertexUv3s=f.has(3),f.clear(),_n}function S(k){const U=[];if(k.shaderID?U.push(k.shaderID):(U.push(k.customVertexShaderID),U.push(k.customFragmentShaderID)),k.defines!==void 0)for(const K in k.defines)U.push(K),U.push(k.defines[K]);return k.isRawShaderMaterial===!1&&(O(U,k),L(U,k),U.push(n.outputColorSpace)),U.push(k.customProgramCacheKey),U.join()}function O(k,U){k.push(U.precision),k.push(U.outputColorSpace),k.push(U.envMapMode),k.push(U.envMapCubeUVHeight),k.push(U.mapUv),k.push(U.alphaMapUv),k.push(U.lightMapUv),k.push(U.aoMapUv),k.push(U.bumpMapUv),k.push(U.normalMapUv),k.push(U.displacementMapUv),k.push(U.emissiveMapUv),k.push(U.metalnessMapUv),k.push(U.roughnessMapUv),k.push(U.anisotropyMapUv),k.push(U.clearcoatMapUv),k.push(U.clearcoatNormalMapUv),k.push(U.clearcoatRoughnessMapUv),k.push(U.iridescenceMapUv),k.push(U.iridescenceThicknessMapUv),k.push(U.sheenColorMapUv),k.push(U.sheenRoughnessMapUv),k.push(U.specularMapUv),k.push(U.specularColorMapUv),k.push(U.specularIntensityMapUv),k.push(U.transmissionMapUv),k.push(U.thicknessMapUv),k.push(U.combine),k.push(U.fogExp2),k.push(U.sizeAttenuation),k.push(U.morphTargetsCount),k.push(U.morphAttributeCount),k.push(U.numDirLights),k.push(U.numPointLights),k.push(U.numSpotLights),k.push(U.numSpotLightMaps),k.push(U.numHemiLights),k.push(U.numRectAreaLights),k.push(U.numDirLightShadows),k.push(U.numPointLightShadows),k.push(U.numSpotLightShadows),k.push(U.numSpotLightShadowsWithMaps),k.push(U.numLightProbes),k.push(U.shadowMapType),k.push(U.toneMapping),k.push(U.numClippingPlanes),k.push(U.numClipIntersection),k.push(U.depthPacking)}function L(k,U){l.disableAll(),U.supportsVertexTextures&&l.enable(0),U.instancing&&l.enable(1),U.instancingColor&&l.enable(2),U.instancingMorph&&l.enable(3),U.matcap&&l.enable(4),U.envMap&&l.enable(5),U.normalMapObjectSpace&&l.enable(6),U.normalMapTangentSpace&&l.enable(7),U.clearcoat&&l.enable(8),U.iridescence&&l.enable(9),U.alphaTest&&l.enable(10),U.vertexColors&&l.enable(11),U.vertexAlphas&&l.enable(12),U.vertexUv1s&&l.enable(13),U.vertexUv2s&&l.enable(14),U.vertexUv3s&&l.enable(15),U.vertexTangents&&l.enable(16),U.anisotropy&&l.enable(17),U.alphaHash&&l.enable(18),U.batching&&l.enable(19),U.dispersion&&l.enable(20),U.batchingColor&&l.enable(21),U.gradientMap&&l.enable(22),k.push(l.mask),l.disableAll(),U.fog&&l.enable(0),U.useFog&&l.enable(1),U.flatShading&&l.enable(2),U.logarithmicDepthBuffer&&l.enable(3),U.reverseDepthBuffer&&l.enable(4),U.skinning&&l.enable(5),U.morphTargets&&l.enable(6),U.morphNormals&&l.enable(7),U.morphColors&&l.enable(8),U.premultipliedAlpha&&l.enable(9),U.shadowMapEnabled&&l.enable(10),U.doubleSided&&l.enable(11),U.flipSided&&l.enable(12),U.useDepthPacking&&l.enable(13),U.dithering&&l.enable(14),U.transmission&&l.enable(15),U.sheen&&l.enable(16),U.opaque&&l.enable(17),U.pointsUvs&&l.enable(18),U.decodeVideoTexture&&l.enable(19),U.decodeVideoTextureEmissive&&l.enable(20),U.alphaToCoverage&&l.enable(21),k.push(l.mask)}function C(k){const U=x[k.type];let K;if(U){const ye=Ul[U];K=_E.clone(ye.uniforms)}else K=k.uniforms;return K}function P(k,U){let K;for(let ye=0,ue=m.length;ye<ue;ye++){const we=m[ye];if(we.cacheKey===U){K=we,++K.usedTimes;break}}return K===void 0&&(K=new Kz(n,U,k,a),m.push(K)),K}function B(k){if(--k.usedTimes===0){const U=m.indexOf(k);m[U]=m[m.length-1],m.pop(),k.destroy()}}function j(k){u.remove(k)}function X(){u.dispose()}return{getParameters:T,getProgramCacheKey:S,getUniforms:C,acquireProgram:P,releaseProgram:B,releaseShaderCache:j,programs:m,dispose:X}}function tF(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let l=n.get(s);return l===void 0&&(l={},n.set(s,l)),l}function i(s){n.delete(s)}function r(s,l,u){n.get(s)[l]=u}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function nF(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function sA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function oA(){const n=[];let e=0;const t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function s(g,y,_,x,w,T){let S=n[e];return S===void 0?(S={id:g.id,object:g,geometry:y,material:_,groupOrder:x,renderOrder:g.renderOrder,z:w,group:T},n[e]=S):(S.id=g.id,S.object=g,S.geometry=y,S.material=_,S.groupOrder=x,S.renderOrder=g.renderOrder,S.z=w,S.group=T),e++,S}function l(g,y,_,x,w,T){const S=s(g,y,_,x,w,T);_.transmission>0?i.push(S):_.transparent===!0?r.push(S):t.push(S)}function u(g,y,_,x,w,T){const S=s(g,y,_,x,w,T);_.transmission>0?i.unshift(S):_.transparent===!0?r.unshift(S):t.unshift(S)}function f(g,y){t.length>1&&t.sort(g||nF),i.length>1&&i.sort(y||sA),r.length>1&&r.sort(y||sA)}function m(){for(let g=e,y=n.length;g<y;g++){const _=n[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:l,unshift:u,finish:m,sort:f}}function iF(){let n=new WeakMap;function e(i,r){const a=n.get(i);let s;return a===void 0?(s=new oA,n.set(i,[s])):r>=a.length?(s=new oA,a.push(s)):s=a[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function rF(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $,color:new Pt};break;case"SpotLight":t={position:new $,direction:new $,color:new Pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $,color:new Pt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $,skyColor:new Pt,groundColor:new Pt};break;case"RectAreaLight":t={color:new Pt,position:new $,halfWidth:new $,halfHeight:new $};break}return n[e.id]=t,t}}}function aF(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new it};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new it};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new it,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let sF=0;function oF(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function lF(n){const e=new rF,t=aF(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new $);const r=new $,a=new sn,s=new sn;function l(f){let m=0,g=0,y=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let _=0,x=0,w=0,T=0,S=0,O=0,L=0,C=0,P=0,B=0,j=0;f.sort(oF);for(let k=0,U=f.length;k<U;k++){const K=f[k],ye=K.color,ue=K.intensity,we=K.distance,Ae=K.shadow&&K.shadow.map?K.shadow.map.texture:null;if(K.isAmbientLight)m+=ye.r*ue,g+=ye.g*ue,y+=ye.b*ue;else if(K.isLightProbe){for(let Z=0;Z<9;Z++)i.probe[Z].addScaledVector(K.sh.coefficients[Z],ue);j++}else if(K.isDirectionalLight){const Z=e.get(K);if(Z.color.copy(K.color).multiplyScalar(K.intensity),K.castShadow){const le=K.shadow,de=t.get(K);de.shadowIntensity=le.intensity,de.shadowBias=le.bias,de.shadowNormalBias=le.normalBias,de.shadowRadius=le.radius,de.shadowMapSize=le.mapSize,i.directionalShadow[_]=de,i.directionalShadowMap[_]=Ae,i.directionalShadowMatrix[_]=K.shadow.matrix,O++}i.directional[_]=Z,_++}else if(K.isSpotLight){const Z=e.get(K);Z.position.setFromMatrixPosition(K.matrixWorld),Z.color.copy(ye).multiplyScalar(ue),Z.distance=we,Z.coneCos=Math.cos(K.angle),Z.penumbraCos=Math.cos(K.angle*(1-K.penumbra)),Z.decay=K.decay,i.spot[w]=Z;const le=K.shadow;if(K.map&&(i.spotLightMap[P]=K.map,P++,le.updateMatrices(K),K.castShadow&&B++),i.spotLightMatrix[w]=le.matrix,K.castShadow){const de=t.get(K);de.shadowIntensity=le.intensity,de.shadowBias=le.bias,de.shadowNormalBias=le.normalBias,de.shadowRadius=le.radius,de.shadowMapSize=le.mapSize,i.spotShadow[w]=de,i.spotShadowMap[w]=Ae,C++}w++}else if(K.isRectAreaLight){const Z=e.get(K);Z.color.copy(ye).multiplyScalar(ue),Z.halfWidth.set(K.width*.5,0,0),Z.halfHeight.set(0,K.height*.5,0),i.rectArea[T]=Z,T++}else if(K.isPointLight){const Z=e.get(K);if(Z.color.copy(K.color).multiplyScalar(K.intensity),Z.distance=K.distance,Z.decay=K.decay,K.castShadow){const le=K.shadow,de=t.get(K);de.shadowIntensity=le.intensity,de.shadowBias=le.bias,de.shadowNormalBias=le.normalBias,de.shadowRadius=le.radius,de.shadowMapSize=le.mapSize,de.shadowCameraNear=le.camera.near,de.shadowCameraFar=le.camera.far,i.pointShadow[x]=de,i.pointShadowMap[x]=Ae,i.pointShadowMatrix[x]=K.shadow.matrix,L++}i.point[x]=Z,x++}else if(K.isHemisphereLight){const Z=e.get(K);Z.skyColor.copy(K.color).multiplyScalar(ue),Z.groundColor.copy(K.groundColor).multiplyScalar(ue),i.hemi[S]=Z,S++}}T>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Vt.LTC_FLOAT_1,i.rectAreaLTC2=Vt.LTC_FLOAT_2):(i.rectAreaLTC1=Vt.LTC_HALF_1,i.rectAreaLTC2=Vt.LTC_HALF_2)),i.ambient[0]=m,i.ambient[1]=g,i.ambient[2]=y;const X=i.hash;(X.directionalLength!==_||X.pointLength!==x||X.spotLength!==w||X.rectAreaLength!==T||X.hemiLength!==S||X.numDirectionalShadows!==O||X.numPointShadows!==L||X.numSpotShadows!==C||X.numSpotMaps!==P||X.numLightProbes!==j)&&(i.directional.length=_,i.spot.length=w,i.rectArea.length=T,i.point.length=x,i.hemi.length=S,i.directionalShadow.length=O,i.directionalShadowMap.length=O,i.pointShadow.length=L,i.pointShadowMap.length=L,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=O,i.pointShadowMatrix.length=L,i.spotLightMatrix.length=C+P-B,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=j,X.directionalLength=_,X.pointLength=x,X.spotLength=w,X.rectAreaLength=T,X.hemiLength=S,X.numDirectionalShadows=O,X.numPointShadows=L,X.numSpotShadows=C,X.numSpotMaps=P,X.numLightProbes=j,i.version=sF++)}function u(f,m){let g=0,y=0,_=0,x=0,w=0;const T=m.matrixWorldInverse;for(let S=0,O=f.length;S<O;S++){const L=f[S];if(L.isDirectionalLight){const C=i.directional[g];C.direction.setFromMatrixPosition(L.matrixWorld),r.setFromMatrixPosition(L.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(T),g++}else if(L.isSpotLight){const C=i.spot[_];C.position.setFromMatrixPosition(L.matrixWorld),C.position.applyMatrix4(T),C.direction.setFromMatrixPosition(L.matrixWorld),r.setFromMatrixPosition(L.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(T),_++}else if(L.isRectAreaLight){const C=i.rectArea[x];C.position.setFromMatrixPosition(L.matrixWorld),C.position.applyMatrix4(T),s.identity(),a.copy(L.matrixWorld),a.premultiply(T),s.extractRotation(a),C.halfWidth.set(L.width*.5,0,0),C.halfHeight.set(0,L.height*.5,0),C.halfWidth.applyMatrix4(s),C.halfHeight.applyMatrix4(s),x++}else if(L.isPointLight){const C=i.point[y];C.position.setFromMatrixPosition(L.matrixWorld),C.position.applyMatrix4(T),y++}else if(L.isHemisphereLight){const C=i.hemi[w];C.direction.setFromMatrixPosition(L.matrixWorld),C.direction.transformDirection(T),w++}}}return{setup:l,setupView:u,state:i}}function lA(n){const e=new lF(n),t=[],i=[];function r(m){f.camera=m,t.length=0,i.length=0}function a(m){t.push(m)}function s(m){i.push(m)}function l(){e.setup(t)}function u(m){e.setupView(t,m)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:l,setupLightsView:u,pushLight:a,pushShadow:s}}function uF(n){let e=new WeakMap;function t(r,a=0){const s=e.get(r);let l;return s===void 0?(l=new lA(n),e.set(r,[l])):a>=s.length?(l=new lA(n),s.push(l)):l=s[a],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const cF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hF(n,e,t){let i=new rg;const r=new it,a=new it,s=new Di,l=new OE({depthPacking:NC}),u=new DE,f={},m=t.maxTextureSize,g={[Bu]:fs,[fs]:Bu,[Eo]:Eo},y=new nl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new it},radius:{value:4}},vertexShader:cF,fragmentShader:fF}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const x=new Nn;x.setAttribute("position",new Gn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Br(x,y),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$_;let S=this.type;this.render=function(B,j,X){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||B.length===0)return;const k=n.getRenderTarget(),U=n.getActiveCubeFace(),K=n.getActiveMipmapLevel(),ye=n.state;ye.setBlending(wc),ye.buffers.color.setClear(1,1,1,1),ye.buffers.depth.setTest(!0),ye.setScissorTest(!1);const ue=S!==Il&&this.type===Il,we=S===Il&&this.type!==Il;for(let Ae=0,Z=B.length;Ae<Z;Ae++){const le=B[Ae],de=le.shadow;if(de===void 0){console.warn("THREE.WebGLShadowMap:",le,"has no shadow.");continue}if(de.autoUpdate===!1&&de.needsUpdate===!1)continue;r.copy(de.mapSize);const Le=de.getFrameExtents();if(r.multiply(Le),a.copy(de.mapSize),(r.x>m||r.y>m)&&(r.x>m&&(a.x=Math.floor(m/Le.x),r.x=a.x*Le.x,de.mapSize.x=a.x),r.y>m&&(a.y=Math.floor(m/Le.y),r.y=a.y*Le.y,de.mapSize.y=a.y)),de.map===null||ue===!0||we===!0){const be=this.type!==Il?{minFilter:_a,magFilter:_a}:{};de.map!==null&&de.map.dispose(),de.map=new Hl(r.x,r.y,be),de.map.texture.name=le.name+".shadowMap",de.camera.updateProjectionMatrix()}n.setRenderTarget(de.map),n.clear();const ee=de.getViewportCount();for(let be=0;be<ee;be++){const Ge=de.getViewport(be);s.set(a.x*Ge.x,a.y*Ge.y,a.x*Ge.z,a.y*Ge.w),ye.viewport(s),de.updateMatrices(le,be),i=de.getFrustum(),C(j,X,de.camera,le,this.type)}de.isPointLightShadow!==!0&&this.type===Il&&O(de,X),de.needsUpdate=!1}S=this.type,T.needsUpdate=!1,n.setRenderTarget(k,U,K)};function O(B,j){const X=e.update(w);y.defines.VSM_SAMPLES!==B.blurSamples&&(y.defines.VSM_SAMPLES=B.blurSamples,_.defines.VSM_SAMPLES=B.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new Hl(r.x,r.y)),y.uniforms.shadow_pass.value=B.map.texture,y.uniforms.resolution.value=B.mapSize,y.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(j,null,X,y,w,null),_.uniforms.shadow_pass.value=B.mapPass.texture,_.uniforms.resolution.value=B.mapSize,_.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(j,null,X,_,w,null)}function L(B,j,X,k){let U=null;const K=X.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(K!==void 0)U=K;else if(U=X.isPointLight===!0?u:l,n.localClippingEnabled&&j.clipShadows===!0&&Array.isArray(j.clippingPlanes)&&j.clippingPlanes.length!==0||j.displacementMap&&j.displacementScale!==0||j.alphaMap&&j.alphaTest>0||j.map&&j.alphaTest>0||j.alphaToCoverage===!0){const ye=U.uuid,ue=j.uuid;let we=f[ye];we===void 0&&(we={},f[ye]=we);let Ae=we[ue];Ae===void 0&&(Ae=U.clone(),we[ue]=Ae,j.addEventListener("dispose",P)),U=Ae}if(U.visible=j.visible,U.wireframe=j.wireframe,k===Il?U.side=j.shadowSide!==null?j.shadowSide:j.side:U.side=j.shadowSide!==null?j.shadowSide:g[j.side],U.alphaMap=j.alphaMap,U.alphaTest=j.alphaToCoverage===!0?.5:j.alphaTest,U.map=j.map,U.clipShadows=j.clipShadows,U.clippingPlanes=j.clippingPlanes,U.clipIntersection=j.clipIntersection,U.displacementMap=j.displacementMap,U.displacementScale=j.displacementScale,U.displacementBias=j.displacementBias,U.wireframeLinewidth=j.wireframeLinewidth,U.linewidth=j.linewidth,X.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const ye=n.properties.get(U);ye.light=X}return U}function C(B,j,X,k,U){if(B.visible===!1)return;if(B.layers.test(j.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&U===Il)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(X.matrixWorldInverse,B.matrixWorld);const ue=e.update(B),we=B.material;if(Array.isArray(we)){const Ae=ue.groups;for(let Z=0,le=Ae.length;Z<le;Z++){const de=Ae[Z],Le=we[de.materialIndex];if(Le&&Le.visible){const ee=L(B,Le,k,U);B.onBeforeShadow(n,B,j,X,ue,ee,de),n.renderBufferDirect(X,null,ue,ee,B,de),B.onAfterShadow(n,B,j,X,ue,ee,de)}}}else if(we.visible){const Ae=L(B,we,k,U);B.onBeforeShadow(n,B,j,X,ue,Ae,null),n.renderBufferDirect(X,null,ue,Ae,B,null),B.onAfterShadow(n,B,j,X,ue,Ae,null)}}const ye=B.children;for(let ue=0,we=ye.length;ue<we;ue++)C(ye[ue],j,X,k,U)}function P(B){B.target.removeEventListener("dispose",P);for(const X in f){const k=f[X],U=B.target.uuid;U in k&&(k[U].dispose(),delete k[U])}}}const dF={[k2]:H2,[V2]:W2,[G2]:X2,[Dd]:j2,[H2]:k2,[W2]:V2,[X2]:G2,[j2]:Dd};function pF(n,e){function t(){let he=!1;const vt=new Di;let at=null;const At=new Di(0,0,0,0);return{setMask:function(ct){at!==ct&&!he&&(n.colorMask(ct,ct,ct,ct),at=ct)},setLocked:function(ct){he=ct},setClear:function(ct,Be,Ft,Qt,_n){_n===!0&&(ct*=Qt,Be*=Qt,Ft*=Qt),vt.set(ct,Be,Ft,Qt),At.equals(vt)===!1&&(n.clearColor(ct,Be,Ft,Qt),At.copy(vt))},reset:function(){he=!1,at=null,At.set(-1,0,0,0)}}}function i(){let he=!1,vt=!1,at=null,At=null,ct=null;return{setReversed:function(Be){if(vt!==Be){const Ft=e.get("EXT_clip_control");Be?Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.ZERO_TO_ONE_EXT):Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.NEGATIVE_ONE_TO_ONE_EXT),vt=Be;const Qt=ct;ct=null,this.setClear(Qt)}},getReversed:function(){return vt},setTest:function(Be){Be?xt(n.DEPTH_TEST):bt(n.DEPTH_TEST)},setMask:function(Be){at!==Be&&!he&&(n.depthMask(Be),at=Be)},setFunc:function(Be){if(vt&&(Be=dF[Be]),At!==Be){switch(Be){case k2:n.depthFunc(n.NEVER);break;case H2:n.depthFunc(n.ALWAYS);break;case V2:n.depthFunc(n.LESS);break;case Dd:n.depthFunc(n.LEQUAL);break;case G2:n.depthFunc(n.EQUAL);break;case j2:n.depthFunc(n.GEQUAL);break;case W2:n.depthFunc(n.GREATER);break;case X2:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}At=Be}},setLocked:function(Be){he=Be},setClear:function(Be){ct!==Be&&(vt&&(Be=1-Be),n.clearDepth(Be),ct=Be)},reset:function(){he=!1,at=null,At=null,ct=null,vt=!1}}}function r(){let he=!1,vt=null,at=null,At=null,ct=null,Be=null,Ft=null,Qt=null,_n=null;return{setTest:function(bn){he||(bn?xt(n.STENCIL_TEST):bt(n.STENCIL_TEST))},setMask:function(bn){vt!==bn&&!he&&(n.stencilMask(bn),vt=bn)},setFunc:function(bn,mi,gi){(at!==bn||At!==mi||ct!==gi)&&(n.stencilFunc(bn,mi,gi),at=bn,At=mi,ct=gi)},setOp:function(bn,mi,gi){(Be!==bn||Ft!==mi||Qt!==gi)&&(n.stencilOp(bn,mi,gi),Be=bn,Ft=mi,Qt=gi)},setLocked:function(bn){he=bn},setClear:function(bn){_n!==bn&&(n.clearStencil(bn),_n=bn)},reset:function(){he=!1,vt=null,at=null,At=null,ct=null,Be=null,Ft=null,Qt=null,_n=null}}}const a=new t,s=new i,l=new r,u=new WeakMap,f=new WeakMap;let m={},g={},y=new WeakMap,_=[],x=null,w=!1,T=null,S=null,O=null,L=null,C=null,P=null,B=null,j=new Pt(0,0,0),X=0,k=!1,U=null,K=null,ye=null,ue=null,we=null;const Ae=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Z=!1,le=0;const de=n.getParameter(n.VERSION);de.indexOf("WebGL")!==-1?(le=parseFloat(/^WebGL (\d)/.exec(de)[1]),Z=le>=1):de.indexOf("OpenGL ES")!==-1&&(le=parseFloat(/^OpenGL ES (\d)/.exec(de)[1]),Z=le>=2);let Le=null,ee={};const be=n.getParameter(n.SCISSOR_BOX),Ge=n.getParameter(n.VIEWPORT),Ye=new Di().fromArray(be),xe=new Di().fromArray(Ge);function Ke(he,vt,at,At){const ct=new Uint8Array(4),Be=n.createTexture();n.bindTexture(he,Be),n.texParameteri(he,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(he,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ft=0;Ft<at;Ft++)he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY?n.texImage3D(vt,0,n.RGBA,1,1,At,0,n.RGBA,n.UNSIGNED_BYTE,ct):n.texImage2D(vt+Ft,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ct);return Be}const et={};et[n.TEXTURE_2D]=Ke(n.TEXTURE_2D,n.TEXTURE_2D,1),et[n.TEXTURE_CUBE_MAP]=Ke(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),et[n.TEXTURE_2D_ARRAY]=Ke(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),et[n.TEXTURE_3D]=Ke(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),l.setClear(0),xt(n.DEPTH_TEST),s.setFunc(Dd),ut(!1),pt(OS),xt(n.CULL_FACE),ie(wc);function xt(he){m[he]!==!0&&(n.enable(he),m[he]=!0)}function bt(he){m[he]!==!1&&(n.disable(he),m[he]=!1)}function Kt(he,vt){return g[he]!==vt?(n.bindFramebuffer(he,vt),g[he]=vt,he===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=vt),he===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=vt),!0):!1}function Wt(he,vt){let at=_,At=!1;if(he){at=y.get(vt),at===void 0&&(at=[],y.set(vt,at));const ct=he.textures;if(at.length!==ct.length||at[0]!==n.COLOR_ATTACHMENT0){for(let Be=0,Ft=ct.length;Be<Ft;Be++)at[Be]=n.COLOR_ATTACHMENT0+Be;at.length=ct.length,At=!0}}else at[0]!==n.BACK&&(at[0]=n.BACK,At=!0);At&&n.drawBuffers(at)}function tn(he){return x!==he?(n.useProgram(he),x=he,!0):!1}const un={[kf]:n.FUNC_ADD,[QN]:n.FUNC_SUBTRACT,[JN]:n.FUNC_REVERSE_SUBTRACT};un[eC]=n.MIN,un[tC]=n.MAX;const Jt={[nC]:n.ZERO,[iC]:n.ONE,[rC]:n.SRC_COLOR,[z2]:n.SRC_ALPHA,[cC]:n.SRC_ALPHA_SATURATE,[lC]:n.DST_COLOR,[sC]:n.DST_ALPHA,[aC]:n.ONE_MINUS_SRC_COLOR,[F2]:n.ONE_MINUS_SRC_ALPHA,[uC]:n.ONE_MINUS_DST_COLOR,[oC]:n.ONE_MINUS_DST_ALPHA,[fC]:n.CONSTANT_COLOR,[hC]:n.ONE_MINUS_CONSTANT_COLOR,[dC]:n.CONSTANT_ALPHA,[pC]:n.ONE_MINUS_CONSTANT_ALPHA};function ie(he,vt,at,At,ct,Be,Ft,Qt,_n,bn){if(he===wc){w===!0&&(bt(n.BLEND),w=!1);return}if(w===!1&&(xt(n.BLEND),w=!0),he!==ZN){if(he!==T||bn!==k){if((S!==kf||C!==kf)&&(n.blendEquation(n.FUNC_ADD),S=kf,C=kf),bn)switch(he){case Rd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case DS:n.blendFunc(n.ONE,n.ONE);break;case LS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case IS:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case Rd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case DS:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case LS:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case IS:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}O=null,L=null,P=null,B=null,j.set(0,0,0),X=0,T=he,k=bn}return}ct=ct||vt,Be=Be||at,Ft=Ft||At,(vt!==S||ct!==C)&&(n.blendEquationSeparate(un[vt],un[ct]),S=vt,C=ct),(at!==O||At!==L||Be!==P||Ft!==B)&&(n.blendFuncSeparate(Jt[at],Jt[At],Jt[Be],Jt[Ft]),O=at,L=At,P=Be,B=Ft),(Qt.equals(j)===!1||_n!==X)&&(n.blendColor(Qt.r,Qt.g,Qt.b,_n),j.copy(Qt),X=_n),T=he,k=!1}function _t(he,vt){he.side===Eo?bt(n.CULL_FACE):xt(n.CULL_FACE);let at=he.side===fs;vt&&(at=!at),ut(at),he.blending===Rd&&he.transparent===!1?ie(wc):ie(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),s.setFunc(he.depthFunc),s.setTest(he.depthTest),s.setMask(he.depthWrite),a.setMask(he.colorWrite);const At=he.stencilWrite;l.setTest(At),At&&(l.setMask(he.stencilWriteMask),l.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),l.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),Ot(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?xt(n.SAMPLE_ALPHA_TO_COVERAGE):bt(n.SAMPLE_ALPHA_TO_COVERAGE)}function ut(he){U!==he&&(he?n.frontFace(n.CW):n.frontFace(n.CCW),U=he)}function pt(he){he!==$N?(xt(n.CULL_FACE),he!==K&&(he===OS?n.cullFace(n.BACK):he===YN?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):bt(n.CULL_FACE),K=he}function Ze(he){he!==ye&&(Z&&n.lineWidth(he),ye=he)}function Ot(he,vt,at){he?(xt(n.POLYGON_OFFSET_FILL),(ue!==vt||we!==at)&&(n.polygonOffset(vt,at),ue=vt,we=at)):bt(n.POLYGON_OFFSET_FILL)}function ft(he){he?xt(n.SCISSOR_TEST):bt(n.SCISSOR_TEST)}function St(he){he===void 0&&(he=n.TEXTURE0+Ae-1),Le!==he&&(n.activeTexture(he),Le=he)}function on(he,vt,at){at===void 0&&(Le===null?at=n.TEXTURE0+Ae-1:at=Le);let At=ee[at];At===void 0&&(At={type:void 0,texture:void 0},ee[at]=At),(At.type!==he||At.texture!==vt)&&(Le!==at&&(n.activeTexture(at),Le=at),n.bindTexture(he,vt||et[he]),At.type=he,At.texture=vt)}function re(){const he=ee[Le];he!==void 0&&he.type!==void 0&&(n.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function q(){try{n.compressedTexImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ce(){try{n.compressedTexImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function We(){try{n.texSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Qe(){try{n.texSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function He(){try{n.compressedTexSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ut(){try{n.compressedTexSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function wt(){try{n.texStorage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Gt(){try{n.texStorage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function $t(){try{n.texImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function rt(){try{n.texImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Tt(he){Ye.equals(he)===!1&&(n.scissor(he.x,he.y,he.z,he.w),Ye.copy(he))}function Ct(he){xe.equals(he)===!1&&(n.viewport(he.x,he.y,he.z,he.w),xe.copy(he))}function pe(he,vt){let at=f.get(vt);at===void 0&&(at=new WeakMap,f.set(vt,at));let At=at.get(he);At===void 0&&(At=n.getUniformBlockIndex(vt,he.name),at.set(he,At))}function Re(he,vt){const At=f.get(vt).get(he);u.get(vt)!==At&&(n.uniformBlockBinding(vt,At,he.__bindingPointIndex),u.set(vt,At))}function yt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},Le=null,ee={},g={},y=new WeakMap,_=[],x=null,w=!1,T=null,S=null,O=null,L=null,C=null,P=null,B=null,j=new Pt(0,0,0),X=0,k=!1,U=null,K=null,ye=null,ue=null,we=null,Ye.set(0,0,n.canvas.width,n.canvas.height),xe.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),l.reset()}return{buffers:{color:a,depth:s,stencil:l},enable:xt,disable:bt,bindFramebuffer:Kt,drawBuffers:Wt,useProgram:tn,setBlending:ie,setMaterial:_t,setFlipSided:ut,setCullFace:pt,setLineWidth:Ze,setPolygonOffset:Ot,setScissorTest:ft,activeTexture:St,bindTexture:on,unbindTexture:re,compressedTexImage2D:q,compressedTexImage3D:Ce,texImage2D:$t,texImage3D:rt,updateUBOMapping:pe,uniformBlockBinding:Re,texStorage2D:wt,texStorage3D:Gt,texSubImage2D:We,texSubImage3D:Qe,compressedTexSubImage2D:He,compressedTexSubImage3D:Ut,scissor:Tt,viewport:Ct,reset:yt}}function mF(n,e,t,i,r,a,s){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new it,m=new WeakMap;let g;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(re,q){return _?new OffscreenCanvas(re,q):y1("canvas")}function w(re,q,Ce){let We=1;const Qe=on(re);if((Qe.width>Ce||Qe.height>Ce)&&(We=Ce/Math.max(Qe.width,Qe.height)),We<1)if(typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&re instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&re instanceof ImageBitmap||typeof VideoFrame<"u"&&re instanceof VideoFrame){const He=Math.floor(We*Qe.width),Ut=Math.floor(We*Qe.height);g===void 0&&(g=x(He,Ut));const wt=q?x(He,Ut):g;return wt.width=He,wt.height=Ut,wt.getContext("2d").drawImage(re,0,0,He,Ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Qe.width+"x"+Qe.height+") to ("+He+"x"+Ut+")."),wt}else return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Qe.width+"x"+Qe.height+")."),re;return re}function T(re){return re.generateMipmaps}function S(re){n.generateMipmap(re)}function O(re){return re.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:re.isWebGL3DRenderTarget?n.TEXTURE_3D:re.isWebGLArrayRenderTarget||re.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function L(re,q,Ce,We,Qe=!1){if(re!==null){if(n[re]!==void 0)return n[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}let He=q;if(q===n.RED&&(Ce===n.FLOAT&&(He=n.R32F),Ce===n.HALF_FLOAT&&(He=n.R16F),Ce===n.UNSIGNED_BYTE&&(He=n.R8)),q===n.RED_INTEGER&&(Ce===n.UNSIGNED_BYTE&&(He=n.R8UI),Ce===n.UNSIGNED_SHORT&&(He=n.R16UI),Ce===n.UNSIGNED_INT&&(He=n.R32UI),Ce===n.BYTE&&(He=n.R8I),Ce===n.SHORT&&(He=n.R16I),Ce===n.INT&&(He=n.R32I)),q===n.RG&&(Ce===n.FLOAT&&(He=n.RG32F),Ce===n.HALF_FLOAT&&(He=n.RG16F),Ce===n.UNSIGNED_BYTE&&(He=n.RG8)),q===n.RG_INTEGER&&(Ce===n.UNSIGNED_BYTE&&(He=n.RG8UI),Ce===n.UNSIGNED_SHORT&&(He=n.RG16UI),Ce===n.UNSIGNED_INT&&(He=n.RG32UI),Ce===n.BYTE&&(He=n.RG8I),Ce===n.SHORT&&(He=n.RG16I),Ce===n.INT&&(He=n.RG32I)),q===n.RGB_INTEGER&&(Ce===n.UNSIGNED_BYTE&&(He=n.RGB8UI),Ce===n.UNSIGNED_SHORT&&(He=n.RGB16UI),Ce===n.UNSIGNED_INT&&(He=n.RGB32UI),Ce===n.BYTE&&(He=n.RGB8I),Ce===n.SHORT&&(He=n.RGB16I),Ce===n.INT&&(He=n.RGB32I)),q===n.RGBA_INTEGER&&(Ce===n.UNSIGNED_BYTE&&(He=n.RGBA8UI),Ce===n.UNSIGNED_SHORT&&(He=n.RGBA16UI),Ce===n.UNSIGNED_INT&&(He=n.RGBA32UI),Ce===n.BYTE&&(He=n.RGBA8I),Ce===n.SHORT&&(He=n.RGBA16I),Ce===n.INT&&(He=n.RGBA32I)),q===n.RGB&&Ce===n.UNSIGNED_INT_5_9_9_9_REV&&(He=n.RGB9_E5),q===n.RGBA){const Ut=Qe?p1:fi.getTransfer(We);Ce===n.FLOAT&&(He=n.RGBA32F),Ce===n.HALF_FLOAT&&(He=n.RGBA16F),Ce===n.UNSIGNED_BYTE&&(He=Ut===$i?n.SRGB8_ALPHA8:n.RGBA8),Ce===n.UNSIGNED_SHORT_4_4_4_4&&(He=n.RGBA4),Ce===n.UNSIGNED_SHORT_5_5_5_1&&(He=n.RGB5_A1)}return(He===n.R16F||He===n.R32F||He===n.RG16F||He===n.RG32F||He===n.RGBA16F||He===n.RGBA32F)&&e.get("EXT_color_buffer_float"),He}function C(re,q){let Ce;return re?q===null||q===Cc||q===Fm?Ce=n.DEPTH24_STENCIL8:q===Ls?Ce=n.DEPTH32F_STENCIL8:q===zm&&(Ce=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===Cc||q===Fm?Ce=n.DEPTH_COMPONENT24:q===Ls?Ce=n.DEPTH_COMPONENT32F:q===zm&&(Ce=n.DEPTH_COMPONENT16),Ce}function P(re,q){return T(re)===!0||re.isFramebufferTexture&&re.minFilter!==_a&&re.minFilter!==Tr?Math.log2(Math.max(q.width,q.height))+1:re.mipmaps!==void 0&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?q.mipmaps.length:1}function B(re){const q=re.target;q.removeEventListener("dispose",B),X(q),q.isVideoTexture&&m.delete(q)}function j(re){const q=re.target;q.removeEventListener("dispose",j),U(q)}function X(re){const q=i.get(re);if(q.__webglInit===void 0)return;const Ce=re.source,We=y.get(Ce);if(We){const Qe=We[q.__cacheKey];Qe.usedTimes--,Qe.usedTimes===0&&k(re),Object.keys(We).length===0&&y.delete(Ce)}i.remove(re)}function k(re){const q=i.get(re);n.deleteTexture(q.__webglTexture);const Ce=re.source,We=y.get(Ce);delete We[q.__cacheKey],s.memory.textures--}function U(re){const q=i.get(re);if(re.depthTexture&&(re.depthTexture.dispose(),i.remove(re.depthTexture)),re.isWebGLCubeRenderTarget)for(let We=0;We<6;We++){if(Array.isArray(q.__webglFramebuffer[We]))for(let Qe=0;Qe<q.__webglFramebuffer[We].length;Qe++)n.deleteFramebuffer(q.__webglFramebuffer[We][Qe]);else n.deleteFramebuffer(q.__webglFramebuffer[We]);q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer[We])}else{if(Array.isArray(q.__webglFramebuffer))for(let We=0;We<q.__webglFramebuffer.length;We++)n.deleteFramebuffer(q.__webglFramebuffer[We]);else n.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let We=0;We<q.__webglColorRenderbuffer.length;We++)q.__webglColorRenderbuffer[We]&&n.deleteRenderbuffer(q.__webglColorRenderbuffer[We]);q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const Ce=re.textures;for(let We=0,Qe=Ce.length;We<Qe;We++){const He=i.get(Ce[We]);He.__webglTexture&&(n.deleteTexture(He.__webglTexture),s.memory.textures--),i.remove(Ce[We])}i.remove(re)}let K=0;function ye(){K=0}function ue(){const re=K;return re>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+r.maxTextures),K+=1,re}function we(re){const q=[];return q.push(re.wrapS),q.push(re.wrapT),q.push(re.wrapR||0),q.push(re.magFilter),q.push(re.minFilter),q.push(re.anisotropy),q.push(re.internalFormat),q.push(re.format),q.push(re.type),q.push(re.generateMipmaps),q.push(re.premultiplyAlpha),q.push(re.flipY),q.push(re.unpackAlignment),q.push(re.colorSpace),q.join()}function Ae(re,q){const Ce=i.get(re);if(re.isVideoTexture&&ft(re),re.isRenderTargetTexture===!1&&re.version>0&&Ce.__version!==re.version){const We=re.image;if(We===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(We.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{et(Ce,re,q);return}}t.bindTexture(n.TEXTURE_2D,Ce.__webglTexture,n.TEXTURE0+q)}function Z(re,q){const Ce=i.get(re);if(re.version>0&&Ce.__version!==re.version){et(Ce,re,q);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Ce.__webglTexture,n.TEXTURE0+q)}function le(re,q){const Ce=i.get(re);if(re.version>0&&Ce.__version!==re.version){et(Ce,re,q);return}t.bindTexture(n.TEXTURE_3D,Ce.__webglTexture,n.TEXTURE0+q)}function de(re,q){const Ce=i.get(re);if(re.version>0&&Ce.__version!==re.version){xt(Ce,re,q);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Ce.__webglTexture,n.TEXTURE0+q)}const Le={[Kf]:n.REPEAT,[Mo]:n.CLAMP_TO_EDGE,[Bm]:n.MIRRORED_REPEAT},ee={[_a]:n.NEAREST,[K_]:n.NEAREST_MIPMAP_NEAREST,[bd]:n.NEAREST_MIPMAP_LINEAR,[Tr]:n.LINEAR,[Cm]:n.LINEAR_MIPMAP_NEAREST,[Jo]:n.LINEAR_MIPMAP_LINEAR},be={[OC]:n.NEVER,[BC]:n.ALWAYS,[DC]:n.LESS,[pE]:n.LEQUAL,[LC]:n.EQUAL,[PC]:n.GEQUAL,[IC]:n.GREATER,[UC]:n.NOTEQUAL};function Ge(re,q){if(q.type===Ls&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===Tr||q.magFilter===Cm||q.magFilter===bd||q.magFilter===Jo||q.minFilter===Tr||q.minFilter===Cm||q.minFilter===bd||q.minFilter===Jo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(re,n.TEXTURE_WRAP_S,Le[q.wrapS]),n.texParameteri(re,n.TEXTURE_WRAP_T,Le[q.wrapT]),(re===n.TEXTURE_3D||re===n.TEXTURE_2D_ARRAY)&&n.texParameteri(re,n.TEXTURE_WRAP_R,Le[q.wrapR]),n.texParameteri(re,n.TEXTURE_MAG_FILTER,ee[q.magFilter]),n.texParameteri(re,n.TEXTURE_MIN_FILTER,ee[q.minFilter]),q.compareFunction&&(n.texParameteri(re,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(re,n.TEXTURE_COMPARE_FUNC,be[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===_a||q.minFilter!==bd&&q.minFilter!==Jo||q.type===Ls&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||i.get(q).__currentAnisotropy){const Ce=e.get("EXT_texture_filter_anisotropic");n.texParameterf(re,Ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,r.getMaxAnisotropy())),i.get(q).__currentAnisotropy=q.anisotropy}}}function Ye(re,q){let Ce=!1;re.__webglInit===void 0&&(re.__webglInit=!0,q.addEventListener("dispose",B));const We=q.source;let Qe=y.get(We);Qe===void 0&&(Qe={},y.set(We,Qe));const He=we(q);if(He!==re.__cacheKey){Qe[He]===void 0&&(Qe[He]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,Ce=!0),Qe[He].usedTimes++;const Ut=Qe[re.__cacheKey];Ut!==void 0&&(Qe[re.__cacheKey].usedTimes--,Ut.usedTimes===0&&k(q)),re.__cacheKey=He,re.__webglTexture=Qe[He].texture}return Ce}function xe(re,q,Ce){return Math.floor(Math.floor(re/Ce)/q)}function Ke(re,q,Ce,We){const He=re.updateRanges;if(He.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,q.width,q.height,Ce,We,q.data);else{He.sort((rt,Tt)=>rt.start-Tt.start);let Ut=0;for(let rt=1;rt<He.length;rt++){const Tt=He[Ut],Ct=He[rt],pe=Tt.start+Tt.count,Re=xe(Ct.start,q.width,4),yt=xe(Tt.start,q.width,4);Ct.start<=pe+1&&Re===yt&&xe(Ct.start+Ct.count-1,q.width,4)===Re?Tt.count=Math.max(Tt.count,Ct.start+Ct.count-Tt.start):(++Ut,He[Ut]=Ct)}He.length=Ut+1;const wt=n.getParameter(n.UNPACK_ROW_LENGTH),Gt=n.getParameter(n.UNPACK_SKIP_PIXELS),$t=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,q.width);for(let rt=0,Tt=He.length;rt<Tt;rt++){const Ct=He[rt],pe=Math.floor(Ct.start/4),Re=Math.ceil(Ct.count/4),yt=pe%q.width,he=Math.floor(pe/q.width),vt=Re,at=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,yt),n.pixelStorei(n.UNPACK_SKIP_ROWS,he),t.texSubImage2D(n.TEXTURE_2D,0,yt,he,vt,at,Ce,We,q.data)}re.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,wt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Gt),n.pixelStorei(n.UNPACK_SKIP_ROWS,$t)}}function et(re,q,Ce){let We=n.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(We=n.TEXTURE_2D_ARRAY),q.isData3DTexture&&(We=n.TEXTURE_3D);const Qe=Ye(re,q),He=q.source;t.bindTexture(We,re.__webglTexture,n.TEXTURE0+Ce);const Ut=i.get(He);if(He.version!==Ut.__version||Qe===!0){t.activeTexture(n.TEXTURE0+Ce);const wt=fi.getPrimaries(fi.workingColorSpace),Gt=q.colorSpace===xc?null:fi.getPrimaries(q.colorSpace),$t=q.colorSpace===xc||wt===Gt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,$t);let rt=w(q.image,!1,r.maxTextureSize);rt=St(q,rt);const Tt=a.convert(q.format,q.colorSpace),Ct=a.convert(q.type);let pe=L(q.internalFormat,Tt,Ct,q.colorSpace,q.isVideoTexture);Ge(We,q);let Re;const yt=q.mipmaps,he=q.isVideoTexture!==!0,vt=Ut.__version===void 0||Qe===!0,at=He.dataReady,At=P(q,rt);if(q.isDepthTexture)pe=C(q.format===Hm,q.type),vt&&(he?t.texStorage2D(n.TEXTURE_2D,1,pe,rt.width,rt.height):t.texImage2D(n.TEXTURE_2D,0,pe,rt.width,rt.height,0,Tt,Ct,null));else if(q.isDataTexture)if(yt.length>0){he&&vt&&t.texStorage2D(n.TEXTURE_2D,At,pe,yt[0].width,yt[0].height);for(let ct=0,Be=yt.length;ct<Be;ct++)Re=yt[ct],he?at&&t.texSubImage2D(n.TEXTURE_2D,ct,0,0,Re.width,Re.height,Tt,Ct,Re.data):t.texImage2D(n.TEXTURE_2D,ct,pe,Re.width,Re.height,0,Tt,Ct,Re.data);q.generateMipmaps=!1}else he?(vt&&t.texStorage2D(n.TEXTURE_2D,At,pe,rt.width,rt.height),at&&Ke(q,rt,Tt,Ct)):t.texImage2D(n.TEXTURE_2D,0,pe,rt.width,rt.height,0,Tt,Ct,rt.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){he&&vt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,At,pe,yt[0].width,yt[0].height,rt.depth);for(let ct=0,Be=yt.length;ct<Be;ct++)if(Re=yt[ct],q.format!==cs)if(Tt!==null)if(he){if(at)if(q.layerUpdates.size>0){const Ft=WS(Re.width,Re.height,q.format,q.type);for(const Qt of q.layerUpdates){const _n=Re.data.subarray(Qt*Ft/Re.data.BYTES_PER_ELEMENT,(Qt+1)*Ft/Re.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ct,0,0,Qt,Re.width,Re.height,1,Tt,_n)}q.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ct,0,0,0,Re.width,Re.height,rt.depth,Tt,Re.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ct,pe,Re.width,Re.height,rt.depth,0,Re.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else he?at&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ct,0,0,0,Re.width,Re.height,rt.depth,Tt,Ct,Re.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ct,pe,Re.width,Re.height,rt.depth,0,Tt,Ct,Re.data)}else{he&&vt&&t.texStorage2D(n.TEXTURE_2D,At,pe,yt[0].width,yt[0].height);for(let ct=0,Be=yt.length;ct<Be;ct++)Re=yt[ct],q.format!==cs?Tt!==null?he?at&&t.compressedTexSubImage2D(n.TEXTURE_2D,ct,0,0,Re.width,Re.height,Tt,Re.data):t.compressedTexImage2D(n.TEXTURE_2D,ct,pe,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?at&&t.texSubImage2D(n.TEXTURE_2D,ct,0,0,Re.width,Re.height,Tt,Ct,Re.data):t.texImage2D(n.TEXTURE_2D,ct,pe,Re.width,Re.height,0,Tt,Ct,Re.data)}else if(q.isDataArrayTexture)if(he){if(vt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,At,pe,rt.width,rt.height,rt.depth),at)if(q.layerUpdates.size>0){const ct=WS(rt.width,rt.height,q.format,q.type);for(const Be of q.layerUpdates){const Ft=rt.data.subarray(Be*ct/rt.data.BYTES_PER_ELEMENT,(Be+1)*ct/rt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Be,rt.width,rt.height,1,Tt,Ct,Ft)}q.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,rt.width,rt.height,rt.depth,Tt,Ct,rt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,pe,rt.width,rt.height,rt.depth,0,Tt,Ct,rt.data);else if(q.isData3DTexture)he?(vt&&t.texStorage3D(n.TEXTURE_3D,At,pe,rt.width,rt.height,rt.depth),at&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,rt.width,rt.height,rt.depth,Tt,Ct,rt.data)):t.texImage3D(n.TEXTURE_3D,0,pe,rt.width,rt.height,rt.depth,0,Tt,Ct,rt.data);else if(q.isFramebufferTexture){if(vt)if(he)t.texStorage2D(n.TEXTURE_2D,At,pe,rt.width,rt.height);else{let ct=rt.width,Be=rt.height;for(let Ft=0;Ft<At;Ft++)t.texImage2D(n.TEXTURE_2D,Ft,pe,ct,Be,0,Tt,Ct,null),ct>>=1,Be>>=1}}else if(yt.length>0){if(he&&vt){const ct=on(yt[0]);t.texStorage2D(n.TEXTURE_2D,At,pe,ct.width,ct.height)}for(let ct=0,Be=yt.length;ct<Be;ct++)Re=yt[ct],he?at&&t.texSubImage2D(n.TEXTURE_2D,ct,0,0,Tt,Ct,Re):t.texImage2D(n.TEXTURE_2D,ct,pe,Tt,Ct,Re);q.generateMipmaps=!1}else if(he){if(vt){const ct=on(rt);t.texStorage2D(n.TEXTURE_2D,At,pe,ct.width,ct.height)}at&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Tt,Ct,rt)}else t.texImage2D(n.TEXTURE_2D,0,pe,Tt,Ct,rt);T(q)&&S(We),Ut.__version=He.version,q.onUpdate&&q.onUpdate(q)}re.__version=q.version}function xt(re,q,Ce){if(q.image.length!==6)return;const We=Ye(re,q),Qe=q.source;t.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+Ce);const He=i.get(Qe);if(Qe.version!==He.__version||We===!0){t.activeTexture(n.TEXTURE0+Ce);const Ut=fi.getPrimaries(fi.workingColorSpace),wt=q.colorSpace===xc?null:fi.getPrimaries(q.colorSpace),Gt=q.colorSpace===xc||Ut===wt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Gt);const $t=q.isCompressedTexture||q.image[0].isCompressedTexture,rt=q.image[0]&&q.image[0].isDataTexture,Tt=[];for(let Be=0;Be<6;Be++)!$t&&!rt?Tt[Be]=w(q.image[Be],!0,r.maxCubemapSize):Tt[Be]=rt?q.image[Be].image:q.image[Be],Tt[Be]=St(q,Tt[Be]);const Ct=Tt[0],pe=a.convert(q.format,q.colorSpace),Re=a.convert(q.type),yt=L(q.internalFormat,pe,Re,q.colorSpace),he=q.isVideoTexture!==!0,vt=He.__version===void 0||We===!0,at=Qe.dataReady;let At=P(q,Ct);Ge(n.TEXTURE_CUBE_MAP,q);let ct;if($t){he&&vt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,At,yt,Ct.width,Ct.height);for(let Be=0;Be<6;Be++){ct=Tt[Be].mipmaps;for(let Ft=0;Ft<ct.length;Ft++){const Qt=ct[Ft];q.format!==cs?pe!==null?he?at&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Ft,0,0,Qt.width,Qt.height,pe,Qt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Ft,yt,Qt.width,Qt.height,0,Qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Ft,0,0,Qt.width,Qt.height,pe,Re,Qt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Ft,yt,Qt.width,Qt.height,0,pe,Re,Qt.data)}}}else{if(ct=q.mipmaps,he&&vt){ct.length>0&&At++;const Be=on(Tt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,At,yt,Be.width,Be.height)}for(let Be=0;Be<6;Be++)if(rt){he?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,Tt[Be].width,Tt[Be].height,pe,Re,Tt[Be].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,yt,Tt[Be].width,Tt[Be].height,0,pe,Re,Tt[Be].data);for(let Ft=0;Ft<ct.length;Ft++){const _n=ct[Ft].image[Be].image;he?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Ft+1,0,0,_n.width,_n.height,pe,Re,_n.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Ft+1,yt,_n.width,_n.height,0,pe,Re,_n.data)}}else{he?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,pe,Re,Tt[Be]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,yt,pe,Re,Tt[Be]);for(let Ft=0;Ft<ct.length;Ft++){const Qt=ct[Ft];he?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Ft+1,0,0,pe,Re,Qt.image[Be]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Ft+1,yt,pe,Re,Qt.image[Be])}}}T(q)&&S(n.TEXTURE_CUBE_MAP),He.__version=Qe.version,q.onUpdate&&q.onUpdate(q)}re.__version=q.version}function bt(re,q,Ce,We,Qe,He){const Ut=a.convert(Ce.format,Ce.colorSpace),wt=a.convert(Ce.type),Gt=L(Ce.internalFormat,Ut,wt,Ce.colorSpace),$t=i.get(q),rt=i.get(Ce);if(rt.__renderTarget=q,!$t.__hasExternalTextures){const Tt=Math.max(1,q.width>>He),Ct=Math.max(1,q.height>>He);Qe===n.TEXTURE_3D||Qe===n.TEXTURE_2D_ARRAY?t.texImage3D(Qe,He,Gt,Tt,Ct,q.depth,0,Ut,wt,null):t.texImage2D(Qe,He,Gt,Tt,Ct,0,Ut,wt,null)}t.bindFramebuffer(n.FRAMEBUFFER,re),Ot(q)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,We,Qe,rt.__webglTexture,0,Ze(q)):(Qe===n.TEXTURE_2D||Qe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Qe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,We,Qe,rt.__webglTexture,He),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Kt(re,q,Ce){if(n.bindRenderbuffer(n.RENDERBUFFER,re),q.depthBuffer){const We=q.depthTexture,Qe=We&&We.isDepthTexture?We.type:null,He=C(q.stencilBuffer,Qe),Ut=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,wt=Ze(q);Ot(q)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,wt,He,q.width,q.height):Ce?n.renderbufferStorageMultisample(n.RENDERBUFFER,wt,He,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,He,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ut,n.RENDERBUFFER,re)}else{const We=q.textures;for(let Qe=0;Qe<We.length;Qe++){const He=We[Qe],Ut=a.convert(He.format,He.colorSpace),wt=a.convert(He.type),Gt=L(He.internalFormat,Ut,wt,He.colorSpace),$t=Ze(q);Ce&&Ot(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,$t,Gt,q.width,q.height):Ot(q)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,$t,Gt,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,Gt,q.width,q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Wt(re,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,re),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const We=i.get(q.depthTexture);We.__renderTarget=q,(!We.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),Ae(q.depthTexture,0);const Qe=We.__webglTexture,He=Ze(q);if(q.depthTexture.format===km)Ot(q)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Qe,0,He):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Qe,0);else if(q.depthTexture.format===Hm)Ot(q)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Qe,0,He):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Qe,0);else throw new Error("Unknown depthTexture format")}function tn(re){const q=i.get(re),Ce=re.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==re.depthTexture){const We=re.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),We){const Qe=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,We.removeEventListener("dispose",Qe)};We.addEventListener("dispose",Qe),q.__depthDisposeCallback=Qe}q.__boundDepthTexture=We}if(re.depthTexture&&!q.__autoAllocateDepthBuffer){if(Ce)throw new Error("target.depthTexture not supported in Cube render targets");const We=re.texture.mipmaps;We&&We.length>0?Wt(q.__webglFramebuffer[0],re):Wt(q.__webglFramebuffer,re)}else if(Ce){q.__webglDepthbuffer=[];for(let We=0;We<6;We++)if(t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[We]),q.__webglDepthbuffer[We]===void 0)q.__webglDepthbuffer[We]=n.createRenderbuffer(),Kt(q.__webglDepthbuffer[We],re,!1);else{const Qe=re.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=q.__webglDepthbuffer[We];n.bindRenderbuffer(n.RENDERBUFFER,He),n.framebufferRenderbuffer(n.FRAMEBUFFER,Qe,n.RENDERBUFFER,He)}}else{const We=re.texture.mipmaps;if(We&&We.length>0?t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=n.createRenderbuffer(),Kt(q.__webglDepthbuffer,re,!1);else{const Qe=re.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=q.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,He),n.framebufferRenderbuffer(n.FRAMEBUFFER,Qe,n.RENDERBUFFER,He)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function un(re,q,Ce){const We=i.get(re);q!==void 0&&bt(We.__webglFramebuffer,re,re.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Ce!==void 0&&tn(re)}function Jt(re){const q=re.texture,Ce=i.get(re),We=i.get(q);re.addEventListener("dispose",j);const Qe=re.textures,He=re.isWebGLCubeRenderTarget===!0,Ut=Qe.length>1;if(Ut||(We.__webglTexture===void 0&&(We.__webglTexture=n.createTexture()),We.__version=q.version,s.memory.textures++),He){Ce.__webglFramebuffer=[];for(let wt=0;wt<6;wt++)if(q.mipmaps&&q.mipmaps.length>0){Ce.__webglFramebuffer[wt]=[];for(let Gt=0;Gt<q.mipmaps.length;Gt++)Ce.__webglFramebuffer[wt][Gt]=n.createFramebuffer()}else Ce.__webglFramebuffer[wt]=n.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){Ce.__webglFramebuffer=[];for(let wt=0;wt<q.mipmaps.length;wt++)Ce.__webglFramebuffer[wt]=n.createFramebuffer()}else Ce.__webglFramebuffer=n.createFramebuffer();if(Ut)for(let wt=0,Gt=Qe.length;wt<Gt;wt++){const $t=i.get(Qe[wt]);$t.__webglTexture===void 0&&($t.__webglTexture=n.createTexture(),s.memory.textures++)}if(re.samples>0&&Ot(re)===!1){Ce.__webglMultisampledFramebuffer=n.createFramebuffer(),Ce.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer);for(let wt=0;wt<Qe.length;wt++){const Gt=Qe[wt];Ce.__webglColorRenderbuffer[wt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Ce.__webglColorRenderbuffer[wt]);const $t=a.convert(Gt.format,Gt.colorSpace),rt=a.convert(Gt.type),Tt=L(Gt.internalFormat,$t,rt,Gt.colorSpace,re.isXRRenderTarget===!0),Ct=Ze(re);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,Tt,re.width,re.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.RENDERBUFFER,Ce.__webglColorRenderbuffer[wt])}n.bindRenderbuffer(n.RENDERBUFFER,null),re.depthBuffer&&(Ce.__webglDepthRenderbuffer=n.createRenderbuffer(),Kt(Ce.__webglDepthRenderbuffer,re,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(He){t.bindTexture(n.TEXTURE_CUBE_MAP,We.__webglTexture),Ge(n.TEXTURE_CUBE_MAP,q);for(let wt=0;wt<6;wt++)if(q.mipmaps&&q.mipmaps.length>0)for(let Gt=0;Gt<q.mipmaps.length;Gt++)bt(Ce.__webglFramebuffer[wt][Gt],re,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Gt);else bt(Ce.__webglFramebuffer[wt],re,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0);T(q)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ut){for(let wt=0,Gt=Qe.length;wt<Gt;wt++){const $t=Qe[wt],rt=i.get($t);t.bindTexture(n.TEXTURE_2D,rt.__webglTexture),Ge(n.TEXTURE_2D,$t),bt(Ce.__webglFramebuffer,re,$t,n.COLOR_ATTACHMENT0+wt,n.TEXTURE_2D,0),T($t)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let wt=n.TEXTURE_2D;if((re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(wt=re.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(wt,We.__webglTexture),Ge(wt,q),q.mipmaps&&q.mipmaps.length>0)for(let Gt=0;Gt<q.mipmaps.length;Gt++)bt(Ce.__webglFramebuffer[Gt],re,q,n.COLOR_ATTACHMENT0,wt,Gt);else bt(Ce.__webglFramebuffer,re,q,n.COLOR_ATTACHMENT0,wt,0);T(q)&&S(wt),t.unbindTexture()}re.depthBuffer&&tn(re)}function ie(re){const q=re.textures;for(let Ce=0,We=q.length;Ce<We;Ce++){const Qe=q[Ce];if(T(Qe)){const He=O(re),Ut=i.get(Qe).__webglTexture;t.bindTexture(He,Ut),S(He),t.unbindTexture()}}}const _t=[],ut=[];function pt(re){if(re.samples>0){if(Ot(re)===!1){const q=re.textures,Ce=re.width,We=re.height;let Qe=n.COLOR_BUFFER_BIT;const He=re.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ut=i.get(re),wt=q.length>1;if(wt)for(let $t=0;$t<q.length;$t++)t.bindFramebuffer(n.FRAMEBUFFER,Ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+$t,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+$t,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ut.__webglMultisampledFramebuffer);const Gt=re.texture.mipmaps;Gt&&Gt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ut.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ut.__webglFramebuffer);for(let $t=0;$t<q.length;$t++){if(re.resolveDepthBuffer&&(re.depthBuffer&&(Qe|=n.DEPTH_BUFFER_BIT),re.stencilBuffer&&re.resolveStencilBuffer&&(Qe|=n.STENCIL_BUFFER_BIT)),wt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ut.__webglColorRenderbuffer[$t]);const rt=i.get(q[$t]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,rt,0)}n.blitFramebuffer(0,0,Ce,We,0,0,Ce,We,Qe,n.NEAREST),u===!0&&(_t.length=0,ut.length=0,_t.push(n.COLOR_ATTACHMENT0+$t),re.depthBuffer&&re.resolveDepthBuffer===!1&&(_t.push(He),ut.push(He),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ut)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,_t))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),wt)for(let $t=0;$t<q.length;$t++){t.bindFramebuffer(n.FRAMEBUFFER,Ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+$t,n.RENDERBUFFER,Ut.__webglColorRenderbuffer[$t]);const rt=i.get(q[$t]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+$t,n.TEXTURE_2D,rt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ut.__webglMultisampledFramebuffer)}else if(re.depthBuffer&&re.resolveDepthBuffer===!1&&u){const q=re.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[q])}}}function Ze(re){return Math.min(r.maxSamples,re.samples)}function Ot(re){const q=i.get(re);return re.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function ft(re){const q=s.render.frame;m.get(re)!==q&&(m.set(re,q),re.update())}function St(re,q){const Ce=re.colorSpace,We=re.format,Qe=re.type;return re.isCompressedTexture===!0||re.isVideoTexture===!0||Ce!==$a&&Ce!==xc&&(fi.getTransfer(Ce)===$i?(We!==cs||Qe!==tl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ce)),q}function on(re){return typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement?(f.width=re.naturalWidth||re.width,f.height=re.naturalHeight||re.height):typeof VideoFrame<"u"&&re instanceof VideoFrame?(f.width=re.displayWidth,f.height=re.displayHeight):(f.width=re.width,f.height=re.height),f}this.allocateTextureUnit=ue,this.resetTextureUnits=ye,this.setTexture2D=Ae,this.setTexture2DArray=Z,this.setTexture3D=le,this.setTextureCube=de,this.rebindTextures=un,this.setupRenderTarget=Jt,this.updateRenderTargetMipmap=ie,this.updateMultisampleRenderTarget=pt,this.setupDepthRenderbuffer=tn,this.setupFrameBufferTexture=bt,this.useMultisampledRTT=Ot}function G5(n,e){function t(i,r=xc){let a;const s=fi.getTransfer(r);if(i===tl)return n.UNSIGNED_BYTE;if(i===Q_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===J_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===oE)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===aE)return n.BYTE;if(i===sE)return n.SHORT;if(i===zm)return n.UNSIGNED_SHORT;if(i===Z_)return n.INT;if(i===Cc)return n.UNSIGNED_INT;if(i===Ls)return n.FLOAT;if(i===$d)return n.HALF_FLOAT;if(i===lE)return n.ALPHA;if(i===uE)return n.RGB;if(i===cs)return n.RGBA;if(i===km)return n.DEPTH_COMPONENT;if(i===Hm)return n.DEPTH_STENCIL;if(i===e3)return n.RED;if(i===D1)return n.RED_INTEGER;if(i===cE)return n.RG;if(i===t3)return n.RG_INTEGER;if(i===n3)return n.RGBA_INTEGER;if(i===J0||i===e1||i===t1||i===n1)if(s===$i)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===J0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===e1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===t1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===n1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===J0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===e1)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===t1)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===n1)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===q2||i===$2||i===Y2||i===K2)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===q2)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===$2)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Y2)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===K2)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Z2||i===Q2||i===J2)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===Z2||i===Q2)return s===$i?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===J2)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===e_||i===t_||i===n_||i===i_||i===r_||i===a_||i===s_||i===o_||i===l_||i===u_||i===c_||i===f_||i===h_||i===d_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===e_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===t_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===n_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===i_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===r_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===a_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===s_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===o_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===l_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===u_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===c_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===f_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===h_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===d_)return s===$i?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===i1||i===p_||i===m_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===i1)return s===$i?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===p_)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===m_)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===fE||i===g_||i===y_||i===v_)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===i1)return a.COMPRESSED_RED_RGTC1_EXT;if(i===g_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===y_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===v_)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Fm?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const gF=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,yF=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class vF{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Mr,a=e.properties.get(r);a.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new nl({vertexShader:gF,fragmentShader:yF,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Br(new ag(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class _F extends Fu{constructor(e,t){super();const i=this;let r=null,a=1,s=null,l="local-floor",u=1,f=null,m=null,g=null,y=null,_=null,x=null;const w=new vF,T=t.getContextAttributes();let S=null,O=null;const L=[],C=[],P=new it;let B=null;const j=new Wr;j.viewport=new Di;const X=new Wr;X.viewport=new Di;const k=[j,X],U=new O5;let K=null,ye=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(xe){let Ke=L[xe];return Ke===void 0&&(Ke=new y2,L[xe]=Ke),Ke.getTargetRaySpace()},this.getControllerGrip=function(xe){let Ke=L[xe];return Ke===void 0&&(Ke=new y2,L[xe]=Ke),Ke.getGripSpace()},this.getHand=function(xe){let Ke=L[xe];return Ke===void 0&&(Ke=new y2,L[xe]=Ke),Ke.getHandSpace()};function ue(xe){const Ke=C.indexOf(xe.inputSource);if(Ke===-1)return;const et=L[Ke];et!==void 0&&(et.update(xe.inputSource,xe.frame,f||s),et.dispatchEvent({type:xe.type,data:xe.inputSource}))}function we(){r.removeEventListener("select",ue),r.removeEventListener("selectstart",ue),r.removeEventListener("selectend",ue),r.removeEventListener("squeeze",ue),r.removeEventListener("squeezestart",ue),r.removeEventListener("squeezeend",ue),r.removeEventListener("end",we),r.removeEventListener("inputsourceschange",Ae);for(let xe=0;xe<L.length;xe++){const Ke=C[xe];Ke!==null&&(C[xe]=null,L[xe].disconnect(Ke))}K=null,ye=null,w.reset(),e.setRenderTarget(S),_=null,y=null,g=null,r=null,O=null,Ye.stop(),i.isPresenting=!1,e.setPixelRatio(B),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(xe){a=xe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(xe){l=xe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||s},this.setReferenceSpace=function(xe){f=xe},this.getBaseLayer=function(){return y!==null?y:_},this.getBinding=function(){return g},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(xe){if(r=xe,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",ue),r.addEventListener("selectstart",ue),r.addEventListener("selectend",ue),r.addEventListener("squeeze",ue),r.addEventListener("squeezestart",ue),r.addEventListener("squeezeend",ue),r.addEventListener("end",we),r.addEventListener("inputsourceschange",Ae),T.xrCompatible!==!0&&await t.makeXRCompatible(),B=e.getPixelRatio(),e.getSize(P),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let et=null,xt=null,bt=null;T.depth&&(bt=T.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,et=T.stencil?Hm:km,xt=T.stencil?Fm:Cc);const Kt={colorFormat:t.RGBA8,depthFormat:bt,scaleFactor:a};g=new XRWebGLBinding(r,t),y=g.createProjectionLayer(Kt),r.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),O=new Hl(y.textureWidth,y.textureHeight,{format:cs,type:tl,depthTexture:new p3(y.textureWidth,y.textureHeight,xt,void 0,void 0,void 0,void 0,void 0,void 0,et),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const et={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:a};_=new XRWebGLLayer(r,t,et),r.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),O=new Hl(_.framebufferWidth,_.framebufferHeight,{format:cs,type:tl,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}O.isXRRenderTarget=!0,this.setFoveation(u),f=null,s=await r.requestReferenceSpace(l),Ye.setContext(r),Ye.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function Ae(xe){for(let Ke=0;Ke<xe.removed.length;Ke++){const et=xe.removed[Ke],xt=C.indexOf(et);xt>=0&&(C[xt]=null,L[xt].disconnect(et))}for(let Ke=0;Ke<xe.added.length;Ke++){const et=xe.added[Ke];let xt=C.indexOf(et);if(xt===-1){for(let Kt=0;Kt<L.length;Kt++)if(Kt>=C.length){C.push(et),xt=Kt;break}else if(C[Kt]===null){C[Kt]=et,xt=Kt;break}if(xt===-1)break}const bt=L[xt];bt&&bt.connect(et)}}const Z=new $,le=new $;function de(xe,Ke,et){Z.setFromMatrixPosition(Ke.matrixWorld),le.setFromMatrixPosition(et.matrixWorld);const xt=Z.distanceTo(le),bt=Ke.projectionMatrix.elements,Kt=et.projectionMatrix.elements,Wt=bt[14]/(bt[10]-1),tn=bt[14]/(bt[10]+1),un=(bt[9]+1)/bt[5],Jt=(bt[9]-1)/bt[5],ie=(bt[8]-1)/bt[0],_t=(Kt[8]+1)/Kt[0],ut=Wt*ie,pt=Wt*_t,Ze=xt/(-ie+_t),Ot=Ze*-ie;if(Ke.matrixWorld.decompose(xe.position,xe.quaternion,xe.scale),xe.translateX(Ot),xe.translateZ(Ze),xe.matrixWorld.compose(xe.position,xe.quaternion,xe.scale),xe.matrixWorldInverse.copy(xe.matrixWorld).invert(),bt[10]===-1)xe.projectionMatrix.copy(Ke.projectionMatrix),xe.projectionMatrixInverse.copy(Ke.projectionMatrixInverse);else{const ft=Wt+Ze,St=tn+Ze,on=ut-Ot,re=pt+(xt-Ot),q=un*tn/St*ft,Ce=Jt*tn/St*ft;xe.projectionMatrix.makePerspective(on,re,q,Ce,ft,St),xe.projectionMatrixInverse.copy(xe.projectionMatrix).invert()}}function Le(xe,Ke){Ke===null?xe.matrixWorld.copy(xe.matrix):xe.matrixWorld.multiplyMatrices(Ke.matrixWorld,xe.matrix),xe.matrixWorldInverse.copy(xe.matrixWorld).invert()}this.updateCamera=function(xe){if(r===null)return;let Ke=xe.near,et=xe.far;w.texture!==null&&(w.depthNear>0&&(Ke=w.depthNear),w.depthFar>0&&(et=w.depthFar)),U.near=X.near=j.near=Ke,U.far=X.far=j.far=et,(K!==U.near||ye!==U.far)&&(r.updateRenderState({depthNear:U.near,depthFar:U.far}),K=U.near,ye=U.far),j.layers.mask=xe.layers.mask|2,X.layers.mask=xe.layers.mask|4,U.layers.mask=j.layers.mask|X.layers.mask;const xt=xe.parent,bt=U.cameras;Le(U,xt);for(let Kt=0;Kt<bt.length;Kt++)Le(bt[Kt],xt);bt.length===2?de(U,j,X):U.projectionMatrix.copy(j.projectionMatrix),ee(xe,U,xt)};function ee(xe,Ke,et){et===null?xe.matrix.copy(Ke.matrixWorld):(xe.matrix.copy(et.matrixWorld),xe.matrix.invert(),xe.matrix.multiply(Ke.matrixWorld)),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale),xe.updateMatrixWorld(!0),xe.projectionMatrix.copy(Ke.projectionMatrix),xe.projectionMatrixInverse.copy(Ke.projectionMatrixInverse),xe.isPerspectiveCamera&&(xe.fov=jm*2*Math.atan(1/xe.projectionMatrix.elements[5]),xe.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(y===null&&_===null))return u},this.setFoveation=function(xe){u=xe,y!==null&&(y.fixedFoveation=xe),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=xe)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(U)};let be=null;function Ge(xe,Ke){if(m=Ke.getViewerPose(f||s),x=Ke,m!==null){const et=m.views;_!==null&&(e.setRenderTargetFramebuffer(O,_.framebuffer),e.setRenderTarget(O));let xt=!1;et.length!==U.cameras.length&&(U.cameras.length=0,xt=!0);for(let Wt=0;Wt<et.length;Wt++){const tn=et[Wt];let un=null;if(_!==null)un=_.getViewport(tn);else{const ie=g.getViewSubImage(y,tn);un=ie.viewport,Wt===0&&(e.setRenderTargetTextures(O,ie.colorTexture,ie.depthStencilTexture),e.setRenderTarget(O))}let Jt=k[Wt];Jt===void 0&&(Jt=new Wr,Jt.layers.enable(Wt),Jt.viewport=new Di,k[Wt]=Jt),Jt.matrix.fromArray(tn.transform.matrix),Jt.matrix.decompose(Jt.position,Jt.quaternion,Jt.scale),Jt.projectionMatrix.fromArray(tn.projectionMatrix),Jt.projectionMatrixInverse.copy(Jt.projectionMatrix).invert(),Jt.viewport.set(un.x,un.y,un.width,un.height),Wt===0&&(U.matrix.copy(Jt.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),xt===!0&&U.cameras.push(Jt)}const bt=r.enabledFeatures;if(bt&&bt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&g){const Wt=g.getDepthInformation(et[0]);Wt&&Wt.isValid&&Wt.texture&&w.init(e,Wt,r.renderState)}}for(let et=0;et<L.length;et++){const xt=C[et],bt=L[et];xt!==null&&bt!==void 0&&bt.update(xt,Ke,f||s)}be&&be(xe,Ke),Ke.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ke}),x=null}const Ye=new z5;Ye.setAnimationLoop(Ge),this.setAnimationLoop=function(xe){be=xe},this.dispose=function(){}}}const sd=new Ya,bF=new sn;function xF(n,e){function t(T,S){T.matrixAutoUpdate===!0&&T.updateMatrix(),S.value.copy(T.matrix)}function i(T,S){S.color.getRGB(T.fogColor.value,GC(n)),S.isFog?(T.fogNear.value=S.near,T.fogFar.value=S.far):S.isFogExp2&&(T.fogDensity.value=S.density)}function r(T,S,O,L,C){S.isMeshBasicMaterial||S.isMeshLambertMaterial?a(T,S):S.isMeshToonMaterial?(a(T,S),g(T,S)):S.isMeshPhongMaterial?(a(T,S),m(T,S)):S.isMeshStandardMaterial?(a(T,S),y(T,S),S.isMeshPhysicalMaterial&&_(T,S,C)):S.isMeshMatcapMaterial?(a(T,S),x(T,S)):S.isMeshDepthMaterial?a(T,S):S.isMeshDistanceMaterial?(a(T,S),w(T,S)):S.isMeshNormalMaterial?a(T,S):S.isLineBasicMaterial?(s(T,S),S.isLineDashedMaterial&&l(T,S)):S.isPointsMaterial?u(T,S,O,L):S.isSpriteMaterial?f(T,S):S.isShadowMaterial?(T.color.value.copy(S.color),T.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function a(T,S){T.opacity.value=S.opacity,S.color&&T.diffuse.value.copy(S.color),S.emissive&&T.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(T.map.value=S.map,t(S.map,T.mapTransform)),S.alphaMap&&(T.alphaMap.value=S.alphaMap,t(S.alphaMap,T.alphaMapTransform)),S.bumpMap&&(T.bumpMap.value=S.bumpMap,t(S.bumpMap,T.bumpMapTransform),T.bumpScale.value=S.bumpScale,S.side===fs&&(T.bumpScale.value*=-1)),S.normalMap&&(T.normalMap.value=S.normalMap,t(S.normalMap,T.normalMapTransform),T.normalScale.value.copy(S.normalScale),S.side===fs&&T.normalScale.value.negate()),S.displacementMap&&(T.displacementMap.value=S.displacementMap,t(S.displacementMap,T.displacementMapTransform),T.displacementScale.value=S.displacementScale,T.displacementBias.value=S.displacementBias),S.emissiveMap&&(T.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,T.emissiveMapTransform)),S.specularMap&&(T.specularMap.value=S.specularMap,t(S.specularMap,T.specularMapTransform)),S.alphaTest>0&&(T.alphaTest.value=S.alphaTest);const O=e.get(S),L=O.envMap,C=O.envMapRotation;L&&(T.envMap.value=L,sd.copy(C),sd.x*=-1,sd.y*=-1,sd.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(sd.y*=-1,sd.z*=-1),T.envMapRotation.value.setFromMatrix4(bF.makeRotationFromEuler(sd)),T.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=S.reflectivity,T.ior.value=S.ior,T.refractionRatio.value=S.refractionRatio),S.lightMap&&(T.lightMap.value=S.lightMap,T.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,T.lightMapTransform)),S.aoMap&&(T.aoMap.value=S.aoMap,T.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,T.aoMapTransform))}function s(T,S){T.diffuse.value.copy(S.color),T.opacity.value=S.opacity,S.map&&(T.map.value=S.map,t(S.map,T.mapTransform))}function l(T,S){T.dashSize.value=S.dashSize,T.totalSize.value=S.dashSize+S.gapSize,T.scale.value=S.scale}function u(T,S,O,L){T.diffuse.value.copy(S.color),T.opacity.value=S.opacity,T.size.value=S.size*O,T.scale.value=L*.5,S.map&&(T.map.value=S.map,t(S.map,T.uvTransform)),S.alphaMap&&(T.alphaMap.value=S.alphaMap,t(S.alphaMap,T.alphaMapTransform)),S.alphaTest>0&&(T.alphaTest.value=S.alphaTest)}function f(T,S){T.diffuse.value.copy(S.color),T.opacity.value=S.opacity,T.rotation.value=S.rotation,S.map&&(T.map.value=S.map,t(S.map,T.mapTransform)),S.alphaMap&&(T.alphaMap.value=S.alphaMap,t(S.alphaMap,T.alphaMapTransform)),S.alphaTest>0&&(T.alphaTest.value=S.alphaTest)}function m(T,S){T.specular.value.copy(S.specular),T.shininess.value=Math.max(S.shininess,1e-4)}function g(T,S){S.gradientMap&&(T.gradientMap.value=S.gradientMap)}function y(T,S){T.metalness.value=S.metalness,S.metalnessMap&&(T.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,T.metalnessMapTransform)),T.roughness.value=S.roughness,S.roughnessMap&&(T.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,T.roughnessMapTransform)),S.envMap&&(T.envMapIntensity.value=S.envMapIntensity)}function _(T,S,O){T.ior.value=S.ior,S.sheen>0&&(T.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),T.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(T.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,T.sheenColorMapTransform)),S.sheenRoughnessMap&&(T.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,T.sheenRoughnessMapTransform))),S.clearcoat>0&&(T.clearcoat.value=S.clearcoat,T.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(T.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,T.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(T.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===fs&&T.clearcoatNormalScale.value.negate())),S.dispersion>0&&(T.dispersion.value=S.dispersion),S.iridescence>0&&(T.iridescence.value=S.iridescence,T.iridescenceIOR.value=S.iridescenceIOR,T.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(T.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,T.iridescenceMapTransform)),S.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),S.transmission>0&&(T.transmission.value=S.transmission,T.transmissionSamplerMap.value=O.texture,T.transmissionSamplerSize.value.set(O.width,O.height),S.transmissionMap&&(T.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,T.transmissionMapTransform)),T.thickness.value=S.thickness,S.thicknessMap&&(T.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=S.attenuationDistance,T.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(T.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(T.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=S.specularIntensity,T.specularColor.value.copy(S.specularColor),S.specularColorMap&&(T.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,T.specularColorMapTransform)),S.specularIntensityMap&&(T.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,T.specularIntensityMapTransform))}function x(T,S){S.matcap&&(T.matcap.value=S.matcap)}function w(T,S){const O=e.get(S).light;T.referencePosition.value.setFromMatrixPosition(O.matrixWorld),T.nearDistance.value=O.shadow.camera.near,T.farDistance.value=O.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function SF(n,e,t,i){let r={},a={},s=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(O,L){const C=L.program;i.uniformBlockBinding(O,C)}function f(O,L){let C=r[O.id];C===void 0&&(x(O),C=m(O),r[O.id]=C,O.addEventListener("dispose",T));const P=L.program;i.updateUBOMapping(O,P);const B=e.render.frame;a[O.id]!==B&&(y(O),a[O.id]=B)}function m(O){const L=g();O.__bindingPointIndex=L;const C=n.createBuffer(),P=O.__size,B=O.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,P,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,L,C),C}function g(){for(let O=0;O<l;O++)if(s.indexOf(O)===-1)return s.push(O),O;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(O){const L=r[O.id],C=O.uniforms,P=O.__cache;n.bindBuffer(n.UNIFORM_BUFFER,L);for(let B=0,j=C.length;B<j;B++){const X=Array.isArray(C[B])?C[B]:[C[B]];for(let k=0,U=X.length;k<U;k++){const K=X[k];if(_(K,B,k,P)===!0){const ye=K.__offset,ue=Array.isArray(K.value)?K.value:[K.value];let we=0;for(let Ae=0;Ae<ue.length;Ae++){const Z=ue[Ae],le=w(Z);typeof Z=="number"||typeof Z=="boolean"?(K.__data[0]=Z,n.bufferSubData(n.UNIFORM_BUFFER,ye+we,K.__data)):Z.isMatrix3?(K.__data[0]=Z.elements[0],K.__data[1]=Z.elements[1],K.__data[2]=Z.elements[2],K.__data[3]=0,K.__data[4]=Z.elements[3],K.__data[5]=Z.elements[4],K.__data[6]=Z.elements[5],K.__data[7]=0,K.__data[8]=Z.elements[6],K.__data[9]=Z.elements[7],K.__data[10]=Z.elements[8],K.__data[11]=0):(Z.toArray(K.__data,we),we+=le.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ye,K.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function _(O,L,C,P){const B=O.value,j=L+"_"+C;if(P[j]===void 0)return typeof B=="number"||typeof B=="boolean"?P[j]=B:P[j]=B.clone(),!0;{const X=P[j];if(typeof B=="number"||typeof B=="boolean"){if(X!==B)return P[j]=B,!0}else if(X.equals(B)===!1)return X.copy(B),!0}return!1}function x(O){const L=O.uniforms;let C=0;const P=16;for(let j=0,X=L.length;j<X;j++){const k=Array.isArray(L[j])?L[j]:[L[j]];for(let U=0,K=k.length;U<K;U++){const ye=k[U],ue=Array.isArray(ye.value)?ye.value:[ye.value];for(let we=0,Ae=ue.length;we<Ae;we++){const Z=ue[we],le=w(Z),de=C%P,Le=de%le.boundary,ee=de+Le;C+=Le,ee!==0&&P-ee<le.storage&&(C+=P-ee),ye.__data=new Float32Array(le.storage/Float32Array.BYTES_PER_ELEMENT),ye.__offset=C,C+=le.storage}}}const B=C%P;return B>0&&(C+=P-B),O.__size=C,O.__cache={},this}function w(O){const L={boundary:0,storage:0};return typeof O=="number"||typeof O=="boolean"?(L.boundary=4,L.storage=4):O.isVector2?(L.boundary=8,L.storage=8):O.isVector3||O.isColor?(L.boundary=16,L.storage=12):O.isVector4?(L.boundary=16,L.storage=16):O.isMatrix3?(L.boundary=48,L.storage=48):O.isMatrix4?(L.boundary=64,L.storage=64):O.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",O),L}function T(O){const L=O.target;L.removeEventListener("dispose",T);const C=s.indexOf(L.__bindingPointIndex);s.splice(C,1),n.deleteBuffer(r[L.id]),delete r[L.id],delete a[L.id]}function S(){for(const O in r)n.deleteBuffer(r[O]);s=[],r={},a={}}return{bind:u,update:f,dispose:S}}class j5{constructor(e={}){const{canvas:t=kC(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let _;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=i.getContextAttributes().alpha}else _=s;const x=new Uint32Array(4),w=new Int32Array(4);let T=null,S=null;const O=[],L=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Lu,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const C=this;let P=!1;this._outputColorSpace=Zr;let B=0,j=0,X=null,k=-1,U=null;const K=new Di,ye=new Di;let ue=null;const we=new Pt(0);let Ae=0,Z=t.width,le=t.height,de=1,Le=null,ee=null;const be=new Di(0,0,Z,le),Ge=new Di(0,0,Z,le);let Ye=!1;const xe=new rg;let Ke=!1,et=!1;const xt=new sn,bt=new sn,Kt=new $,Wt=new Di,tn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let un=!1;function Jt(){return X===null?de:1}let ie=i;function _t(Q,Te){return t.getContext(Q,Te)}try{const Q={alpha:!0,depth:r,stencil:a,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${$f}`),t.addEventListener("webglcontextlost",At,!1),t.addEventListener("webglcontextrestored",ct,!1),t.addEventListener("webglcontextcreationerror",Be,!1),ie===null){const Te="webgl2";if(ie=_t(Te,Q),ie===null)throw _t(Te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let ut,pt,Ze,Ot,ft,St,on,re,q,Ce,We,Qe,He,Ut,wt,Gt,$t,rt,Tt,Ct,pe,Re,yt,he;function vt(){ut=new IB(ie),ut.init(),Re=new G5(ie,ut),pt=new AB(ie,ut,e,Re),Ze=new pF(ie,ut),pt.reverseDepthBuffer&&y&&Ze.buffers.depth.setReversed(!0),Ot=new BB(ie),ft=new tF,St=new mF(ie,ut,Ze,ft,pt,Re,Ot),on=new NB(C),re=new LB(C),q=new GP(ie),yt=new MB(ie,q),Ce=new UB(ie,q,Ot,yt),We=new FB(ie,Ce,q,Ot),Tt=new zB(ie,pt,St),Gt=new RB(ft),Qe=new eF(C,on,re,ut,pt,yt,Gt),He=new xF(C,ft),Ut=new iF,wt=new uF(ut),rt=new EB(C,on,re,Ze,We,_,u),$t=new hF(C,We,pt),he=new SF(ie,Ot,pt,Ze),Ct=new wB(ie,ut,Ot),pe=new PB(ie,ut,Ot),Ot.programs=Qe.programs,C.capabilities=pt,C.extensions=ut,C.properties=ft,C.renderLists=Ut,C.shadowMap=$t,C.state=Ze,C.info=Ot}vt();const at=new _F(C,ie);this.xr=at,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const Q=ut.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=ut.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(Q){Q!==void 0&&(de=Q,this.setSize(Z,le,!1))},this.getSize=function(Q){return Q.set(Z,le)},this.setSize=function(Q,Te,ke=!0){if(at.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Z=Q,le=Te,t.width=Math.floor(Q*de),t.height=Math.floor(Te*de),ke===!0&&(t.style.width=Q+"px",t.style.height=Te+"px"),this.setViewport(0,0,Q,Te)},this.getDrawingBufferSize=function(Q){return Q.set(Z*de,le*de).floor()},this.setDrawingBufferSize=function(Q,Te,ke){Z=Q,le=Te,de=ke,t.width=Math.floor(Q*ke),t.height=Math.floor(Te*ke),this.setViewport(0,0,Q,Te)},this.getCurrentViewport=function(Q){return Q.copy(K)},this.getViewport=function(Q){return Q.copy(be)},this.setViewport=function(Q,Te,ke,je){Q.isVector4?be.set(Q.x,Q.y,Q.z,Q.w):be.set(Q,Te,ke,je),Ze.viewport(K.copy(be).multiplyScalar(de).round())},this.getScissor=function(Q){return Q.copy(Ge)},this.setScissor=function(Q,Te,ke,je){Q.isVector4?Ge.set(Q.x,Q.y,Q.z,Q.w):Ge.set(Q,Te,ke,je),Ze.scissor(ye.copy(Ge).multiplyScalar(de).round())},this.getScissorTest=function(){return Ye},this.setScissorTest=function(Q){Ze.setScissorTest(Ye=Q)},this.setOpaqueSort=function(Q){Le=Q},this.setTransparentSort=function(Q){ee=Q},this.getClearColor=function(Q){return Q.copy(rt.getClearColor())},this.setClearColor=function(){rt.setClearColor(...arguments)},this.getClearAlpha=function(){return rt.getClearAlpha()},this.setClearAlpha=function(){rt.setClearAlpha(...arguments)},this.clear=function(Q=!0,Te=!0,ke=!0){let je=0;if(Q){let Ne=!1;if(X!==null){const gt=X.texture.format;Ne=gt===n3||gt===t3||gt===D1}if(Ne){const gt=X.texture.type,Lt=gt===tl||gt===Cc||gt===zm||gt===Fm||gt===Q_||gt===J_,Ht=rt.getClearColor(),Bt=rt.getClearAlpha(),hn=Ht.r,ln=Ht.g,en=Ht.b;Lt?(x[0]=hn,x[1]=ln,x[2]=en,x[3]=Bt,ie.clearBufferuiv(ie.COLOR,0,x)):(w[0]=hn,w[1]=ln,w[2]=en,w[3]=Bt,ie.clearBufferiv(ie.COLOR,0,w))}else je|=ie.COLOR_BUFFER_BIT}Te&&(je|=ie.DEPTH_BUFFER_BIT),ke&&(je|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear(je)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",At,!1),t.removeEventListener("webglcontextrestored",ct,!1),t.removeEventListener("webglcontextcreationerror",Be,!1),rt.dispose(),Ut.dispose(),wt.dispose(),ft.dispose(),on.dispose(),re.dispose(),We.dispose(),yt.dispose(),he.dispose(),Qe.dispose(),at.dispose(),at.removeEventListener("sessionstart",ei),at.removeEventListener("sessionend",Ti),hr.stop()};function At(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function ct(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const Q=Ot.autoReset,Te=$t.enabled,ke=$t.autoUpdate,je=$t.needsUpdate,Ne=$t.type;vt(),Ot.autoReset=Q,$t.enabled=Te,$t.autoUpdate=ke,$t.needsUpdate=je,$t.type=Ne}function Be(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function Ft(Q){const Te=Q.target;Te.removeEventListener("dispose",Ft),Qt(Te)}function Qt(Q){_n(Q),ft.remove(Q)}function _n(Q){const Te=ft.get(Q).programs;Te!==void 0&&(Te.forEach(function(ke){Qe.releaseProgram(ke)}),Q.isShaderMaterial&&Qe.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,Te,ke,je,Ne,gt){Te===null&&(Te=tn);const Lt=Ne.isMesh&&Ne.matrixWorld.determinant()<0,Ht=Ua(Q,Te,ke,je,Ne);Ze.setMaterial(je,Lt);let Bt=ke.index,hn=1;if(je.wireframe===!0){if(Bt=Ce.getWireframeAttribute(ke),Bt===void 0)return;hn=2}const ln=ke.drawRange,en=ke.attributes.position;let Cn=ln.start*hn,Ln=(ln.start+ln.count)*hn;gt!==null&&(Cn=Math.max(Cn,gt.start*hn),Ln=Math.min(Ln,(gt.start+gt.count)*hn)),Bt!==null?(Cn=Math.max(Cn,0),Ln=Math.min(Ln,Bt.count)):en!=null&&(Cn=Math.max(Cn,0),Ln=Math.min(Ln,en.count));const Ci=Ln-Cn;if(Ci<0||Ci===1/0)return;yt.setup(Ne,je,Ht,ke,Bt);let Tn,ri=Ct;if(Bt!==null&&(Tn=q.get(Bt),ri=pe,ri.setIndex(Tn)),Ne.isMesh)je.wireframe===!0?(Ze.setLineWidth(je.wireframeLinewidth*Jt()),ri.setMode(ie.LINES)):ri.setMode(ie.TRIANGLES);else if(Ne.isLine){let an=je.linewidth;an===void 0&&(an=1),Ze.setLineWidth(an*Jt()),Ne.isLineSegments?ri.setMode(ie.LINES):Ne.isLineLoop?ri.setMode(ie.LINE_LOOP):ri.setMode(ie.LINE_STRIP)}else Ne.isPoints?ri.setMode(ie.POINTS):Ne.isSprite&&ri.setMode(ie.TRIANGLES);if(Ne.isBatchedMesh)if(Ne._multiDrawInstances!==null)Om("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),ri.renderMultiDrawInstances(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount,Ne._multiDrawInstances);else if(ut.get("WEBGL_multi_draw"))ri.renderMultiDraw(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount);else{const an=Ne._multiDrawStarts,yi=Ne._multiDrawCounts,Wn=Ne._multiDrawCount,ki=Bt?q.get(Bt).bytesPerElement:1,Ba=ft.get(je).currentProgram.getUniforms();for(let Ei=0;Ei<Wn;Ei++)Ba.setValue(ie,"_gl_DrawID",Ei),ri.render(an[Ei]/ki,yi[Ei])}else if(Ne.isInstancedMesh)ri.renderInstances(Cn,Ci,Ne.count);else if(ke.isInstancedBufferGeometry){const an=ke._maxInstanceCount!==void 0?ke._maxInstanceCount:1/0,yi=Math.min(ke.instanceCount,an);ri.renderInstances(Cn,Ci,yi)}else ri.render(Cn,Ci)};function bn(Q,Te,ke){Q.transparent===!0&&Q.side===Eo&&Q.forceSinglePass===!1?(Q.side=fs,Q.needsUpdate=!0,ui(Q,Te,ke),Q.side=Bu,Q.needsUpdate=!0,ui(Q,Te,ke),Q.side=Eo):ui(Q,Te,ke)}this.compile=function(Q,Te,ke=null){ke===null&&(ke=Q),S=wt.get(ke),S.init(Te),L.push(S),ke.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Te.layers)&&(S.pushLight(Ne),Ne.castShadow&&S.pushShadow(Ne))}),Q!==ke&&Q.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Te.layers)&&(S.pushLight(Ne),Ne.castShadow&&S.pushShadow(Ne))}),S.setupLights();const je=new Set;return Q.traverse(function(Ne){if(!(Ne.isMesh||Ne.isPoints||Ne.isLine||Ne.isSprite))return;const gt=Ne.material;if(gt)if(Array.isArray(gt))for(let Lt=0;Lt<gt.length;Lt++){const Ht=gt[Lt];bn(Ht,ke,Ne),je.add(Ht)}else bn(gt,ke,Ne),je.add(gt)}),S=L.pop(),je},this.compileAsync=function(Q,Te,ke=null){const je=this.compile(Q,Te,ke);return new Promise(Ne=>{function gt(){if(je.forEach(function(Lt){ft.get(Lt).currentProgram.isReady()&&je.delete(Lt)}),je.size===0){Ne(Q);return}setTimeout(gt,10)}ut.get("KHR_parallel_shader_compile")!==null?gt():setTimeout(gt,10)})};let mi=null;function gi(Q){mi&&mi(Q)}function ei(){hr.stop()}function Ti(){hr.start()}const hr=new z5;hr.setAnimationLoop(gi),typeof self<"u"&&hr.setContext(self),this.setAnimationLoop=function(Q){mi=Q,at.setAnimationLoop(Q),Q===null?hr.stop():hr.start()},at.addEventListener("sessionstart",ei),at.addEventListener("sessionend",Ti),this.render=function(Q,Te){if(Te!==void 0&&Te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),Te.parent===null&&Te.matrixWorldAutoUpdate===!0&&Te.updateMatrixWorld(),at.enabled===!0&&at.isPresenting===!0&&(at.cameraAutoUpdate===!0&&at.updateCamera(Te),Te=at.getCamera()),Q.isScene===!0&&Q.onBeforeRender(C,Q,Te,X),S=wt.get(Q,L.length),S.init(Te),L.push(S),bt.multiplyMatrices(Te.projectionMatrix,Te.matrixWorldInverse),xe.setFromProjectionMatrix(bt),et=this.localClippingEnabled,Ke=Gt.init(this.clippingPlanes,et),T=Ut.get(Q,O.length),T.init(),O.push(T),at.enabled===!0&&at.isPresenting===!0){const gt=C.xr.getDepthSensingMesh();gt!==null&&Fr(gt,Te,-1/0,C.sortObjects)}Fr(Q,Te,0,C.sortObjects),T.finish(),C.sortObjects===!0&&T.sort(Le,ee),un=at.enabled===!1||at.isPresenting===!1||at.hasDepthSensing()===!1,un&&rt.addToRenderList(T,Q),this.info.render.frame++,Ke===!0&&Gt.beginShadows();const ke=S.state.shadowsArray;$t.render(ke,Q,Te),Ke===!0&&Gt.endShadows(),this.info.autoReset===!0&&this.info.reset();const je=T.opaque,Ne=T.transmissive;if(S.setupLights(),Te.isArrayCamera){const gt=Te.cameras;if(Ne.length>0)for(let Lt=0,Ht=gt.length;Lt<Ht;Lt++){const Bt=gt[Lt];ar(je,Ne,Q,Bt)}un&&rt.render(Q);for(let Lt=0,Ht=gt.length;Lt<Ht;Lt++){const Bt=gt[Lt];Ki(T,Q,Bt,Bt.viewport)}}else Ne.length>0&&ar(je,Ne,Q,Te),un&&rt.render(Q),Ki(T,Q,Te);X!==null&&j===0&&(St.updateMultisampleRenderTarget(X),St.updateRenderTargetMipmap(X)),Q.isScene===!0&&Q.onAfterRender(C,Q,Te),yt.resetDefaultState(),k=-1,U=null,L.pop(),L.length>0?(S=L[L.length-1],Ke===!0&&Gt.setGlobalState(C.clippingPlanes,S.state.camera)):S=null,O.pop(),O.length>0?T=O[O.length-1]:T=null};function Fr(Q,Te,ke,je){if(Q.visible===!1)return;if(Q.layers.test(Te.layers)){if(Q.isGroup)ke=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(Te);else if(Q.isLight)S.pushLight(Q),Q.castShadow&&S.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||xe.intersectsSprite(Q)){je&&Wt.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(bt);const Lt=We.update(Q),Ht=Q.material;Ht.visible&&T.push(Q,Lt,Ht,ke,Wt.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(!Q.frustumCulled||xe.intersectsObject(Q))){const Lt=We.update(Q),Ht=Q.material;if(je&&(Q.boundingSphere!==void 0?(Q.boundingSphere===null&&Q.computeBoundingSphere(),Wt.copy(Q.boundingSphere.center)):(Lt.boundingSphere===null&&Lt.computeBoundingSphere(),Wt.copy(Lt.boundingSphere.center)),Wt.applyMatrix4(Q.matrixWorld).applyMatrix4(bt)),Array.isArray(Ht)){const Bt=Lt.groups;for(let hn=0,ln=Bt.length;hn<ln;hn++){const en=Bt[hn],Cn=Ht[en.materialIndex];Cn&&Cn.visible&&T.push(Q,Lt,Cn,ke,Wt.z,en)}}else Ht.visible&&T.push(Q,Lt,Ht,ke,Wt.z,null)}}const gt=Q.children;for(let Lt=0,Ht=gt.length;Lt<Ht;Lt++)Fr(gt[Lt],Te,ke,je)}function Ki(Q,Te,ke,je){const Ne=Q.opaque,gt=Q.transmissive,Lt=Q.transparent;S.setupLightsView(ke),Ke===!0&&Gt.setGlobalState(C.clippingPlanes,ke),je&&Ze.viewport(K.copy(je)),Ne.length>0&&sr(Ne,Te,ke),gt.length>0&&sr(gt,Te,ke),Lt.length>0&&sr(Lt,Te,ke),Ze.buffers.depth.setTest(!0),Ze.buffers.depth.setMask(!0),Ze.buffers.color.setMask(!0),Ze.setPolygonOffset(!1)}function ar(Q,Te,ke,je){if((ke.isScene===!0?ke.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[je.id]===void 0&&(S.state.transmissionRenderTarget[je.id]=new Hl(1,1,{generateMipmaps:!0,type:ut.has("EXT_color_buffer_half_float")||ut.has("EXT_color_buffer_float")?$d:tl,minFilter:Jo,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:fi.workingColorSpace}));const gt=S.state.transmissionRenderTarget[je.id],Lt=je.viewport||K;gt.setSize(Lt.z*C.transmissionResolutionScale,Lt.w*C.transmissionResolutionScale);const Ht=C.getRenderTarget(),Bt=C.getActiveCubeFace(),hn=C.getActiveMipmapLevel();C.setRenderTarget(gt),C.getClearColor(we),Ae=C.getClearAlpha(),Ae<1&&C.setClearColor(16777215,.5),C.clear(),un&&rt.render(ke);const ln=C.toneMapping;C.toneMapping=Lu;const en=je.viewport;if(je.viewport!==void 0&&(je.viewport=void 0),S.setupLightsView(je),Ke===!0&&Gt.setGlobalState(C.clippingPlanes,je),sr(Q,ke,je),St.updateMultisampleRenderTarget(gt),St.updateRenderTargetMipmap(gt),ut.has("WEBGL_multisampled_render_to_texture")===!1){let Cn=!1;for(let Ln=0,Ci=Te.length;Ln<Ci;Ln++){const Tn=Te[Ln],ri=Tn.object,an=Tn.geometry,yi=Tn.material,Wn=Tn.group;if(yi.side===Eo&&ri.layers.test(je.layers)){const ki=yi.side;yi.side=fs,yi.needsUpdate=!0,wr(ri,ke,je,an,yi,Wn),yi.side=ki,yi.needsUpdate=!0,Cn=!0}}Cn===!0&&(St.updateMultisampleRenderTarget(gt),St.updateRenderTargetMipmap(gt))}C.setRenderTarget(Ht,Bt,hn),C.setClearColor(we,Ae),en!==void 0&&(je.viewport=en),C.toneMapping=ln}function sr(Q,Te,ke){const je=Te.isScene===!0?Te.overrideMaterial:null;for(let Ne=0,gt=Q.length;Ne<gt;Ne++){const Lt=Q[Ne],Ht=Lt.object,Bt=Lt.geometry,hn=Lt.group;let ln=Lt.material;ln.allowOverride===!0&&je!==null&&(ln=je),Ht.layers.test(ke.layers)&&wr(Ht,Te,ke,Bt,ln,hn)}}function wr(Q,Te,ke,je,Ne,gt){Q.onBeforeRender(C,Te,ke,je,Ne,gt),Q.modelViewMatrix.multiplyMatrices(ke.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),Ne.onBeforeRender(C,Te,ke,je,Q,gt),Ne.transparent===!0&&Ne.side===Eo&&Ne.forceSinglePass===!1?(Ne.side=fs,Ne.needsUpdate=!0,C.renderBufferDirect(ke,Te,je,Ne,Q,gt),Ne.side=Bu,Ne.needsUpdate=!0,C.renderBufferDirect(ke,Te,je,Ne,Q,gt),Ne.side=Eo):C.renderBufferDirect(ke,Te,je,Ne,Q,gt),Q.onAfterRender(C,Te,ke,je,Ne,gt)}function ui(Q,Te,ke){Te.isScene!==!0&&(Te=tn);const je=ft.get(Q),Ne=S.state.lights,gt=S.state.shadowsArray,Lt=Ne.state.version,Ht=Qe.getParameters(Q,Ne.state,gt,Te,ke),Bt=Qe.getProgramCacheKey(Ht);let hn=je.programs;je.environment=Q.isMeshStandardMaterial?Te.environment:null,je.fog=Te.fog,je.envMap=(Q.isMeshStandardMaterial?re:on).get(Q.envMap||je.environment),je.envMapRotation=je.environment!==null&&Q.envMap===null?Te.environmentRotation:Q.envMapRotation,hn===void 0&&(Q.addEventListener("dispose",Ft),hn=new Map,je.programs=hn);let ln=hn.get(Bt);if(ln!==void 0){if(je.currentProgram===ln&&je.lightsStateVersion===Lt)return Ta(Q,Ht),ln}else Ht.uniforms=Qe.getUniforms(Q),Q.onBeforeCompile(Ht,C),ln=Qe.acquireProgram(Ht,Bt),hn.set(Bt,ln),je.uniforms=Ht.uniforms;const en=je.uniforms;return(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(en.clippingPlanes=Gt.uniform),Ta(Q,Ht),je.needsLights=Gi(Q),je.lightsStateVersion=Lt,je.needsLights&&(en.ambientLightColor.value=Ne.state.ambient,en.lightProbe.value=Ne.state.probe,en.directionalLights.value=Ne.state.directional,en.directionalLightShadows.value=Ne.state.directionalShadow,en.spotLights.value=Ne.state.spot,en.spotLightShadows.value=Ne.state.spotShadow,en.rectAreaLights.value=Ne.state.rectArea,en.ltc_1.value=Ne.state.rectAreaLTC1,en.ltc_2.value=Ne.state.rectAreaLTC2,en.pointLights.value=Ne.state.point,en.pointLightShadows.value=Ne.state.pointShadow,en.hemisphereLights.value=Ne.state.hemi,en.directionalShadowMap.value=Ne.state.directionalShadowMap,en.directionalShadowMatrix.value=Ne.state.directionalShadowMatrix,en.spotShadowMap.value=Ne.state.spotShadowMap,en.spotLightMatrix.value=Ne.state.spotLightMatrix,en.spotLightMap.value=Ne.state.spotLightMap,en.pointShadowMap.value=Ne.state.pointShadowMap,en.pointShadowMatrix.value=Ne.state.pointShadowMatrix),je.currentProgram=ln,je.uniformsList=null,ln}function yr(Q){if(Q.uniformsList===null){const Te=Q.currentProgram.getUniforms();Q.uniformsList=v2.seqWithValue(Te.seq,Q.uniforms)}return Q.uniformsList}function Ta(Q,Te){const ke=ft.get(Q);ke.outputColorSpace=Te.outputColorSpace,ke.batching=Te.batching,ke.batchingColor=Te.batchingColor,ke.instancing=Te.instancing,ke.instancingColor=Te.instancingColor,ke.instancingMorph=Te.instancingMorph,ke.skinning=Te.skinning,ke.morphTargets=Te.morphTargets,ke.morphNormals=Te.morphNormals,ke.morphColors=Te.morphColors,ke.morphTargetsCount=Te.morphTargetsCount,ke.numClippingPlanes=Te.numClippingPlanes,ke.numIntersection=Te.numClipIntersection,ke.vertexAlphas=Te.vertexAlphas,ke.vertexTangents=Te.vertexTangents,ke.toneMapping=Te.toneMapping}function Ua(Q,Te,ke,je,Ne){Te.isScene!==!0&&(Te=tn),St.resetTextureUnits();const gt=Te.fog,Lt=je.isMeshStandardMaterial?Te.environment:null,Ht=X===null?C.outputColorSpace:X.isXRRenderTarget===!0?X.texture.colorSpace:$a,Bt=(je.isMeshStandardMaterial?re:on).get(je.envMap||Lt),hn=je.vertexColors===!0&&!!ke.attributes.color&&ke.attributes.color.itemSize===4,ln=!!ke.attributes.tangent&&(!!je.normalMap||je.anisotropy>0),en=!!ke.morphAttributes.position,Cn=!!ke.morphAttributes.normal,Ln=!!ke.morphAttributes.color;let Ci=Lu;je.toneMapped&&(X===null||X.isXRRenderTarget===!0)&&(Ci=C.toneMapping);const Tn=ke.morphAttributes.position||ke.morphAttributes.normal||ke.morphAttributes.color,ri=Tn!==void 0?Tn.length:0,an=ft.get(je),yi=S.state.lights;if(Ke===!0&&(et===!0||Q!==U)){const or=Q===U&&je.id===k;Gt.setState(je,Q,or)}let Wn=!1;je.version===an.__version?(an.needsLights&&an.lightsStateVersion!==yi.state.version||an.outputColorSpace!==Ht||Ne.isBatchedMesh&&an.batching===!1||!Ne.isBatchedMesh&&an.batching===!0||Ne.isBatchedMesh&&an.batchingColor===!0&&Ne.colorTexture===null||Ne.isBatchedMesh&&an.batchingColor===!1&&Ne.colorTexture!==null||Ne.isInstancedMesh&&an.instancing===!1||!Ne.isInstancedMesh&&an.instancing===!0||Ne.isSkinnedMesh&&an.skinning===!1||!Ne.isSkinnedMesh&&an.skinning===!0||Ne.isInstancedMesh&&an.instancingColor===!0&&Ne.instanceColor===null||Ne.isInstancedMesh&&an.instancingColor===!1&&Ne.instanceColor!==null||Ne.isInstancedMesh&&an.instancingMorph===!0&&Ne.morphTexture===null||Ne.isInstancedMesh&&an.instancingMorph===!1&&Ne.morphTexture!==null||an.envMap!==Bt||je.fog===!0&&an.fog!==gt||an.numClippingPlanes!==void 0&&(an.numClippingPlanes!==Gt.numPlanes||an.numIntersection!==Gt.numIntersection)||an.vertexAlphas!==hn||an.vertexTangents!==ln||an.morphTargets!==en||an.morphNormals!==Cn||an.morphColors!==Ln||an.toneMapping!==Ci||an.morphTargetsCount!==ri)&&(Wn=!0):(Wn=!0,an.__version=je.version);let ki=an.currentProgram;Wn===!0&&(ki=ui(je,Te,Ne));let Ba=!1,Ei=!1,Ka=!1;const Mi=ki.getUniforms(),dr=an.uniforms;if(Ze.useProgram(ki.program)&&(Ba=!0,Ei=!0,Ka=!0),je.id!==k&&(k=je.id,Ei=!0),Ba||U!==Q){Ze.buffers.depth.getReversed()?(xt.copy(Q.projectionMatrix),pI(xt),mI(xt),Mi.setValue(ie,"projectionMatrix",xt)):Mi.setValue(ie,"projectionMatrix",Q.projectionMatrix),Mi.setValue(ie,"viewMatrix",Q.matrixWorldInverse);const lr=Mi.map.cameraPosition;lr!==void 0&&lr.setValue(ie,Kt.setFromMatrixPosition(Q.matrixWorld)),pt.logarithmicDepthBuffer&&Mi.setValue(ie,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),(je.isMeshPhongMaterial||je.isMeshToonMaterial||je.isMeshLambertMaterial||je.isMeshBasicMaterial||je.isMeshStandardMaterial||je.isShaderMaterial)&&Mi.setValue(ie,"isOrthographic",Q.isOrthographicCamera===!0),U!==Q&&(U=Q,Ei=!0,Ka=!0)}if(Ne.isSkinnedMesh){Mi.setOptional(ie,Ne,"bindMatrix"),Mi.setOptional(ie,Ne,"bindMatrixInverse");const or=Ne.skeleton;or&&(or.boneTexture===null&&or.computeBoneTexture(),Mi.setValue(ie,"boneTexture",or.boneTexture,St))}Ne.isBatchedMesh&&(Mi.setOptional(ie,Ne,"batchingTexture"),Mi.setValue(ie,"batchingTexture",Ne._matricesTexture,St),Mi.setOptional(ie,Ne,"batchingIdTexture"),Mi.setValue(ie,"batchingIdTexture",Ne._indirectTexture,St),Mi.setOptional(ie,Ne,"batchingColorTexture"),Ne._colorsTexture!==null&&Mi.setValue(ie,"batchingColorTexture",Ne._colorsTexture,St));const Zi=ke.morphAttributes;if((Zi.position!==void 0||Zi.normal!==void 0||Zi.color!==void 0)&&Tt.update(Ne,ke,ki),(Ei||an.receiveShadow!==Ne.receiveShadow)&&(an.receiveShadow=Ne.receiveShadow,Mi.setValue(ie,"receiveShadow",Ne.receiveShadow)),je.isMeshGouraudMaterial&&je.envMap!==null&&(dr.envMap.value=Bt,dr.flipEnvMap.value=Bt.isCubeTexture&&Bt.isRenderTargetTexture===!1?-1:1),je.isMeshStandardMaterial&&je.envMap===null&&Te.environment!==null&&(dr.envMapIntensity.value=Te.environmentIntensity),Ei&&(Mi.setValue(ie,"toneMappingExposure",C.toneMappingExposure),an.needsLights&&oa(dr,Ka),gt&&je.fog===!0&&He.refreshFogUniforms(dr,gt),He.refreshMaterialUniforms(dr,je,de,le,S.state.transmissionRenderTarget[Q.id]),v2.upload(ie,yr(an),dr,St)),je.isShaderMaterial&&je.uniformsNeedUpdate===!0&&(v2.upload(ie,yr(an),dr,St),je.uniformsNeedUpdate=!1),je.isSpriteMaterial&&Mi.setValue(ie,"center",Ne.center),Mi.setValue(ie,"modelViewMatrix",Ne.modelViewMatrix),Mi.setValue(ie,"normalMatrix",Ne.normalMatrix),Mi.setValue(ie,"modelMatrix",Ne.matrixWorld),je.isShaderMaterial||je.isRawShaderMaterial){const or=je.uniformsGroups;for(let lr=0,Rr=or.length;lr<Rr;lr++){const Ea=or[lr];he.update(Ea,ki),he.bind(Ea,ki)}}return ki}function oa(Q,Te){Q.ambientLightColor.needsUpdate=Te,Q.lightProbe.needsUpdate=Te,Q.directionalLights.needsUpdate=Te,Q.directionalLightShadows.needsUpdate=Te,Q.pointLights.needsUpdate=Te,Q.pointLightShadows.needsUpdate=Te,Q.spotLights.needsUpdate=Te,Q.spotLightShadows.needsUpdate=Te,Q.rectAreaLights.needsUpdate=Te,Q.hemisphereLights.needsUpdate=Te}function Gi(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return j},this.getRenderTarget=function(){return X},this.setRenderTargetTextures=function(Q,Te,ke){const je=ft.get(Q);je.__autoAllocateDepthBuffer=Q.resolveDepthBuffer===!1,je.__autoAllocateDepthBuffer===!1&&(je.__useRenderToTexture=!1),ft.get(Q.texture).__webglTexture=Te,ft.get(Q.depthTexture).__webglTexture=je.__autoAllocateDepthBuffer?void 0:ke,je.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Q,Te){const ke=ft.get(Q);ke.__webglFramebuffer=Te,ke.__useDefaultFramebuffer=Te===void 0};const Pa=ie.createFramebuffer();this.setRenderTarget=function(Q,Te=0,ke=0){X=Q,B=Te,j=ke;let je=!0,Ne=null,gt=!1,Lt=!1;if(Q){const Bt=ft.get(Q);if(Bt.__useDefaultFramebuffer!==void 0)Ze.bindFramebuffer(ie.FRAMEBUFFER,null),je=!1;else if(Bt.__webglFramebuffer===void 0)St.setupRenderTarget(Q);else if(Bt.__hasExternalTextures)St.rebindTextures(Q,ft.get(Q.texture).__webglTexture,ft.get(Q.depthTexture).__webglTexture);else if(Q.depthBuffer){const en=Q.depthTexture;if(Bt.__boundDepthTexture!==en){if(en!==null&&ft.has(en)&&(Q.width!==en.image.width||Q.height!==en.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");St.setupDepthRenderbuffer(Q)}}const hn=Q.texture;(hn.isData3DTexture||hn.isDataArrayTexture||hn.isCompressedArrayTexture)&&(Lt=!0);const ln=ft.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Array.isArray(ln[Te])?Ne=ln[Te][ke]:Ne=ln[Te],gt=!0):Q.samples>0&&St.useMultisampledRTT(Q)===!1?Ne=ft.get(Q).__webglMultisampledFramebuffer:Array.isArray(ln)?Ne=ln[ke]:Ne=ln,K.copy(Q.viewport),ye.copy(Q.scissor),ue=Q.scissorTest}else K.copy(be).multiplyScalar(de).floor(),ye.copy(Ge).multiplyScalar(de).floor(),ue=Ye;if(ke!==0&&(Ne=Pa),Ze.bindFramebuffer(ie.FRAMEBUFFER,Ne)&&je&&Ze.drawBuffers(Q,Ne),Ze.viewport(K),Ze.scissor(ye),Ze.setScissorTest(ue),gt){const Bt=ft.get(Q.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Bt.__webglTexture,ke)}else if(Lt){const Bt=ft.get(Q.texture),hn=Te;ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,Bt.__webglTexture,ke,hn)}else if(Q!==null&&ke!==0){const Bt=ft.get(Q.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,Bt.__webglTexture,ke)}k=-1},this.readRenderTargetPixels=function(Q,Te,ke,je,Ne,gt,Lt,Ht=0){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Bt=ft.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&Lt!==void 0&&(Bt=Bt[Lt]),Bt){Ze.bindFramebuffer(ie.FRAMEBUFFER,Bt);try{const hn=Q.textures[Ht],ln=hn.format,en=hn.type;if(!pt.textureFormatReadable(ln)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!pt.textureTypeReadable(en)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Te>=0&&Te<=Q.width-je&&ke>=0&&ke<=Q.height-Ne&&(Q.textures.length>1&&ie.readBuffer(ie.COLOR_ATTACHMENT0+Ht),ie.readPixels(Te,ke,je,Ne,Re.convert(ln),Re.convert(en),gt))}finally{const hn=X!==null?ft.get(X).__webglFramebuffer:null;Ze.bindFramebuffer(ie.FRAMEBUFFER,hn)}}},this.readRenderTargetPixelsAsync=async function(Q,Te,ke,je,Ne,gt,Lt,Ht=0){if(!(Q&&Q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Bt=ft.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&Lt!==void 0&&(Bt=Bt[Lt]),Bt)if(Te>=0&&Te<=Q.width-je&&ke>=0&&ke<=Q.height-Ne){Ze.bindFramebuffer(ie.FRAMEBUFFER,Bt);const hn=Q.textures[Ht],ln=hn.format,en=hn.type;if(!pt.textureFormatReadable(ln))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!pt.textureTypeReadable(en))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Cn=ie.createBuffer();ie.bindBuffer(ie.PIXEL_PACK_BUFFER,Cn),ie.bufferData(ie.PIXEL_PACK_BUFFER,gt.byteLength,ie.STREAM_READ),Q.textures.length>1&&ie.readBuffer(ie.COLOR_ATTACHMENT0+Ht),ie.readPixels(Te,ke,je,Ne,Re.convert(ln),Re.convert(en),0);const Ln=X!==null?ft.get(X).__webglFramebuffer:null;Ze.bindFramebuffer(ie.FRAMEBUFFER,Ln);const Ci=ie.fenceSync(ie.SYNC_GPU_COMMANDS_COMPLETE,0);return ie.flush(),await dI(ie,Ci,4),ie.bindBuffer(ie.PIXEL_PACK_BUFFER,Cn),ie.getBufferSubData(ie.PIXEL_PACK_BUFFER,0,gt),ie.deleteBuffer(Cn),ie.deleteSync(Ci),gt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Q,Te=null,ke=0){const je=Math.pow(2,-ke),Ne=Math.floor(Q.image.width*je),gt=Math.floor(Q.image.height*je),Lt=Te!==null?Te.x:0,Ht=Te!==null?Te.y:0;St.setTexture2D(Q,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,ke,0,0,Lt,Ht,Ne,gt),Ze.unbindTexture()};const Ar=ie.createFramebuffer(),la=ie.createFramebuffer();this.copyTextureToTexture=function(Q,Te,ke=null,je=null,Ne=0,gt=null){gt===null&&(Ne!==0?(Om("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),gt=Ne,Ne=0):gt=0);let Lt,Ht,Bt,hn,ln,en,Cn,Ln,Ci;const Tn=Q.isCompressedTexture?Q.mipmaps[gt]:Q.image;if(ke!==null)Lt=ke.max.x-ke.min.x,Ht=ke.max.y-ke.min.y,Bt=ke.isBox3?ke.max.z-ke.min.z:1,hn=ke.min.x,ln=ke.min.y,en=ke.isBox3?ke.min.z:0;else{const Zi=Math.pow(2,-Ne);Lt=Math.floor(Tn.width*Zi),Ht=Math.floor(Tn.height*Zi),Q.isDataArrayTexture?Bt=Tn.depth:Q.isData3DTexture?Bt=Math.floor(Tn.depth*Zi):Bt=1,hn=0,ln=0,en=0}je!==null?(Cn=je.x,Ln=je.y,Ci=je.z):(Cn=0,Ln=0,Ci=0);const ri=Re.convert(Te.format),an=Re.convert(Te.type);let yi;Te.isData3DTexture?(St.setTexture3D(Te,0),yi=ie.TEXTURE_3D):Te.isDataArrayTexture||Te.isCompressedArrayTexture?(St.setTexture2DArray(Te,0),yi=ie.TEXTURE_2D_ARRAY):(St.setTexture2D(Te,0),yi=ie.TEXTURE_2D),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,Te.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Te.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,Te.unpackAlignment);const Wn=ie.getParameter(ie.UNPACK_ROW_LENGTH),ki=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),Ba=ie.getParameter(ie.UNPACK_SKIP_PIXELS),Ei=ie.getParameter(ie.UNPACK_SKIP_ROWS),Ka=ie.getParameter(ie.UNPACK_SKIP_IMAGES);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Tn.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Tn.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,hn),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,ln),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,en);const Mi=Q.isDataArrayTexture||Q.isData3DTexture,dr=Te.isDataArrayTexture||Te.isData3DTexture;if(Q.isDepthTexture){const Zi=ft.get(Q),or=ft.get(Te),lr=ft.get(Zi.__renderTarget),Rr=ft.get(or.__renderTarget);Ze.bindFramebuffer(ie.READ_FRAMEBUFFER,lr.__webglFramebuffer),Ze.bindFramebuffer(ie.DRAW_FRAMEBUFFER,Rr.__webglFramebuffer);for(let Ea=0;Ea<Bt;Ea++)Mi&&(ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ft.get(Q).__webglTexture,Ne,en+Ea),ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ft.get(Te).__webglTexture,gt,Ci+Ea)),ie.blitFramebuffer(hn,ln,Lt,Ht,Cn,Ln,Lt,Ht,ie.DEPTH_BUFFER_BIT,ie.NEAREST);Ze.bindFramebuffer(ie.READ_FRAMEBUFFER,null),Ze.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else if(Ne!==0||Q.isRenderTargetTexture||ft.has(Q)){const Zi=ft.get(Q),or=ft.get(Te);Ze.bindFramebuffer(ie.READ_FRAMEBUFFER,Ar),Ze.bindFramebuffer(ie.DRAW_FRAMEBUFFER,la);for(let lr=0;lr<Bt;lr++)Mi?ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,Zi.__webglTexture,Ne,en+lr):ie.framebufferTexture2D(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,Zi.__webglTexture,Ne),dr?ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,or.__webglTexture,gt,Ci+lr):ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,or.__webglTexture,gt),Ne!==0?ie.blitFramebuffer(hn,ln,Lt,Ht,Cn,Ln,Lt,Ht,ie.COLOR_BUFFER_BIT,ie.NEAREST):dr?ie.copyTexSubImage3D(yi,gt,Cn,Ln,Ci+lr,hn,ln,Lt,Ht):ie.copyTexSubImage2D(yi,gt,Cn,Ln,hn,ln,Lt,Ht);Ze.bindFramebuffer(ie.READ_FRAMEBUFFER,null),Ze.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else dr?Q.isDataTexture||Q.isData3DTexture?ie.texSubImage3D(yi,gt,Cn,Ln,Ci,Lt,Ht,Bt,ri,an,Tn.data):Te.isCompressedArrayTexture?ie.compressedTexSubImage3D(yi,gt,Cn,Ln,Ci,Lt,Ht,Bt,ri,Tn.data):ie.texSubImage3D(yi,gt,Cn,Ln,Ci,Lt,Ht,Bt,ri,an,Tn):Q.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,gt,Cn,Ln,Lt,Ht,ri,an,Tn.data):Q.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,gt,Cn,Ln,Tn.width,Tn.height,ri,Tn.data):ie.texSubImage2D(ie.TEXTURE_2D,gt,Cn,Ln,Lt,Ht,ri,an,Tn);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Wn),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,ki),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,Ba),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,Ei),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,Ka),gt===0&&Te.generateMipmaps&&ie.generateMipmap(yi),Ze.unbindTexture()},this.copyTextureToTexture3D=function(Q,Te,ke=null,je=null,Ne=0){return Om('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Q,Te,ke,je,Ne)},this.initRenderTarget=function(Q){ft.get(Q).__webglFramebuffer===void 0&&St.setupRenderTarget(Q)},this.initTexture=function(Q){Q.isCubeTexture?St.setTextureCube(Q,0):Q.isData3DTexture?St.setTexture3D(Q,0):Q.isDataArrayTexture||Q.isCompressedArrayTexture?St.setTexture2DArray(Q,0):St.setTexture2D(Q,0),Ze.unbindTexture()},this.resetState=function(){B=0,j=0,X=null,Ze.reset(),yt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return el}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=fi._getDrawingBufferColorSpace(e),t.unpackColorSpace=fi._getUnpackColorSpace()}}const TF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:rE,AddEquation:kf,AddOperation:gC,AdditiveAnimationBlendMode:hE,AdditiveBlending:DS,AgXToneMapping:xC,AlphaFormat:lE,AlwaysCompare:BC,AlwaysDepth:H2,AlwaysStencilFunc:PS,AmbientLight:E5,AnimationAction:I5,AnimationClip:$m,AnimationLoader:VU,AnimationMixer:mP,AnimationObjectGroup:dP,AnimationUtils:zU,ArcCurve:QC,ArrayCamera:O5,ArrowHelper:UP,AttachedBindMode:US,Audio:D5,AudioAnalyser:iP,AudioContext:HE,AudioListener:eP,AudioLoader:ZU,AxesHelper:B5,BackSide:fs,BasicDepthPacking:RC,BasicShadowMap:KN,BatchedMesh:YC,Bone:c3,BooleanKeyframeTrack:Zd,Box2:xP,Box3:qa,Box3Helper:LP,BoxGeometry:Kd,BoxHelper:DP,BufferAttribute:Gn,BufferGeometry:Nn,BufferGeometryLoader:N5,ByteType:aE,Cache:Cu,Camera:s3,CameraHelper:OP,CanvasTexture:oU,CapsuleGeometry:m3,CatmullRomCurve3:JC,CineonToneMapping:_C,CircleGeometry:g3,ClampToEdgeWrapping:Mo,Clock:VE,Color:Pt,ColorKeyframeTrack:UE,ColorManagement:fi,CompressedArrayTexture:aU,CompressedCubeTexture:sU,CompressedTexture:d3,CompressedTextureLoader:GU,ConeGeometry:P1,ConstantAlphaFactor:dC,ConstantColorFactor:fC,Controls:BP,CubeCamera:jC,CubeReflectionMapping:Nc,CubeRefractionMapping:Yf,CubeTexture:L1,CubeTextureLoader:jU,CubeUVReflectionMapping:ng,CubicBezierCurve:wE,CubicBezierCurve3:e5,CubicInterpolant:v5,CullFaceBack:OS,CullFaceFront:YN,CullFaceFrontBack:y8,CullFaceNone:$N,Curve:jl,CurvePath:n5,CustomBlending:ZN,CustomToneMapping:bC,CylinderGeometry:U1,Cylindrical:bP,Data3DTexture:a3,DataArrayTexture:r3,DataTexture:Iu,DataTextureLoader:WU,DataUtils:CI,DecrementStencilOp:R8,DecrementWrapStencilOp:C8,DefaultLoadingManager:x5,DepthFormat:km,DepthStencilFormat:Hm,DepthTexture:p3,DetachedBindMode:TC,DirectionalLight:kE,DirectionalLightHelper:CP,DiscreteInterpolant:_5,DodecahedronGeometry:y3,DoubleSide:Eo,DstAlphaFactor:sC,DstColorFactor:lC,DynamicCopyUsage:j8,DynamicDrawUsage:zC,DynamicReadUsage:H8,EdgesGeometry:ZC,EllipseCurve:v3,EqualCompare:LC,EqualDepth:G2,EqualStencilFunc:I8,EquirectangularReflectionMapping:f1,EquirectangularRefractionMapping:h1,Euler:Ya,EventDispatcher:Fu,ExtrudeGeometry:_3,FileLoader:Vl,Float16BufferAttribute:BI,Float32BufferAttribute:rn,FloatType:Ls,Fog:l3,FogExp2:o3,FramebufferTexture:rU,FrontSide:Bu,Frustum:rg,FrustumArray:f3,GLBufferAttribute:VS,GLSL1:X8,GLSL3:BS,GreaterCompare:IC,GreaterDepth:W2,GreaterEqualCompare:PC,GreaterEqualDepth:j2,GreaterEqualStencilFunc:z8,GreaterStencilFunc:P8,GridHelper:RP,Group:Us,HalfFloatType:$d,HemisphereLight:T5,HemisphereLightHelper:AP,IcosahedronGeometry:b3,ImageBitmapLoader:C5,ImageLoader:Ym,ImageUtils:HC,IncrementStencilOp:A8,IncrementWrapStencilOp:N8,InstancedBufferAttribute:Ld,InstancedBufferGeometry:R5,InstancedInterleavedBuffer:_P,InstancedMesh:SE,Int16BufferAttribute:UI,Int32BufferAttribute:PI,Int8BufferAttribute:DI,IntType:Z_,InterleavedBuffer:I1,InterleavedBufferAttribute:Zf,Interpolant:sg,InterpolateDiscrete:Vm,InterpolateLinear:Gm,InterpolateSmooth:g2,InterpolationSamplingMode:Y8,InterpolationSamplingType:$8,InvertStencilOp:O8,KeepStencilOp:md,KeyframeTrack:al,LOD:$C,LatheGeometry:x3,Layers:Wm,LessCompare:DC,LessDepth:V2,LessEqualCompare:pE,LessEqualDepth:Dd,LessEqualStencilFunc:U8,LessStencilFunc:L8,Light:ah,LightProbe:A5,Line:zu,Line3:SP,LineBasicMaterial:sa,LineCurve:AE,LineCurve3:t5,LineDashedMaterial:m5,LineLoop:TE,LineSegments:ro,LinearFilter:Tr,LinearInterpolant:IE,LinearMipMapLinearFilter:x8,LinearMipMapNearestFilter:b8,LinearMipmapLinearFilter:Jo,LinearMipmapNearestFilter:Cm,LinearSRGBColorSpace:$a,LinearToneMapping:yC,LinearTransfer:p1,Loader:Bs,LoaderUtils:jf,LoadingManager:PE,LoopOnce:EC,LoopPingPong:wC,LoopRepeat:MC,MOUSE:dd,Material:aa,MaterialLoader:R3,MathUtils:Fi,Matrix2:XE,Matrix3:Sn,Matrix4:sn,MaxEquation:tC,Mesh:Br,MeshBasicMaterial:Is,MeshDepthMaterial:OE,MeshDistanceMaterial:DE,MeshLambertMaterial:d5,MeshMatcapMaterial:p5,MeshNormalMaterial:h5,MeshPhongMaterial:c5,MeshPhysicalMaterial:rl,MeshStandardMaterial:F1,MeshToonMaterial:f5,MinEquation:eC,MirroredRepeatWrapping:Bm,MixOperation:mC,MultiplyBlending:IS,MultiplyOperation:O1,NearestFilter:_a,NearestMipMapLinearFilter:_8,NearestMipMapNearestFilter:v8,NearestMipmapLinearFilter:bd,NearestMipmapNearestFilter:K_,NeutralToneMapping:SC,NeverCompare:OC,NeverDepth:k2,NeverStencilFunc:D8,NoBlending:wc,NoColorSpace:xc,NoToneMapping:Lu,NormalAnimationBlendMode:i3,NormalBlending:Rd,NotEqualCompare:UC,NotEqualDepth:X2,NotEqualStencilFunc:B8,NumberKeyframeTrack:Ud,Object3D:ii,ObjectLoader:YU,ObjectSpaceNormalMap:CC,OctahedronGeometry:B1,OneFactor:iC,OneMinusConstantAlphaFactor:pC,OneMinusConstantColorFactor:hC,OneMinusDstAlphaFactor:oC,OneMinusDstColorFactor:uC,OneMinusSrcAlphaFactor:F2,OneMinusSrcColorFactor:aC,OrthographicCamera:Rc,PCFShadowMap:$_,PCFSoftShadowMap:Q0,PMREMGenerator:XS,Path:T_,PerspectiveCamera:Wr,Plane:vc,PlaneGeometry:ag,PlaneHelper:IP,PointLight:FE,PointLightHelper:MP,Points:EE,PointsMaterial:h3,PolarGridHelper:NP,PolyhedronGeometry:rh,PositionalAudio:nP,PropertyBinding:Ri,PropertyMixer:L5,QuadraticBezierCurve:RE,QuadraticBezierCurve3:NE,Quaternion:An,QuaternionKeyframeTrack:Pd,QuaternionLinearInterpolant:b5,RED_GREEN_RGTC2_Format:y_,RED_RGTC1_Format:fE,REVISION:$f,RGBADepthPacking:NC,RGBAFormat:cs,RGBAIntegerFormat:n3,RGBA_ASTC_10x10_Format:f_,RGBA_ASTC_10x5_Format:l_,RGBA_ASTC_10x6_Format:u_,RGBA_ASTC_10x8_Format:c_,RGBA_ASTC_12x10_Format:h_,RGBA_ASTC_12x12_Format:d_,RGBA_ASTC_4x4_Format:e_,RGBA_ASTC_5x4_Format:t_,RGBA_ASTC_5x5_Format:n_,RGBA_ASTC_6x5_Format:i_,RGBA_ASTC_6x6_Format:r_,RGBA_ASTC_8x5_Format:a_,RGBA_ASTC_8x6_Format:s_,RGBA_ASTC_8x8_Format:o_,RGBA_BPTC_Format:i1,RGBA_ETC2_EAC_Format:J2,RGBA_PVRTC_2BPPV1_Format:K2,RGBA_PVRTC_4BPPV1_Format:Y2,RGBA_S3TC_DXT1_Format:e1,RGBA_S3TC_DXT3_Format:t1,RGBA_S3TC_DXT5_Format:n1,RGBDepthPacking:T8,RGBFormat:uE,RGBIntegerFormat:S8,RGB_BPTC_SIGNED_Format:p_,RGB_BPTC_UNSIGNED_Format:m_,RGB_ETC1_Format:Z2,RGB_ETC2_Format:Q2,RGB_PVRTC_2BPPV1_Format:$2,RGB_PVRTC_4BPPV1_Format:q2,RGB_S3TC_DXT1_Format:J0,RGDepthPacking:E8,RGFormat:cE,RGIntegerFormat:t3,RawShaderMaterial:u5,Ray:Yd,Raycaster:U5,RectAreaLight:M5,RedFormat:e3,RedIntegerFormat:D1,ReinhardToneMapping:vC,RenderTarget:gE,RenderTarget3D:gP,RepeatWrapping:Kf,ReplaceStencilOp:w8,ReverseSubtractEquation:JN,RingGeometry:S3,SIGNED_RED_GREEN_RGTC2_Format:v_,SIGNED_RED_RGTC1_Format:g_,SRGBColorSpace:Zr,SRGBTransfer:$i,Scene:bE,ShaderChunk:Yn,ShaderLib:Ul,ShaderMaterial:nl,ShadowMaterial:l5,Shape:Cd,ShapeGeometry:T3,ShapePath:PP,ShapeUtils:Bl,ShortType:sE,Skeleton:ig,SkeletonHelper:EP,SkinnedMesh:u3,Source:Vf,Sphere:Da,SphereGeometry:z1,Spherical:jS,SphericalHarmonics3:w5,SplineCurve:CE,SpotLight:zE,SpotLightHelper:TP,Sprite:qC,SpriteMaterial:xE,SrcAlphaFactor:z2,SrcAlphaSaturateFactor:cC,SrcColorFactor:rC,StaticCopyUsage:G8,StaticDrawUsage:m1,StaticReadUsage:k8,StereoCamera:QU,StreamCopyUsage:W8,StreamDrawUsage:F8,StreamReadUsage:V8,StringKeyframeTrack:Qd,SubtractEquation:QN,SubtractiveBlending:LS,TOUCH:pd,TangentSpaceNormalMap:Hc,TetrahedronGeometry:E3,Texture:Mr,TextureLoader:S5,TextureUtils:VP,TimestampQuery:q8,TorusGeometry:M3,TorusKnotGeometry:w3,Triangle:io,TriangleFanDrawMode:__,TriangleStripDrawMode:dE,TrianglesDrawMode:AC,TubeGeometry:A3,UVMapping:Y_,Uint16BufferAttribute:yE,Uint32BufferAttribute:vE,Uint8BufferAttribute:LI,Uint8ClampedBufferAttribute:II,Uniform:WE,UniformsGroup:vP,UniformsLib:Vt,UniformsUtils:_E,UnsignedByteType:tl,UnsignedInt248Type:Fm,UnsignedInt5999Type:oE,UnsignedIntType:Cc,UnsignedShort4444Type:Q_,UnsignedShort5551Type:J_,UnsignedShortType:zm,VSMShadowMap:Il,Vector2:it,Vector3:$,Vector4:Di,VectorKeyframeTrack:Bd,VideoFrameTexture:iU,VideoTexture:KC,WebGL3DRenderTarget:bI,WebGLArrayRenderTarget:_I,WebGLCoordinateSystem:el,WebGLCubeRenderTarget:WC,WebGLRenderTarget:Hl,WebGLRenderer:j5,WebGLUtils:G5,WebGPUCoordinateSystem:g1,WebXRController:y2,WireframeGeometry:o5,WrapAroundEnding:d1,ZeroCurvatureEnding:xd,ZeroFactor:nC,ZeroSlopeEnding:Sd,ZeroStencilOp:M8,createCanvasElement:kC},Symbol.toStringTag,{value:"Module"}));var Sx={exports:{}},Tx={},Ex={exports:{}},Mx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA;function EF(){if(uA)return Mx;uA=1;var n=tg();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function l(g,y){var _=y(),x=i({inst:{value:_,getSnapshot:y}}),w=x[0].inst,T=x[1];return a(function(){w.value=_,w.getSnapshot=y,u(w)&&T({inst:w})},[g,_,y]),r(function(){return u(w)&&T({inst:w}),g(function(){u(w)&&T({inst:w})})},[g]),s(_),_}function u(g){var y=g.getSnapshot;g=g.value;try{var _=y();return!t(g,_)}catch{return!0}}function f(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Mx.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Mx}var cA;function MF(){return cA||(cA=1,Ex.exports=EF()),Ex.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA;function wF(){if(fA)return Tx;fA=1;var n=tg(),e=MF();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,l=n.useMemo,u=n.useDebugValue;return Tx.useSyncExternalStoreWithSelector=function(f,m,g,y,_){var x=a(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=l(function(){function S(B){if(!O){if(O=!0,L=B,B=y(B),_!==void 0&&w.hasValue){var j=w.value;if(_(j,B))return C=j}return C=B}if(j=C,i(L,B))return j;var X=y(B);return _!==void 0&&_(j,X)?(L=B,j):(L=B,C=X)}var O=!1,L,C,P=g===void 0?null:g;return[function(){return S(m())},P===null?void 0:function(){return S(P())}]},[m,g,y,_]);var T=r(f,x[0],x[1]);return s(function(){w.hasValue=!0,w.value=T},[T]),u(T),T},Tx}var hA;function AF(){return hA||(hA=1,Sx.exports=wF()),Sx.exports}var RF=AF();const NF=q_(RF),dA=n=>{let e;const t=new Set,i=(f,m)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const y=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(_=>_(e,y))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>u,subscribe:f=>(t.add(f),()=>t.delete(f))},u=e=n(i,r,l);return l},CF=n=>n?dA(n):dA,{useSyncExternalStoreWithSelector:OF}=NF,DF=n=>n;function LF(n,e=DF,t){const i=OF(n.subscribe,n.getState,n.getInitialState,e,t);return iE.useDebugValue(i),i}const pA=(n,e)=>{const t=CF(n),i=(r,a=e)=>LF(t,r,a);return Object.assign(i,t),i},IF=(n,e)=>n?pA(n,e):pA;var wx={exports:{}},Ax={exports:{}},Rx={exports:{}},Nx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA;function UF(){return mA||(mA=1,function(n){function e(Z,le){var de=Z.length;Z.push(le);e:for(;0<de;){var Le=de-1>>>1,ee=Z[Le];if(0<r(ee,le))Z[Le]=le,Z[de]=ee,de=Le;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var le=Z[0],de=Z.pop();if(de!==le){Z[0]=de;e:for(var Le=0,ee=Z.length,be=ee>>>1;Le<be;){var Ge=2*(Le+1)-1,Ye=Z[Ge],xe=Ge+1,Ke=Z[xe];if(0>r(Ye,de))xe<ee&&0>r(Ke,Ye)?(Z[Le]=Ke,Z[xe]=de,Le=xe):(Z[Le]=Ye,Z[Ge]=de,Le=Ge);else if(xe<ee&&0>r(Ke,de))Z[Le]=Ke,Z[xe]=de,Le=xe;else break e}}return le}function r(Z,le){var de=Z.sortIndex-le.sortIndex;return de!==0?de:Z.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var u=[],f=[],m=1,g=null,y=3,_=!1,x=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(Z){for(var le=t(f);le!==null;){if(le.callback===null)i(f);else if(le.startTime<=Z)i(f),le.sortIndex=le.expirationTime,e(u,le);else break;le=t(f)}}function C(Z){if(w=!1,L(Z),!x)if(t(u)!==null)x=!0,we();else{var le=t(f);le!==null&&Ae(C,le.startTime-Z)}}var P=!1,B=-1,j=5,X=-1;function k(){return!(n.unstable_now()-X<j)}function U(){if(P){var Z=n.unstable_now();X=Z;var le=!0;try{e:{x=!1,w&&(w=!1,S(B),B=-1),_=!0;var de=y;try{t:{for(L(Z),g=t(u);g!==null&&!(g.expirationTime>Z&&k());){var Le=g.callback;if(typeof Le=="function"){g.callback=null,y=g.priorityLevel;var ee=Le(g.expirationTime<=Z);if(Z=n.unstable_now(),typeof ee=="function"){g.callback=ee,L(Z),le=!0;break t}g===t(u)&&i(u),L(Z)}else i(u);g=t(u)}if(g!==null)le=!0;else{var be=t(f);be!==null&&Ae(C,be.startTime-Z),le=!1}}break e}finally{g=null,y=de,_=!1}le=void 0}}finally{le?K():P=!1}}}var K;if(typeof O=="function")K=function(){O(U)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,ue=ye.port2;ye.port1.onmessage=U,K=function(){ue.postMessage(null)}}else K=function(){T(U,0)};function we(){P||(P=!0,K())}function Ae(Z,le){B=T(function(){Z(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){x||_||(x=!0,we())},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(Z){switch(y){case 1:case 2:case 3:var le=3;break;default:le=y}var de=y;y=le;try{return Z()}finally{y=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=y;y=Z;try{return le()}finally{y=de}},n.unstable_scheduleCallback=function(Z,le,de){var Le=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Le+de:Le):de=Le,Z){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=de+ee,Z={id:m++,callback:le,priorityLevel:Z,startTime:de,expirationTime:ee,sortIndex:-1},de>Le?(Z.sortIndex=de,e(f,Z),t(u)===null&&Z===t(f)&&(w?(S(B),B=-1):w=!0,Ae(C,de-Le))):(Z.sortIndex=ee,e(u,Z),x||_||(x=!0,we())),Z},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(Z){var le=y;return function(){var de=y;y=le;try{return Z.apply(this,arguments)}finally{y=de}}}}(Nx)),Nx}var gA;function W5(){return gA||(gA=1,Rx.exports=UF()),Rx.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA;function PF(){return yA||(yA=1,function(n){n.exports=function(e){function t(h,d,b,M){return new Ug(h,d,b,M)}function i(){}function r(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)d+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){return h===null||typeof h!="object"?null:(h=_l&&h[_l]||h["@@iterator"],typeof h=="function"?h:null)}function s(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===Fg?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case au:return"Fragment";case Hs:return"Portal";case vp:return"Profiler";case Nh:return"StrictMode";case _p:return"Suspense";case nf:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case uo:return(h.displayName||"Context")+".Provider";case Bg:return(h._context.displayName||"Context")+".Consumer";case Oh:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case bp:return d=h.displayName||null,d!==null?d:s(h.type)||"Memo";case Vs:d=h._payload,h=h._init;try{return s(h(d))}catch{}}return null}function l(h){if(Io===void 0)try{throw Error()}catch(b){var d=b.stack.trim().match(/\n( *(at )?)/);Io=d&&d[1]||"",bl=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Io+h+bl}function u(h,d){if(!h||Wu)return"";Wu=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(d){var qt=function(){throw Error()};if(Object.defineProperty(qt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qt,[])}catch(Fn){var Zt=Fn}Reflect.construct(h,[],qt)}else{try{qt.call()}catch(Fn){Zt=Fn}h.call(qt.prototype)}}else{try{throw Error()}catch(Fn){Zt=Fn}(qt=h())&&typeof qt.catch=="function"&&qt.catch(function(){})}}catch(Fn){if(Fn&&Zt&&typeof Fn.stack=="string")return[Fn.stack,Zt.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=M.DetermineComponentFrameRoot(),ne=I[0],ge=I[1];if(ne&&ge){var Ie=ne.split(`
`),st=ge.split(`
`);for(N=M=0;M<Ie.length&&!Ie[M].includes("DetermineComponentFrameRoot");)M++;for(;N<st.length&&!st[N].includes("DetermineComponentFrameRoot");)N++;if(M===Ie.length||N===st.length)for(M=Ie.length-1,N=st.length-1;1<=M&&0<=N&&Ie[M]!==st[N];)N--;for(;1<=M&&0<=N;M--,N--)if(Ie[M]!==st[N]){if(M!==1||N!==1)do if(M--,N--,0>N||Ie[M]!==st[N]){var Dt=`
`+Ie[M].replace(" at new "," at ");return h.displayName&&Dt.includes("<anonymous>")&&(Dt=Dt.replace("<anonymous>",h.displayName)),Dt}while(1<=M&&0<=N);break}}}finally{Wu=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?l(b):""}function f(h){switch(h.tag){case 26:case 27:case 5:return l(h.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return h=u(h.type,!1),h;case 11:return h=u(h.type.render,!1),h;case 1:return h=u(h.type,!0),h;default:return""}}function m(h){try{var d="";do d+=f(h),h=h.return;while(h);return d}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function g(h){var d=h,b=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(b=d.return),h=d.return;while(h)}return d.tag===3?b:null}function y(h){if(g(h)!==h)throw Error(r(188))}function _(h){var d=h.alternate;if(!d){if(d=g(h),d===null)throw Error(r(188));return d!==h?null:h}for(var b=h,M=d;;){var N=b.return;if(N===null)break;var I=N.alternate;if(I===null){if(M=N.return,M!==null){b=M;continue}break}if(N.child===I.child){for(I=N.child;I;){if(I===b)return y(N),h;if(I===M)return y(N),d;I=I.sibling}throw Error(r(188))}if(b.return!==M.return)b=N,M=I;else{for(var ne=!1,ge=N.child;ge;){if(ge===b){ne=!0,b=N,M=I;break}if(ge===M){ne=!0,M=N,b=I;break}ge=ge.sibling}if(!ne){for(ge=I.child;ge;){if(ge===b){ne=!0,b=I,M=N;break}if(ge===M){ne=!0,M=I,b=N;break}ge=ge.sibling}if(!ne)throw Error(r(189))}}if(b.alternate!==M)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?h:d}function x(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(d=x(h),d!==null)return d;h=h.sibling}return null}function w(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(d=w(h),d!==null))return d;h=h.sibling}return null}function T(h){return{current:h}}function S(h){0>El||(h.current=Or[El],Or[El]=null,El--)}function O(h,d){El++,Or[El]=h.current,h.current=d}function L(h){return h>>>=0,h===0?32:31-(Hy(h)/Vy|0)|0}function C(h){var d=h&42;if(d!==0)return d;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function P(h,d){var b=h.pendingLanes;if(b===0)return 0;var M=0,N=h.suspendedLanes,I=h.pingedLanes,ne=h.warmLanes;h=h.finishedLanes!==0;var ge=b&134217727;return ge!==0?(b=ge&~N,b!==0?M=C(b):(I&=ge,I!==0?M=C(I):h||(ne=ge&~ne,ne!==0&&(M=C(ne))))):(ge=b&~N,ge!==0?M=C(ge):I!==0?M=C(I):h||(ne=b&~ne,ne!==0&&(M=C(ne)))),M===0?0:d!==0&&d!==M&&(d&N)===0&&(N=M&-M,ne=d&-d,N>=ne||N===32&&(ne&4194176)!==0)?d:M}function B(h,d){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&d)===0}function j(h,d){switch(h){case 1:case 2:case 4:case 8:return d+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X(){var h=Po;return Po<<=1,(Po&4194176)===0&&(Po=128),h}function k(){var h=$u;return $u<<=1,($u&62914560)===0&&($u=4194304),h}function U(h){for(var d=[],b=0;31>b;b++)d.push(h);return d}function K(h,d){h.pendingLanes|=d,d!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function ye(h,d,b,M,N,I){var ne=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var ge=h.entanglements,Ie=h.expirationTimes,st=h.hiddenUpdates;for(b=ne&~b;0<b;){var Dt=31-Va(b),qt=1<<Dt;ge[Dt]=0,Ie[Dt]=-1;var Zt=st[Dt];if(Zt!==null)for(st[Dt]=null,Dt=0;Dt<Zt.length;Dt++){var Fn=Zt[Dt];Fn!==null&&(Fn.lane&=-536870913)}b&=~qt}M!==0&&ue(h,M,0),I!==0&&N===0&&h.tag!==0&&(h.suspendedLanes|=I&~(ne&~d))}function ue(h,d,b){h.pendingLanes|=d,h.suspendedLanes&=~d;var M=31-Va(d);h.entangledLanes|=d,h.entanglements[M]=h.entanglements[M]|1073741824|b&4194218}function we(h,d){var b=h.entangledLanes|=d;for(h=h.entanglements;b;){var M=31-Va(b),N=1<<M;N&d|h[M]&d&&(h[M]|=d),b&=~N}}function Ae(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Z(h){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(Dr,h,void 0,(h.current.flags&128)===128)}catch{}}function le(h){if(typeof Wy=="function"&&ta(h),is&&typeof is.setStrictMode=="function")try{is.setStrictMode(Dr,h)}catch{}}function de(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}function Le(h,d){if(typeof h=="object"&&h!==null){var b=r0.get(h);return b!==void 0?b:(d={value:h,source:d,stack:m(d)},r0.set(h,d),d)}return{value:h,source:d,stack:m(d)}}function ee(h,d){Yu[Ku++]=hf,Yu[Ku++]=Zu,Zu=h,hf=d}function be(h,d,b){vs[_s++]=ho,vs[_s++]=po,vs[_s++]=hu,hu=h;var M=ho;h=po;var N=32-Va(M)-1;M&=~(1<<N),b+=1;var I=32-Va(d)+N;if(30<I){var ne=N-N%5;I=(M&(1<<ne)-1).toString(32),M>>=ne,N-=ne,ho=1<<32-Va(d)+N|b<<N|M,po=I+h}else ho=1<<I|b<<N|M,po=h}function Ge(h){h.return!==null&&(ee(h,1),be(h,1,0))}function Ye(h){for(;h===Zu;)Zu=Yu[--Ku],Yu[Ku]=null,hf=Yu[--Ku],Yu[Ku]=null;for(;h===hu;)hu=vs[--_s],vs[_s]=null,po=vs[--_s],vs[_s]=null,ho=vs[--_s],vs[_s]=null}function xe(h,d){O(Bo,d),O(df,h),O(qr,null),h=sy(d),S(qr),O(qr,h)}function Ke(){S(qr),S(df),S(Bo)}function et(h){h.memoizedState!==null&&O(Qu,h);var d=qr.current,b=of(d,h.type);d!==b&&(O(df,h),O(qr,b))}function xt(h){df.current===h&&(S(qr),S(df)),Qu.current===h&&(S(Qu),ka?co._currentValue=ou:co._currentValue2=ou)}function bt(h){var d=Error(r(418,""));throw Jt(Le(d,h)),kh}function Kt(h,d){if(!ma)throw Error(r(175));Oy(h.stateNode,h.type,h.memoizedProps,d,h)||bt(h)}function Wt(h){for(ga=h.return;ga;)switch(ga.tag){case 3:case 27:na=!0;return;case 5:case 13:na=!1;return;default:ga=ga.return}}function tn(h){if(!ma||h!==ga)return!1;if(!pi)return Wt(h),pi=!0,!1;var d=!1;if(ji?h.tag!==3&&h.tag!==27&&(h.tag!==5||Np(h.type)&&!Hn(h.type,h.memoizedProps))&&(d=!0):h.tag!==3&&(h.tag!==5||Np(h.type)&&!Hn(h.type,h.memoizedProps))&&(d=!0),d&&ya&&bt(h),Wt(h),h.tag===13){if(!ma)throw Error(r(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));ya=Ly(h)}else ya=ga?e0(h.stateNode):null;return!0}function un(){ma&&(ya=ga=null,pi=!1)}function Jt(h){Ws===null?Ws=[h]:Ws.push(h)}function ie(){for(var h=Ju,d=mo=Ju=0;d<h;){var b=Xs[d];Xs[d++]=null;var M=Xs[d];Xs[d++]=null;var N=Xs[d];Xs[d++]=null;var I=Xs[d];if(Xs[d++]=null,M!==null&&N!==null){var ne=M.pending;ne===null?N.next=N:(N.next=ne.next,ne.next=N),M.pending=N}I!==0&&Ze(b,N,I)}}function _t(h,d,b,M){Xs[Ju++]=h,Xs[Ju++]=d,Xs[Ju++]=b,Xs[Ju++]=M,mo|=M,h.lanes|=M,h=h.alternate,h!==null&&(h.lanes|=M)}function ut(h,d,b,M){return _t(h,d,b,M),Ot(h)}function pt(h,d){return _t(h,null,null,d),Ot(h)}function Ze(h,d,b){h.lanes|=b;var M=h.alternate;M!==null&&(M.lanes|=b);for(var N=!1,I=h.return;I!==null;)I.childLanes|=b,M=I.alternate,M!==null&&(M.childLanes|=b),I.tag===22&&(h=I.stateNode,h===null||h._visibility&1||(N=!0)),h=I,I=I.return;N&&d!==null&&h.tag===3&&(I=h.stateNode,N=31-Va(b),I=I.hiddenUpdates,h=I[N],h===null?I[N]=[d]:h.push(d),d.lane=b|536870912)}function Ot(h){if(50<Sf)throw Sf=0,jp=null,Error(r(185));for(var d=h.return;d!==null;)h=d,d=h.return;return h.tag===3?h.stateNode:null}function ft(h){h!==Ml&&h.next===null&&(Ml===null?Hh=Ml=h:Ml=Ml.next=h),Qi=!0,ec||(ec=!0,We(on))}function St(h,d){if(!a0&&Qi){a0=!0;do for(var b=!1,M=Hh;M!==null;){if(h!==0){var N=M.pendingLanes;if(N===0)var I=0;else{var ne=M.suspendedLanes,ge=M.pingedLanes;I=(1<<31-Va(42|h)+1)-1,I&=N&~(ne&~ge),I=I&201326677?I&201326677|1:I?I|2:0}I!==0&&(b=!0,Ce(M,I))}else I=ai,I=P(M,M===Ui?I:0),(I&3)===0||B(M,I)||(b=!0,Ce(M,I));M=M.next}while(b);a0=!1}}function on(){Qi=ec=!1;var h=0;pf!==0&&(cy()&&(h=pf),pf=0);for(var d=js(),b=null,M=Hh;M!==null;){var N=M.next,I=re(M,d);I===0?(M.next=null,b===null?Hh=N:b.next=N,N===null&&(Ml=b)):(b=M,(h!==0||(I&3)!==0)&&(Qi=!0)),M=N}St(h)}function re(h,d){for(var b=h.suspendedLanes,M=h.pingedLanes,N=h.expirationTimes,I=h.pendingLanes&-62914561;0<I;){var ne=31-Va(I),ge=1<<ne,Ie=N[ne];Ie===-1?((ge&b)===0||(ge&M)!==0)&&(N[ne]=j(ge,d)):Ie<=d&&(h.expiredLanes|=ge),I&=~ge}if(d=Ui,b=ai,b=P(h,h===d?b:0),M=h.callbackNode,b===0||h===d&&Vi===2||h.cancelPendingCommit!==null)return M!==null&&M!==null&&Lp(M),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||B(h,b)){if(d=b&-b,d===h.callbackPriority)return d;switch(M!==null&&Lp(M),Ae(b)){case 2:case 8:b=jy;break;case 32:b=Pp;break;case 268435456:b=tb;break;default:b=Pp}return M=q.bind(null,h),b=Fh(b,M),h.callbackPriority=d,h.callbackNode=b,d}return M!==null&&M!==null&&Lp(M),h.callbackPriority=2,h.callbackNode=null,2}function q(h,d){var b=h.callbackNode;if(lo()&&h.callbackNode!==b)return null;var M=ai;return M=P(h,h===Ui?M:0),M===0?null:(eu(h,M,d),re(h,js()),h.callbackNode!=null&&h.callbackNode===b?q.bind(null,h):null)}function Ce(h,d){if(lo())return null;eu(h,d,!0)}function We(h){jg?Tl(function(){(bi&6)!==0?Fh(Up,h):h()}):Fh(Up,h)}function Qe(){return pf===0&&(pf=X()),pf}function He(h,d){if(mf===null){var b=mf=[];tc=0,bs=Qe(),nc={status:"pending",value:void 0,then:function(M){b.push(M)}}}return tc++,d.then(Ut,Ut),d}function Ut(){if(--tc===0&&mf!==null){nc!==null&&(nc.status="fulfilled");var h=mf;mf=null,bs=0,nc=null;for(var d=0;d<h.length;d++)(0,h[d])()}}function wt(h,d){var b=[],M={status:"pending",value:null,reason:null,then:function(N){b.push(N)}};return h.then(function(){M.status="fulfilled",M.value=d;for(var N=0;N<b.length;N++)(0,b[N])(d)},function(N){for(M.status="rejected",M.reason=N,N=0;N<b.length;N++)(0,b[N])(void 0)}),M}function Gt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $t(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function rt(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Tt(h,d,b){var M=h.updateQueue;if(M===null)return null;if(M=M.shared,(bi&2)!==0){var N=M.pending;return N===null?d.next=d:(d.next=N.next,N.next=d),M.pending=d,d=Ot(h),Ze(h,null,b),d}return _t(h,M,d,b),Ot(h)}function Ct(h,d,b){if(d=d.updateQueue,d!==null&&(d=d.shared,(b&4194176)!==0)){var M=d.lanes;M&=h.pendingLanes,b|=M,d.lanes=b,we(h,b)}}function pe(h,d){var b=h.updateQueue,M=h.alternate;if(M!==null&&(M=M.updateQueue,b===M)){var N=null,I=null;if(b=b.firstBaseUpdate,b!==null){do{var ne={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};I===null?N=I=ne:I=I.next=ne,b=b.next}while(b!==null);I===null?N=I=d:I=I.next=d}else N=I=d;b={baseState:M.baseState,firstBaseUpdate:N,lastBaseUpdate:I,shared:M.shared,callbacks:M.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=d:h.next=d,b.lastBaseUpdate=d}function Re(){if(ic){var h=nc;if(h!==null)throw h}}function yt(h,d,b,M){ic=!1;var N=h.updateQueue;wl=!1;var I=N.firstBaseUpdate,ne=N.lastBaseUpdate,ge=N.shared.pending;if(ge!==null){N.shared.pending=null;var Ie=ge,st=Ie.next;Ie.next=null,ne===null?I=st:ne.next=st,ne=Ie;var Dt=h.alternate;Dt!==null&&(Dt=Dt.updateQueue,ge=Dt.lastBaseUpdate,ge!==ne&&(ge===null?Dt.firstBaseUpdate=st:ge.next=st,Dt.lastBaseUpdate=Ie))}if(I!==null){var qt=N.baseState;ne=0,Dt=st=Ie=null,ge=I;do{var Zt=ge.lane&-536870913,Fn=Zt!==ge.lane;if(Fn?(ai&Zt)===Zt:(M&Zt)===Zt){Zt!==0&&Zt===bs&&(ic=!0),Dt!==null&&(Dt=Dt.next={lane:0,tag:ge.tag,payload:ge.payload,callback:null,next:null});e:{var Rs=h,xu=ge;Zt=d;var Su=b;switch(xu.tag){case 1:if(Rs=xu.payload,typeof Rs=="function"){qt=Rs.call(Su,qt,Zt);break e}qt=Rs;break e;case 3:Rs.flags=Rs.flags&-65537|128;case 0:if(Rs=xu.payload,Zt=typeof Rs=="function"?Rs.call(Su,qt,Zt):Rs,Zt==null)break e;qt=yp({},qt,Zt);break e;case 2:wl=!0}}Zt=ge.callback,Zt!==null&&(h.flags|=64,Fn&&(h.flags|=8192),Fn=N.callbacks,Fn===null?N.callbacks=[Zt]:Fn.push(Zt))}else Fn={lane:Zt,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},Dt===null?(st=Dt=Fn,Ie=qt):Dt=Dt.next=Fn,ne|=Zt;if(ge=ge.next,ge===null){if(ge=N.shared.pending,ge===null)break;Fn=ge,ge=Fn.next,Fn.next=null,N.lastBaseUpdate=Fn,N.shared.pending=null}}while(!0);Dt===null&&(Ie=qt),N.baseState=Ie,N.firstBaseUpdate=st,N.lastBaseUpdate=Dt,I===null&&(N.shared.lanes=0),ws|=ne,h.lanes=ne,h.memoizedState=qt}}function he(h,d){if(typeof h!="function")throw Error(r(191,h));h.call(d)}function vt(h,d){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)he(b[h],d)}function at(h,d){if(rs(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var b=Object.keys(h),M=Object.keys(d);if(b.length!==M.length)return!1;for(M=0;M<b.length;M++){var N=b[M];if(!zo.call(d,N)||!rs(h[N],d[N]))return!1}return!0}function At(h){return h=h.status,h==="fulfilled"||h==="rejected"}function ct(){}function Be(h,d,b){switch(b=h[b],b===void 0?h.push(d):b!==d&&(d.then(ct,ct),d=b),d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===gf?Error(r(483)):h;default:if(typeof d.status=="string")d.then(ct,ct);else{if(h=Ui,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=d,h.status="pending",h.then(function(M){if(d.status==="pending"){var N=d;N.status="fulfilled",N.value=M}},function(M){if(d.status==="pending"){var N=d;N.status="rejected",N.reason=M}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===gf?Error(r(483)):h}throw du=d,gf}}function Ft(){if(du===null)throw Error(r(459));var h=du;return du=null,h}function Qt(h){var d=mu;return mu+=1,pu===null&&(pu=[]),Be(pu,h,d)}function _n(h,d){d=d.props.ref,h.ref=d!==void 0?d:null}function bn(h,d){throw d.$$typeof===$3?Error(r(525)):(h=Object.prototype.toString.call(d),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h)))}function mi(h){var d=h._init;return d(h._payload)}function gi(h){function d(Ve,Ee){if(h){var $e=Ve.deletions;$e===null?(Ve.deletions=[Ee],Ve.flags|=16):$e.push(Ee)}}function b(Ve,Ee){if(!h)return null;for(;Ee!==null;)d(Ve,Ee),Ee=Ee.sibling;return null}function M(Ve){for(var Ee=new Map;Ve!==null;)Ve.key!==null?Ee.set(Ve.key,Ve):Ee.set(Ve.index,Ve),Ve=Ve.sibling;return Ee}function N(Ve,Ee){return Ve=ks(Ve,Ee),Ve.index=0,Ve.sibling=null,Ve}function I(Ve,Ee,$e){return Ve.index=$e,h?($e=Ve.alternate,$e!==null?($e=$e.index,$e<Ee?(Ve.flags|=33554434,Ee):$e):(Ve.flags|=33554434,Ee)):(Ve.flags|=1048576,Ee)}function ne(Ve){return h&&Ve.alternate===null&&(Ve.flags|=33554434),Ve}function ge(Ve,Ee,$e,Rt){return Ee===null||Ee.tag!==6?(Ee=mp($e,Ve.mode,Rt),Ee.return=Ve,Ee):(Ee=N(Ee,$e),Ee.return=Ve,Ee)}function Ie(Ve,Ee,$e,Rt){var cn=$e.type;return cn===au?Dt(Ve,Ee,$e.props.children,Rt,$e.key):Ee!==null&&(Ee.elementType===cn||typeof cn=="object"&&cn!==null&&cn.$$typeof===Vs&&mi(cn)===Ee.type)?(Ee=N(Ee,$e.props),_n(Ee,$e),Ee.return=Ve,Ee):(Ee=Lo($e.type,$e.key,$e.props,null,Ve.mode,Rt),_n(Ee,$e),Ee.return=Ve,Ee)}function st(Ve,Ee,$e,Rt){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==$e.containerInfo||Ee.stateNode.implementation!==$e.implementation?(Ee=Pg($e,Ve.mode,Rt),Ee.return=Ve,Ee):(Ee=N(Ee,$e.children||[]),Ee.return=Ve,Ee)}function Dt(Ve,Ee,$e,Rt,cn){return Ee===null||Ee.tag!==7?(Ee=vr($e,Ve.mode,Rt,cn),Ee.return=Ve,Ee):(Ee=N(Ee,$e),Ee.return=Ve,Ee)}function qt(Ve,Ee,$e){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ee=mp(""+Ee,Ve.mode,$e),Ee.return=Ve,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case Rh:return $e=Lo(Ee.type,Ee.key,Ee.props,null,Ve.mode,$e),_n($e,Ee),$e.return=Ve,$e;case Hs:return Ee=Pg(Ee,Ve.mode,$e),Ee.return=Ve,Ee;case Vs:var Rt=Ee._init;return Ee=Rt(Ee._payload),qt(Ve,Ee,$e)}if(rf(Ee)||a(Ee))return Ee=vr(Ee,Ve.mode,$e,null),Ee.return=Ve,Ee;if(typeof Ee.then=="function")return qt(Ve,Qt(Ee),$e);if(Ee.$$typeof===uo)return qt(Ve,dh(Ve,Ee),$e);bn(Ve,Ee)}return null}function Zt(Ve,Ee,$e,Rt){var cn=Ee!==null?Ee.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return cn!==null?null:ge(Ve,Ee,""+$e,Rt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case Rh:return $e.key===cn?Ie(Ve,Ee,$e,Rt):null;case Hs:return $e.key===cn?st(Ve,Ee,$e,Rt):null;case Vs:return cn=$e._init,$e=cn($e._payload),Zt(Ve,Ee,$e,Rt)}if(rf($e)||a($e))return cn!==null?null:Dt(Ve,Ee,$e,Rt,null);if(typeof $e.then=="function")return Zt(Ve,Ee,Qt($e),Rt);if($e.$$typeof===uo)return Zt(Ve,Ee,dh(Ve,$e),Rt);bn(Ve,$e)}return null}function Fn(Ve,Ee,$e,Rt,cn){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return Ve=Ve.get($e)||null,ge(Ee,Ve,""+Rt,cn);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case Rh:return Ve=Ve.get(Rt.key===null?$e:Rt.key)||null,Ie(Ee,Ve,Rt,cn);case Hs:return Ve=Ve.get(Rt.key===null?$e:Rt.key)||null,st(Ee,Ve,Rt,cn);case Vs:var rr=Rt._init;return Rt=rr(Rt._payload),Fn(Ve,Ee,$e,Rt,cn)}if(rf(Rt)||a(Rt))return Ve=Ve.get($e)||null,Dt(Ee,Ve,Rt,cn,null);if(typeof Rt.then=="function")return Fn(Ve,Ee,$e,Qt(Rt),cn);if(Rt.$$typeof===uo)return Fn(Ve,Ee,$e,dh(Ee,Rt),cn);bn(Ee,Rt)}return null}function Rs(Ve,Ee,$e,Rt){for(var cn=null,rr=null,Dn=Ee,Ai=Ee=0,Lr=null;Dn!==null&&Ai<$e.length;Ai++){Dn.index>Ai?(Lr=Dn,Dn=null):Lr=Dn.sibling;var ti=Zt(Ve,Dn,$e[Ai],Rt);if(ti===null){Dn===null&&(Dn=Lr);break}h&&Dn&&ti.alternate===null&&d(Ve,Dn),Ee=I(ti,Ee,Ai),rr===null?cn=ti:rr.sibling=ti,rr=ti,Dn=Lr}if(Ai===$e.length)return b(Ve,Dn),pi&&ee(Ve,Ai),cn;if(Dn===null){for(;Ai<$e.length;Ai++)Dn=qt(Ve,$e[Ai],Rt),Dn!==null&&(Ee=I(Dn,Ee,Ai),rr===null?cn=Dn:rr.sibling=Dn,rr=Dn);return pi&&ee(Ve,Ai),cn}for(Dn=M(Dn);Ai<$e.length;Ai++)Lr=Fn(Dn,Ve,Ai,$e[Ai],Rt),Lr!==null&&(h&&Lr.alternate!==null&&Dn.delete(Lr.key===null?Ai:Lr.key),Ee=I(Lr,Ee,Ai),rr===null?cn=Lr:rr.sibling=Lr,rr=Lr);return h&&Dn.forEach(function(Xo){return d(Ve,Xo)}),pi&&ee(Ve,Ai),cn}function xu(Ve,Ee,$e,Rt){if($e==null)throw Error(r(151));for(var cn=null,rr=null,Dn=Ee,Ai=Ee=0,Lr=null,ti=$e.next();Dn!==null&&!ti.done;Ai++,ti=$e.next()){Dn.index>Ai?(Lr=Dn,Dn=null):Lr=Dn.sibling;var Xo=Zt(Ve,Dn,ti.value,Rt);if(Xo===null){Dn===null&&(Dn=Lr);break}h&&Dn&&Xo.alternate===null&&d(Ve,Dn),Ee=I(Xo,Ee,Ai),rr===null?cn=Xo:rr.sibling=Xo,rr=Xo,Dn=Lr}if(ti.done)return b(Ve,Dn),pi&&ee(Ve,Ai),cn;if(Dn===null){for(;!ti.done;Ai++,ti=$e.next())ti=qt(Ve,ti.value,Rt),ti!==null&&(Ee=I(ti,Ee,Ai),rr===null?cn=ti:rr.sibling=ti,rr=ti);return pi&&ee(Ve,Ai),cn}for(Dn=M(Dn);!ti.done;Ai++,ti=$e.next())ti=Fn(Dn,Ve,Ai,ti.value,Rt),ti!==null&&(h&&ti.alternate!==null&&Dn.delete(ti.key===null?Ai:ti.key),Ee=I(ti,Ee,Ai),rr===null?cn=ti:rr.sibling=ti,rr=ti);return h&&Dn.forEach(function(Wp){return d(Ve,Wp)}),pi&&ee(Ve,Ai),cn}function Su(Ve,Ee,$e,Rt){if(typeof $e=="object"&&$e!==null&&$e.type===au&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case Rh:e:{for(var cn=$e.key;Ee!==null;){if(Ee.key===cn){if(cn=$e.type,cn===au){if(Ee.tag===7){b(Ve,Ee.sibling),Rt=N(Ee,$e.props.children),Rt.return=Ve,Ve=Rt;break e}}else if(Ee.elementType===cn||typeof cn=="object"&&cn!==null&&cn.$$typeof===Vs&&mi(cn)===Ee.type){b(Ve,Ee.sibling),Rt=N(Ee,$e.props),_n(Rt,$e),Rt.return=Ve,Ve=Rt;break e}b(Ve,Ee);break}else d(Ve,Ee);Ee=Ee.sibling}$e.type===au?(Rt=vr($e.props.children,Ve.mode,Rt,$e.key),Rt.return=Ve,Ve=Rt):(Rt=Lo($e.type,$e.key,$e.props,null,Ve.mode,Rt),_n(Rt,$e),Rt.return=Ve,Ve=Rt)}return ne(Ve);case Hs:e:{for(cn=$e.key;Ee!==null;){if(Ee.key===cn)if(Ee.tag===4&&Ee.stateNode.containerInfo===$e.containerInfo&&Ee.stateNode.implementation===$e.implementation){b(Ve,Ee.sibling),Rt=N(Ee,$e.children||[]),Rt.return=Ve,Ve=Rt;break e}else{b(Ve,Ee);break}else d(Ve,Ee);Ee=Ee.sibling}Rt=Pg($e,Ve.mode,Rt),Rt.return=Ve,Ve=Rt}return ne(Ve);case Vs:return cn=$e._init,$e=cn($e._payload),Su(Ve,Ee,$e,Rt)}if(rf($e))return Rs(Ve,Ee,$e,Rt);if(a($e)){if(cn=a($e),typeof cn!="function")throw Error(r(150));return $e=cn.call($e),xu(Ve,Ee,$e,Rt)}if(typeof $e.then=="function")return Su(Ve,Ee,Qt($e),Rt);if($e.$$typeof===uo)return Su(Ve,Ee,dh(Ve,$e),Rt);bn(Ve,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Ee!==null&&Ee.tag===6?(b(Ve,Ee.sibling),Rt=N(Ee,$e),Rt.return=Ve,Ve=Rt):(b(Ve,Ee),Rt=mp($e,Ve.mode,Rt),Rt.return=Ve,Ve=Rt),ne(Ve)):b(Ve,Ee)}return function(Ve,Ee,$e,Rt){try{mu=0;var cn=Su(Ve,Ee,$e,Rt);return pu=null,cn}catch(Dn){if(Dn===gf)throw Dn;var rr=t(29,Dn,null,Ve.mode);return rr.lanes=Rt,rr.return=Ve,rr}finally{}}}function ei(h,d){h=Ra,O(yf,h),O(Ji,d),Ra=h|d.baseLanes}function Ti(){O(yf,Ra),O(Ji,Ji.current)}function hr(){Ra=yf.current,S(Ji),S(yf)}function Fr(h){var d=h.alternate;O($r,$r.current&1),O(xs,h),Wi===null&&(d===null||Ji.current!==null||d.memoizedState!==null)&&(Wi=h)}function Ki(h){if(h.tag===22){if(O($r,$r.current),O(xs,h),Wi===null){var d=h.alternate;d!==null&&d.memoizedState!==null&&(Wi=h)}}else ar()}function ar(){O($r,$r.current),O(xs,xs.current)}function sr(h){S(xs),Wi===h&&(Wi=null),S($r)}function wr(h){for(var d=h;d!==null;){if(d.tag===13){var b=d.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||wp(b)||Ap(b)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function ui(){throw Error(r(321))}function yr(h,d){if(d===null)return!1;for(var b=0;b<d.length&&b<h.length;b++)if(!rs(h[b],d[b]))return!1;return!0}function Ta(h,d,b,M,N,I){return Al=I,Xn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,On.H=h===null||h.memoizedState===null?vu:Ga,yu=!1,I=b(M,N),yu=!1,rc&&(I=oa(d,b,M,N)),Ua(h),I}function Ua(h){On.H=_r;var d=xn!==null&&xn.next!==null;if(Al=0,_i=xn=Xn=null,qs=!1,ac=0,ia=null,d)throw Error(r(300));h===null||Xi||(h=h.dependencies,h!==null&&hh(h)&&(Xi=!0))}function oa(h,d,b,M){Xn=h;var N=0;do{if(rc&&(ia=null),ac=0,rc=!1,25<=N)throw Error(r(301));if(N+=1,_i=xn=null,h.updateQueue!=null){var I=h.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}On.H=Ss,I=d(b,M)}while(rc);return I}function Gi(){var h=On.H,d=h.useState()[0];return d=typeof d.then=="function"?ke(d):d,h=h.useState()[0],(xn!==null?xn.memoizedState:null)!==h&&(Xn.flags|=1024),d}function Pa(){var h=Bp!==0;return Bp=0,h}function Ar(h,d,b){d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~b}function la(h){if(qs){for(h=h.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}qs=!1}Al=0,_i=xn=Xn=null,rc=!1,ac=Bp=0,ia=null}function Q(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _i===null?Xn.memoizedState=_i=h:_i=_i.next=h,_i}function Te(){if(xn===null){var h=Xn.alternate;h=h!==null?h.memoizedState:null}else h=xn.next;var d=_i===null?Xn.memoizedState:_i.next;if(d!==null)_i=d,xn=h;else{if(h===null)throw Xn.alternate===null?Error(r(467)):Error(r(310));xn=h,h={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},_i===null?Xn.memoizedState=_i=h:_i=_i.next=h}return _i}function ke(h){var d=ac;return ac+=1,ia===null&&(ia=[]),h=Be(ia,h,d),d=Xn,(_i===null?d.memoizedState:_i.next)===null&&(d=d.alternate,On.H=d===null||d.memoizedState===null?vu:Ga),h}function je(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return ke(h);if(h.$$typeof===uo)return fa(h)}throw Error(r(438,String(h)))}function Ne(h){var d=null,b=Xn.updateQueue;if(b!==null&&(d=b.memoCache),d==null){var M=Xn.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(d={data:M.data.map(function(N){return N.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),b===null&&(b=zp(),Xn.updateQueue=b),b.memoCache=d,b=d.data[d.index],b===void 0)for(b=d.data[d.index]=Array(h),M=0;M<h;M++)b[M]=ay;return d.index++,b}function gt(h,d){return typeof d=="function"?d(h):d}function Lt(h){var d=Te();return Ht(d,xn,h)}function Ht(h,d,b){var M=h.queue;if(M===null)throw Error(r(311));M.lastRenderedReducer=b;var N=h.baseQueue,I=M.pending;if(I!==null){if(N!==null){var ne=N.next;N.next=I.next,I.next=ne}d.baseQueue=N=I,M.pending=null}if(I=h.baseState,N===null)h.memoizedState=I;else{d=N.next;var ge=ne=null,Ie=null,st=d,Dt=!1;do{var qt=st.lane&-536870913;if(qt!==st.lane?(ai&qt)===qt:(Al&qt)===qt){var Zt=st.revertLane;if(Zt===0)Ie!==null&&(Ie=Ie.next={lane:0,revertLane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),qt===bs&&(Dt=!0);else if((Al&Zt)===Zt){st=st.next,Zt===bs&&(Dt=!0);continue}else qt={lane:0,revertLane:st.revertLane,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Ie===null?(ge=Ie=qt,ne=I):Ie=Ie.next=qt,Xn.lanes|=Zt,ws|=Zt;qt=st.action,yu&&b(I,qt),I=st.hasEagerState?st.eagerState:b(I,qt)}else Zt={lane:qt,revertLane:st.revertLane,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Ie===null?(ge=Ie=Zt,ne=I):Ie=Ie.next=Zt,Xn.lanes|=qt,ws|=qt;st=st.next}while(st!==null&&st!==d);if(Ie===null?ne=I:Ie.next=ge,!rs(I,h.memoizedState)&&(Xi=!0,Dt&&(b=nc,b!==null)))throw b;h.memoizedState=I,h.baseState=ne,h.baseQueue=Ie,M.lastRenderedState=I}return N===null&&(M.lanes=0),[h.memoizedState,M.dispatch]}function Bt(h){var d=Te(),b=d.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=h;var M=b.dispatch,N=b.pending,I=d.memoizedState;if(N!==null){b.pending=null;var ne=N=N.next;do I=h(I,ne.action),ne=ne.next;while(ne!==N);rs(I,d.memoizedState)||(Xi=!0),d.memoizedState=I,d.baseQueue===null&&(d.baseState=I),b.lastRenderedState=I}return[I,M]}function hn(h,d,b){var M=Xn,N=Te(),I=pi;if(I){if(b===void 0)throw Error(r(407));b=b()}else b=d();var ne=!rs((xn||N).memoizedState,b);if(ne&&(N.memoizedState=b,Xi=!0),N=N.queue,D(Cn.bind(null,M,N,h),[h]),N.getSnapshot!==d||ne||_i!==null&&_i.memoizedState.tag&1){if(M.flags|=2048,Rr(9,en.bind(null,M,N,b,d),{destroy:void 0},null),Ui===null)throw Error(r(349));I||(Al&60)!==0||ln(M,d,b)}return b}function ln(h,d,b){h.flags|=16384,h={getSnapshot:d,value:b},d=Xn.updateQueue,d===null?(d=zp(),Xn.updateQueue=d,d.stores=[h]):(b=d.stores,b===null?d.stores=[h]:b.push(h))}function en(h,d,b,M){d.value=b,d.getSnapshot=M,Ln(d)&&Ci(h)}function Cn(h,d,b){return b(function(){Ln(d)&&Ci(h)})}function Ln(h){var d=h.getSnapshot;h=h.value;try{var b=d();return!rs(h,b)}catch{return!0}}function Ci(h){var d=pt(h,2);d!==null&&ea(d,h,2)}function Tn(h){var d=Q();if(typeof h=="function"){var b=h;if(h=b(),yu){le(!0);try{b()}finally{le(!1)}}}return d.memoizedState=d.baseState=h,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gt,lastRenderedState:h},d}function ri(h,d,b,M){return h.baseState=b,Ht(h,xn,typeof M=="function"?M:gt)}function an(h,d,b,M,N){if(ae(h))throw Error(r(485));if(h=d.action,h!==null){var I={payload:N,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){I.listeners.push(ne)}};On.T!==null?b(!0):I.isTransition=!1,M(I),b=d.pending,b===null?(I.next=d.pending=I,yi(d,I)):(I.next=b.next,d.pending=b.next=I)}}function yi(h,d){var b=d.action,M=d.payload,N=h.state;if(d.isTransition){var I=On.T,ne={};On.T=ne;try{var ge=b(N,M),Ie=On.S;Ie!==null&&Ie(ne,ge),Wn(h,d,ge)}catch(st){Ba(h,d,st)}finally{On.T=I}}else try{I=b(N,M),Wn(h,d,I)}catch(st){Ba(h,d,st)}}function Wn(h,d,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(M){ki(h,d,M)},function(M){return Ba(h,d,M)}):ki(h,d,b)}function ki(h,d,b){d.status="fulfilled",d.value=b,Ei(d),h.state=b,d=h.pending,d!==null&&(b=d.next,b===d?h.pending=null:(b=b.next,d.next=b,yi(h,b)))}function Ba(h,d,b){var M=h.pending;if(h.pending=null,M!==null){M=M.next;do d.status="rejected",d.reason=b,Ei(d),d=d.next;while(d!==M)}h.action=null}function Ei(h){h=h.listeners;for(var d=0;d<h.length;d++)(0,h[d])()}function Ka(h,d){return d}function Mi(h,d){if(pi){var b=Ui.formState;if(b!==null){e:{var M=Xn;if(pi){if(ya){var N=Jg(ya,na);if(N){ya=e0(N),M=Ay(N);break e}}bt(M)}M=!1}M&&(d=b[0])}}b=Q(),b.memoizedState=b.baseState=d,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:d},b.queue=M,b=W.bind(null,Xn,M),M.dispatch=b,M=Tn(!1);var I=se.bind(null,Xn,!1,M.queue);return M=Q(),N={state:d,dispatch:null,action:h,pending:null},M.queue=N,b=an.bind(null,Xn,N,I,b),N.dispatch=b,M.memoizedState=h,[d,b,!1]}function dr(h){var d=Te();return Zi(d,xn,h)}function Zi(h,d,b){d=Ht(h,d,Ka)[0],h=Lt(gt)[0],d=typeof d=="object"&&d!==null&&typeof d.then=="function"?ke(d):d;var M=Te(),N=M.queue,I=N.dispatch;return b!==M.memoizedState&&(Xn.flags|=2048,Rr(9,or.bind(null,N,b),{destroy:void 0},null)),[d,I,h]}function or(h,d){h.action=d}function lr(h){var d=Te(),b=xn;if(b!==null)return Zi(d,b,h);Te(),d=d.memoizedState,b=Te();var M=b.queue.dispatch;return b.memoizedState=h,[d,M,!1]}function Rr(h,d,b,M){return h={tag:h,create:d,inst:b,deps:M,next:null},d=Xn.updateQueue,d===null&&(d=zp(),Xn.updateQueue=d),b=d.lastEffect,b===null?d.lastEffect=h.next=h:(M=b.next,b.next=h,h.next=M,d.lastEffect=h),h}function Ea(){return Te().memoizedState}function ao(h,d,b,M){var N=Q();Xn.flags|=h,N.memoizedState=Rr(1|d,b,{destroy:void 0},M===void 0?null:M)}function Co(h,d,b,M){var N=Te();M=M===void 0?null:M;var I=N.memoizedState.inst;xn!==null&&M!==null&&yr(M,xn.memoizedState.deps)?N.memoizedState=Rr(d,b,I,M):(Xn.flags|=h,N.memoizedState=Rr(1|d,b,I,M))}function ol(h,d){ao(8390656,8,h,d)}function D(h,d){Co(2048,8,h,d)}function F(h,d){return Co(4,2,h,d)}function V(h,d){return Co(4,4,h,d)}function fe(h,d){if(typeof d=="function"){h=h();var b=d(h);return function(){typeof b=="function"?b():d(null)}}if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function De(h,d,b){b=b!=null?b.concat([h]):null,Co(4,4,fe.bind(null,d,h),b)}function Je(){}function Ue(h,d){var b=Te();d=d===void 0?null:d;var M=b.memoizedState;return d!==null&&yr(d,M[1])?M[0]:(b.memoizedState=[h,d],h)}function nt(h,d){var b=Te();d=d===void 0?null:d;var M=b.memoizedState;if(d!==null&&yr(d,M[1]))return M[0];if(M=h(),yu){le(!0);try{h()}finally{le(!1)}}return b.memoizedState=[M,d],M}function Mt(h,d,b){return b===void 0||(Al&1073741824)!==0?h.memoizedState=d:(h.memoizedState=b,h=Cg(),Xn.lanes|=h,ws|=h,b)}function Xt(h,d,b,M){return rs(b,d)?b:Ji.current!==null?(h=Mt(h,b,M),rs(h,d)||(Xi=!0),h):(Al&42)===0?(Xi=!0,h.memoizedState=b):(h=Cg(),Xn.lanes|=h,ws|=h,d)}function dn(h,d,b,M,N){var I=Sl();wa(I!==0&&8>I?I:8);var ne=On.T,ge={};On.T=ge,se(h,!1,d,b);try{var Ie=N(),st=On.S;if(st!==null&&st(ge,Ie),Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var Dt=wt(Ie,M);Y(h,d,Dt,Nr(h))}else Y(h,d,M,Nr(h))}catch(qt){Y(h,d,{then:function(){},status:"rejected",reason:qt},Nr())}finally{wa(I),On.T=ne}}function In(h){var d=h.memoizedState;if(d!==null)return d;d={memoizedState:ou,baseState:ou,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gt,lastRenderedState:ou},next:null};var b={};return d.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gt,lastRenderedState:b},next:null},h.memoizedState=d,h=h.alternate,h!==null&&(h.memoizedState=d),d}function Un(){return fa(co)}function vn(){return Te().memoizedState}function Yt(){return Te().memoizedState}function R(h){for(var d=h.return;d!==null;){switch(d.tag){case 24:case 3:var b=Nr();h=rt(b);var M=Tt(d,h,b);M!==null&&(ea(M,d,b),Ct(M,d,b)),d={cache:Yl()},h.payload=d;return}d=d.return}}function H(h,d,b){var M=Nr();b={lane:M,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},ae(h)?oe(d,b):(b=ut(h,d,b,M),b!==null&&(ea(b,h,M),ve(b,d,M)))}function W(h,d,b){var M=Nr();Y(h,d,b,M)}function Y(h,d,b,M){var N={lane:M,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(ae(h))oe(d,N);else{var I=h.alternate;if(h.lanes===0&&(I===null||I.lanes===0)&&(I=d.lastRenderedReducer,I!==null))try{var ne=d.lastRenderedState,ge=I(ne,b);if(N.hasEagerState=!0,N.eagerState=ge,rs(ge,ne))return _t(h,d,N,0),Ui===null&&ie(),!1}catch{}finally{}if(b=ut(h,d,N,M),b!==null)return ea(b,h,M),ve(b,d,M),!0}return!1}function se(h,d,b,M){if(M={lane:2,revertLane:Qe(),action:M,hasEagerState:!1,eagerState:null,next:null},ae(h)){if(d)throw Error(r(479))}else d=ut(h,b,M,2),d!==null&&ea(d,h,2)}function ae(h){var d=h.alternate;return h===Xn||d!==null&&d===Xn}function oe(h,d){rc=qs=!0;var b=h.pending;b===null?d.next=d:(d.next=b.next,b.next=d),h.pending=d}function ve(h,d,b){if((b&4194176)!==0){var M=d.lanes;M&=h.pendingLanes,b|=M,d.lanes=b,we(h,b)}}function ze(h,d,b,M){d=h.memoizedState,b=b(M,d),b=b==null?d:yp({},d,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}function tt(h,d,b,M,N,I,ne){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(M,I,ne):d.prototype&&d.prototype.isPureReactComponent?!at(b,M)||!at(N,I):!0}function dt(h,d,b,M){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(b,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(b,M),d.state!==h&&ko.enqueueReplaceState(d,d.state,null)}function Et(h,d){var b=d;if("ref"in d){b={};for(var M in d)M!=="ref"&&(b[M]=d[M])}if(h=h.defaultProps){b===d&&(b=yp({},b));for(var N in h)b[N]===void 0&&(b[N]=h[N])}return b}function Nt(h,d){try{var b=h.onUncaughtError;b(d.value,{componentStack:d.stack})}catch(M){setTimeout(function(){throw M})}}function kt(h,d,b){try{var M=h.onCaughtError;M(b.value,{componentStack:b.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function mn(h,d,b){return b=rt(b),b.tag=3,b.payload={element:null},b.callback=function(){Nt(h,d)},b}function Bn(h){return h=rt(h),h.tag=3,h}function Oi(h,d,b,M){var N=b.type.getDerivedStateFromError;if(typeof N=="function"){var I=M.value;h.payload=function(){return N(I)},h.callback=function(){kt(d,b,M)}}var ne=b.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(h.callback=function(){kt(d,b,M),typeof N!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var ge=M.stack;this.componentDidCatch(M.value,{componentStack:ge!==null?ge:""})})}function Hi(h,d,b,M,N){if(b.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(d=b.alternate,d!==null&&fh(d,b,N,!0),b=xs.current,b!==null){switch(b.tag){case 13:return Wi===null?gl():b.alternate===null&&qi===0&&(qi=3),b.flags&=-257,b.flags|=65536,b.lanes=N,M===Gh?b.flags|=16384:(d=b.updateQueue,d===null?b.updateQueue=new Set([M]):d.add(M),ju(h,M,N)),!1;case 22:return b.flags|=65536,M===Gh?b.flags|=16384:(d=b.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([M])},b.updateQueue=d):(b=d.retryQueue,b===null?d.retryQueue=new Set([M]):b.add(M)),ju(h,M,N)),!1}throw Error(r(435,b.tag))}return ju(h,M,N),gl(),!1}if(pi)return d=xs.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=N,M!==kh&&(h=Error(r(422),{cause:M}),Jt(Le(h,b)))):(M!==kh&&(d=Error(r(423),{cause:M}),Jt(Le(d,b))),h=h.current.alternate,h.flags|=65536,N&=-N,h.lanes|=N,M=Le(M,b),N=mn(h.stateNode,M,N),pe(h,N),qi!==4&&(qi=2)),!1;var I=Error(r(520),{cause:M});if(I=Le(I,b),oc===null?oc=[I]:oc.push(I),qi!==4&&(qi=2),d===null)return!0;M=Le(M,b),b=d;do{switch(b.tag){case 3:return b.flags|=65536,h=N&-N,b.lanes|=h,h=mn(b.stateNode,M,h),pe(b,h),!1;case 1:if(d=b.type,I=b.stateNode,(b.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(_u===null||!_u.has(I))))return b.flags|=65536,N&=-N,b.lanes|=N,N=Bn(N),Oi(N,h,b,M),pe(b,N),!1}b=b.return}while(b!==null);return!1}function vi(h,d,b,M){d.child=h===null?Fo(d,null,b,M):gu(d,h.child,b,M)}function ua(h,d,b,M,N){b=b.render;var I=d.ref;if("ref"in M){var ne={};for(var ge in M)ge!=="ref"&&(ne[ge]=M[ge])}else ne=M;return $l(d),M=Ta(h,d,b,ne,I,N),ge=Pa(),h!==null&&!Xi?(Ar(h,d,N),ul(h,d,N)):(pi&&ge&&Ge(d),d.flags|=1,vi(h,d,M,N),d.child)}function ca(h,d,b,M,N){if(h===null){var I=b.type;return typeof I=="function"&&!Eh(I)&&I.defaultProps===void 0&&b.compare===null?(d.tag=15,d.type=I,di(h,d,I,M,N)):(h=Lo(b.type,null,M,d,d.mode,N),h.ref=d.ref,h.return=d,d.child=h)}if(I=h.child,!yg(h,N)){var ne=I.memoizedProps;if(b=b.compare,b=b!==null?b:at,b(ne,M)&&h.ref===d.ref)return ul(h,d,N)}return d.flags|=1,h=ks(I,M),h.ref=d.ref,h.return=d,d.child=h}function di(h,d,b,M,N){if(h!==null){var I=h.memoizedProps;if(at(I,M)&&h.ref===d.ref)if(Xi=!1,d.pendingProps=M=I,yg(h,N))(h.flags&131072)!==0&&(Xi=!0);else return d.lanes=h.lanes,ul(h,d,N)}return ku(h,d,b,M,N)}function kr(h,d,b){var M=d.pendingProps,N=M.children,I=(d.stateNode._pendingVisibility&2)!==0,ne=h!==null?h.memoizedState:null;if(ds(h,d),M.mode==="hidden"||I){if((d.flags&128)!==0){if(M=ne!==null?ne.baseLanes|b:b,h!==null){for(N=d.child=h.child,I=0;N!==null;)I=I|N.lanes|N.childLanes,N=N.sibling;d.childLanes=I&~M}else d.childLanes=0,d.child=null;return so(h,d,M,b)}if((b&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},h!==null&&np(d,ne!==null?ne.cachePool:null),ne!==null?ei(d,ne):Ti(),Ki(d);else return d.lanes=d.childLanes=536870912,so(h,d,ne!==null?ne.baseLanes|b:b,b)}else ne!==null?(np(d,ne.cachePool),ei(d,ne),ar(),d.memoizedState=null):(h!==null&&np(d,null),Ti(),ar());return vi(h,d,N,b),d.child}function so(h,d,b,M){var N=_g();return N=N===null?null:{parent:ka?er._currentValue:er._currentValue2,pool:N},d.memoizedState={baseLanes:b,cachePool:N},h!==null&&np(d,null),Ti(),Ki(d),h!==null&&fh(h,d,M,!0),null}function ds(h,d){var b=d.ref;if(b===null)h!==null&&h.ref!==null&&(d.flags|=2097664);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(h===null||h.ref!==b)&&(d.flags|=2097664)}}function ku(h,d,b,M,N){return $l(d),b=Ta(h,d,b,M,void 0,N),M=Pa(),h!==null&&!Xi?(Ar(h,d,N),ul(h,d,N)):(pi&&M&&Ge(d),d.flags|=1,vi(h,d,b,N),d.child)}function ll(h,d,b,M,N,I){return $l(d),d.updateQueue=null,b=oa(d,M,b,N),Ua(h),M=Pa(),h!==null&&!Xi?(Ar(h,d,I),ul(h,d,I)):(pi&&M&&Ge(d),d.flags|=1,vi(h,d,b,I),d.child)}function Hu(h,d,b,M,N){if($l(d),d.stateNode===null){var I=fu,ne=b.contextType;typeof ne=="object"&&ne!==null&&(I=fa(ne)),I=new b(M,I),d.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=ko,d.stateNode=I,I._reactInternals=d,I=d.stateNode,I.props=M,I.state=d.memoizedState,I.refs={},Gt(d),ne=b.contextType,I.context=typeof ne=="object"&&ne!==null?fa(ne):fu,I.state=d.memoizedState,ne=b.getDerivedStateFromProps,typeof ne=="function"&&(ze(d,b,ne,M),I.state=d.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(ne=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),ne!==I.state&&ko.enqueueReplaceState(I,I.state,null),yt(d,M,I,N),Re(),I.state=d.memoizedState),typeof I.componentDidMount=="function"&&(d.flags|=4194308),M=!0}else if(h===null){I=d.stateNode;var ge=d.memoizedProps,Ie=Et(b,ge);I.props=Ie;var st=I.context,Dt=b.contextType;ne=fu,typeof Dt=="object"&&Dt!==null&&(ne=fa(Dt));var qt=b.getDerivedStateFromProps;Dt=typeof qt=="function"||typeof I.getSnapshotBeforeUpdate=="function",ge=d.pendingProps!==ge,Dt||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(ge||st!==ne)&&dt(d,I,M,ne),wl=!1;var Zt=d.memoizedState;I.state=Zt,yt(d,M,I,N),Re(),st=d.memoizedState,ge||Zt!==st||wl?(typeof qt=="function"&&(ze(d,b,qt,M),st=d.memoizedState),(Ie=wl||tt(d,b,Ie,M,Zt,st,ne))?(Dt||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(d.flags|=4194308)):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=st),I.props=M,I.state=st,I.context=ne,M=Ie):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{I=d.stateNode,$t(h,d),ne=d.memoizedProps,Dt=Et(b,ne),I.props=Dt,qt=d.pendingProps,Zt=I.context,st=b.contextType,Ie=fu,typeof st=="object"&&st!==null&&(Ie=fa(st)),ge=b.getDerivedStateFromProps,(st=typeof ge=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(ne!==qt||Zt!==Ie)&&dt(d,I,M,Ie),wl=!1,Zt=d.memoizedState,I.state=Zt,yt(d,M,I,N),Re();var Fn=d.memoizedState;ne!==qt||Zt!==Fn||wl||h!==null&&h.dependencies!==null&&hh(h.dependencies)?(typeof ge=="function"&&(ze(d,b,ge,M),Fn=d.memoizedState),(Dt=wl||tt(d,b,Dt,M,Zt,Fn,Ie)||h!==null&&h.dependencies!==null&&hh(h.dependencies))?(st||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(M,Fn,Ie),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(M,Fn,Ie)),typeof I.componentDidUpdate=="function"&&(d.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof I.componentDidUpdate!="function"||ne===h.memoizedProps&&Zt===h.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||ne===h.memoizedProps&&Zt===h.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=Fn),I.props=M,I.state=Fn,I.context=Ie,M=Dt):(typeof I.componentDidUpdate!="function"||ne===h.memoizedProps&&Zt===h.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||ne===h.memoizedProps&&Zt===h.memoizedState||(d.flags|=1024),M=!1)}return I=M,ds(h,d),M=(d.flags&128)!==0,I||M?(I=d.stateNode,b=M&&typeof b.getDerivedStateFromError!="function"?null:I.render(),d.flags|=1,h!==null&&M?(d.child=gu(d,h.child,null,N),d.child=gu(d,null,b,N)):vi(h,d,b,N),d.memoizedState=I.state,h=d.child):h=ul(h,d,N),h}function jc(h,d,b,M){return un(),d.flags|=256,vi(h,d,b,M),d.child}function dg(h){return{baseLanes:h,cachePool:bg()}}function uh(h,d,b){return h=h!==null?h.childLanes&~b:0,d&&(h|=As),h}function q1(h,d,b){var M=d.pendingProps,N=!1,I=(d.flags&128)!==0,ne;if((ne=I)||(ne=h!==null&&h.memoizedState===null?!1:($r.current&2)!==0),ne&&(N=!0,d.flags&=-129),ne=(d.flags&32)!==0,d.flags&=-33,h===null){if(pi){if(N?Fr(d):ar(),pi){var ge=ya,Ie;(Ie=ge)&&(ge=Cy(ge,na),ge!==null?(d.memoizedState={dehydrated:ge,treeContext:hu!==null?{id:ho,overflow:po}:null,retryLane:536870912},Ie=t(18,null,null,0),Ie.stateNode=ge,Ie.return=d,d.child=Ie,ga=d,ya=null,Ie=!0):Ie=!1),Ie||bt(d)}if(ge=d.memoizedState,ge!==null&&(ge=ge.dehydrated,ge!==null))return Ap(ge)?d.lanes=16:d.lanes=536870912,null;sr(d)}return ge=M.children,M=M.fallback,N?(ar(),N=d.mode,ge=mg({mode:"hidden",children:ge},N),M=vr(M,N,b,null),ge.return=d,M.return=d,ge.sibling=M,d.child=ge,N=d.child,N.memoizedState=dg(b),N.childLanes=uh(h,ne,b),d.memoizedState=Hp,M):(Fr(d),pg(d,ge))}if(Ie=h.memoizedState,Ie!==null&&(ge=Ie.dehydrated,ge!==null)){if(I)d.flags&256?(Fr(d),d.flags&=-257,d=tp(h,d,b)):d.memoizedState!==null?(ar(),d.child=h.child,d.flags|=128,d=null):(ar(),N=M.fallback,ge=d.mode,M=mg({mode:"visible",children:M.children},ge),N=vr(N,ge,b,null),N.flags|=2,M.return=d,N.return=d,M.sibling=N,d.child=M,gu(d,h.child,null,b),M=d.child,M.memoizedState=dg(b),M.childLanes=uh(h,ne,b),d.memoizedState=Hp,d=N);else if(Fr(d),Ap(ge))ne=My(ge).digest,M=Error(r(419)),M.stack="",M.digest=ne,Jt({value:M,source:null,stack:null}),d=tp(h,d,b);else if(Xi||fh(h,d,b,!1),ne=(b&h.childLanes)!==0,Xi||ne){if(ne=Ui,ne!==null){if(M=b&-b,(M&42)!==0)M=1;else switch(M){case 2:M=1;break;case 8:M=4;break;case 32:M=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:M=64;break;case 268435456:M=134217728;break;default:M=0}if(M=(M&(ne.suspendedLanes|b))!==0?0:M,M!==0&&M!==Ie.retryLane)throw Ie.retryLane=M,pt(h,M),ea(ne,h,M),kp}wp(ge)||gl(),d=tp(h,d,b)}else wp(ge)?(d.flags|=128,d.child=h.child,d=yl.bind(null,h),wy(ge,d),d=null):(h=Ie.treeContext,ma&&(ya=Ny(ge),ga=d,pi=!0,Ws=null,na=!1,h!==null&&(vs[_s++]=ho,vs[_s++]=po,vs[_s++]=hu,ho=h.id,po=h.overflow,hu=d)),d=pg(d,M.children),d.flags|=4096);return d}return N?(ar(),N=M.fallback,ge=d.mode,Ie=h.child,I=Ie.sibling,M=ks(Ie,{mode:"hidden",children:M.children}),M.subtreeFlags=Ie.subtreeFlags&31457280,I!==null?N=ks(I,N):(N=vr(N,ge,b,null),N.flags|=2),N.return=d,M.return=d,M.sibling=N,d.child=M,M=N,N=d.child,ge=h.child.memoizedState,ge===null?ge=dg(b):(Ie=ge.cachePool,Ie!==null?(I=ka?er._currentValue:er._currentValue2,Ie=Ie.parent!==I?{parent:I,pool:I}:Ie):Ie=bg(),ge={baseLanes:ge.baseLanes|b,cachePool:Ie}),N.memoizedState=ge,N.childLanes=uh(h,ne,b),d.memoizedState=Hp,M):(Fr(d),b=h.child,h=b.sibling,b=ks(b,{mode:"visible",children:M.children}),b.return=d,b.sibling=null,h!==null&&(ne=d.deletions,ne===null?(d.deletions=[h],d.flags|=16):ne.push(h)),d.child=b,d.memoizedState=null,b)}function pg(h,d){return d=mg({mode:"visible",children:d},h.mode),d.return=h,h.child=d}function mg(h,d){return wh(h,d,0,null)}function tp(h,d,b){return gu(d,h.child,null,b),h=pg(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function $1(h,d,b){h.lanes|=d;var M=h.alternate;M!==null&&(M.lanes|=d),ch(h.return,d,b)}function gg(h,d,b,M,N){var I=h.memoizedState;I===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:b,tailMode:N}:(I.isBackwards=d,I.rendering=null,I.renderingStartTime=0,I.last=M,I.tail=b,I.tailMode=N)}function Y1(h,d,b){var M=d.pendingProps,N=M.revealOrder,I=M.tail;if(vi(h,d,M.children,b),M=$r.current,(M&2)!==0)M=M&1|2,d.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&$1(h,b,d);else if(h.tag===19)$1(h,b,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}M&=1}switch(O($r,M),N){case"forwards":for(b=d.child,N=null;b!==null;)h=b.alternate,h!==null&&wr(h)===null&&(N=b),b=b.sibling;b=N,b===null?(N=d.child,d.child=null):(N=b.sibling,b.sibling=null),gg(d,!1,N,b,I);break;case"backwards":for(b=null,N=d.child,d.child=null;N!==null;){if(h=N.alternate,h!==null&&wr(h)===null){d.child=N;break}h=N.sibling,N.sibling=b,b=N,N=h}gg(d,!0,b,null,I);break;case"together":gg(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ul(h,d,b){if(h!==null&&(d.dependencies=h.dependencies),ws|=d.lanes,(b&d.childLanes)===0)if(h!==null){if(fh(h,d,b,!1),(b&d.childLanes)===0)return null}else return null;if(h!==null&&d.child!==h.child)throw Error(r(153));if(d.child!==null){for(h=d.child,b=ks(h,h.pendingProps),d.child=b,b.return=d;h.sibling!==null;)h=h.sibling,b=b.sibling=ks(h,h.pendingProps),b.return=d;b.sibling=null}return d.child}function yg(h,d){return(h.lanes&d)!==0?!0:(h=h.dependencies,!!(h!==null&&hh(h)))}function W3(h,d,b){switch(d.tag){case 3:xe(d,d.stateNode.containerInfo),ql(d,er,h.memoizedState.cache),un();break;case 27:case 5:et(d);break;case 4:xe(d,d.stateNode.containerInfo);break;case 10:ql(d,d.type,d.memoizedProps.value);break;case 13:var M=d.memoizedState;if(M!==null)return M.dehydrated!==null?(Fr(d),d.flags|=128,null):(b&d.child.childLanes)!==0?q1(h,d,b):(Fr(d),h=ul(h,d,b),h!==null?h.sibling:null);Fr(d);break;case 19:var N=(h.flags&128)!==0;if(M=(b&d.childLanes)!==0,M||(fh(h,d,b,!1),M=(b&d.childLanes)!==0),N){if(M)return Y1(h,d,b);d.flags|=128}if(N=d.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),O($r,$r.current),M)break;return null;case 22:case 23:return d.lanes=0,kr(h,d,b);case 24:ql(d,er,h.memoizedState.cache)}return ul(h,d,b)}function K1(h,d,b){if(h!==null)if(h.memoizedProps!==d.pendingProps)Xi=!0;else{if(!yg(h,b)&&(d.flags&128)===0)return Xi=!1,W3(h,d,b);Xi=(h.flags&131072)!==0}else Xi=!1,pi&&(d.flags&1048576)!==0&&be(d,hf,d.index);switch(d.lanes=0,d.tag){case 16:e:{h=d.pendingProps;var M=d.elementType,N=M._init;if(M=N(M._payload),d.type=M,typeof M=="function")Eh(M)?(h=Et(M,h),d.tag=1,d=Hu(null,d,M,h,b)):(d.tag=0,d=ku(null,d,M,h,b));else{if(M!=null){if(N=M.$$typeof,N===Oh){d.tag=11,d=ua(null,d,M,h,b);break e}else if(N===bp){d.tag=14,d=ca(null,d,M,h,b);break e}}throw d=s(M)||M,Error(r(306,d,""))}}return d;case 0:return ku(h,d,d.type,d.pendingProps,b);case 1:return M=d.type,N=Et(M,d.pendingProps),Hu(h,d,M,N,b);case 3:e:{if(xe(d,d.stateNode.containerInfo),h===null)throw Error(r(387));var I=d.pendingProps;N=d.memoizedState,M=N.element,$t(h,d),yt(d,I,null,b);var ne=d.memoizedState;if(I=ne.cache,ql(d,er,I),I!==N.cache&&Vu(d,[er],b,!0),Re(),I=ne.element,ma&&N.isDehydrated)if(N={element:I,isDehydrated:!1,cache:ne.cache},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){d=jc(h,d,I,b);break e}else if(I!==M){M=Le(Error(r(424)),d),Jt(M),d=jc(h,d,I,b);break e}else for(ma&&(ya=Ry(d.stateNode.containerInfo),ga=d,pi=!0,Ws=null,na=!0),b=Fo(d,null,I,b),d.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(un(),I===M){d=ul(h,d,b);break e}vi(h,d,I,b)}d=d.child}return d;case 26:if(ys)return ds(h,d),h===null?(b=i0(d.type,null,d.pendingProps,null))?d.memoizedState=b:pi||(d.stateNode=Dp(d.type,d.pendingProps,Bo.current,d)):d.memoizedState=i0(d.type,h.memoizedProps,d.pendingProps,h.memoizedState),null;case 27:if(ji)return et(d),h===null&&ji&&pi&&(M=d.stateNode=fo(d.type,d.pendingProps,Bo.current,qr.current,!1),ga=d,na=!0,ya=Rp(M)),M=d.pendingProps.children,h!==null||pi?vi(h,d,M,b):d.child=gu(d,null,M,b),ds(h,d),d.child;case 5:return h===null&&pi&&(Cp(d.type,d.pendingProps,qr.current),(N=M=ya)&&(M=Q3(M,d.type,d.pendingProps,na),M!==null?(d.stateNode=M,ga=d,ya=Rp(M),na=!1,N=!0):N=!1),N||bt(d)),et(d),N=d.type,I=d.pendingProps,ne=h!==null?h.memoizedProps:null,M=I.children,Hn(N,I)?M=null:ne!==null&&Hn(N,ne)&&(d.flags|=32),d.memoizedState!==null&&(N=Ta(h,d,Gi,null,null,b),ka?co._currentValue=N:co._currentValue2=N),ds(h,d),vi(h,d,M,b),d.child;case 6:return h===null&&pi&&(Uy(d.pendingProps,qr.current),(h=b=ya)&&(b=t0(b,d.pendingProps,na),b!==null?(d.stateNode=b,ga=d,ya=null,h=!0):h=!1),h||bt(d)),null;case 13:return q1(h,d,b);case 4:return xe(d,d.stateNode.containerInfo),M=d.pendingProps,h===null?d.child=gu(d,null,M,b):vi(h,d,M,b),d.child;case 11:return ua(h,d,d.type,d.pendingProps,b);case 7:return vi(h,d,d.pendingProps,b),d.child;case 8:return vi(h,d,d.pendingProps.children,b),d.child;case 12:return vi(h,d,d.pendingProps.children,b),d.child;case 10:return M=d.pendingProps,ql(d,d.type,M.value),vi(h,d,M.children,b),d.child;case 9:return N=d.type._context,M=d.pendingProps.children,$l(d),N=fa(N),M=M(N),d.flags|=1,vi(h,d,M,b),d.child;case 14:return ca(h,d,d.type,d.pendingProps,b);case 15:return di(h,d,d.type,d.pendingProps,b);case 19:return Y1(h,d,b);case 22:return kr(h,d,b);case 24:return $l(d),M=fa(er),h===null?(N=_g(),N===null&&(N=Ui,I=Yl(),N.pooledCache=I,I.refCount++,I!==null&&(N.pooledCacheLanes|=b),N=I),d.memoizedState={parent:M,cache:N},Gt(d),ql(d,er,N)):((h.lanes&b)!==0&&($t(h,d),yt(d,null,null,b),Re()),N=h.memoizedState,I=d.memoizedState,N.parent!==M?(N={parent:M,cache:M},d.memoizedState=N,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=N),ql(d,er,M)):(M=I.cache,ql(d,er,M),M!==N.cache&&Vu(d,[er],b,!0))),vi(h,d,d.pendingProps.children,b),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function ql(h,d,b){ka?(O(Rl,d._currentValue),d._currentValue=b):(O(Rl,d._currentValue2),d._currentValue2=b)}function cl(h){var d=Rl.current;ka?h._currentValue=d:h._currentValue2=d,S(Rl)}function ch(h,d,b){for(;h!==null;){var M=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),h===b)break;h=h.return}}function Vu(h,d,b,M){var N=h.child;for(N!==null&&(N.return=h);N!==null;){var I=N.dependencies;if(I!==null){var ne=N.child;I=I.firstContext;e:for(;I!==null;){var ge=I;I=N;for(var Ie=0;Ie<d.length;Ie++)if(ge.context===d[Ie]){I.lanes|=b,ge=I.alternate,ge!==null&&(ge.lanes|=b),ch(I.return,b,h),M||(ne=null);break e}I=ge.next}}else if(N.tag===18){if(ne=N.return,ne===null)throw Error(r(341));ne.lanes|=b,I=ne.alternate,I!==null&&(I.lanes|=b),ch(ne,b,h),ne=null}else ne=N.child;if(ne!==null)ne.return=N;else for(ne=N;ne!==null;){if(ne===h){ne=null;break}if(N=ne.sibling,N!==null){N.return=ne.return,ne=N;break}ne=ne.return}N=ne}}function fh(h,d,b,M){h=null;for(var N=d,I=!1;N!==null;){if(!I){if((N.flags&524288)!==0)I=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var ne=N.alternate;if(ne===null)throw Error(r(387));if(ne=ne.memoizedProps,ne!==null){var ge=N.type;rs(N.pendingProps.value,ne.value)||(h!==null?h.push(ge):h=[ge])}}else if(N===Qu.current){if(ne=N.alternate,ne===null)throw Error(r(387));ne.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(h!==null?h.push(co):h=[co])}N=N.return}h!==null&&Vu(d,h,b,M),d.flags|=262144}function hh(h){for(h=h.firstContext;h!==null;){var d=h.context;if(!rs(ka?d._currentValue:d._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function $l(h){yo=h,Ts=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function fa(h){return vg(yo,h)}function dh(h,d){return yo===null&&$l(h),vg(h,d)}function vg(h,d){var b=ka?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:b,next:null},Ts===null){if(h===null)throw Error(r(308));Ts=d,h.dependencies={lanes:0,firstContext:d},h.flags|=524288}else Ts=Ts.next=d;return b}function Yl(){return{controller:new vf,data:new Map,refCount:0}}function ph(h){h.refCount--,h.refCount===0&&Xy(qy,function(){h.controller.abort()})}function _g(){var h=Ho.current;return h!==null?h:Ui.pooledCache}function np(h,d){d===null?O(Ho,Ho.current):O(Ho,d.pool)}function bg(){var h=_g();return h===null?null:{parent:ka?er._currentValue:er._currentValue2,pool:h}}function Za(h){h.flags|=4}function Wc(h,d){if(h!==null&&h.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(h=d.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function Gu(h,d,b,M){if(Xr)for(b=d.child;b!==null;){if(b.tag===5||b.tag===6)Lh(h,b.stateNode);else if(!(b.tag===4||ji&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(Gs)for(var N=d.child;N!==null;){if(N.tag===5){var I=N.stateNode;b&&M&&(I=Zg(I,N.type,N.memoizedProps)),Lh(h,I)}else if(N.tag===6)I=N.stateNode,b&&M&&(I=Qg(I,N.memoizedProps)),Lh(h,I);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)I=N.child,I!==null&&(I.return=N),Gu(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===d)break;for(;N.sibling===null;){if(N.return===null||N.return===d)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function Z1(h,d,b,M){if(Gs)for(var N=d.child;N!==null;){if(N.tag===5){var I=N.stateNode;b&&M&&(I=Zg(I,N.type,N.memoizedProps)),Kg(h,I)}else if(N.tag===6)I=N.stateNode,b&&M&&(I=Qg(I,N.memoizedProps)),Kg(h,I);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)I=N.child,I!==null&&(I.return=N),Z1(h,N,!(N.memoizedProps!==null&&N.memoizedProps.mode==="manual"),!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===d)break;for(;N.sibling===null;){if(N.return===null||N.return===d)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function mh(h,d){if(Gs&&Wc(h,d)){h=d.stateNode;var b=h.containerInfo,M=Ih();Z1(M,d,!1,!1),h.pendingChildren=M,Za(d),Mp(b,M)}}function ip(h,d,b,M){if(Xr)h.memoizedProps!==M&&Za(d);else if(Gs){var N=h.stateNode,I=h.memoizedProps;if((h=Wc(h,d))||I!==M){var ne=qr.current;I=uf(N,b,I,M,!h,null),I===N?d.stateNode=N:(xl(I,b,M,ne)&&Za(d),d.stateNode=I,h?Gu(I,d,!1,!1):Za(d))}else d.stateNode=N}}function rp(h,d,b){if(Vg(d,b)){if(h.flags|=16777216,!Tp(d,b))if(tu())h.flags|=8192;else throw du=Gh,Vh}else h.flags&=-16777217}function ap(h,d){if(zy(d)){if(h.flags|=16777216,!qu(d))if(tu())h.flags|=8192;else throw du=Gh,Vh}else h.flags&=-16777217}function Xc(h,d){d!==null&&(h.flags|=4),h.flags&16384&&(d=h.tag!==22?k():536870912,h.lanes|=d,jo|=d)}function qc(h,d){if(!pi)switch(h.tailMode){case"hidden":d=h.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var M=null;b!==null;)b.alternate!==null&&(M=b),b=b.sibling;M===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:M.sibling=null}}function ur(h){var d=h.alternate!==null&&h.alternate.child===h.child,b=0,M=0;if(d)for(var N=h.child;N!==null;)b|=N.lanes|N.childLanes,M|=N.subtreeFlags&31457280,M|=N.flags&31457280,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)b|=N.lanes|N.childLanes,M|=N.subtreeFlags,M|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=M,h.childLanes=b,d}function Q1(h,d,b){var M=d.pendingProps;switch(Ye(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ur(d),null;case 1:return ur(d),null;case 3:return b=d.stateNode,M=null,h!==null&&(M=h.memoizedState.cache),d.memoizedState.cache!==M&&(d.flags|=2048),cl(er),Ke(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(tn(d)?Za(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ws!==null&&(Sh(Ws),Ws=null))),mh(h,d),ur(d),null;case 26:if(ys){b=d.type;var N=d.memoizedState;return h===null?(Za(d),N!==null?(ur(d),ap(d,N)):(ur(d),rp(d,b,M))):N?N!==h.memoizedState?(Za(d),ur(d),ap(d,N)):(ur(d),d.flags&=-16777217):(Xr?h.memoizedProps!==M&&Za(d):ip(h,d,b,M),ur(d),rp(d,b,M)),null}case 27:if(ji){if(xt(d),b=Bo.current,N=d.type,h!==null&&d.stateNode!=null)Xr?h.memoizedProps!==M&&Za(d):ip(h,d,N,M);else{if(!M){if(d.stateNode===null)throw Error(r(166));return ur(d),null}h=qr.current,tn(d)?Kt(d,h):(h=fo(N,M,b,h,!0),d.stateNode=h,Za(d))}return ur(d),null}case 5:if(xt(d),b=d.type,h!==null&&d.stateNode!=null)ip(h,d,b,M);else{if(!M){if(d.stateNode===null)throw Error(r(166));return ur(d),null}h=qr.current,tn(d)?Kt(d,h):(N=Hg(b,M,Bo.current,h,d),Gu(N,d,!1,!1),d.stateNode=N,xl(N,b,M,h)&&Za(d))}return ur(d),rp(d,d.type,d.pendingProps),null;case 6:if(h&&d.stateNode!=null)b=h.memoizedProps,Xr?b!==M&&Za(d):Gs&&(b!==M?(d.stateNode=zi(M,Bo.current,qr.current,d),Za(d)):d.stateNode=h.stateNode);else{if(typeof M!="string"&&d.stateNode===null)throw Error(r(166));if(h=Bo.current,b=qr.current,tn(d)){if(!ma)throw Error(r(176));if(h=d.stateNode,b=d.memoizedProps,M=null,N=ga,N!==null)switch(N.tag){case 27:case 5:M=N.memoizedProps}n0(h,b,d,M)||bt(d)}else d.stateNode=zi(M,h,b,d)}return ur(d),null;case 13:if(M=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(N=tn(d),M!==null&&M.dehydrated!==null){if(h===null){if(!N)throw Error(r(318));if(!ma)throw Error(r(344));if(N=d.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));Dy(N,d)}else un(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;ur(d),N=!1}else Ws!==null&&(Sh(Ws),Ws=null),N=!0;if(!N)return d.flags&256?(sr(d),d):(sr(d),null)}if(sr(d),(d.flags&128)!==0)return d.lanes=b,d;if(b=M!==null,h=h!==null&&h.memoizedState!==null,b){M=d.child,N=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(N=M.alternate.memoizedState.cachePool.pool);var I=null;M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(I=M.memoizedState.cachePool.pool),I!==N&&(M.flags|=2048)}return b!==h&&b&&(d.child.flags|=8192),Xc(d,d.updateQueue),ur(d),null;case 4:return Ke(),mh(h,d),h===null&&Cr(d.stateNode.containerInfo),ur(d),null;case 10:return cl(d.type),ur(d),null;case 19:if(S($r),N=d.memoizedState,N===null)return ur(d),null;if(M=(d.flags&128)!==0,I=N.rendering,I===null)if(M)qc(N,!1);else{if(qi!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(I=wr(h),I!==null){for(d.flags|=128,qc(N,!1),h=I.updateQueue,d.updateQueue=h,Xc(d,h),d.subtreeFlags=0,h=b,b=d.child;b!==null;)Mh(b,h),b=b.sibling;return O($r,$r.current&1|2),d.child}h=h.sibling}N.tail!==null&&js()>xf&&(d.flags|=128,M=!0,qc(N,!1),d.lanes=4194304)}else{if(!M)if(h=wr(I),h!==null){if(d.flags|=128,M=!0,h=h.updateQueue,d.updateQueue=h,Xc(d,h),qc(N,!0),N.tail===null&&N.tailMode==="hidden"&&!I.alternate&&!pi)return ur(d),null}else 2*js()-N.renderingStartTime>xf&&b!==536870912&&(d.flags|=128,M=!0,qc(N,!1),d.lanes=4194304);N.isBackwards?(I.sibling=d.child,d.child=I):(h=N.last,h!==null?h.sibling=I:d.child=I,N.last=I)}return N.tail!==null?(d=N.tail,N.rendering=d,N.tail=d.sibling,N.renderingStartTime=js(),d.sibling=null,h=$r.current,O($r,M?h&1|2:h&1),d):(ur(d),null);case 22:case 23:return sr(d),hr(),M=d.memoizedState!==null,h!==null?h.memoizedState!==null!==M&&(d.flags|=8192):M&&(d.flags|=8192),M?(b&536870912)!==0&&(d.flags&128)===0&&(ur(d),d.subtreeFlags&6&&(d.flags|=8192)):ur(d),b=d.updateQueue,b!==null&&Xc(d,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),M=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(M=d.memoizedState.cachePool.pool),M!==b&&(d.flags|=2048),h!==null&&S(Ho),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),cl(er),ur(d),null;case 25:return null}throw Error(r(156,d.tag))}function X3(h,d){switch(Ye(d),d.tag){case 1:return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return cl(er),Ke(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 26:case 27:case 5:return xt(d),null;case 13:if(sr(d),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(r(340));un()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return S($r),null;case 4:return Ke(),null;case 10:return cl(d.type),null;case 22:case 23:return sr(d),hr(),h!==null&&S(Ho),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 24:return cl(er),null;case 25:return null;default:return null}}function J1(h,d){switch(Ye(d),d.tag){case 3:cl(er),Ke();break;case 26:case 27:case 5:xt(d);break;case 4:Ke();break;case 13:sr(d);break;case 19:S($r);break;case 10:cl(d.type);break;case 22:case 23:sr(d),hr(),h!==null&&S(Ho);break;case 24:cl(er)}}function gh(h,d){try{var b=d.updateQueue,M=b!==null?b.lastEffect:null;if(M!==null){var N=M.next;b=N;do{if((b.tag&h)===h){M=void 0;var I=b.create,ne=b.inst;M=I(),ne.destroy=M}b=b.next}while(b!==N)}}catch(ge){Li(d,d.return,ge)}}function Kl(h,d,b){try{var M=d.updateQueue,N=M!==null?M.lastEffect:null;if(N!==null){var I=N.next;M=I;do{if((M.tag&h)===h){var ne=M.inst,ge=ne.destroy;if(ge!==void 0){ne.destroy=void 0,N=d;var Ie=b;try{ge()}catch(st){Li(N,Ie,st)}}}M=M.next}while(M!==I)}}catch(st){Li(d,d.return,st)}}function ey(h){var d=h.updateQueue;if(d!==null){var b=h.stateNode;try{vt(d,b)}catch(M){Li(h,h.return,M)}}}function Qa(h,d,b){b.props=Et(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(M){Li(h,d,M)}}function oo(h,d){try{var b=h.ref;if(b!==null){var M=h.stateNode;switch(h.tag){case 26:case 27:case 5:var N=sf(M);break;default:N=M}typeof b=="function"?h.refCleanup=b(N):b.current=N}}catch(I){Li(h,d,I)}}function Ja(h,d){var b=h.ref,M=h.refCleanup;if(b!==null)if(typeof M=="function")try{M()}catch(N){Li(h,d,N)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(N){Li(h,d,N)}else b.current=null}function xg(h){var d=h.type,b=h.memoizedProps,M=h.stateNode;try{K3(M,d,b,h)}catch(N){Li(h,h.return,N)}}function Sg(h,d,b){try{yy(h.stateNode,h.type,b,d,h)}catch(M){Li(h,h.return,M)}}function Tg(h){return h.tag===5||h.tag===3||(ys?h.tag===26:!1)||(ji?h.tag===27:!1)||h.tag===4}function yh(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Tg(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!ji||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Eg(h,d,b){var M=h.tag;if(M===5||M===6)h=h.stateNode,d?_y(b,h,d):qg(b,h);else if(!(M===4||ji&&M===27)&&(h=h.child,h!==null))for(Eg(h,d,b),h=h.sibling;h!==null;)Eg(h,d,b),h=h.sibling}function fl(h,d,b){var M=h.tag;if(M===5||M===6)h=h.stateNode,d?vy(b,h,d):my(b,h);else if(!(M===4||ji&&M===27)&&(h=h.child,h!==null))for(fl(h,d,b),h=h.sibling;h!==null;)fl(h,d,b),h=h.sibling}function sp(h,d,b){h=h.containerInfo;try{cf(h,b)}catch(M){Li(d,d.return,M)}}function vh(h,d){for(xp(h.containerInfo),zn=d;zn!==null;)if(h=zn,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,zn=d;else for(;zn!==null;){h=zn;var b=h.alternate;switch(d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&b!==null){d=void 0;var M=h,N=b.memoizedProps;b=b.memoizedState;var I=M.stateNode;try{var ne=Et(M.type,N,M.elementType===M.type);d=I.getSnapshotBeforeUpdate(ne,b),I.__reactInternalSnapshotBeforeUpdate=d}catch(ge){Li(M,M.return,ge)}}break;case 3:(d&1024)!==0&&Xr&&Ey(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,zn=d;break}zn=h.return}return ne=Qn,Qn=!1,ne}function op(h,d,b){var M=b.flags;switch(b.tag){case 0:case 11:case 15:dl(h,b),M&4&&gh(5,b);break;case 1:if(dl(h,b),M&4)if(h=b.stateNode,d===null)try{h.componentDidMount()}catch(ge){Li(b,b.return,ge)}else{var N=Et(b.type,d.memoizedProps);d=d.memoizedState;try{h.componentDidUpdate(N,d,h.__reactInternalSnapshotBeforeUpdate)}catch(ge){Li(b,b.return,ge)}}M&64&&ey(b),M&512&&oo(b,b.return);break;case 3:if(dl(h,b),M&64&&(M=b.updateQueue,M!==null)){if(h=null,b.child!==null)switch(b.child.tag){case 27:case 5:h=sf(b.child.stateNode);break;case 1:h=b.child.stateNode}try{vt(M,h)}catch(ge){Li(b,b.return,ge)}}break;case 26:if(ys){dl(h,b),M&512&&oo(b,b.return);break}case 27:case 5:dl(h,b),d===null&&M&4&&xg(b),M&512&&oo(b,b.return);break;case 12:dl(h,b);break;case 13:dl(h,b),M&4&&lp(h,b);break;case 22:if(N=b.memoizedState!==null||Vo,!N){d=d!==null&&d.memoizedState!==null||br;var I=Vo,ne=br;Vo=N,(br=d)&&!ne?pl(h,b,(b.subtreeFlags&8772)!==0):dl(h,b),Vo=I,br=ne}M&512&&(b.memoizedProps.mode==="manual"?oo(b,b.return):Ja(b,b.return));break;default:dl(h,b)}}function Mg(h){var d=h.alternate;d!==null&&(h.alternate=null,Mg(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&Y3(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function ha(h,d,b){for(b=b.child;b!==null;)Zl(h,d,b),b=b.sibling}function Zl(h,d,b){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(Dr,b)}catch{}switch(b.tag){case 26:if(ys){br||Ja(b,d),ha(h,d,b),b.memoizedState?Xu(b.memoizedState):b.stateNode&&ff(b.stateNode);break}case 27:if(ji){br||Ja(b,d);var M=gn,N=jn;gn=b.stateNode,ha(h,d,b),cu(b.stateNode),gn=M,jn=N;break}case 5:br||Ja(b,d);case 6:if(Xr){if(M=gn,N=jn,gn=null,ha(h,d,b),gn=M,jn=N,gn!==null)if(jn)try{by(gn,b.stateNode)}catch(I){Li(b,d,I)}else try{$g(gn,b.stateNode)}catch(I){Li(b,d,I)}}else ha(h,d,b);break;case 18:Xr&&gn!==null&&(jn?Uh(gn,b.stateNode):Iy(gn,b.stateNode));break;case 4:Xr?(M=gn,N=jn,gn=b.stateNode.containerInfo,jn=!0,ha(h,d,b),gn=M,jn=N):(Gs&&sp(b.stateNode,b,Ih()),ha(h,d,b));break;case 0:case 11:case 14:case 15:br||Kl(2,b,d),br||Kl(4,b,d),ha(h,d,b);break;case 1:br||(Ja(b,d),M=b.stateNode,typeof M.componentWillUnmount=="function"&&Qa(b,d,M)),ha(h,d,b);break;case 21:ha(h,d,b);break;case 22:br||Ja(b,d),br=(M=br)||b.memoizedState!==null,ha(h,d,b),br=M;break;default:ha(h,d,b)}}function lp(h,d){if(ma&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{eb(h)}catch(b){Li(d,d.return,b)}}function ty(h){switch(h.tag){case 13:case 19:var d=h.stateNode;return d===null&&(d=h.stateNode=new Ii),d;case 22:return h=h.stateNode,d=h._retryCache,d===null&&(d=h._retryCache=new Ii),d;default:throw Error(r(435,h.tag))}}function hl(h,d){var b=ty(h);d.forEach(function(M){var N=ru.bind(null,h,M);b.has(M)||(b.add(M),M.then(N,N))})}function za(h,d){var b=d.deletions;if(b!==null)for(var M=0;M<b.length;M++){var N=b[M],I=h,ne=d;if(Xr){var ge=ne;e:for(;ge!==null;){switch(ge.tag){case 27:case 5:gn=ge.stateNode,jn=!1;break e;case 3:gn=ge.stateNode.containerInfo,jn=!0;break e;case 4:gn=ge.stateNode.containerInfo,jn=!0;break e}ge=ge.return}if(gn===null)throw Error(r(160));Zl(I,ne,N),gn=null,jn=!1}else Zl(I,ne,N);I=N.alternate,I!==null&&(I.return=null),N.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)wg(d,h),d=d.sibling}function wg(h,d){var b=h.alternate,M=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:za(d,h),es(h),M&4&&(Kl(3,h,h.return),gh(3,h),Kl(5,h,h.return));break;case 1:za(d,h),es(h),M&512&&(br||b===null||Ja(b,b.return)),M&64&&Vo&&(h=h.updateQueue,h!==null&&(M=h.callbacks,M!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?M:b.concat(M))));break;case 26:if(ys){var N=mr;za(d,h),es(h),M&512&&(br||b===null||Ja(b,b.return)),M&4&&(M=b!==null?b.memoizedState:null,d=h.memoizedState,b===null?d===null?h.stateNode===null?h.stateNode=Bh(N,h.type,h.memoizedProps,h):zh(N,h.type,h.stateNode):h.stateNode=Py(N,d,h.memoizedProps):M!==d?(M===null?b.stateNode!==null&&ff(b.stateNode):Xu(M),d===null?zh(N,h.type,h.stateNode):Py(N,d,h.memoizedProps)):d===null&&h.stateNode!==null&&Sg(h,h.memoizedProps,b.memoizedProps));break}case 27:if(ji&&M&4&&h.alternate===null){N=h.stateNode;var I=h.memoizedProps;try{uu(N),ky(h.type,I,N,h)}catch(Dt){Li(h,h.return,Dt)}}case 5:if(za(d,h),es(h),M&512&&(br||b===null||Ja(b,b.return)),Xr){if(h.flags&32){d=h.stateNode;try{Yg(d)}catch(Dt){Li(h,h.return,Dt)}}M&4&&h.stateNode!=null&&(d=h.memoizedProps,Sg(h,d,b!==null?b.memoizedProps:d)),M&1024&&(o0=!0)}break;case 6:if(za(d,h),es(h),M&4&&Xr){if(h.stateNode===null)throw Error(r(162));M=h.memoizedProps,b=b!==null?b.memoizedProps:M,d=h.stateNode;try{gy(d,b,M)}catch(Dt){Li(h,h.return,Dt)}}break;case 3:if(ys?(By(),N=mr,mr=Op(d.containerInfo),za(d,h),mr=N):za(d,h),es(h),M&4){if(Xr&&ma&&b!==null&&b.memoizedState.isDehydrated)try{J3(d.containerInfo)}catch(Dt){Li(h,h.return,Dt)}if(Gs){M=d.containerInfo,b=d.pendingChildren;try{cf(M,b)}catch(Dt){Li(h,h.return,Dt)}}}o0&&(o0=!1,ny(h));break;case 4:ys?(b=mr,mr=Op(h.stateNode.containerInfo),za(d,h),es(h),mr=b):(za(d,h),es(h)),M&4&&Gs&&sp(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:za(d,h),es(h);break;case 13:za(d,h),es(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(ja=js()),M&4&&(M=h.updateQueue,M!==null&&(h.updateQueue=null,hl(h,M)));break;case 22:M&512&&(br||b===null||Ja(b,b.return)),N=h.memoizedState!==null;var ne=b!==null&&b.memoizedState!==null,ge=Vo,Ie=br;if(Vo=ge||N,br=Ie||ne,za(d,h),br=Ie,Vo=ge,es(h),d=h.stateNode,d._current=h,d._visibility&=-3,d._visibility|=d._pendingVisibility&2,M&8192&&(d._visibility=N?d._visibility&-2:d._visibility|1,N&&(d=Vo||br,b===null||ne||d||$c(h)),Xr&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){e:if(b=null,Xr)for(d=h;;){if(d.tag===5||ys&&d.tag===26||ji&&d.tag===27){if(b===null){ne=b=d;try{I=ne.stateNode,N?xy(I):Ty(ne.stateNode,ne.memoizedProps)}catch(Dt){Li(ne,ne.return,Dt)}}}else if(d.tag===6){if(b===null){ne=d;try{var st=ne.stateNode;N?Sy(st):Z3(st,ne.memoizedProps)}catch(Dt){Li(ne,ne.return,Dt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===h)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;b===d&&(b=null),d=d.return}b===d&&(b=null),d.sibling.return=d.return,d=d.sibling}}M&4&&(M=h.updateQueue,M!==null&&(b=M.retryQueue,b!==null&&(M.retryQueue=null,hl(h,b))));break;case 19:za(d,h),es(h),M&4&&(M=h.updateQueue,M!==null&&(h.updateQueue=null,hl(h,M)));break;case 21:break;default:za(d,h),es(h)}}function es(h){var d=h.flags;if(d&2){try{if(Xr&&(!ji||h.tag!==27)){e:{for(var b=h.return;b!==null;){if(Tg(b)){var M=b;break e}b=b.return}throw Error(r(160))}switch(M.tag){case 27:if(ji){var N=M.stateNode,I=yh(h);fl(h,I,N);break}case 5:var ne=M.stateNode;M.flags&32&&(Yg(ne),M.flags&=-33);var ge=yh(h);fl(h,ge,ne);break;case 3:case 4:var Ie=M.stateNode.containerInfo,st=yh(h);Eg(h,st,Ie);break;default:throw Error(r(161))}}}catch(Dt){Li(h,h.return,Dt)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function ny(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var d=h;ny(d),d.tag===5&&d.flags&1024&&Ep(d.stateNode),h=h.sibling}}function dl(h,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)op(h,d.alternate,d),d=d.sibling}function $c(h){for(h=h.child;h!==null;){var d=h;switch(d.tag){case 0:case 11:case 14:case 15:Kl(4,d,d.return),$c(d);break;case 1:Ja(d,d.return);var b=d.stateNode;typeof b.componentWillUnmount=="function"&&Qa(d,d.return,b),$c(d);break;case 26:case 27:case 5:Ja(d,d.return),$c(d);break;case 22:Ja(d,d.return),d.memoizedState===null&&$c(d);break;default:$c(d)}h=h.sibling}}function pl(h,d,b){for(b=b&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var M=d.alternate,N=h,I=d,ne=I.flags;switch(I.tag){case 0:case 11:case 15:pl(N,I,b),gh(4,I);break;case 1:if(pl(N,I,b),M=I,N=M.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(st){Li(M,M.return,st)}if(M=I,N=M.updateQueue,N!==null){var ge=M.stateNode;try{var Ie=N.shared.hiddenCallbacks;if(Ie!==null)for(N.shared.hiddenCallbacks=null,N=0;N<Ie.length;N++)he(Ie[N],ge)}catch(st){Li(M,M.return,st)}}b&&ne&64&&ey(I),oo(I,I.return);break;case 26:case 27:case 5:pl(N,I,b),b&&M===null&&ne&4&&xg(I),oo(I,I.return);break;case 12:pl(N,I,b);break;case 13:pl(N,I,b),b&&ne&4&&lp(N,I);break;case 22:I.memoizedState===null&&pl(N,I,b),oo(I,I.return);break;default:pl(N,I,b)}d=d.sibling}}function up(h,d){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(h=d.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&ph(b))}function _h(h,d){h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&ph(h))}function Jr(h,d,b,M){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Ag(h,d,b,M),d=d.sibling}function Ag(h,d,b,M){var N=d.flags;switch(d.tag){case 0:case 11:case 15:Jr(h,d,b,M),N&2048&&gh(9,d);break;case 3:Jr(h,d,b,M),N&2048&&(h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&ph(h)));break;case 12:if(N&2048){Jr(h,d,b,M),h=d.stateNode;try{var I=d.memoizedProps,ne=I.id,ge=I.onPostCommit;typeof ge=="function"&&ge(ne,d.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Ie){Li(d,d.return,Ie)}}else Jr(h,d,b,M);break;case 23:break;case 22:I=d.stateNode,d.memoizedState!==null?I._visibility&4?Jr(h,d,b,M):Ma(h,d):I._visibility&4?Jr(h,d,b,M):(I._visibility|=4,da(h,d,b,M,(d.subtreeFlags&10256)!==0)),N&2048&&up(d.alternate,d);break;case 24:Jr(h,d,b,M),N&2048&&_h(d.alternate,d);break;default:Jr(h,d,b,M)}}function da(h,d,b,M,N){for(N=N&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var I=h,ne=d,ge=b,Ie=M,st=ne.flags;switch(ne.tag){case 0:case 11:case 15:da(I,ne,ge,Ie,N),gh(8,ne);break;case 23:break;case 22:var Dt=ne.stateNode;ne.memoizedState!==null?Dt._visibility&4?da(I,ne,ge,Ie,N):Ma(I,ne):(Dt._visibility|=4,da(I,ne,ge,Ie,N)),N&&st&2048&&up(ne.alternate,ne);break;case 24:da(I,ne,ge,Ie,N),N&&st&2048&&_h(ne.alternate,ne);break;default:da(I,ne,ge,Ie,N)}d=d.sibling}}function Ma(h,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var b=h,M=d,N=M.flags;switch(M.tag){case 22:Ma(b,M),N&2048&&up(M.alternate,M);break;case 24:Ma(b,M),N&2048&&_h(M.alternate,M);break;default:Ma(b,M)}d=d.sibling}}function zs(h){if(h.subtreeFlags&Es)for(h=h.child;h!==null;)cp(h),h=h.sibling}function cp(h){switch(h.tag){case 26:zs(h),h.flags&Es&&(h.memoizedState!==null?Fy(mr,h.memoizedState,h.memoizedProps):Ha(h.type,h.memoizedProps));break;case 5:zs(h),h.flags&Es&&Ha(h.type,h.memoizedProps);break;case 3:case 4:if(ys){var d=mr;mr=Op(h.stateNode.containerInfo),zs(h),mr=d}else zs(h);break;case 22:h.memoizedState===null&&(d=h.alternate,d!==null&&d.memoizedState!==null?(d=Es,Es=16777216,zs(h),Es=d):zs(h));break;default:zs(h)}}function bh(h){var d=h.alternate;if(d!==null&&(h=d.child,h!==null)){d.child=null;do d=h.sibling,h.sibling=null,h=d;while(h!==null)}}function Ql(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var M=d[b];zn=M,Rg(M,h)}bh(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)fp(h),h=h.sibling}function fp(h){switch(h.tag){case 0:case 11:case 15:Ql(h),h.flags&2048&&Kl(9,h,h.return);break;case 3:Ql(h);break;case 12:Ql(h);break;case 22:var d=h.stateNode;h.memoizedState!==null&&d._visibility&4&&(h.return===null||h.return.tag!==13)?(d._visibility&=-5,ml(h)):Ql(h);break;default:Ql(h)}}function ml(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var M=d[b];zn=M,Rg(M,h)}bh(h)}for(h=h.child;h!==null;){switch(d=h,d.tag){case 0:case 11:case 15:Kl(8,d,d.return),ml(d);break;case 22:b=d.stateNode,b._visibility&4&&(b._visibility&=-5,ml(d));break;default:ml(d)}h=h.sibling}}function Rg(h,d){for(;zn!==null;){var b=zn;switch(b.tag){case 0:case 11:case 15:Kl(8,b,d);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var M=b.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:ph(b.memoizedState.cache)}if(M=b.child,M!==null)M.return=b,zn=M;else e:for(b=h;zn!==null;){M=zn;var N=M.sibling,I=M.return;if(Mg(M),M===b){zn=null;break e}if(N!==null){N.return=I,zn=N;break e}zn=I}}}function Yc(h){var d=ly(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(r(364));return d}if(h=Wg(h),h===null)throw Error(r(362));return h.stateNode.current}function Jl(h,d){var b=h.tag;switch(d.$$typeof){case bf:if(h.type===d.value)return!0;break;case $s:e:{for(d=d.value,h=[h,0],b=0;b<h.length;){var M=h[b++],N=M.tag,I=h[b++],ne=d[I];if(N!==5&&N!==26&&N!==27||!lf(M)){for(;ne!=null&&Jl(M,ne);)I++,ne=d[I];if(I===d.length){d=!0;break e}else for(M=M.child;M!==null;)h.push(M,I),M=M.sibling}}d=!1}return d;case ir:if((b===5||b===26||b===27)&&hy(h.stateNode,d.value))return!0;break;case Go:if((b===5||b===6||b===26||b===27)&&(h=fy(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case vo:if((b===5||b===26||b===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Ng(h){switch(h.$$typeof){case bf:return"<"+(s(h.value)||"Unknown")+">";case $s:return":has("+(Ng(h)||"")+")";case ir:return'[role="'+h.value+'"]';case Go:return'"'+h.value+'"';case vo:return'[data-testname="'+h.value+'"]';default:throw Error(r(365))}}function ts(h,d){var b=[];h=[h,0];for(var M=0;M<h.length;){var N=h[M++],I=N.tag,ne=h[M++],ge=d[ne];if(I!==5&&I!==26&&I!==27||!lf(N)){for(;ge!=null&&Jl(N,ge);)ne++,ge=d[ne];if(ne===d.length)b.push(N);else for(N=N.child;N!==null;)h.push(N,ne),N=N.sibling}}return b}function xh(h,d){if(!lu)throw Error(r(363));h=Yc(h),h=ts(h,d),d=[],h=Array.from(h);for(var b=0;b<h.length;){var M=h[b++],N=M.tag;if(N===5||N===26||N===27)lf(M)||d.push(M.stateNode);else for(M=M.child;M!==null;)h.push(M),M=M.sibling}return d}function Nr(){if((bi&2)!==0&&ai!==0)return ai&-ai;if(On.T!==null){var h=bs;return h!==0?h:Qe()}return uy()}function Cg(){As===0&&(As=(ai&536870912)===0||pi?X():536870912);var h=xs.current;return h!==null&&(h.flags|=32),As}function ea(h,d,b){(h===Ui&&Vi===2||h.cancelPendingCommit!==null)&&(pa(h,0),ns(h,ai,As,!1)),K(h,b),((bi&2)===0||h!==Ui)&&(h===Ui&&((bi&2)===0&&(Nl|=b),qi===4&&ns(h,ai,As,!1)),ft(h))}function eu(h,d,b){if((bi&6)!==0)throw Error(r(327));var M=!b&&(d&60)===0&&(d&h.expiredLanes)===0||B(h,d),N=M?Dg(h,d):dp(h,d,!0),I=M;do{if(N===0){Ms&&!M&&ns(h,d,0,!1);break}else if(N===6)ns(h,d,0,!Ks);else{if(b=h.current.alternate,I&&!Kc(b)){N=dp(h,d,!1),I=!1;continue}if(N===2){if(I=d,h.errorRecoveryDisabledLanes&I)var ne=0;else ne=h.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){d=ne;e:{var ge=h;N=oc;var Ie=ma&&ge.current.memoizedState.isDehydrated;if(Ie&&(pa(ge,ne).flags|=256),ne=dp(ge,ne,!1),ne!==2){if(Yr&&!Ie){ge.errorRecoveryDisabledLanes|=I,Nl|=I,N=4;break e}I=xr,xr=N,I!==null&&Sh(I)}N=ne}if(I=!1,N!==2)continue}}if(N===1){pa(h,0),ns(h,d,0,!0);break}e:{switch(M=h,N){case 0:case 1:throw Error(r(345));case 4:if((d&4194176)===d){ns(M,d,As,!Ks);break e}break;case 2:xr=null;break;case 3:case 5:break;default:throw Error(r(329))}if(M.finishedWork=b,M.finishedLanes=d,(d&62914560)===d&&(I=ja+300-js(),10<I)){if(ns(M,d,As,!Ks),P(M,0)!==0)break e;M.timeoutHandle=Vr(hp.bind(null,M,b,xr,Wh,Vp,d,As,Nl,jo,Ks,2,-0,0),I);break e}hp(M,b,xr,Wh,Vp,d,As,Nl,jo,Ks,0,-0,0)}}break}while(!0);ft(h)}function Sh(h){xr===null?xr=h:xr.push.apply(xr,h)}function hp(h,d,b,M,N,I,ne,ge,Ie,st,Dt,qt,Zt){var Fn=d.subtreeFlags;if((Fn&8192||(Fn&16785408)===16785408)&&(Gg(),cp(d),d=Gr(),d!==null)){h.cancelPendingCommit=d(nu.bind(null,h,b,M,N,ne,ge,Ie,1,qt,Zt)),ns(h,I,ne,!st);return}nu(h,b,M,N,ne,ge,Ie,Dt,qt,Zt)}function Kc(h){for(var d=h;;){var b=d.tag;if((b===0||b===11||b===15)&&d.flags&16384&&(b=d.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var M=0;M<b.length;M++){var N=b[M],I=N.getSnapshot;N=N.value;try{if(!rs(I(),N))return!1}catch{return!1}}if(b=d.child,d.subtreeFlags&16384&&b!==null)b.return=d,d=b;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ns(h,d,b,M){d&=~jh,d&=~Nl,h.suspendedLanes|=d,h.pingedLanes&=~d,M&&(h.warmLanes|=d),M=h.expirationTimes;for(var N=d;0<N;){var I=31-Va(N),ne=1<<I;M[I]=-1,N&=~ne}b!==0&&ue(h,b,d)}function Th(){return(bi&6)===0?(St(0),!1):!0}function Zc(){if(En!==null){if(Vi===0)var h=En.return;else h=En,Ts=yo=null,la(h),pu=null,mu=0,h=En;for(;h!==null;)J1(h.alternate,h),h=h.return;En=null}}function pa(h,d){h.finishedWork=null,h.finishedLanes=0;var b=h.timeoutHandle;b!==su&&(h.timeoutHandle=su,Sp(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),Zc(),Ui=h,En=b=ks(h.current,null),ai=d,Vi=0,Aa=null,Ks=!1,Ms=B(h,d),Yr=!1,jo=As=jh=Nl=ws=qi=0,xr=oc=null,Vp=!1,(d&8)!==0&&(d|=d&32);var M=h.entangledLanes;if(M!==0)for(h=h.entanglements,M&=d;0<M;){var N=31-Va(M),I=1<<N;d|=h[N],M&=~I}return Ra=d,ie(),b}function ps(h,d){Xn=null,On.H=_r,d===gf?(d=Ft(),Vi=3):d===Vh?(d=Ft(),Vi=4):Vi=d===kp?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Aa=d,En===null&&(qi=1,Nt(h,Le(d,h.current)))}function tu(){var h=xs.current;return h===null?!0:(ai&4194176)===ai?Wi===null:(ai&62914560)===ai||(ai&536870912)!==0?h===Wi:!1}function Oo(){var h=On.H;return On.H=_r,h===null?_r:h}function Do(){var h=On.A;return On.A=_f,h}function gl(){qi=4,Ks||(ai&4194176)!==ai&&xs.current!==null||(Ms=!0),(ws&134217727)===0&&(Nl&134217727)===0||Ui===null||ns(Ui,ai,As,!1)}function dp(h,d,b){var M=bi;bi|=2;var N=Oo(),I=Do();(Ui!==h||ai!==d)&&(Wh=null,pa(h,d)),d=!1;var ne=qi;e:do try{if(Vi!==0&&En!==null){var ge=En,Ie=Aa;switch(Vi){case 8:Zc(),ne=6;break e;case 3:case 2:case 6:xs.current===null&&(d=!0);var st=Vi;if(Vi=0,Aa=null,Fs(h,ge,Ie,st),b&&Ms){ne=0;break e}break;default:st=Vi,Vi=0,Aa=null,Fs(h,ge,Ie,st)}}Og(),ne=qi;break}catch(Dt){ps(h,Dt)}while(!0);return d&&h.shellSuspendCounter++,Ts=yo=null,bi=M,On.H=N,On.A=I,En===null&&(Ui=null,ai=0,ie()),ne}function Og(){for(;En!==null;)pr(En)}function Dg(h,d){var b=bi;bi|=2;var M=Oo(),N=Do();Ui!==h||ai!==d?(Wh=null,xf=js()+500,pa(h,d)):Ms=B(h,d);e:do try{if(Vi!==0&&En!==null){d=En;var I=Aa;t:switch(Vi){case 1:Vi=0,Aa=null,Fs(h,d,I,1);break;case 2:if(At(I)){Vi=0,Aa=null,wi(d);break}d=function(){Vi===2&&Ui===h&&(Vi=7),ft(h)},I.then(d,d);break e;case 3:Vi=7;break e;case 4:Vi=5;break e;case 7:At(I)?(Vi=0,Aa=null,wi(d)):(Vi=0,Aa=null,Fs(h,d,I,7));break;case 5:var ne=null;switch(En.tag){case 26:ne=En.memoizedState;case 5:case 27:var ge=En,Ie=ge.type,st=ge.pendingProps;if(ne?qu(ne):Tp(Ie,st)){Vi=0,Aa=null;var Dt=ge.sibling;if(Dt!==null)En=Dt;else{var qt=ge.return;qt!==null?(En=qt,ms(qt)):En=null}break t}}Vi=0,Aa=null,Fs(h,d,I,5);break;case 6:Vi=0,Aa=null,Fs(h,d,I,6);break;case 8:Zc(),qi=6;break e;default:throw Error(r(462))}}Fa();break}catch(Zt){ps(h,Zt)}while(!0);return Ts=yo=null,On.H=M,On.A=N,bi=b,En!==null?0:(Ui=null,ai=0,ie(),qi)}function Fa(){for(;En!==null&&!Gy();)pr(En)}function pr(h){var d=K1(h.alternate,h,Ra);h.memoizedProps=h.pendingProps,d===null?ms(h):En=d}function wi(h){var d=h,b=d.alternate;switch(d.tag){case 15:case 0:d=ll(b,d,d.pendingProps,d.type,void 0,ai);break;case 11:d=ll(b,d,d.pendingProps,d.type.render,d.ref,ai);break;case 5:la(d);default:J1(b,d),d=En=Mh(d,Ra),d=K1(b,d,Ra)}h.memoizedProps=h.pendingProps,d===null?ms(h):En=d}function Fs(h,d,b,M){Ts=yo=null,la(d),pu=null,mu=0;var N=d.return;try{if(Hi(h,N,d,b,ai)){qi=1,Nt(h,Le(b,h.current)),En=null;return}}catch(I){if(N!==null)throw En=N,I;qi=1,Nt(h,Le(b,h.current)),En=null;return}d.flags&32768?(pi||M===1?h=!0:Ms||(ai&536870912)!==0?h=!1:(Ks=h=!0,(M===2||M===3||M===6)&&(M=xs.current,M!==null&&M.tag===13&&(M.flags|=16384))),pp(d,h)):ms(d)}function ms(h){var d=h;do{if((d.flags&32768)!==0){pp(d,Ks);return}h=d.return;var b=Q1(d.alternate,d,Ra);if(b!==null){En=b;return}if(d=d.sibling,d!==null){En=d;return}En=d=h}while(d!==null);qi===0&&(qi=5)}function pp(h,d){do{var b=X3(h.alternate,h);if(b!==null){b.flags&=32767,En=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!d&&(h=h.sibling,h!==null)){En=h;return}En=h=b}while(h!==null);qi=6,En=null}function nu(h,d,b,M,N,I,ne,ge,Ie,st){var Dt=On.T,qt=Sl();try{wa(2),On.T=null,iy(h,d,b,M,qt,N,I,ne,ge,Ie,st)}finally{On.T=Dt,wa(qt)}}function iy(h,d,b,M,N,I,ne,ge){do lo();while(Wo!==null);if((bi&6)!==0)throw Error(r(327));var Ie=h.finishedWork;if(M=h.finishedLanes,Ie===null)return null;if(h.finishedWork=null,h.finishedLanes=0,Ie===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var st=Ie.lanes|Ie.childLanes;if(st|=mo,ye(h,M,st,I,ne,ge),h===Ui&&(En=Ui=null,ai=0),(Ie.subtreeFlags&10256)===0&&(Ie.flags&10256)===0||_o||(_o=!0,bu=st,Gp=b,vl(Pp,function(){return lo(),null})),b=(Ie.flags&15990)!==0,(Ie.subtreeFlags&15990)!==0||b?(b=On.T,On.T=null,I=Sl(),wa(2),ne=bi,bi|=4,vh(h,Ie),wg(Ie,h),oy(h.containerInfo),h.current=Ie,op(h,Ie.alternate,Ie),Ip(),bi=ne,wa(I),On.T=b):h.current=Ie,_o?(_o=!1,Wo=h,lc=M):Lg(h,st),st=h.pendingLanes,st===0&&(_u=null),Z(Ie.stateNode),ft(h),d!==null)for(N=h.onRecoverableError,Ie=0;Ie<d.length;Ie++)st=d[Ie],N(st.value,{componentStack:st.stack});return(lc&3)!==0&&lo(),st=h.pendingLanes,(M&4194218)!==0&&(st&42)!==0?h===jp?Sf++:(Sf=0,jp=h):Sf=0,St(0),null}function Lg(h,d){(h.pooledCacheLanes&=d)===0&&(d=h.pooledCache,d!=null&&(h.pooledCache=null,ph(d)))}function lo(){if(Wo!==null){var h=Wo,d=bu;bu=0;var b=Ae(lc),M=32>b?32:b;b=On.T;var N=Sl();try{if(wa(M),On.T=null,Wo===null)var I=!1;else{M=Gp,Gp=null;var ne=Wo,ge=lc;if(Wo=null,lc=0,(bi&6)!==0)throw Error(r(331));var Ie=bi;if(bi|=4,fp(ne.current),Ag(ne,ne.current,ge,M),bi=Ie,St(0,!1),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(Dr,ne)}catch{}I=!0}return I}finally{wa(N),On.T=b,Lg(h,d)}}return!1}function Qc(h,d,b){d=Le(b,d),d=mn(h.stateNode,d,2),h=Tt(h,d,2),h!==null&&(K(h,2),ft(h))}function Li(h,d,b){if(h.tag===3)Qc(h,h,b);else for(;d!==null;){if(d.tag===3){Qc(d,h,b);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(_u===null||!_u.has(M))){h=Le(b,h),b=Bn(2),M=Tt(d,b,2),M!==null&&(Oi(b,M,d,h),K(M,2),ft(M));break}}d=d.return}}function ju(h,d,b){var M=h.pingCache;if(M===null){M=h.pingCache=new Ys;var N=new Set;M.set(d,N)}else N=M.get(d),N===void 0&&(N=new Set,M.set(d,N));N.has(b)||(Yr=!0,N.add(b),h=Ig.bind(null,h,d,b),d.then(h,h))}function Ig(h,d,b){var M=h.pingCache;M!==null&&M.delete(d),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,Ui===h&&(ai&b)===b&&(qi===4||qi===3&&(ai&62914560)===ai&&300>js()-ja?(bi&2)===0&&pa(h,0):jh|=b,jo===ai&&(jo=0)),ft(h)}function iu(h,d){d===0&&(d=k()),h=pt(h,d),h!==null&&(K(h,d),ft(h))}function yl(h){var d=h.memoizedState,b=0;d!==null&&(b=d.retryLane),iu(h,b)}function ru(h,d){var b=0;switch(h.tag){case 13:var M=h.stateNode,N=h.memoizedState;N!==null&&(b=N.retryLane);break;case 19:M=h.stateNode;break;case 22:M=h.stateNode._retryCache;break;default:throw Error(r(314))}M!==null&&M.delete(d),iu(h,b)}function vl(h,d){return Fh(h,d)}function Ug(h,d,b,M){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Eh(h){return h=h.prototype,!(!h||!h.isReactComponent)}function ks(h,d){var b=h.alternate;return b===null?(b=t(h.tag,d,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=d,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&31457280,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,d=h.dependencies,b.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Mh(h,d){h.flags&=31457282;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=d,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,d=b.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),h}function Lo(h,d,b,M,N,I){var ne=0;if(M=h,typeof h=="function")Eh(h)&&(ne=1);else if(typeof h=="string")ne=ys&&ji?Ph(h,b,qr.current)?26:Uo(h)?27:5:ys?Ph(h,b,qr.current)?26:5:ji&&Uo(h)?27:5;else e:switch(h){case au:return vr(b.children,N,I,d);case Nh:ne=8,N|=24;break;case vp:return h=t(12,b,d,N|2),h.elementType=vp,h.lanes=I,h;case _p:return h=t(13,b,d,N),h.elementType=_p,h.lanes=I,h;case nf:return h=t(19,b,d,N),h.elementType=nf,h.lanes=I,h;case zg:return wh(b,N,I,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case Ch:case uo:ne=10;break e;case Bg:ne=9;break e;case Oh:ne=11;break e;case bp:ne=14;break e;case Vs:ne=16,M=null;break e}ne=29,b=Error(r(130,h===null?"null":typeof h,"")),M=null}return d=t(ne,b,d,N),d.elementType=h,d.type=M,d.lanes=I,d}function vr(h,d,b,M){return h=t(7,h,M,d),h.lanes=b,h}function wh(h,d,b,M){h=t(22,h,M,d),h.elementType=zg,h.lanes=b;var N={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var I=N._current;if(I===null)throw Error(r(456));if((N._pendingVisibility&2)===0){var ne=pt(I,2);ne!==null&&(N._pendingVisibility|=2,ea(ne,I,2))}},attach:function(){var I=N._current;if(I===null)throw Error(r(456));if((N._pendingVisibility&2)!==0){var ne=pt(I,2);ne!==null&&(N._pendingVisibility&=-3,ea(ne,I,2))}}};return h.stateNode=N,h}function mp(h,d,b){return h=t(6,h,null,d),h.lanes=b,h}function Pg(h,d,b){return d=t(4,h.children!==null?h.children:[],h.key,d),d.lanes=b,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function q3(h,d,b,M,N,I,ne,ge){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=su,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=U(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.hiddenUpdates=U(null),this.identifierPrefix=M,this.onUncaughtError=N,this.onCaughtError=I,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function ry(h,d,b,M,N,I,ne,ge,Ie,st,Dt,qt){return h=new q3(h,d,b,ne,ge,Ie,st,qt),d=1,I===!0&&(d|=24),I=t(3,null,null,d),h.current=I,I.stateNode=h,d=Yl(),d.refCount++,h.pooledCache=d,d.refCount++,I.memoizedState={element:M,isDehydrated:b,cache:d},Gt(I),h}function Hr(h){return h?(h=fu,h):fu}function gp(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=_(d),h=h!==null?x(h):null,h===null?null:sf(h.stateNode)}function Jc(h,d,b,M,N,I){N=Hr(N),M.context===null?M.context=N:M.pendingContext=N,M=rt(d),M.payload={element:b},I=I===void 0?null:I,I!==null&&(M.callback=I),b=Tt(h,M,d),b!==null&&(ea(b,h,d),Ct(b,h,d))}function ef(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<d?b:d}}function Ah(h,d){ef(h,d),(h=h.alternate)&&ef(h,d)}var kn={},tf=tg(),gs=W5(),yp=Object.assign,$3=Symbol.for("react.element"),Rh=Symbol.for("react.transitional.element"),Hs=Symbol.for("react.portal"),au=Symbol.for("react.fragment"),Nh=Symbol.for("react.strict_mode"),vp=Symbol.for("react.profiler"),Ch=Symbol.for("react.provider"),Bg=Symbol.for("react.consumer"),uo=Symbol.for("react.context"),Oh=Symbol.for("react.forward_ref"),_p=Symbol.for("react.suspense"),nf=Symbol.for("react.suspense_list"),bp=Symbol.for("react.memo"),Vs=Symbol.for("react.lazy"),zg=Symbol.for("react.offscreen"),ay=Symbol.for("react.memo_cache_sentinel"),_l=Symbol.iterator,Fg=Symbol.for("react.client.reference"),On=tf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Io,bl,Wu=!1,rf=Array.isArray,kg=e.rendererVersion,Dh=e.rendererPackageName,af=e.extraDevToolsConfig,sf=e.getPublicInstance,sy=e.getRootHostContext,of=e.getChildHostContext,xp=e.prepareForCommit,oy=e.resetAfterCommit,Hg=e.createInstance,Lh=e.appendInitialChild,xl=e.finalizeInitialChildren,Hn=e.shouldSetTextContent,zi=e.createTextInstance,Vr=e.scheduleTimeout,Sp=e.cancelTimeout,su=e.noTimeout,ka=e.isPrimaryRenderer;e.warnsIfNotActing;var Xr=e.supportsMutation,Gs=e.supportsPersistence,ma=e.supportsHydration,ly=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Cr=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var wa=e.setCurrentUpdatePriority,Sl=e.getCurrentUpdatePriority,uy=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var cy=e.shouldAttemptEagerTransition,Y3=e.detachDeletedInstance;e.requestPostPaintCallback;var Vg=e.maySuspendCommit,Tp=e.preloadInstance,Gg=e.startSuspendingCommit,Ha=e.suspendInstance,Gr=e.waitForCommitToBeReady,ou=e.NotPendingTransition,co=e.HostTransitionContext,Ep=e.resetFormInstance;e.bindToConsole;var jg=e.supportsMicrotasks,Tl=e.scheduleMicrotask,lu=e.supportsTestSelectors,Wg=e.findFiberRoot,Xg=e.getBoundingRect,fy=e.getTextContent,lf=e.isHiddenSubtree,hy=e.matchAccessibilityRole,dy=e.setFocusIfFocusable,py=e.setupIntersectionObserver,my=e.appendChild,qg=e.appendChildToContainer,gy=e.commitTextUpdate,K3=e.commitMount,yy=e.commitUpdate,vy=e.insertBefore,_y=e.insertInContainerBefore,$g=e.removeChild,by=e.removeChildFromContainer,Yg=e.resetTextContent,xy=e.hideInstance,Sy=e.hideTextInstance,Ty=e.unhideInstance,Z3=e.unhideTextInstance,Ey=e.clearContainer,uf=e.cloneInstance,Ih=e.createContainerChildSet,Kg=e.appendChildToContainerChildSet,Mp=e.finalizeContainerChildren,cf=e.replaceContainerChildren,Zg=e.cloneHiddenInstance,Qg=e.cloneHiddenTextInstance,wp=e.isSuspenseInstancePending,Ap=e.isSuspenseInstanceFallback,My=e.getSuspenseInstanceFallbackErrorDetails,wy=e.registerSuspenseInstanceRetry,Jg=e.canHydrateFormStateMarker,Ay=e.isFormStateMarkerMatching,e0=e.getNextHydratableSibling,Rp=e.getFirstHydratableChild,Ry=e.getFirstHydratableChildWithinContainer,Ny=e.getFirstHydratableChildWithinSuspenseInstance,Q3=e.canHydrateInstance,t0=e.canHydrateTextInstance,Cy=e.canHydrateSuspenseInstance,Oy=e.hydrateInstance,n0=e.hydrateTextInstance,Dy=e.hydrateSuspenseInstance,Ly=e.getNextHydratableInstanceAfterSuspenseInstance,J3=e.commitHydratedContainer,eb=e.commitHydratedSuspenseInstance,Iy=e.clearSuspenseBoundary,Uh=e.clearSuspenseBoundaryFromContainer,Np=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Cp=e.validateHydratableInstance,Uy=e.validateHydratableTextInstance,ys=e.supportsResources,Ph=e.isHostHoistableType,Op=e.getHoistableRoot,i0=e.getResource,Py=e.acquireResource,Xu=e.releaseResource,Bh=e.hydrateHoistable,zh=e.mountHoistable,ff=e.unmountHoistable,Dp=e.createHoistableInstance,By=e.prepareToCommitHoistables,zy=e.mayResourceSuspendCommit,qu=e.preloadResource,Fy=e.suspendResource,ji=e.supportsSingletons,fo=e.resolveSingletonInstance,uu=e.clearSingleton,ky=e.acquireSingletonInstance,cu=e.releaseSingletonInstance,Uo=e.isHostSingletonType,Or=[],El=-1,fu={},Va=Math.clz32?Math.clz32:L,Hy=Math.log,Vy=Math.LN2,Po=128,$u=4194304,Fh=gs.unstable_scheduleCallback,Lp=gs.unstable_cancelCallback,Gy=gs.unstable_shouldYield,Ip=gs.unstable_requestPaint,js=gs.unstable_now,Up=gs.unstable_ImmediatePriority,jy=gs.unstable_UserBlockingPriority,Pp=gs.unstable_NormalPriority,tb=gs.unstable_IdlePriority,Wy=gs.log,ta=gs.unstable_setDisableYieldValue,Dr=null,is=null,rs=typeof Object.is=="function"?Object.is:de,r0=new WeakMap,Yu=[],Ku=0,Zu=null,hf=0,vs=[],_s=0,hu=null,ho=1,po="",qr=T(null),df=T(null),Bo=T(null),Qu=T(null),ga=null,ya=null,pi=!1,Ws=null,na=!1,kh=Error(r(519)),Xs=[],Ju=0,mo=0,Hh=null,Ml=null,ec=!1,Qi=!1,a0=!1,pf=0,mf=null,tc=0,bs=0,nc=null,wl=!1,ic=!1,zo=Object.prototype.hasOwnProperty,gf=Error(r(460)),Vh=Error(r(474)),Gh={then:function(){}},du=null,pu=null,mu=0,gu=gi(!0),Fo=gi(!1),Ji=T(null),yf=T(0),xs=T(null),Wi=null,$r=T(0),Al=0,Xn=null,xn=null,_i=null,qs=!1,rc=!1,yu=!1,Bp=0,ac=0,ia=null,go=0,zp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},_r={readContext:fa,use:je,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useLayoutEffect:ui,useInsertionEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useSyncExternalStore:ui,useId:ui};_r.useCacheRefresh=ui,_r.useMemoCache=ui,_r.useHostTransitionStatus=ui,_r.useFormState=ui,_r.useActionState=ui,_r.useOptimistic=ui;var vu={readContext:fa,use:je,useCallback:function(h,d){return Q().memoizedState=[h,d===void 0?null:d],h},useContext:fa,useEffect:ol,useImperativeHandle:function(h,d,b){b=b!=null?b.concat([h]):null,ao(4194308,4,fe.bind(null,d,h),b)},useLayoutEffect:function(h,d){return ao(4194308,4,h,d)},useInsertionEffect:function(h,d){ao(4,2,h,d)},useMemo:function(h,d){var b=Q();d=d===void 0?null:d;var M=h();if(yu){le(!0);try{h()}finally{le(!1)}}return b.memoizedState=[M,d],M},useReducer:function(h,d,b){var M=Q();if(b!==void 0){var N=b(d);if(yu){le(!0);try{b(d)}finally{le(!1)}}}else N=d;return M.memoizedState=M.baseState=N,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:N},M.queue=h,h=h.dispatch=H.bind(null,Xn,h),[M.memoizedState,h]},useRef:function(h){var d=Q();return h={current:h},d.memoizedState=h},useState:function(h){h=Tn(h);var d=h.queue,b=W.bind(null,Xn,d);return d.dispatch=b,[h.memoizedState,b]},useDebugValue:Je,useDeferredValue:function(h,d){var b=Q();return Mt(b,h,d)},useTransition:function(){var h=Tn(!1);return h=dn.bind(null,Xn,h.queue,!0,!1),Q().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,d,b){var M=Xn,N=Q();if(pi){if(b===void 0)throw Error(r(407));b=b()}else{if(b=d(),Ui===null)throw Error(r(349));(ai&60)!==0||ln(M,d,b)}N.memoizedState=b;var I={value:b,getSnapshot:d};return N.queue=I,ol(Cn.bind(null,M,I,h),[h]),M.flags|=2048,Rr(9,en.bind(null,M,I,b,d),{destroy:void 0},null),b},useId:function(){var h=Q(),d=Ui.identifierPrefix;if(pi){var b=po,M=ho;b=(M&~(1<<32-Va(M)-1)).toString(32)+b,d=":"+d+"R"+b,b=Bp++,0<b&&(d+="H"+b.toString(32)),d+=":"}else b=go++,d=":"+d+"r"+b.toString(32)+":";return h.memoizedState=d},useCacheRefresh:function(){return Q().memoizedState=R.bind(null,Xn)}};vu.useMemoCache=Ne,vu.useHostTransitionStatus=Un,vu.useFormState=Mi,vu.useActionState=Mi,vu.useOptimistic=function(h){var d=Q();d.memoizedState=d.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=b,d=se.bind(null,Xn,!0,b),b.dispatch=d,[h,d]};var Ga={readContext:fa,use:je,useCallback:Ue,useContext:fa,useEffect:D,useImperativeHandle:De,useInsertionEffect:F,useLayoutEffect:V,useMemo:nt,useReducer:Lt,useRef:Ea,useState:function(){return Lt(gt)},useDebugValue:Je,useDeferredValue:function(h,d){var b=Te();return Xt(b,xn.memoizedState,h,d)},useTransition:function(){var h=Lt(gt)[0],d=Te().memoizedState;return[typeof h=="boolean"?h:ke(h),d]},useSyncExternalStore:hn,useId:vn};Ga.useCacheRefresh=Yt,Ga.useMemoCache=Ne,Ga.useHostTransitionStatus=Un,Ga.useFormState=dr,Ga.useActionState=dr,Ga.useOptimistic=function(h,d){var b=Te();return ri(b,xn,h,d)};var Ss={readContext:fa,use:je,useCallback:Ue,useContext:fa,useEffect:D,useImperativeHandle:De,useInsertionEffect:F,useLayoutEffect:V,useMemo:nt,useReducer:Bt,useRef:Ea,useState:function(){return Bt(gt)},useDebugValue:Je,useDeferredValue:function(h,d){var b=Te();return xn===null?Mt(b,h,d):Xt(b,xn.memoizedState,h,d)},useTransition:function(){var h=Bt(gt)[0],d=Te().memoizedState;return[typeof h=="boolean"?h:ke(h),d]},useSyncExternalStore:hn,useId:vn};Ss.useCacheRefresh=Yt,Ss.useMemoCache=Ne,Ss.useHostTransitionStatus=Un,Ss.useFormState=lr,Ss.useActionState=lr,Ss.useOptimistic=function(h,d){var b=Te();return xn!==null?ri(b,xn,h,d):(b.baseState=h,[h,b.queue.dispatch])};var ko={isMounted:function(h){return(h=h._reactInternals)?g(h)===h:!1},enqueueSetState:function(h,d,b){h=h._reactInternals;var M=Nr(),N=rt(M);N.payload=d,b!=null&&(N.callback=b),d=Tt(h,N,M),d!==null&&(ea(d,h,M),Ct(d,h,M))},enqueueReplaceState:function(h,d,b){h=h._reactInternals;var M=Nr(),N=rt(M);N.tag=1,N.payload=d,b!=null&&(N.callback=b),d=Tt(h,N,M),d!==null&&(ea(d,h,M),Ct(d,h,M))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var b=Nr(),M=rt(b);M.tag=2,d!=null&&(M.callback=d),d=Tt(h,M,b),d!==null&&(ea(d,h,b),Ct(d,h,b))}},Fp=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},kp=Error(r(461)),Xi=!1,Hp={dehydrated:null,treeContext:null,retryLane:0},Rl=T(null),yo=null,Ts=null,vf=typeof AbortController<"u"?AbortController:function(){var h=[],d=this.signal={aborted:!1,addEventListener:function(b,M){h.push(M)}};this.abort=function(){d.aborted=!0,h.forEach(function(b){return b()})}},Xy=gs.unstable_scheduleCallback,qy=gs.unstable_NormalPriority,er={$$typeof:uo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},s0=On.S;On.S=function(h,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&He(h,d),s0!==null&&s0(h,d)};var Ho=T(null),Vo=!1,br=!1,o0=!1,Ii=typeof WeakSet=="function"?WeakSet:Set,zn=null,Qn=!1,gn=null,jn=!1,mr=null,Es=8192,_f={getCacheForType:function(h){var d=fa(er),b=d.data.get(h);return b===void 0&&(b=h(),d.data.set(h,b)),b}},bf=0,$s=1,ir=2,vo=3,Go=4;if(typeof Symbol=="function"&&Symbol.for){var sc=Symbol.for;bf=sc("selector.component"),$s=sc("selector.has_pseudo_class"),ir=sc("selector.role"),vo=sc("selector.test_id"),Go=sc("selector.text")}var Ys=typeof WeakMap=="function"?WeakMap:Map,bi=0,Ui=null,En=null,ai=0,Vi=0,Aa=null,Ks=!1,Ms=!1,Yr=!1,Ra=0,qi=0,ws=0,Nl=0,jh=0,As=0,jo=0,oc=null,xr=null,Vp=!1,ja=0,xf=1/0,Wh=null,_u=null,_o=!1,Wo=null,lc=0,bu=0,Gp=null,Sf=0,jp=null;return kn.attemptContinuousHydration=function(h){if(h.tag===13){var d=pt(h,67108864);d!==null&&ea(d,h,67108864),Ah(h,67108864)}},kn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=Nr(),b=pt(h,d);b!==null&&ea(b,h,d),Ah(h,d)}},kn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=C(h.pendingLanes);if(d!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var b=1<<31-Va(d);h.entanglements[1]|=b,d&=~b}ft(h),(bi&6)===0&&(xf=js()+500,St(0))}}break;case 13:d=pt(h,2),d!==null&&ea(d,h,2),Th(),Ah(h,2)}},kn.batchedUpdates=function(h,d){return h(d)},kn.createComponentSelector=function(h){return{$$typeof:bf,value:h}},kn.createContainer=function(h,d,b,M,N,I,ne,ge,Ie,st){return ry(h,d,!1,null,b,M,I,ne,ge,Ie,st,null)},kn.createHasPseudoClassSelector=function(h){return{$$typeof:$s,value:h}},kn.createHydrationContainer=function(h,d,b,M,N,I,ne,ge,Ie,st,Dt,qt,Zt){return h=ry(b,M,!0,h,N,I,ge,Ie,st,Dt,qt,Zt),h.context=Hr(null),b=h.current,M=Nr(),N=rt(M),N.callback=d??null,Tt(b,N,M),h.current.lanes=M,K(h,M),ft(h),h},kn.createPortal=function(h,d,b){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hs,key:M==null?null:""+M,children:h,containerInfo:d,implementation:b}},kn.createRoleSelector=function(h){return{$$typeof:ir,value:h}},kn.createTestNameSelector=function(h){return{$$typeof:vo,value:h}},kn.createTextSelector=function(h){return{$$typeof:Go,value:h}},kn.defaultOnCaughtError=function(h){console.error(h)},kn.defaultOnRecoverableError=function(h){Fp(h)},kn.defaultOnUncaughtError=function(h){Fp(h)},kn.deferredUpdates=function(h){var d=On.T,b=Sl();try{return wa(32),On.T=null,h()}finally{wa(b),On.T=d}},kn.discreteUpdates=function(h,d,b,M,N){var I=On.T,ne=Sl();try{return wa(2),On.T=null,h(d,b,M,N)}finally{wa(ne),On.T=I,bi===0&&(xf=js()+500)}},kn.findAllNodes=xh,kn.findBoundingRects=function(h,d){if(!lu)throw Error(r(363));d=xh(h,d),h=[];for(var b=0;b<d.length;b++)h.push(Xg(d[b]));for(d=h.length-1;0<d;d--){b=h[d];for(var M=b.x,N=M+b.width,I=b.y,ne=I+b.height,ge=d-1;0<=ge;ge--)if(d!==ge){var Ie=h[ge],st=Ie.x,Dt=st+Ie.width,qt=Ie.y,Zt=qt+Ie.height;if(M>=st&&I>=qt&&N<=Dt&&ne<=Zt){h.splice(d,1);break}else if(M!==st||b.width!==Ie.width||Zt<I||qt>ne){if(!(I!==qt||b.height!==Ie.height||Dt<M||st>N)){st>M&&(Ie.width+=st-M,Ie.x=M),Dt<N&&(Ie.width=N-st),h.splice(d,1);break}}else{qt>I&&(Ie.height+=qt-I,Ie.y=I),Zt<ne&&(Ie.height=ne-qt),h.splice(d,1);break}}}return h},kn.findHostInstance=gp,kn.findHostInstanceWithNoPortals=function(h){return h=_(h),h=h!==null?w(h):null,h===null?null:sf(h.stateNode)},kn.findHostInstanceWithWarning=function(h){return gp(h)},kn.flushPassiveEffects=lo,kn.flushSyncFromReconciler=function(h){var d=bi;bi|=1;var b=On.T,M=Sl();try{if(wa(2),On.T=null,h)return h()}finally{wa(M),On.T=b,bi=d,(bi&6)===0&&St(0)}},kn.flushSyncWork=Th,kn.focusWithin=function(h,d){if(!lu)throw Error(r(363));for(h=Yc(h),d=ts(h,d),d=Array.from(d),h=0;h<d.length;){var b=d[h++],M=b.tag;if(!lf(b)){if((M===5||M===26||M===27)&&dy(b.stateNode))return!0;for(b=b.child;b!==null;)d.push(b),b=b.sibling}}return!1},kn.getFindAllNodesFailureDescription=function(h,d){if(!lu)throw Error(r(363));var b=0,M=[];h=[Yc(h),0];for(var N=0;N<h.length;){var I=h[N++],ne=I.tag,ge=h[N++],Ie=d[ge];if((ne!==5&&ne!==26&&ne!==27||!lf(I))&&(Jl(I,Ie)&&(M.push(Ng(Ie)),ge++,ge>b&&(b=ge)),ge<d.length))for(I=I.child;I!==null;)h.push(I,ge),I=I.sibling}if(b<d.length){for(h=[];b<d.length;b++)h.push(Ng(d[b]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},kn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return sf(h.child.stateNode);default:return h.child.stateNode}},kn.injectIntoDevTools=function(){var h={bundleType:0,version:kg,rendererPackageName:Dh,currentDispatcherRef:On,findFiberByHostInstance:ly,reconcilerVersion:"19.0.0"};if(af!==null&&(h.rendererConfig=af),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Dr=d.inject(h),is=d}catch{}h=!!d.checkDCE}}return h},kn.isAlreadyRendering=function(){return!1},kn.observeVisibleRects=function(h,d,b,M){if(!lu)throw Error(r(363));h=xh(h,d);var N=py(h,b,M).disconnect;return{disconnect:function(){N()}}},kn.shouldError=function(){return null},kn.shouldSuspend=function(){return!1},kn.startHostTransition=function(h,d,b,M){if(h.tag!==5)throw Error(r(476));var N=In(h).queue;dn(h,N,d,ou,b===null?i:function(){var I=In(h).next.queue;return Y(h,I,{},Nr()),b(M)})},kn.updateContainer=function(h,d,b,M){var N=d.current,I=Nr();return Jc(N,I,h,d,b,M),I},kn.updateContainerSync=function(h,d,b,M){return d.tag===0&&lo(),Jc(d.current,2,h,d,b,M),2},kn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(Ax)),Ax.exports}var vA;function BF(){return vA||(vA=1,wx.exports=PF()),wx.exports}var zF=BF();const FF=q_(zF);var _A=W5();function $E(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=$E(i,e,t);if(r)return r;i=e?null:i.sibling}}function X5(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const YE=X5(jt.createContext(null));let q5=class extends jt.Component{render(){return jt.createElement(YE.Provider,{value:this._reactInternals},this.props.children)}};function $5(){const n=jt.useContext(YE);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=jt.useId();return jt.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=$E(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const kF=Symbol.for("react.context"),HF=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===kF;function VF(){const n=$5(),[e]=jt.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;HF(i)&&i!==YE&&!e.has(i)&&e.set(i,jt.use(X5(i))),t=t.return}return e}function GF(){const n=VF();return jt.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>jt.createElement(e,null,jt.createElement(t.Provider,{...i,value:n.get(t)})),e=>jt.createElement(q5,{...e})),[n])}function Y5(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const K5=n=>n&&n.isOrthographicCamera,jF=n=>n&&n.hasOwnProperty("current"),WF=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),k1=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?jt.useLayoutEffect:jt.useEffect;function Z5(n){const e=jt.useRef(n);return k1(()=>void(e.current=n),[n]),e}function XF(){const n=$5(),e=GF();return jt.useMemo(()=>({children:t})=>{const r=!!$E(n,!0,a=>a.type===jt.StrictMode)?jt.StrictMode:jt.Fragment;return Ni.jsx(r,{children:Ni.jsx(e,{children:t})})},[n,e])}function qF({set:n}){return k1(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const $F=(n=>(n=class extends jt.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function Q5(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function mm(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Ir={obj:n=>n===Object(n)&&!Ir.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ir.str(n)||Ir.num(n)||Ir.boo(n))return n===e;const a=Ir.obj(n);if(a&&i==="reference")return n===e;const s=Ir.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!Ir.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(Ir.und(l)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function YF(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const J5=["children","key","ref"];function KF(n){const e={};for(const t in n)J5.includes(t)||(e[t]=n[t]);return e}function E_(n,e,t,i){const r=n;let a=r?.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:KF(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function x1(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const r of e.split("-")){var i;e=r,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const bA=/-\d+$/;function M_(n,e){if(Ir.str(e.props.attach)){if(bA.test(e.props.attach)){const r=e.props.attach.replace(bA,""),{root:a,key:s}=x1(n.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:i}=x1(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Ir.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function w_(n,e){if(Ir.str(e.props.attach)){const{root:t,key:i}=x1(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const $S=[...J5,"args","dispose","attach","object","onUpdate","dispose"],xA=new Map;function ZF(n){let e=xA.get(n.constructor);try{e||(e=new n.constructor,xA.set(n.constructor,e))}catch{}return e}function QF(n,e){const t={};for(const i in e)if(!$S.includes(i)&&!Ir.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if($S.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=x1(n.object,i);if(r.constructor&&r.constructor.length===0){const s=ZF(r);Ir.und(s)||(t[a]=s[a])}else t[a]=0}return t}const JF=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],ek=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Hf(n,e){var t;const i=n.__r3f,r=i&&Y5(i).getState(),a=i?.eventCount;for(const l in e){let u=e[l];if($S.includes(l))continue;if(i&&ek.test(l)){typeof u=="function"?i.handlers[l]=u:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(u===void 0)continue;let{root:f,key:m,target:g}=x1(n,l);if(g instanceof Wm&&u instanceof Wm)g.mask=u.mask;else if(g instanceof Pt&&WF(u))g.set(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&u!=null&&u.constructor&&g.constructor===u.constructor)g.copy(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(u))typeof g.fromArray=="function"?g.fromArray(u):g.set(...u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof u=="number")typeof g.setScalar=="function"?g.setScalar(u):g.set(u);else{var s;f[m]=u,r&&!r.linear&&JF.includes(m)&&(s=f[m])!=null&&s.isTexture&&f[m].format===cs&&f[m].type===tl&&(f[m].colorSpace=Zr)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const l=i.object,u=r.internal.interaction.indexOf(l);u>-1&&r.internal.interaction.splice(u,1),i.eventCount&&l.raycast!==null&&r.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&lg(i),n}function lg(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function tk(n,e){n.manual||(K5(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const no=n=>n?.isObject3D;function t2(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function e6(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function nk(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{e6(t.capturedMap,e,i,r)})}function ik(n){function e(u){const{internal:f}=n.getState(),m=u.offsetX-f.initialClick[0],g=u.offsetY-f.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function t(u){return u.filter(f=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function i(u,f){const m=n.getState(),g=new Set,y=[],_=f?f(m.internal.interaction):m.internal.interaction;for(let S=0;S<_.length;S++){const O=mm(_[S]);O&&(O.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(u,m);function x(S){const O=mm(S);if(!O||!O.events.enabled||O.raycaster.camera===null)return[];if(O.raycaster.camera===void 0){var L;O.events.compute==null||O.events.compute(u,O,(L=O.previousRoot)==null?void 0:L.getState()),O.raycaster.camera===void 0&&(O.raycaster.camera=null)}return O.raycaster.camera?O.raycaster.intersectObject(S,!0):[]}let w=_.flatMap(x).sort((S,O)=>{const L=mm(S.object),C=mm(O.object);return!L||!C?S.distance-O.distance:C.events.priority-L.events.priority||S.distance-O.distance}).filter(S=>{const O=t2(S);return g.has(O)?!1:(g.add(O),!0)});m.events.filter&&(w=m.events.filter(w,m));for(const S of w){let O=S.object;for(;O;){var T;(T=O.__r3f)!=null&&T.eventCount&&y.push({...S,eventObject:O}),O=O.parent}}if("pointerId"in u&&m.internal.capturedMap.has(u.pointerId))for(let S of m.internal.capturedMap.get(u.pointerId).values())g.has(t2(S.intersection))||y.push(S.intersection);return y}function r(u,f,m,g){if(u.length){const y={stopped:!1};for(const _ of u){let x=mm(_.object);if(x||_.object.traverseAncestors(w=>{const T=mm(w);if(T)return x=T,!1}),x){const{raycaster:w,pointer:T,camera:S,internal:O}=x,L=new $(T.x,T.y,0).unproject(S),C=k=>{var U,K;return(U=(K=O.capturedMap.get(k))==null?void 0:K.has(_.eventObject))!=null?U:!1},P=k=>{const U={intersection:_,target:f.target};O.capturedMap.has(k)?O.capturedMap.get(k).set(_.eventObject,U):O.capturedMap.set(k,new Map([[_.eventObject,U]])),f.target.setPointerCapture(k)},B=k=>{const U=O.capturedMap.get(k);U&&e6(O.capturedMap,_.eventObject,U,k)};let j={};for(let k in f){let U=f[k];typeof U!="function"&&(j[k]=U)}let X={..._,...j,pointer:T,intersections:u,stopped:y.stopped,delta:m,unprojectedPoint:L,ray:w.ray,camera:S,stopPropagation(){const k="pointerId"in f&&O.capturedMap.get(f.pointerId);if((!k||k.has(_.eventObject))&&(X.stopped=y.stopped=!0,O.hovered.size&&Array.from(O.hovered.values()).find(U=>U.eventObject===_.eventObject))){const U=u.slice(0,u.indexOf(_));a([...U,_])}},target:{hasPointerCapture:C,setPointerCapture:P,releasePointerCapture:B},currentTarget:{hasPointerCapture:C,setPointerCapture:P,releasePointerCapture:B},nativeEvent:f};if(g(X),y.stopped===!0)break}}}return u}function a(u){const{internal:f}=n.getState();for(const m of f.hovered.values())if(!u.length||!u.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const y=m.eventObject.__r3f;if(f.hovered.delete(t2(m)),y!=null&&y.eventCount){const _=y.handlers,x={...m,intersections:u};_.onPointerOut==null||_.onPointerOut(x),_.onPointerLeave==null||_.onPointerLeave(x)}}}function s(u,f){for(let m=0;m<f.length;m++){const g=f[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:m}=n.getState();"pointerId"in f&&m.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(f.pointerId)&&(m.capturedMap.delete(f.pointerId),a([]))})}}return function(m){const{onPointerMissed:g,internal:y}=n.getState();y.lastEvent.current=m;const _=u==="onPointerMove",x=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",T=i(m,_?t:void 0),S=x?e(m):0;u==="onPointerDown"&&(y.initialClick=[m.offsetX,m.offsetY],y.initialHits=T.map(L=>L.eventObject)),x&&!T.length&&S<=2&&(s(m,y.interaction),g&&g(m)),_&&a(T);function O(L){const C=L.eventObject,P=C.__r3f;if(!(P!=null&&P.eventCount))return;const B=P.handlers;if(_){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const j=t2(L),X=y.hovered.get(j);X?X.stopped&&L.stopPropagation():(y.hovered.set(j,L),B.onPointerOver==null||B.onPointerOver(L),B.onPointerEnter==null||B.onPointerEnter(L))}B.onPointerMove==null||B.onPointerMove(L)}else{const j=B[u];j?(!x||y.initialHits.includes(C))&&(s(m,y.interaction.filter(X=>!y.initialHits.includes(X))),j(L)):x&&y.initialHits.includes(C)&&s(m,y.interaction.filter(X=>!y.initialHits.includes(X)))}}r(T,m,S,O)}}return{handlePointer:l}}const SA=n=>!!(n!=null&&n.render),t6=jt.createContext(null),rk=(n,e)=>{const t=IF((l,u)=>{const f=new $,m=new $,g=new $;function y(S=u().camera,O=m,L=u().size){const{width:C,height:P,top:B,left:j}=L,X=C/P;O.isVector3?g.copy(O):g.set(...O);const k=S.getWorldPosition(f).distanceTo(g);if(K5(S))return{width:C/S.zoom,height:P/S.zoom,top:B,left:j,factor:1,distance:k,aspect:X};{const U=S.fov*Math.PI/180,K=2*Math.tan(U/2)*k,ye=K*(C/P);return{width:ye,height:K,top:B,left:j,factor:C/ye,distance:k,aspect:X}}}let _;const x=S=>l(O=>({performance:{...O.performance,current:S}})),w=new it;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>n(u(),S),advance:(S,O)=>e(S,O,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new VE,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=u();_&&clearTimeout(_),S.performance.current!==S.performance.min&&x(S.performance.min),_=setTimeout(()=>x(u().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:S=>l(O=>({...O,events:{...O.events,...S}})),setSize:(S,O,L=0,C=0)=>{const P=u().camera,B={width:S,height:O,top:L,left:C};l(j=>({size:B,viewport:{...j.viewport,...y(P,m,B)}}))},setDpr:S=>l(O=>{const L=Q5(S);return{viewport:{...O.viewport,dpr:L,initialDpr:O.viewport.initialDpr||L}}}),setFrameloop:(S="always")=>{const O=u().clock;O.stop(),O.elapsedTime=0,S!=="never"&&(O.start(),O.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:jt.createRef(),active:!1,frames:0,priority:0,subscribe:(S,O,L)=>{const C=u().internal;return C.priority=C.priority+(O>0?1:0),C.subscribers.push({ref:S,priority:O,store:L}),C.subscribers=C.subscribers.sort((P,B)=>P.priority-B.priority),()=>{const P=u().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(O>0?1:0),P.subscribers=P.subscribers.filter(B=>B.ref!==S))}}}}}),i=t.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:f,gl:m,set:g}=t.getState();if(u.width!==r.width||u.height!==r.height||f.dpr!==a){r=u,a=f.dpr,tk(l,u),f.dpr>0&&m.setPixelRatio(f.dpr);const y=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(u.width,u.height,y)}l!==s&&(s=l,g(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};function n6(){const n=jt.useContext(t6);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function So(n=t=>t,e){return n6()(n,e)}function KE(n,e=0){const t=n6(),i=t.getState().internal.subscribe,r=Z5(n);return k1(()=>i(r,e,t),[e,i,t]),null}function ak(n){const e=FF(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:jt.version}),e}const i6=0,Km={},sk=/^three(?=[A-Z])/,C3=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let ok=0;const lk=n=>typeof n=="function";function uk(n){if(lk(n)){const e=`${ok++}`;return Km[e]=n,e}else Object.assign(Km,n)}function r6(n,e){const t=C3(n),i=Km[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function ck(n,e,t){var i;return n=C3(n)in Km?n:n.replace(sk,""),r6(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,E_(e.object,t,n,e)}function fk(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?w_(n.parent,n):no(n.object)&&(n.object.visible=!1),n.isHidden=!0,lg(n)}}function a6(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?M_(n.parent,n):no(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,lg(n)}}function ZE(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,a;const s=Km[C3(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Hf(e.object,e.props),e.props.attach)M_(n,e);else if(no(e.object)&&no(n.object)){const s=n.object.children.indexOf(t?.object);if(t&&s!==-1){const l=n.object.children.indexOf(e.object);if(l!==-1){n.object.children.splice(l,1);const u=l<s?s-1:s;n.object.children.splice(u,0,e.object)}else e.object.parent=n.object,n.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const s of e.children)ZE(e,s);lg(e)}}function Cx(n,e){e&&(e.parent=n,n.children.push(e),ZE(n,e))}function TA(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),ZE(n,e,t)}function s6(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():_A.unstable_scheduleCallback(_A.unstable_IdlePriority,e)}}function YS(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?w_(n,e):no(e.object)&&no(n.object)&&(n.object.remove(e.object),nk(Y5(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];YS(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&s6(e.object),t===void 0&&lg(e)}function hk(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const _2=[];function dk(){for(const[t]of _2){const i=t.parent;if(i){t.props.attach?w_(i,t):no(t.object)&&no(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?w_(t,r):no(r.object)&&no(t.object)&&t.object.remove(r.object)}t.isHidden&&a6(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&s6(t.object)}for(const[t,i,r]of _2){t.props=i;const a=t.parent;if(a){var n,e;const s=Km[C3(t.type)];t.object=(n=t.props.object)!=null?n:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,hk(r,t.object),Hf(t.object,t.props),t.props.attach?M_(a,t):no(t.object)&&no(a.object)&&a.object.add(t.object);for(const l of t.children)l.props.attach?M_(t,l):no(l.object)&&no(t.object)&&t.object.add(l.object);lg(t)}}_2.length=0}const Ox=()=>{},EA={};let n2=i6;const pk=0,mk=4,KS=ak({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:ck,removeChild:YS,appendChild:Cx,appendInitialChild:Cx,insertBefore:TA,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||Cx(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||YS(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||TA(i,e,t)},getRootHostContext:()=>EA,getChildHostContext:()=>EA,commitUpdate(n,e,t,i,r){var a,s,l;r6(e,i);let u=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(l=i.args)!=null&&l.some((m,g)=>{var y;return m!==((y=t.args)==null?void 0:y[g])}))&&(u=!0),u)_2.push([n,{...i},r]);else{const m=QF(n,i);Object.keys(m).length&&(Object.assign(n.props,m),Hf(n.object,m))}(r.sibling===null||(r.flags&mk)===pk)&&dk()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>E_(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:fk,unhideInstance:a6,createTextInstance:Ox,hideTextInstance:Ox,unhideTextInstance:Ox,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:jt.createContext(null),setCurrentUpdatePriority(n){n2=n},getCurrentUpdatePriority(){return n2},resolveUpdatePriority(){var n;if(n2!==i6)return n2;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return m2.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return m2.ContinuousEventPriority;default:return m2.DefaultEventPriority}},resetFormInstance(){}}),zd=new Map,gm={objects:"shallow",strict:!1};function gk(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function yk(n){const e=zd.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||rk(JS,wA),s=t||KS.createContainer(a,m2.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||zd.set(n,{fiber:s,store:a});let l,u,f=!1,m=null;return{async configure(g={}){let y;m=new Promise(be=>y=be);let{gl:_,size:x,scene:w,events:T,onCreated:S,shadows:O=!1,linear:L=!1,flat:C=!1,legacy:P=!1,orthographic:B=!1,frameloop:j="always",dpr:X=[1,2],performance:k,raycaster:U,camera:K,onPointerMissed:ye}=g,ue=a.getState(),we=ue.gl;if(!ue.gl){const be={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},Ge=typeof _=="function"?await _(be):_;SA(Ge)?we=Ge:we=new j5({...be,..._}),ue.set({gl:we})}let Ae=ue.raycaster;Ae||ue.set({raycaster:Ae=new U5});const{params:Z,...le}=U||{};if(Ir.equ(le,Ae,gm)||Hf(Ae,{...le}),Ir.equ(Z,Ae.params,gm)||Hf(Ae,{params:{...Ae.params,...Z}}),!ue.camera||ue.camera===u&&!Ir.equ(u,K,gm)){u=K;const be=K?.isCamera,Ge=be?K:B?new Rc(0,0,0,0,.1,1e3):new Wr(75,0,.1,1e3);be||(Ge.position.z=5,K&&(Hf(Ge,K),Ge.manual||("aspect"in K||"left"in K||"right"in K||"bottom"in K||"top"in K)&&(Ge.manual=!0,Ge.updateProjectionMatrix())),!ue.camera&&!(K!=null&&K.rotation)&&Ge.lookAt(0,0,0)),ue.set({camera:Ge}),Ae.camera=Ge}if(!ue.scene){let be;w!=null&&w.isScene?(be=w,E_(be,a,"",{})):(be=new bE,E_(be,a,"",{}),w&&Hf(be,w)),ue.set({scene:be})}T&&!ue.events.handlers&&ue.set({events:T(a)});const de=gk(n,x);if(Ir.equ(de,ue.size,gm)||ue.setSize(de.width,de.height,de.top,de.left),X&&ue.viewport.dpr!==Q5(X)&&ue.setDpr(X),ue.frameloop!==j&&ue.setFrameloop(j),ue.onPointerMissed||ue.set({onPointerMissed:ye}),k&&!Ir.equ(k,ue.performance,gm)&&ue.set(be=>({performance:{...be.performance,...k}})),!ue.xr){var Le;const be=(xe,Ke)=>{const et=a.getState();et.frameloop!=="never"&&wA(xe,!0,et,Ke)},Ge=()=>{const xe=a.getState();xe.gl.xr.enabled=xe.gl.xr.isPresenting,xe.gl.xr.setAnimationLoop(xe.gl.xr.isPresenting?be:null),xe.gl.xr.isPresenting||JS(xe)},Ye={connect(){const xe=a.getState().gl;xe.xr.addEventListener("sessionstart",Ge),xe.xr.addEventListener("sessionend",Ge)},disconnect(){const xe=a.getState().gl;xe.xr.removeEventListener("sessionstart",Ge),xe.xr.removeEventListener("sessionend",Ge)}};typeof((Le=we.xr)==null?void 0:Le.addEventListener)=="function"&&Ye.connect(),ue.set({xr:Ye})}if(we.shadowMap){const be=we.shadowMap.enabled,Ge=we.shadowMap.type;if(we.shadowMap.enabled=!!O,Ir.boo(O))we.shadowMap.type=Q0;else if(Ir.str(O)){var ee;const Ye={basic:KN,percentage:$_,soft:Q0,variance:Il};we.shadowMap.type=(ee=Ye[O])!=null?ee:Q0}else Ir.obj(O)&&Object.assign(we.shadowMap,O);(be!==we.shadowMap.enabled||Ge!==we.shadowMap.type)&&(we.shadowMap.needsUpdate=!0)}return fi.enabled=!P,f||(we.outputColorSpace=L?$a:Zr,we.toneMapping=C?Lu:rE),ue.legacy!==P&&ue.set(()=>({legacy:P})),ue.linear!==L&&ue.set(()=>({linear:L})),ue.flat!==C&&ue.set(()=>({flat:C})),_&&!Ir.fun(_)&&!SA(_)&&!Ir.equ(_,we,gm)&&Hf(we,_),l=S,f=!0,y(),this},render(g){return!f&&!m&&this.configure(),m.then(()=>{KS.updateContainer(Ni.jsx(vk,{store:a,children:g,onCreated:l,rootElement:n}),s,null,()=>{})}),a},unmount(){o6(n)}}}function vk({store:n,children:e,onCreated:t,rootElement:i}){return k1(()=>{const r=n.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Ni.jsx(t6.Provider,{value:n,children:e})}function o6(n,e){const t=zd.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),KS.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,l,u;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=r.gl)!=null&&u.xr&&r.xr.disconnect(),YF(r.scene),zd.delete(n)}catch{}},500)})}}const _k=new Set,bk=new Set,xk=new Set;function Dx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function o1(n,e){switch(n){case"before":return Dx(_k,e);case"after":return Dx(bk,e);case"tail":return Dx(xk,e)}}let Lx,Ix;function ZS(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Lx=e.internal.subscribers;for(let r=0;r<Lx.length;r++)Ix=Lx[r],Ix.ref.current(Ix.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let A_=!1,QS=!1,Ux,MA,ym;function l6(n){MA=requestAnimationFrame(l6),A_=!0,Ux=0,o1("before",n),QS=!0;for(const t of zd.values()){var e;ym=t.store.getState(),ym.internal.active&&(ym.frameloop==="always"||ym.internal.frames>0)&&!((e=ym.gl.xr)!=null&&e.isPresenting)&&(Ux+=ZS(n,ym))}if(QS=!1,o1("after",n),Ux===0)return o1("tail",n),A_=!1,cancelAnimationFrame(MA)}function JS(n,e=1){var t;if(!n)return zd.forEach(i=>JS(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):QS?n.internal.frames=2:n.internal.frames=1,A_||(A_=!0,requestAnimationFrame(l6)))}function wA(n,e=!0,t,i){if(e&&o1("before",n),t)ZS(n,t,i);else for(const r of zd.values())ZS(n,r.store.getState());e&&o1("after",n)}const Px={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Sk(n){const{handlePointer:e}=ik(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Px).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[l,u]=Px[a];t.addEventListener(l,s,{passive:u})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=Px[r];i.connected.removeEventListener(s,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function AA(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function Tk({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=jt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=jt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),u=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,m=jt.useRef(!1);jt.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,y,_]=jt.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:O,top:L,width:C,height:P,bottom:B,right:j,x:X,y:k}=l.current.element.getBoundingClientRect(),U={left:O,top:L,width:C,height:P,bottom:B,right:j,x:X,y:k};l.current.element instanceof HTMLElement&&i&&(U.height=l.current.element.offsetHeight,U.width=l.current.element.offsetWidth),Object.freeze(U),m.current&&!Ak(l.current.lastBounds,U)&&s(l.current.lastBounds=U)};return[S,f?AA(S,f):S,u?AA(S,u):S]},[s,i,u,f]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function w(){l.current.element&&(l.current.resizeObserver=new r(_),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const T=S=>{!S||S===l.current.element||(x(),l.current.element=S,l.current.scrollContainers=u6(S),w())};return Mk(_,!!e),Ek(y),jt.useEffect(()=>{x(),w()},[e,_,y]),jt.useEffect(()=>x,[]),[T,a,g]}function Ek(n){jt.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Mk(n,e){jt.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function u6(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...u6(n.parentElement)]}const wk=["x","y","top","bottom","left","right","width","height"],Ak=(n,e)=>wk.every(t=>n[t]===e[t]);function Rk({ref:n,children:e,fallback:t,resize:i,style:r,gl:a,events:s=Sk,eventSource:l,eventPrefix:u,shadows:f,linear:m,flat:g,legacy:y,orthographic:_,frameloop:x,dpr:w,performance:T,raycaster:S,camera:O,scene:L,onPointerMissed:C,onCreated:P,...B}){jt.useMemo(()=>uk(TF),[]);const j=XF(),[X,k]=Tk({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=jt.useRef(null),K=jt.useRef(null);jt.useImperativeHandle(n,()=>U.current);const ye=Z5(C),[ue,we]=jt.useState(!1),[Ae,Z]=jt.useState(!1);if(ue)throw ue;if(Ae)throw Ae;const le=jt.useRef(null);k1(()=>{const Le=U.current;if(k.width>0&&k.height>0&&Le){le.current||(le.current=yk(Le));async function ee(){await le.current.configure({gl:a,scene:L,events:s,shadows:f,linear:m,flat:g,legacy:y,orthographic:_,frameloop:x,dpr:w,performance:T,raycaster:S,camera:O,size:k,onPointerMissed:(...be)=>ye.current==null?void 0:ye.current(...be),onCreated:be=>{be.events.connect==null||be.events.connect(l?jF(l)?l.current:l:K.current),u&&be.setEvents({compute:(Ge,Ye)=>{const xe=Ge[u+"X"],Ke=Ge[u+"Y"];Ye.pointer.set(xe/Ye.size.width*2-1,-(Ke/Ye.size.height)*2+1),Ye.raycaster.setFromCamera(Ye.pointer,Ye.camera)}}),P?.(be)}}),le.current.render(Ni.jsx(j,{children:Ni.jsx($F,{set:Z,children:Ni.jsx(jt.Suspense,{fallback:Ni.jsx(qF,{set:we}),children:e??null})})}))}ee()}}),jt.useEffect(()=>{const Le=U.current;if(Le)return()=>o6(Le)},[]);const de=l?"none":"auto";return Ni.jsx("div",{ref:K,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:de,...r},...B,children:Ni.jsx("div",{ref:X,style:{width:"100%",height:"100%"},children:Ni.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}function Nk(n){return Ni.jsx(q5,{children:Ni.jsx(Rk,{...n})})}function R_(){return R_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},R_.apply(null,arguments)}var Ck=Object.defineProperty,Ok=(n,e,t)=>e in n?Ck(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dk=(n,e,t)=>(Ok(n,e+"",t),t);class Lk{constructor(){Dk(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}}var Ik=Object.defineProperty,Uk=(n,e,t)=>e in n?Ik(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Mn=(n,e,t)=>(Uk(n,typeof e!="symbol"?e+"":e,t),t);const i2=new Yd,RA=new vc,Pk=Math.cos(70*(Math.PI/180)),NA=(n,e)=>(n%e+e)%e;let Bk=class extends Lk{constructor(e,t){super(),Mn(this,"object"),Mn(this,"domElement"),Mn(this,"enabled",!0),Mn(this,"target",new $),Mn(this,"minDistance",0),Mn(this,"maxDistance",1/0),Mn(this,"minZoom",0),Mn(this,"maxZoom",1/0),Mn(this,"minPolarAngle",0),Mn(this,"maxPolarAngle",Math.PI),Mn(this,"minAzimuthAngle",-1/0),Mn(this,"maxAzimuthAngle",1/0),Mn(this,"enableDamping",!1),Mn(this,"dampingFactor",.05),Mn(this,"enableZoom",!0),Mn(this,"zoomSpeed",1),Mn(this,"enableRotate",!0),Mn(this,"rotateSpeed",1),Mn(this,"enablePan",!0),Mn(this,"panSpeed",1),Mn(this,"screenSpacePanning",!0),Mn(this,"keyPanSpeed",7),Mn(this,"zoomToCursor",!1),Mn(this,"autoRotate",!1),Mn(this,"autoRotateSpeed",2),Mn(this,"reverseOrbit",!1),Mn(this,"reverseHorizontalOrbit",!1),Mn(this,"reverseVerticalOrbit",!1),Mn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Mn(this,"mouseButtons",{LEFT:dd.ROTATE,MIDDLE:dd.DOLLY,RIGHT:dd.PAN}),Mn(this,"touches",{ONE:pd.ROTATE,TWO:pd.DOLLY_PAN}),Mn(this,"target0"),Mn(this,"position0"),Mn(this,"zoom0"),Mn(this,"_domElementKeyEvents",null),Mn(this,"getPolarAngle"),Mn(this,"getAzimuthalAngle"),Mn(this,"setPolarAngle"),Mn(this,"setAzimuthalAngle"),Mn(this,"getDistance"),Mn(this,"getZoomScale"),Mn(this,"listenToKeyEvents"),Mn(this,"stopListenToKeyEvents"),Mn(this,"saveState"),Mn(this,"reset"),Mn(this,"update"),Mn(this,"connect"),Mn(this,"dispose"),Mn(this,"dollyIn"),Mn(this,"dollyOut"),Mn(this,"getScale"),Mn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=pe=>{let Re=NA(pe,2*Math.PI),yt=m.phi;yt<0&&(yt+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let he=Math.abs(Re-yt);2*Math.PI-he<he&&(Re<yt?Re+=2*Math.PI:yt+=2*Math.PI),g.phi=Re-yt,i.update()},this.setAzimuthalAngle=pe=>{let Re=NA(pe,2*Math.PI),yt=m.theta;yt<0&&(yt+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let he=Math.abs(Re-yt);2*Math.PI-he<he&&(Re<yt?Re+=2*Math.PI:yt+=2*Math.PI),g.theta=Re-yt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=pe=>{pe.addEventListener("keydown",He),this._domElementKeyEvents=pe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",He),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),u=l.NONE},this.update=(()=>{const pe=new $,Re=new $(0,1,0),yt=new An().setFromUnitVectors(e.up,Re),he=yt.clone().invert(),vt=new $,at=new An,At=2*Math.PI;return function(){const Be=i.object.position;yt.setFromUnitVectors(e.up,Re),he.copy(yt).invert(),pe.copy(Be).sub(i.target),pe.applyQuaternion(yt),m.setFromVector3(pe),i.autoRotate&&u===l.NONE&&we(ye()),i.enableDamping?(m.theta+=g.theta*i.dampingFactor,m.phi+=g.phi*i.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi);let Ft=i.minAzimuthAngle,Qt=i.maxAzimuthAngle;isFinite(Ft)&&isFinite(Qt)&&(Ft<-Math.PI?Ft+=At:Ft>Math.PI&&(Ft-=At),Qt<-Math.PI?Qt+=At:Qt>Math.PI&&(Qt-=At),Ft<=Qt?m.theta=Math.max(Ft,Math.min(Qt,m.theta)):m.theta=m.theta>(Ft+Qt)/2?Math.max(Ft,m.theta):Math.min(Qt,m.theta)),m.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,m.phi)),m.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(_,i.dampingFactor):i.target.add(_),i.zoomToCursor&&k||i.object.isOrthographicCamera?m.radius=Ye(m.radius):m.radius=Ye(m.radius*y),pe.setFromSpherical(m),pe.applyQuaternion(he),Be.copy(i.target).add(pe),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(g.theta*=1-i.dampingFactor,g.phi*=1-i.dampingFactor,_.multiplyScalar(1-i.dampingFactor)):(g.set(0,0,0),_.set(0,0,0));let _n=!1;if(i.zoomToCursor&&k){let bn=null;if(i.object instanceof Wr&&i.object.isPerspectiveCamera){const mi=pe.length();bn=Ye(mi*y);const gi=mi-bn;i.object.position.addScaledVector(j,gi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const mi=new $(X.x,X.y,0);mi.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix(),_n=!0;const gi=new $(X.x,X.y,0);gi.unproject(i.object),i.object.position.sub(gi).add(mi),i.object.updateMatrixWorld(),bn=pe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;bn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(bn).add(i.object.position):(i2.origin.copy(i.object.position),i2.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(i2.direction))<Pk?e.lookAt(i.target):(RA.setFromNormalAndCoplanarPoint(i.object.up,i.target),i2.intersectPlane(RA,i.target))))}else i.object instanceof Rc&&i.object.isOrthographicCamera&&(_n=y!==1,_n&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix()));return y=1,k=!1,_n||vt.distanceToSquared(i.object.position)>f||8*(1-at.dot(i.object.quaternion))>f?(i.dispatchEvent(r),vt.copy(i.object.position),at.copy(i.object.quaternion),_n=!1,!0):!1}})(),this.connect=pe=>{i.domElement=pe,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Gt),i.domElement.addEventListener("pointerdown",on),i.domElement.addEventListener("pointercancel",q),i.domElement.addEventListener("wheel",Qe)},this.dispose=()=>{var pe,Re,yt,he,vt,at;i.domElement&&(i.domElement.style.touchAction="auto"),(pe=i.domElement)==null||pe.removeEventListener("contextmenu",Gt),(Re=i.domElement)==null||Re.removeEventListener("pointerdown",on),(yt=i.domElement)==null||yt.removeEventListener("pointercancel",q),(he=i.domElement)==null||he.removeEventListener("wheel",Qe),(vt=i.domElement)==null||vt.ownerDocument.removeEventListener("pointermove",re),(at=i.domElement)==null||at.ownerDocument.removeEventListener("pointerup",q),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",He)};const i=this,r={type:"change"},a={type:"start"},s={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const f=1e-6,m=new jS,g=new jS;let y=1;const _=new $,x=new it,w=new it,T=new it,S=new it,O=new it,L=new it,C=new it,P=new it,B=new it,j=new $,X=new it;let k=!1;const U=[],K={};function ye(){return 2*Math.PI/60/60*i.autoRotateSpeed}function ue(){return Math.pow(.95,i.zoomSpeed)}function we(pe){i.reverseOrbit||i.reverseHorizontalOrbit?g.theta+=pe:g.theta-=pe}function Ae(pe){i.reverseOrbit||i.reverseVerticalOrbit?g.phi+=pe:g.phi-=pe}const Z=(()=>{const pe=new $;return function(yt,he){pe.setFromMatrixColumn(he,0),pe.multiplyScalar(-yt),_.add(pe)}})(),le=(()=>{const pe=new $;return function(yt,he){i.screenSpacePanning===!0?pe.setFromMatrixColumn(he,1):(pe.setFromMatrixColumn(he,0),pe.crossVectors(i.object.up,pe)),pe.multiplyScalar(yt),_.add(pe)}})(),de=(()=>{const pe=new $;return function(yt,he){const vt=i.domElement;if(vt&&i.object instanceof Wr&&i.object.isPerspectiveCamera){const at=i.object.position;pe.copy(at).sub(i.target);let At=pe.length();At*=Math.tan(i.object.fov/2*Math.PI/180),Z(2*yt*At/vt.clientHeight,i.object.matrix),le(2*he*At/vt.clientHeight,i.object.matrix)}else vt&&i.object instanceof Rc&&i.object.isOrthographicCamera?(Z(yt*(i.object.right-i.object.left)/i.object.zoom/vt.clientWidth,i.object.matrix),le(he*(i.object.top-i.object.bottom)/i.object.zoom/vt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Le(pe){i.object instanceof Wr&&i.object.isPerspectiveCamera||i.object instanceof Rc&&i.object.isOrthographicCamera?y=pe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ee(pe){Le(y/pe)}function be(pe){Le(y*pe)}function Ge(pe){if(!i.zoomToCursor||!i.domElement)return;k=!0;const Re=i.domElement.getBoundingClientRect(),yt=pe.clientX-Re.left,he=pe.clientY-Re.top,vt=Re.width,at=Re.height;X.x=yt/vt*2-1,X.y=-(he/at)*2+1,j.set(X.x,X.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ye(pe){return Math.max(i.minDistance,Math.min(i.maxDistance,pe))}function xe(pe){x.set(pe.clientX,pe.clientY)}function Ke(pe){Ge(pe),C.set(pe.clientX,pe.clientY)}function et(pe){S.set(pe.clientX,pe.clientY)}function xt(pe){w.set(pe.clientX,pe.clientY),T.subVectors(w,x).multiplyScalar(i.rotateSpeed);const Re=i.domElement;Re&&(we(2*Math.PI*T.x/Re.clientHeight),Ae(2*Math.PI*T.y/Re.clientHeight)),x.copy(w),i.update()}function bt(pe){P.set(pe.clientX,pe.clientY),B.subVectors(P,C),B.y>0?ee(ue()):B.y<0&&be(ue()),C.copy(P),i.update()}function Kt(pe){O.set(pe.clientX,pe.clientY),L.subVectors(O,S).multiplyScalar(i.panSpeed),de(L.x,L.y),S.copy(O),i.update()}function Wt(pe){Ge(pe),pe.deltaY<0?be(ue()):pe.deltaY>0&&ee(ue()),i.update()}function tn(pe){let Re=!1;switch(pe.code){case i.keys.UP:de(0,i.keyPanSpeed),Re=!0;break;case i.keys.BOTTOM:de(0,-i.keyPanSpeed),Re=!0;break;case i.keys.LEFT:de(i.keyPanSpeed,0),Re=!0;break;case i.keys.RIGHT:de(-i.keyPanSpeed,0),Re=!0;break}Re&&(pe.preventDefault(),i.update())}function un(){if(U.length==1)x.set(U[0].pageX,U[0].pageY);else{const pe=.5*(U[0].pageX+U[1].pageX),Re=.5*(U[0].pageY+U[1].pageY);x.set(pe,Re)}}function Jt(){if(U.length==1)S.set(U[0].pageX,U[0].pageY);else{const pe=.5*(U[0].pageX+U[1].pageX),Re=.5*(U[0].pageY+U[1].pageY);S.set(pe,Re)}}function ie(){const pe=U[0].pageX-U[1].pageX,Re=U[0].pageY-U[1].pageY,yt=Math.sqrt(pe*pe+Re*Re);C.set(0,yt)}function _t(){i.enableZoom&&ie(),i.enablePan&&Jt()}function ut(){i.enableZoom&&ie(),i.enableRotate&&un()}function pt(pe){if(U.length==1)w.set(pe.pageX,pe.pageY);else{const yt=Ct(pe),he=.5*(pe.pageX+yt.x),vt=.5*(pe.pageY+yt.y);w.set(he,vt)}T.subVectors(w,x).multiplyScalar(i.rotateSpeed);const Re=i.domElement;Re&&(we(2*Math.PI*T.x/Re.clientHeight),Ae(2*Math.PI*T.y/Re.clientHeight)),x.copy(w)}function Ze(pe){if(U.length==1)O.set(pe.pageX,pe.pageY);else{const Re=Ct(pe),yt=.5*(pe.pageX+Re.x),he=.5*(pe.pageY+Re.y);O.set(yt,he)}L.subVectors(O,S).multiplyScalar(i.panSpeed),de(L.x,L.y),S.copy(O)}function Ot(pe){const Re=Ct(pe),yt=pe.pageX-Re.x,he=pe.pageY-Re.y,vt=Math.sqrt(yt*yt+he*he);P.set(0,vt),B.set(0,Math.pow(P.y/C.y,i.zoomSpeed)),ee(B.y),C.copy(P)}function ft(pe){i.enableZoom&&Ot(pe),i.enablePan&&Ze(pe)}function St(pe){i.enableZoom&&Ot(pe),i.enableRotate&&pt(pe)}function on(pe){var Re,yt;i.enabled!==!1&&(U.length===0&&((Re=i.domElement)==null||Re.ownerDocument.addEventListener("pointermove",re),(yt=i.domElement)==null||yt.ownerDocument.addEventListener("pointerup",q)),$t(pe),pe.pointerType==="touch"?Ut(pe):Ce(pe))}function re(pe){i.enabled!==!1&&(pe.pointerType==="touch"?wt(pe):We(pe))}function q(pe){var Re,yt,he;rt(pe),U.length===0&&((Re=i.domElement)==null||Re.releasePointerCapture(pe.pointerId),(yt=i.domElement)==null||yt.ownerDocument.removeEventListener("pointermove",re),(he=i.domElement)==null||he.ownerDocument.removeEventListener("pointerup",q)),i.dispatchEvent(s),u=l.NONE}function Ce(pe){let Re;switch(pe.button){case 0:Re=i.mouseButtons.LEFT;break;case 1:Re=i.mouseButtons.MIDDLE;break;case 2:Re=i.mouseButtons.RIGHT;break;default:Re=-1}switch(Re){case dd.DOLLY:if(i.enableZoom===!1)return;Ke(pe),u=l.DOLLY;break;case dd.ROTATE:if(pe.ctrlKey||pe.metaKey||pe.shiftKey){if(i.enablePan===!1)return;et(pe),u=l.PAN}else{if(i.enableRotate===!1)return;xe(pe),u=l.ROTATE}break;case dd.PAN:if(pe.ctrlKey||pe.metaKey||pe.shiftKey){if(i.enableRotate===!1)return;xe(pe),u=l.ROTATE}else{if(i.enablePan===!1)return;et(pe),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(a)}function We(pe){if(i.enabled!==!1)switch(u){case l.ROTATE:if(i.enableRotate===!1)return;xt(pe);break;case l.DOLLY:if(i.enableZoom===!1)return;bt(pe);break;case l.PAN:if(i.enablePan===!1)return;Kt(pe);break}}function Qe(pe){i.enabled===!1||i.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(pe.preventDefault(),i.dispatchEvent(a),Wt(pe),i.dispatchEvent(s))}function He(pe){i.enabled===!1||i.enablePan===!1||tn(pe)}function Ut(pe){switch(Tt(pe),U.length){case 1:switch(i.touches.ONE){case pd.ROTATE:if(i.enableRotate===!1)return;un(),u=l.TOUCH_ROTATE;break;case pd.PAN:if(i.enablePan===!1)return;Jt(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(i.touches.TWO){case pd.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;_t(),u=l.TOUCH_DOLLY_PAN;break;case pd.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ut(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(a)}function wt(pe){switch(Tt(pe),u){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;pt(pe),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;Ze(pe),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ft(pe),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;St(pe),i.update();break;default:u=l.NONE}}function Gt(pe){i.enabled!==!1&&pe.preventDefault()}function $t(pe){U.push(pe)}function rt(pe){delete K[pe.pointerId];for(let Re=0;Re<U.length;Re++)if(U[Re].pointerId==pe.pointerId){U.splice(Re,1);return}}function Tt(pe){let Re=K[pe.pointerId];Re===void 0&&(Re=new it,K[pe.pointerId]=Re),Re.set(pe.pageX,pe.pageY)}function Ct(pe){const Re=pe.pointerId===U[0].pointerId?U[1]:U[0];return K[Re.pointerId]}this.dollyIn=(pe=ue())=>{be(pe),i.update()},this.dollyOut=(pe=ue())=>{ee(pe),i.update()},this.getScale=()=>y,this.setScale=pe=>{Le(pe),i.update()},this.getZoomScale=()=>ue(),t!==void 0&&this.connect(t),this.update()}};function zk(n,e,t){const i=So(_=>_.size),r=So(_=>_.viewport),a=typeof n=="number"?n:i.width*r.dpr,s=i.height*r.dpr,l=(typeof n=="number"?t:n)||{},{samples:u=0,depth:f,...m}=l,g=f??l.depthBuffer,y=jt.useMemo(()=>{const _=new Hl(a,s,{minFilter:Tr,magFilter:Tr,type:$d,...m});return g&&(_.depthTexture=new p3(a,s,Ls)),_.samples=u,_},[]);return jt.useLayoutEffect(()=>{y.setSize(a,s),u&&(y.samples=u)},[u,y,a,s]),jt.useEffect(()=>()=>y.dispose(),[]),y}const Fk=n=>typeof n=="function",kk=jt.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...a},s)=>{const l=So(({set:T})=>T),u=So(({camera:T})=>T),f=So(({size:T})=>T),m=jt.useRef(null);jt.useImperativeHandle(s,()=>m.current,[]);const g=jt.useRef(null),y=zk(e);jt.useLayoutEffect(()=>{a.manual||(m.current.aspect=f.width/f.height)},[f,a]),jt.useLayoutEffect(()=>{m.current.updateProjectionMatrix()});let _=0,x=null;const w=Fk(r);return KE(T=>{w&&(t===1/0||_<t)&&(g.current.visible=!1,T.gl.setRenderTarget(y),x=T.scene.background,n&&(T.scene.background=n),T.gl.render(T.scene,m.current),T.scene.background=x,T.gl.setRenderTarget(null),g.current.visible=!0,_++)}),jt.useLayoutEffect(()=>{if(i){const T=u;return l(()=>({camera:m.current})),()=>l(()=>({camera:T}))}},[m,i,l]),jt.createElement(jt.Fragment,null,jt.createElement("perspectiveCamera",R_({ref:m},a),!w&&r),jt.createElement("group",{ref:g},w&&r(y.texture)))}),Hk=jt.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:s,onStart:l,onEnd:u,...f},m)=>{const g=So(B=>B.invalidate),y=So(B=>B.camera),_=So(B=>B.gl),x=So(B=>B.events),w=So(B=>B.setEvents),T=So(B=>B.set),S=So(B=>B.get),O=So(B=>B.performance),L=e||y,C=i||x.connected||_.domElement,P=jt.useMemo(()=>new Bk(L),[L]);return KE(()=>{P.enabled&&P.update()},-1),jt.useEffect(()=>(a&&P.connect(a===!0?C:a),P.connect(C),()=>void P.dispose()),[a,C,t,P,g]),jt.useEffect(()=>{const B=k=>{g(),t&&O.regress(),s&&s(k)},j=k=>{l&&l(k)},X=k=>{u&&u(k)};return P.addEventListener("change",B),P.addEventListener("start",j),P.addEventListener("end",X),()=>{P.removeEventListener("start",j),P.removeEventListener("end",X),P.removeEventListener("change",B)}},[s,l,u,P,g,w]),jt.useEffect(()=>{if(n){const B=S().controls;return T({controls:P}),()=>T({controls:B})}},[n,P]),jt.createElement("primitive",R_({ref:m,object:P,enableDamping:r},f))});function CA(n,e){if(e===AC)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===__||e===dE){let t=n.getIndex();if(t===null){const s=[],l=n.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)s.push(u);n.setIndex(s),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===__)for(let s=1;s<=i;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=n.clone();return a.setIndex(r),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class Vk extends Bs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new qk(t)}),this.register(function(t){return new $k(t)}),this.register(function(t){return new iH(t)}),this.register(function(t){return new rH(t)}),this.register(function(t){return new aH(t)}),this.register(function(t){return new Kk(t)}),this.register(function(t){return new Zk(t)}),this.register(function(t){return new Qk(t)}),this.register(function(t){return new Jk(t)}),this.register(function(t){return new Xk(t)}),this.register(function(t){return new eH(t)}),this.register(function(t){return new Yk(t)}),this.register(function(t){return new nH(t)}),this.register(function(t){return new tH(t)}),this.register(function(t){return new jk(t)}),this.register(function(t){return new sH(t)}),this.register(function(t){return new oH(t)})}load(e,t,i,r){const a=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const f=jf.extractUrlBase(e);s=jf.resolveURL(f,this.path)}else s=jf.extractUrlBase(e);this.manager.itemStart(e);const l=function(f){r?r(f):console.error(f),a.manager.itemError(e),a.manager.itemEnd(e)},u=new Vl(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){try{a.parse(f,s,function(m){t(m),a.manager.itemEnd(e)},l)}catch(m){l(m)}},i,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let a;const s={},l={},u=new TextDecoder;if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(u.decode(new Uint8Array(e,0,4))===c6){try{s[hi.KHR_BINARY_GLTF]=new lH(e)}catch(g){r&&r(g);return}a=JSON.parse(s[hi.KHR_BINARY_GLTF].content)}else a=JSON.parse(u.decode(e));else a=e;if(a.asset===void 0||a.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const f=new xH(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(let m=0;m<this.pluginCallbacks.length;m++){const g=this.pluginCallbacks[m](f);g.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[g.name]=g,s[g.name]=!0}if(a.extensionsUsed)for(let m=0;m<a.extensionsUsed.length;++m){const g=a.extensionsUsed[m],y=a.extensionsRequired||[];switch(g){case hi.KHR_MATERIALS_UNLIT:s[g]=new Wk;break;case hi.KHR_DRACO_MESH_COMPRESSION:s[g]=new uH(a,this.dracoLoader);break;case hi.KHR_TEXTURE_TRANSFORM:s[g]=new cH;break;case hi.KHR_MESH_QUANTIZATION:s[g]=new fH;break;default:y.indexOf(g)>=0&&l[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}f.setExtensions(s),f.setPlugins(l),f.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,a){i.parse(e,t,r,a)})}}function Gk(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const hi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class jk{constructor(e){this.parser=e,this.name=hi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const a=t[i];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const a=t.json,u=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let f;const m=new Pt(16777215);u.color!==void 0&&m.setRGB(u.color[0],u.color[1],u.color[2],$a);const g=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new kE(m),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new FE(m),f.distance=g;break;case"spot":f=new zE(m),f.distance=g,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),yc(f,u),u.intensity!==void 0&&(f.intensity=u.intensity),f.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(f),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,a=i.json.nodes[e],l=(a.extensions&&a.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return i._getNodeRef(t.cache,l,u)})}}class Wk{constructor(){this.name=hi.KHR_MATERIALS_UNLIT}getMaterialType(){return Is}extendParams(e,t,i){const r=[];e.color=new Pt(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const s=a.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],$a),e.opacity=s[3]}a.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",a.baseColorTexture,Zr))}return Promise.all(r)}}class Xk{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}}class qk{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&a.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&a.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(a.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const l=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new it(l,l)}return Promise.all(a)}}class $k{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return t.dispersion=a.dispersion!==void 0?a.dispersion:0,Promise.resolve()}}class Yk{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&a.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&a.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(a)}}class Kk{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new Pt(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){const l=s.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],$a)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&a.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,Zr)),s.sheenRoughnessTexture!==void 0&&a.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(a)}}class Zk{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&a.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(a)}}class Qk{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&a.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const l=s.attenuationColor||[1,1,1];return t.attenuationColor=new Pt().setRGB(l[0],l[1],l[2],$a),Promise.all(a)}}class Jk{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class eH{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&a.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));const l=s.specularColorFactor||[1,1,1];return t.specularColor=new Pt().setRGB(l[0],l[1],l[2],$a),s.specularColorTexture!==void 0&&a.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,Zr)),Promise.all(a)}}class tH{constructor(e){this.parser=e,this.name=hi.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&a.push(i.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(a)}}class nH{constructor(e){this.parser=e,this.name=hi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&a.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(a)}}class iH{constructor(e){this.parser=e,this.name=hi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const a=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,s)}}class rH{constructor(e){this.parser=e,this.name=hi.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;const s=a.extensions[t],l=r.images[s.source];let u=i.textureLoader;if(l.uri){const f=i.options.manager.getHandler(l.uri);f!==null&&(u=f)}return i.loadTextureImage(e,s.source,u)}}class aH{constructor(e){this.parser=e,this.name=hi.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;const s=a.extensions[t],l=r.images[s.source];let u=i.textureLoader;if(l.uri){const f=i.options.manager.getHandler(l.uri);f!==null&&(u=f)}return i.loadTextureImage(e,s.source,u)}}class sH{constructor(e){this.name=hi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(l){const u=r.byteOffset||0,f=r.byteLength||0,m=r.count,g=r.byteStride,y=new Uint8Array(l,u,f);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(m,g,y,r.mode,r.filter).then(function(_){return _.buffer}):s.ready.then(function(){const _=new ArrayBuffer(m*g);return s.decodeGltfBuffer(new Uint8Array(_),m,g,y,r.mode,r.filter),_})})}else return null}}class oH{constructor(e){this.name=hi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const f of r.primitives)if(f.mode!==Ko.TRIANGLES&&f.mode!==Ko.TRIANGLE_STRIP&&f.mode!==Ko.TRIANGLE_FAN&&f.mode!==void 0)return null;const s=i.extensions[this.name].attributes,l=[],u={};for(const f in s)l.push(this.parser.getDependency("accessor",s[f]).then(m=>(u[f]=m,u[f])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(f=>{const m=f.pop(),g=m.isGroup?m.children:[m],y=f[0].count,_=[];for(const x of g){const w=new sn,T=new $,S=new An,O=new $(1,1,1),L=new SE(x.geometry,x.material,y);for(let C=0;C<y;C++)u.TRANSLATION&&T.fromBufferAttribute(u.TRANSLATION,C),u.ROTATION&&S.fromBufferAttribute(u.ROTATION,C),u.SCALE&&O.fromBufferAttribute(u.SCALE,C),L.setMatrixAt(C,w.compose(T,S,O));for(const C in u)if(C==="_COLOR_0"){const P=u[C];L.instanceColor=new Ld(P.array,P.itemSize,P.normalized)}else C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&x.geometry.setAttribute(C,u[C]);ii.prototype.copy.call(L,x),this.parser.assignFinalMaterial(L),_.push(L)}return m.isGroup?(m.clear(),m.add(..._),m):_[0]}))}}const c6="glTF",I0=12,OA={JSON:1313821514,BIN:5130562};class lH{constructor(e){this.name=hi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,I0),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==c6)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-I0,a=new DataView(e,I0);let s=0;for(;s<r;){const l=a.getUint32(s,!0);s+=4;const u=a.getUint32(s,!0);if(s+=4,u===OA.JSON){const f=new Uint8Array(e,I0+s,l);this.content=i.decode(f)}else if(u===OA.BIN){const f=I0+s;this.body=e.slice(f,f+l)}s+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class uH{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=hi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,l={},u={},f={};for(const m in s){const g=eT[m]||m.toLowerCase();l[g]=s[m]}for(const m in e.attributes){const g=eT[m]||m.toLowerCase();if(s[m]!==void 0){const y=i.accessors[e.attributes[m]],_=Lm[y.componentType];f[g]=_.name,u[g]=y.normalized===!0}}return t.getDependency("bufferView",a).then(function(m){return new Promise(function(g,y){r.decodeDracoFile(m,function(_){for(const x in _.attributes){const w=_.attributes[x],T=u[x];T!==void 0&&(w.normalized=T)}g(_)},l,f,$a,y)})})}}class cH{constructor(){this.name=hi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class fH{constructor(){this.name=hi.KHR_MESH_QUANTIZATION}}class f6 extends sg{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r*3+r;for(let s=0;s!==r;s++)t[s]=i[a+s];return t}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,l=this.valueSize,u=l*2,f=l*3,m=r-t,g=(i-t)/m,y=g*g,_=y*g,x=e*f,w=x-f,T=-2*_+3*y,S=_-y,O=1-T,L=S-y+g;for(let C=0;C!==l;C++){const P=s[w+C+l],B=s[w+C+u]*m,j=s[x+C+l],X=s[x+C]*m;a[C]=O*P+L*B+T*j+S*X}return a}}const hH=new An;class dH extends f6{interpolate_(e,t,i,r){const a=super.interpolate_(e,t,i,r);return hH.fromArray(a).normalize().toArray(a),a}}const Ko={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Lm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},DA={9728:_a,9729:Tr,9984:K_,9985:Cm,9986:bd,9987:Jo},LA={33071:Mo,33648:Bm,10497:Kf},Bx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},eT={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Pf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},pH={CUBICSPLINE:void 0,LINEAR:Gm,STEP:Vm},zx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function mH(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new F1({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Bu})),n.DefaultMaterial}function od(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function yc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function gH(n,e,t){let i=!1,r=!1,a=!1;for(let f=0,m=e.length;f<m;f++){const g=e[f];if(g.POSITION!==void 0&&(i=!0),g.NORMAL!==void 0&&(r=!0),g.COLOR_0!==void 0&&(a=!0),i&&r&&a)break}if(!i&&!r&&!a)return Promise.resolve(n);const s=[],l=[],u=[];for(let f=0,m=e.length;f<m;f++){const g=e[f];if(i){const y=g.POSITION!==void 0?t.getDependency("accessor",g.POSITION):n.attributes.position;s.push(y)}if(r){const y=g.NORMAL!==void 0?t.getDependency("accessor",g.NORMAL):n.attributes.normal;l.push(y)}if(a){const y=g.COLOR_0!==void 0?t.getDependency("accessor",g.COLOR_0):n.attributes.color;u.push(y)}}return Promise.all([Promise.all(s),Promise.all(l),Promise.all(u)]).then(function(f){const m=f[0],g=f[1],y=f[2];return i&&(n.morphAttributes.position=m),r&&(n.morphAttributes.normal=g),a&&(n.morphAttributes.color=y),n.morphTargetsRelative=!0,n})}function yH(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function vH(n){let e;const t=n.extensions&&n.extensions[hi.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Fx(t.attributes):e=n.indices+":"+Fx(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+Fx(n.targets[i]);return e}function Fx(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function tT(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function _H(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const bH=new sn;class xH{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Gk,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,a=!1,s=-1;if(typeof navigator<"u"){const l=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(l)===!0;const u=l.match(/Version\/(\d+)/);r=i&&u?parseInt(u[1],10):-1,a=l.indexOf("Firefox")>-1,s=a?l.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||a&&s<98?this.textureLoader=new S5(this.options.manager):this.textureLoader=new C5(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Vl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){const l={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return od(a,l,r),yc(l,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,a=t.length;r<a;r++){const s=t[r].joints;for(let l=0,u=s.length;l<u;l++)e[s[l]].isBone=!0}for(let r=0,a=e.length;r<a;r++){const s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),a=(s,l)=>{const u=this.associations.get(s);u!=null&&this.associations.set(l,u);for(const[f,m]of s.children.entries())a(m,l.children[f])};return a(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const a=e(t[r]);a&&i.push(a)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":r=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(a,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[hi.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(a,s){i.load(jf.resolveURL(t.uri,r.path),a,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,a=t.byteOffset||0;return i.slice(a,a+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const s=Bx[r.type],l=Lm[r.componentType],u=r.normalized===!0,f=new l(r.count*s);return Promise.resolve(new Gn(f,s,u))}const a=[];return r.bufferView!==void 0?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),r.sparse!==void 0&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(s){const l=s[0],u=Bx[r.type],f=Lm[r.componentType],m=f.BYTES_PER_ELEMENT,g=m*u,y=r.byteOffset||0,_=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,x=r.normalized===!0;let w,T;if(_&&_!==g){const S=Math.floor(y/_),O="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+S+":"+r.count;let L=t.cache.get(O);L||(w=new f(l,S*_,r.count*_/m),L=new I1(w,_/m),t.cache.add(O,L)),T=new Zf(L,u,y%_/m,x)}else l===null?w=new f(r.count*u):w=new f(l,y,r.count*u),T=new Gn(w,u,x);if(r.sparse!==void 0){const S=Bx.SCALAR,O=Lm[r.sparse.indices.componentType],L=r.sparse.indices.byteOffset||0,C=r.sparse.values.byteOffset||0,P=new O(s[1],L,r.sparse.count*S),B=new f(s[2],C,r.sparse.count*u);l!==null&&(T=new Gn(T.array.slice(),T.itemSize,T.normalized)),T.normalized=!1;for(let j=0,X=P.length;j<X;j++){const k=P[j];if(T.setX(k,B[j*u]),u>=2&&T.setY(k,B[j*u+1]),u>=3&&T.setZ(k,B[j*u+2]),u>=4&&T.setW(k,B[j*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}T.normalized=x}return T})}loadTexture(e){const t=this.json,i=this.options,a=t.textures[e].source,s=t.images[a];let l=this.textureLoader;if(s.uri){const u=i.manager.getHandler(s.uri);u!==null&&(l=u)}return this.loadTextureImage(e,a,l)}loadTextureImage(e,t,i){const r=this,a=this.json,s=a.textures[e],l=a.images[t],u=(l.uri||l.bufferView)+":"+s.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(t,i).then(function(m){m.flipY=!1,m.name=s.name||l.name||"",m.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(m.name=l.uri);const y=(a.samplers||{})[s.sampler]||{};return m.magFilter=DA[y.magFilter]||Tr,m.minFilter=DA[y.minFilter]||Jo,m.wrapS=LA[y.wrapS]||Kf,m.wrapT=LA[y.wrapT]||Kf,m.generateMipmaps=!m.isCompressedTexture&&m.minFilter!==_a&&m.minFilter!==Tr,r.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(e,t){const i=this,r=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(g=>g.clone());const s=r.images[e],l=self.URL||self.webkitURL;let u=s.uri||"",f=!1;if(s.bufferView!==void 0)u=i.getDependency("bufferView",s.bufferView).then(function(g){f=!0;const y=new Blob([g],{type:s.mimeType});return u=l.createObjectURL(y),u});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(u).then(function(g){return new Promise(function(y,_){let x=y;t.isImageBitmapLoader===!0&&(x=function(w){const T=new Mr(w);T.needsUpdate=!0,y(T)}),t.load(jf.resolveURL(g,a.path),x,void 0,_)})}).then(function(g){return f===!0&&l.revokeObjectURL(u),yc(g,s),g.userData.mimeType=s.mimeType||_H(s.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),g});return this.sourceCache[e]=m,m}assignTexture(e,t,i,r){const a=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),a.extensions[hi.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[hi.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=a.associations.get(s);s=a.extensions[hi.KHR_TEXTURE_TRANSFORM].extendTexture(s,l),a.associations.set(s,u)}}return r!==void 0&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+i.uuid;let u=this.cache.get(l);u||(u=new h3,aa.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(l,u)),i=u}else if(e.isLine){const l="LineBasicMaterial:"+i.uuid;let u=this.cache.get(l);u||(u=new sa,aa.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(l,u)),i=u}if(r||a||s){let l="ClonedMaterial:"+i.uuid+":";r&&(l+="derivative-tangents:"),a&&(l+="vertex-colors:"),s&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=i.clone(),a&&(u.vertexColors=!0),s&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(i))),i=u}e.material=i}getMaterialType(){return F1}loadMaterial(e){const t=this,i=this.json,r=this.extensions,a=i.materials[e];let s;const l={},u=a.extensions||{},f=[];if(u[hi.KHR_MATERIALS_UNLIT]){const g=r[hi.KHR_MATERIALS_UNLIT];s=g.getMaterialType(),f.push(g.extendParams(l,a,t))}else{const g=a.pbrMetallicRoughness||{};if(l.color=new Pt(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const y=g.baseColorFactor;l.color.setRGB(y[0],y[1],y[2],$a),l.opacity=y[3]}g.baseColorTexture!==void 0&&f.push(t.assignTexture(l,"map",g.baseColorTexture,Zr)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),f.push(t.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),s=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,l)})))}a.doubleSided===!0&&(l.side=Eo);const m=a.alphaMode||zx.OPAQUE;if(m===zx.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===zx.MASK&&(l.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&s!==Is&&(f.push(t.assignTexture(l,"normalMap",a.normalTexture)),l.normalScale=new it(1,1),a.normalTexture.scale!==void 0)){const g=a.normalTexture.scale;l.normalScale.set(g,g)}if(a.occlusionTexture!==void 0&&s!==Is&&(f.push(t.assignTexture(l,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&s!==Is){const g=a.emissiveFactor;l.emissive=new Pt().setRGB(g[0],g[1],g[2],$a)}return a.emissiveTexture!==void 0&&s!==Is&&f.push(t.assignTexture(l,"emissiveMap",a.emissiveTexture,Zr)),Promise.all(f).then(function(){const g=new s(l);return a.name&&(g.name=a.name),yc(g,a),t.associations.set(g,{materials:e}),a.extensions&&od(r,g,a),g})}createUniqueName(e){const t=Ri.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function a(l){return i[hi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return IA(u,l,t)})}const s=[];for(let l=0,u=e.length;l<u;l++){const f=e[l],m=vH(f),g=r[m];if(g)s.push(g.promise);else{let y;f.extensions&&f.extensions[hi.KHR_DRACO_MESH_COMPRESSION]?y=a(f):y=IA(new Nn,f,t),r[m]={primitive:f,promise:y},s.push(y)}}return Promise.all(s)}loadMesh(e){const t=this,i=this.json,r=this.extensions,a=i.meshes[e],s=a.primitives,l=[];for(let u=0,f=s.length;u<f;u++){const m=s[u].material===void 0?mH(this.cache):this.getDependency("material",s[u].material);l.push(m)}return l.push(t.loadGeometries(s)),Promise.all(l).then(function(u){const f=u.slice(0,u.length-1),m=u[u.length-1],g=[];for(let _=0,x=m.length;_<x;_++){const w=m[_],T=s[_];let S;const O=f[_];if(T.mode===Ko.TRIANGLES||T.mode===Ko.TRIANGLE_STRIP||T.mode===Ko.TRIANGLE_FAN||T.mode===void 0)S=a.isSkinnedMesh===!0?new u3(w,O):new Br(w,O),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),T.mode===Ko.TRIANGLE_STRIP?S.geometry=CA(S.geometry,dE):T.mode===Ko.TRIANGLE_FAN&&(S.geometry=CA(S.geometry,__));else if(T.mode===Ko.LINES)S=new ro(w,O);else if(T.mode===Ko.LINE_STRIP)S=new zu(w,O);else if(T.mode===Ko.LINE_LOOP)S=new TE(w,O);else if(T.mode===Ko.POINTS)S=new EE(w,O);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+T.mode);Object.keys(S.geometry.morphAttributes).length>0&&yH(S,a),S.name=t.createUniqueName(a.name||"mesh_"+e),yc(S,a),T.extensions&&od(r,S,T),t.assignFinalMaterial(S),g.push(S)}for(let _=0,x=g.length;_<x;_++)t.associations.set(g[_],{meshes:e,primitives:_});if(g.length===1)return a.extensions&&od(r,g[0],a),g[0];const y=new Us;a.extensions&&od(r,y,a),t.associations.set(y,{meshes:e});for(let _=0,x=g.length;_<x;_++)y.add(g[_]);return y})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Wr(Fi.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Rc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),yc(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,a=t.joints.length;r<a;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const a=r.pop(),s=r,l=[],u=[];for(let f=0,m=s.length;f<m;f++){const g=s[f];if(g){l.push(g);const y=new sn;a!==null&&y.fromArray(a.array,f*16),u.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new ig(l,u)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],a=r.name?r.name:"animation_"+e,s=[],l=[],u=[],f=[],m=[];for(let g=0,y=r.channels.length;g<y;g++){const _=r.channels[g],x=r.samplers[_.sampler],w=_.target,T=w.node,S=r.parameters!==void 0?r.parameters[x.input]:x.input,O=r.parameters!==void 0?r.parameters[x.output]:x.output;w.node!==void 0&&(s.push(this.getDependency("node",T)),l.push(this.getDependency("accessor",S)),u.push(this.getDependency("accessor",O)),f.push(x),m.push(w))}return Promise.all([Promise.all(s),Promise.all(l),Promise.all(u),Promise.all(f),Promise.all(m)]).then(function(g){const y=g[0],_=g[1],x=g[2],w=g[3],T=g[4],S=[];for(let O=0,L=y.length;O<L;O++){const C=y[O],P=_[O],B=x[O],j=w[O],X=T[O];if(C===void 0)continue;C.updateMatrix&&C.updateMatrix();const k=i._createAnimationTracks(C,P,B,j,X);if(k)for(let U=0;U<k.length;U++)S.push(k[U])}return new $m(a,void 0,S)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(a){const s=i._getNodeRef(i.meshCache,r.mesh,a);return r.weights!==void 0&&s.traverse(function(l){if(l.isMesh)for(let u=0,f=r.weights.length;u<f;u++)l.morphTargetInfluences[u]=r.weights[u]}),s})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],a=i._loadNodeShallow(e),s=[],l=r.children||[];for(let f=0,m=l.length;f<m;f++)s.push(i.getDependency("node",l[f]));const u=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([a,Promise.all(s),u]).then(function(f){const m=f[0],g=f[1],y=f[2];y!==null&&m.traverse(function(_){_.isSkinnedMesh&&_.bind(y,bH)});for(let _=0,x=g.length;_<x;_++)m.add(g[_]);return m})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=t.nodes[e],s=a.name?r.createUniqueName(a.name):"",l=[],u=r._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return u&&l.push(u),a.camera!==void 0&&l.push(r.getDependency("camera",a.camera).then(function(f){return r._getNodeRef(r.cameraCache,a.camera,f)})),r._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){l.push(f)}),this.nodeCache[e]=Promise.all(l).then(function(f){let m;if(a.isBone===!0?m=new c3:f.length>1?m=new Us:f.length===1?m=f[0]:m=new ii,m!==f[0])for(let g=0,y=f.length;g<y;g++)m.add(f[g]);if(a.name&&(m.userData.name=a.name,m.name=s),yc(m,a),a.extensions&&od(i,m,a),a.matrix!==void 0){const g=new sn;g.fromArray(a.matrix),m.applyMatrix4(g)}else a.translation!==void 0&&m.position.fromArray(a.translation),a.rotation!==void 0&&m.quaternion.fromArray(a.rotation),a.scale!==void 0&&m.scale.fromArray(a.scale);if(!r.associations.has(m))r.associations.set(m,{});else if(a.mesh!==void 0&&r.meshCache.refs[a.mesh]>1){const g=r.associations.get(m);r.associations.set(m,{...g})}return r.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,a=new Us;i.name&&(a.name=r.createUniqueName(i.name)),yc(a,i),i.extensions&&od(t,a,i);const s=i.nodes||[],l=[];for(let u=0,f=s.length;u<f;u++)l.push(r.getDependency("node",s[u]));return Promise.all(l).then(function(u){for(let m=0,g=u.length;m<g;m++)a.add(u[m]);const f=m=>{const g=new Map;for(const[y,_]of r.associations)(y instanceof aa||y instanceof Mr)&&g.set(y,_);return m.traverse(y=>{const _=r.associations.get(y);_!=null&&g.set(y,_)}),g};return r.associations=f(a),a})}_createAnimationTracks(e,t,i,r,a){const s=[],l=e.name?e.name:e.uuid,u=[];Pf[a.path]===Pf.weights?e.traverse(function(y){y.morphTargetInfluences&&u.push(y.name?y.name:y.uuid)}):u.push(l);let f;switch(Pf[a.path]){case Pf.weights:f=Ud;break;case Pf.rotation:f=Pd;break;case Pf.translation:case Pf.scale:f=Bd;break;default:switch(i.itemSize){case 1:f=Ud;break;case 2:case 3:default:f=Bd;break}break}const m=r.interpolation!==void 0?pH[r.interpolation]:Gm,g=this._getArrayFromAccessor(i);for(let y=0,_=u.length;y<_;y++){const x=new f(u[y]+"."+Pf[a.path],t.array,g,m);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(x),s.push(x)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=tT(t.constructor),r=new Float32Array(t.length);for(let a=0,s=t.length;a<s;a++)r[a]=t[a]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Pd?dH:f6;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function SH(n,e,t){const i=e.attributes,r=new qa;if(i.POSITION!==void 0){const l=t.json.accessors[i.POSITION],u=l.min,f=l.max;if(u!==void 0&&f!==void 0){if(r.set(new $(u[0],u[1],u[2]),new $(f[0],f[1],f[2])),l.normalized){const m=tT(Lm[l.componentType]);r.min.multiplyScalar(m),r.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const l=new $,u=new $;for(let f=0,m=a.length;f<m;f++){const g=a[f];if(g.POSITION!==void 0){const y=t.json.accessors[g.POSITION],_=y.min,x=y.max;if(_!==void 0&&x!==void 0){if(u.setX(Math.max(Math.abs(_[0]),Math.abs(x[0]))),u.setY(Math.max(Math.abs(_[1]),Math.abs(x[1]))),u.setZ(Math.max(Math.abs(_[2]),Math.abs(x[2]))),y.normalized){const w=tT(Lm[y.componentType]);u.multiplyScalar(w)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}n.boundingBox=r;const s=new Da;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function IA(n,e,t){const i=e.attributes,r=[];function a(s,l){return t.getDependency("accessor",s).then(function(u){n.setAttribute(l,u)})}for(const s in i){const l=eT[s]||s.toLowerCase();l in n.attributes||r.push(a(i[s],l))}if(e.indices!==void 0&&!n.index){const s=t.getDependency("accessor",e.indices).then(function(l){n.setIndex(l)});r.push(s)}return fi.workingColorSpace!==$a&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${fi.workingColorSpace}" not supported.`),yc(n,e),SH(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?gH(n,e.targets,t):n})}/*!
 * @pixiv/three-vrm v3.4.2
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */var r2=(n,e,t)=>new Promise((i,r)=>{var a=u=>{try{l(t.next(u))}catch(f){r(f)}},s=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(a,s);l((t=t.apply(n,e)).next())}),Bi=(n,e,t)=>new Promise((i,r)=>{var a=u=>{try{l(t.next(u))}catch(f){r(f)}},s=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(a,s);l((t=t.apply(n,e)).next())}),UA=class extends ii{constructor(n){super(),this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${n}`,this.expressionName=n,this.type="VRMExpression",this.visible=!1}get binds(){return this._binds}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.outputWeight?1:0:this.overrideBlink==="blend"?this.outputWeight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.outputWeight?1:0:this.overrideLookAt==="blend"?this.outputWeight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.outputWeight?1:0:this.overrideMouth==="blend"?this.outputWeight:0}get outputWeight(){return this.isBinary?this.weight>.5?1:0:this.weight}addBind(n){this._binds.push(n)}deleteBind(n){const e=this._binds.indexOf(n);e>=0&&this._binds.splice(e,1)}applyWeight(n){var e;let t=this.outputWeight;t*=(e=n?.multiplier)!=null?e:1,this.isBinary&&t<1&&(t=0),this._binds.forEach(i=>i.applyWeight(t))}clearAppliedWeight(){this._binds.forEach(n=>n.clearAppliedWeight())}};function h6(n,e,t){var i,r;const a=n.parser.json,s=(i=a.nodes)==null?void 0:i[e];if(s==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const l=s.mesh;if(l==null)return null;const u=(r=a.meshes)==null?void 0:r[l];if(u==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${l}] of glTF but the mesh doesn't exist`),null;const f=u.primitives.length,m=[];return t.traverse(g=>{m.length<f&&g.isMesh&&m.push(g)}),m}function PA(n,e){return Bi(this,null,function*(){const t=yield n.parser.getDependency("node",e);return h6(n,e,t)})}function BA(n){return Bi(this,null,function*(){const e=yield n.parser.getDependencies("node"),t=new Map;return e.forEach((i,r)=>{const a=h6(n,r,i);a!=null&&t.set(r,a)}),t})}var nT={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function d6(n){return Math.max(Math.min(n,1),0)}var zA=class p6{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values(nT));return Object.entries(this._expressionMap).forEach(([i,r])=>{t.has(i)&&(e[i]=r)}),e}get customExpressionMap(){const e={},t=new Set(Object.values(nT));return Object.entries(this._expressionMap).forEach(([i,r])=>{t.has(i)||(e[i]=r)}),e}copy(e){return this._expressions.concat().forEach(i=>{this.unregisterExpression(i)}),e._expressions.forEach(i=>{this.registerExpression(i)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new p6().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!=null?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const i=this.getExpression(e);return(t=i?.weight)!=null?t:null}setValue(e,t){const i=this.getExpression(e);i&&(i.weight=d6(t))}resetValues(){this._expressions.forEach(e=>{e.weight=0})}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let i=1;const r=t.expressionName;this.blinkExpressionNames.indexOf(r)!==-1&&(i*=e.blink),this.lookAtExpressionNames.indexOf(r)!==-1&&(i*=e.lookAt),this.mouthExpressionNames.indexOf(r)!==-1&&(i*=e.mouth),t.applyWeight({multiplier:i})})}_calculateWeightMultipliers(){let e=1,t=1,i=1;return this._expressions.forEach(r=>{e-=r.overrideBlinkAmount,t-=r.overrideLookAtAmount,i-=r.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),i=Math.max(0,i),{blink:e,lookAt:t,mouth:i}}},U0={Color:"color",EmissionColor:"emissionColor",ShadeColor:"shadeColor",RimColor:"rimColor",OutlineColor:"outlineColor"},TH={_Color:U0.Color,_EmissionColor:U0.EmissionColor,_ShadeColor:U0.ShadeColor,_RimColor:U0.RimColor,_OutlineColor:U0.OutlineColor},EH=new Pt,m6=class g6{constructor({material:e,type:t,targetValue:i,targetAlpha:r}){this.material=e,this.type=t,this.targetValue=i,this.targetAlpha=r??1;const a=this._initColorBindState(),s=this._initAlphaBindState();this._state={color:a,alpha:s}}applyWeight(e){const{color:t,alpha:i}=this._state;if(t!=null){const{propertyName:r,deltaValue:a}=t,s=this.material[r];s?.add(EH.copy(a).multiplyScalar(e))}if(i!=null){const{propertyName:r,deltaValue:a}=i;this.material[r]!=null&&(this.material[r]+=a*e)}}clearAppliedWeight(){const{color:e,alpha:t}=this._state;if(e!=null){const{propertyName:i,initialValue:r}=e,a=this.material[i];a?.copy(r)}if(t!=null){const{propertyName:i,initialValue:r}=t;this.material[i]!=null&&(this.material[i]=r)}}_initColorBindState(){var e,t,i;const{material:r,type:a,targetValue:s}=this,l=this._getPropertyNameMap(),u=(t=(e=l?.[a])==null?void 0:e[0])!=null?t:null;if(u==null)return console.warn(`Tried to add a material color bind to the material ${(i=r.name)!=null?i:"(no name)"}, the type ${a} but the material or the type is not supported.`),null;const m=r[u].clone(),g=new Pt(s.r-m.r,s.g-m.g,s.b-m.b);return{propertyName:u,initialValue:m,deltaValue:g}}_initAlphaBindState(){var e,t,i;const{material:r,type:a,targetAlpha:s}=this,l=this._getPropertyNameMap(),u=(t=(e=l?.[a])==null?void 0:e[1])!=null?t:null;if(u==null&&s!==1)return console.warn(`Tried to add a material alpha bind to the material ${(i=r.name)!=null?i:"(no name)"}, the type ${a} but the material or the type does not support alpha.`),null;if(u==null)return null;const f=r[u],m=s-f;return{propertyName:u,initialValue:f,deltaValue:m}}_getPropertyNameMap(){var e,t;return(t=(e=Object.entries(g6._propertyNameMapMap).find(([i])=>this.material[i]===!0))==null?void 0:e[1])!=null?t:null}};m6._propertyNameMapMap={isMeshStandardMaterial:{color:["color","opacity"],emissionColor:["emissive",null]},isMeshBasicMaterial:{color:["color","opacity"]},isMToonMaterial:{color:["color","opacity"],emissionColor:["emissive",null],outlineColor:["outlineColorFactor",null],matcapColor:["matcapFactor",null],rimColor:["parametricRimColorFactor",null],shadeColor:["shadeColorFactor",null]}};var FA=m6,kA=class{constructor({primitives:n,index:e,weight:t}){this.primitives=n,this.index=e,this.weight=t}applyWeight(n){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)==null?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]+=this.weight*n)})}clearAppliedWeight(){this.primitives.forEach(n=>{var e;((e=n.morphTargetInfluences)==null?void 0:e[this.index])!=null&&(n.morphTargetInfluences[this.index]=0)})}},HA=new it,y6=class v6{constructor({material:e,scale:t,offset:i}){var r,a;this.material=e,this.scale=t,this.offset=i;const s=(r=Object.entries(v6._propertyNamesMap).find(([l])=>e[l]===!0))==null?void 0:r[1];s==null?(console.warn(`Tried to add a texture transform bind to the material ${(a=e.name)!=null?a:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],s.forEach(l=>{var u;const f=(u=e[l])==null?void 0:u.clone();if(!f)return null;e[l]=f;const m=f.offset.clone(),g=f.repeat.clone(),y=i.clone().sub(m),_=t.clone().sub(g);this._properties.push({name:l,initialOffset:m,deltaOffset:y,initialScale:g,deltaScale:_})}))}applyWeight(e){this._properties.forEach(t=>{const i=this.material[t.name];i!==void 0&&(i.offset.add(HA.copy(t.deltaOffset).multiplyScalar(e)),i.repeat.add(HA.copy(t.deltaScale).multiplyScalar(e)))})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale))})}};y6._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};var VA=y6,MH=new Set(["1.0","1.0-beta"]),_6=class b6{get name(){return"VRMExpressionLoaderPlugin"}constructor(e){this.parser=e}afterRoot(e){return Bi(this,null,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return Bi(this,null,function*(){const t=yield this._v1Import(e);if(t)return t;const i=yield this._v0Import(e);return i||null})}_v1Import(e){return Bi(this,null,function*(){var t,i;const r=this.parser.json;if(!(((t=r.extensionsUsed)==null?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const s=(i=r.extensions)==null?void 0:i.VRMC_vrm;if(!s)return null;const l=s.specVersion;if(!MH.has(l))return console.warn(`VRMExpressionLoaderPlugin: Unknown VRMC_vrm specVersion "${l}"`),null;const u=s.expressions;if(!u)return null;const f=new Set(Object.values(nT)),m=new Map;u.preset!=null&&Object.entries(u.preset).forEach(([y,_])=>{if(_!=null){if(!f.has(y)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${y}" detected. Ignoring the expression`);return}m.set(y,_)}}),u.custom!=null&&Object.entries(u.custom).forEach(([y,_])=>{if(f.has(y)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${y}". Ignoring the expression`);return}m.set(y,_)});const g=new zA;return yield Promise.all(Array.from(m.entries()).map(y=>Bi(this,[y],function*([_,x]){var w,T,S,O,L,C,P;const B=new UA(_);if(e.scene.add(B),B.isBinary=(w=x.isBinary)!=null?w:!1,B.overrideBlink=(T=x.overrideBlink)!=null?T:"none",B.overrideLookAt=(S=x.overrideLookAt)!=null?S:"none",B.overrideMouth=(O=x.overrideMouth)!=null?O:"none",(L=x.morphTargetBinds)==null||L.forEach(j=>Bi(this,null,function*(){var X;if(j.node===void 0||j.index===void 0)return;const k=yield PA(e,j.node),U=j.index;if(!k.every(K=>Array.isArray(K.morphTargetInfluences)&&U<K.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${x.name} attempts to index morph #${U} but not found.`);return}B.addBind(new kA({primitives:k,index:U,weight:(X=j.weight)!=null?X:1}))})),x.materialColorBinds||x.textureTransformBinds){const j=[];e.scene.traverse(X=>{const k=X.material;k&&(Array.isArray(k)?j.push(...k):j.push(k))}),(C=x.materialColorBinds)==null||C.forEach(X=>Bi(this,null,function*(){j.filter(U=>{var K;const ye=(K=this.parser.associations.get(U))==null?void 0:K.materials;return X.material===ye}).forEach(U=>{B.addBind(new FA({material:U,type:X.type,targetValue:new Pt().fromArray(X.targetValue),targetAlpha:X.targetValue[3]}))})})),(P=x.textureTransformBinds)==null||P.forEach(X=>Bi(this,null,function*(){j.filter(U=>{var K;const ye=(K=this.parser.associations.get(U))==null?void 0:K.materials;return X.material===ye}).forEach(U=>{var K,ye;B.addBind(new VA({material:U,offset:new it().fromArray((K=X.offset)!=null?K:[0,0]),scale:new it().fromArray((ye=X.scale)!=null?ye:[1,1])}))})}))}g.registerExpression(B)}))),g})}_v0Import(e){return Bi(this,null,function*(){var t;const i=this.parser.json,r=(t=i.extensions)==null?void 0:t.VRM;if(!r)return null;const a=r.blendShapeMaster;if(!a)return null;const s=new zA,l=a.blendShapeGroups;if(!l)return s;const u=new Set;return yield Promise.all(l.map(f=>Bi(this,null,function*(){var m;const g=f.presetName,y=g!=null&&b6.v0v1PresetNameMap[g]||null,_=y??f.name;if(_==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(u.has(_)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${g} has duplicated entries. Ignoring the expression`);return}u.add(_);const x=new UA(_);e.scene.add(x),x.isBinary=(m=f.isBinary)!=null?m:!1,f.binds&&f.binds.forEach(T=>Bi(this,null,function*(){var S;if(T.mesh===void 0||T.index===void 0)return;const O=[];(S=i.nodes)==null||S.forEach((C,P)=>{C.mesh===T.mesh&&O.push(P)});const L=T.index;yield Promise.all(O.map(C=>Bi(this,null,function*(){var P;const B=yield PA(e,C);if(!B.every(j=>Array.isArray(j.morphTargetInfluences)&&L<j.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${f.name} attempts to index ${L}th morph but not found.`);return}x.addBind(new kA({primitives:B,index:L,weight:.01*((P=T.weight)!=null?P:100)}))})))}));const w=f.materialValues;w&&w.length!==0&&w.forEach(T=>{if(T.materialName===void 0||T.propertyName===void 0||T.targetValue===void 0)return;const S=[];e.scene.traverse(L=>{if(L.material){const C=L.material;Array.isArray(C)?S.push(...C.filter(P=>(P.name===T.materialName||P.name===T.materialName+" (Outline)")&&S.indexOf(P)===-1)):C.name===T.materialName&&S.indexOf(C)===-1&&S.push(C)}});const O=T.propertyName;S.forEach(L=>{if(O==="_MainTex_ST"){const P=new it(T.targetValue[0],T.targetValue[1]),B=new it(T.targetValue[2],T.targetValue[3]);B.y=1-B.y-P.y,x.addBind(new VA({material:L,scale:P,offset:B}));return}const C=TH[O];if(C){x.addBind(new FA({material:L,type:C,targetValue:new Pt().fromArray(T.targetValue),targetAlpha:T.targetValue[3]}));return}console.warn(O+" is not supported")})}),s.registerExpression(x)}))),s})}};_6.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};var wH=_6,QE=class Sm{constructor(e,t){this._firstPersonOnlyLayer=Sm.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=Sm.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new Sm(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=Sm.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=Sm.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(i=>{i.meshes.forEach(r=>{i.type==="firstPersonOnly"?(r.layers.set(this._firstPersonOnlyLayer),r.traverse(a=>a.layers.set(this._firstPersonOnlyLayer))):i.type==="thirdPersonOnly"?(r.layers.set(this._thirdPersonOnlyLayer),r.traverse(a=>a.layers.set(this._thirdPersonOnlyLayer))):i.type==="auto"&&this._createHeadlessModel(r)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,i,r){let a=0;if(t!=null&&t.length>0)for(let s=0;s<e.length;s+=3){const l=e[s],u=e[s+1],f=e[s+2],m=t[l],g=i[l];if(m[0]>0&&r.includes(g[0])||m[1]>0&&r.includes(g[1])||m[2]>0&&r.includes(g[2])||m[3]>0&&r.includes(g[3]))continue;const y=t[u],_=i[u];if(y[0]>0&&r.includes(_[0])||y[1]>0&&r.includes(_[1])||y[2]>0&&r.includes(_[2])||y[3]>0&&r.includes(_[3]))continue;const x=t[f],w=i[f];x[0]>0&&r.includes(w[0])||x[1]>0&&r.includes(w[1])||x[2]>0&&r.includes(w[2])||x[3]>0&&r.includes(w[3])||(e[a++]=l,e[a++]=u,e[a++]=f)}return a}_createErasedMesh(e,t){const i=new u3(e.geometry.clone(),e.material);i.name=`${e.name}(erase)`,i.frustumCulled=e.frustumCulled,i.layers.set(this._firstPersonOnlyLayer);const r=i.geometry,a=r.getAttribute("skinIndex"),s=a instanceof VS?[]:a.array,l=[];for(let w=0;w<s.length;w+=4)l.push([s[w],s[w+1],s[w+2],s[w+3]]);const u=r.getAttribute("skinWeight"),f=u instanceof VS?[]:u.array,m=[];for(let w=0;w<f.length;w+=4)m.push([f[w],f[w+1],f[w+2],f[w+3]]);const g=r.getIndex();if(!g)throw new Error("The geometry doesn't have an index buffer");const y=Array.from(g.array),_=this._excludeTriangles(y,m,l,t),x=[];for(let w=0;w<_;w++)x[w]=y[w];return r.setIndex(x),e.onBeforeRender&&(i.onBeforeRender=e.onBeforeRender),i.bind(new ig(e.skeleton.bones,e.skeleton.boneInverses),new sn),i}_createHeadlessModelForSkinnedMesh(e,t){const i=[];if(t.skeleton.bones.forEach((a,s)=>{this._isEraseTarget(a)&&i.push(s)}),!i.length){t.layers.enable(this._thirdPersonOnlyLayer),t.layers.enable(this._firstPersonOnlyLayer);return}t.layers.set(this._thirdPersonOnlyLayer);const r=this._createErasedMesh(t,i);e.add(r)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new Us;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(i=>i.type==="SkinnedMesh").forEach(i=>{const r=i;this._createHeadlessModelForSkinnedMesh(t,r)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getRawBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}};QE.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;QE.DEFAULT_THIRDPERSON_ONLY_LAYER=10;var GA=QE,AH=new Set(["1.0","1.0-beta"]),RH=class{get name(){return"VRMFirstPersonLoaderPlugin"}constructor(n){this.parser=n}afterRoot(n){return Bi(this,null,function*(){const e=n.userData.vrmHumanoid;if(e!==null){if(e===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");n.userData.vrmFirstPerson=yield this._import(n,e)}})}_import(n,e){return Bi(this,null,function*(){if(e==null)return null;const t=yield this._v1Import(n,e);if(t)return t;const i=yield this._v0Import(n,e);return i||null})}_v1Import(n,e){return Bi(this,null,function*(){var t,i;const r=this.parser.json;if(!(((t=r.extensionsUsed)==null?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const s=(i=r.extensions)==null?void 0:i.VRMC_vrm;if(!s)return null;const l=s.specVersion;if(!AH.has(l))return console.warn(`VRMFirstPersonLoaderPlugin: Unknown VRMC_vrm specVersion "${l}"`),null;const u=s.firstPerson,f=[],m=yield BA(n);return Array.from(m.entries()).forEach(([g,y])=>{var _,x;const w=(_=u?.meshAnnotations)==null?void 0:_.find(T=>T.node===g);f.push({meshes:y,type:(x=w?.type)!=null?x:"auto"})}),new GA(e,f)})}_v0Import(n,e){return Bi(this,null,function*(){var t;const i=this.parser.json,r=(t=i.extensions)==null?void 0:t.VRM;if(!r)return null;const a=r.firstPerson;if(!a)return null;const s=[],l=yield BA(n);return Array.from(l.entries()).forEach(([u,f])=>{const m=i.nodes[u],g=a.meshAnnotations?a.meshAnnotations.find(y=>y.mesh===m.mesh):void 0;s.push({meshes:f,type:this._convertV0FlagToV1Type(g?.firstPersonFlag)})}),new GA(e,s)})}_convertV0FlagToV1Type(n){return n==="FirstPersonOnly"?"firstPersonOnly":n==="ThirdPersonOnly"?"thirdPersonOnly":n==="Both"?"both":"auto"}},jA=new $,WA=new $,NH=new An,XA=class extends Us{constructor(n){super(),this.vrmHumanoid=n,this._boneAxesMap=new Map,Object.values(n.humanBones).forEach(e=>{const t=new B5(1);t.matrixAutoUpdate=!1,t.material.depthTest=!1,t.material.depthWrite=!1,this.add(t),this._boneAxesMap.set(e,t)})}dispose(){Array.from(this._boneAxesMap.values()).forEach(n=>{n.geometry.dispose(),n.material.dispose()})}updateMatrixWorld(n){Array.from(this._boneAxesMap.entries()).forEach(([e,t])=>{e.node.updateWorldMatrix(!0,!1),e.node.matrixWorld.decompose(jA,NH,WA);const i=jA.set(.1,.1,.1).divide(WA);t.matrix.copy(e.node.matrixWorld).scale(i)}),super.updateMatrixWorld(n)}},kx=["hips","spine","chest","upperChest","neck","head","leftEye","rightEye","jaw","leftUpperLeg","leftLowerLeg","leftFoot","leftToes","rightUpperLeg","rightLowerLeg","rightFoot","rightToes","leftShoulder","leftUpperArm","leftLowerArm","leftHand","rightShoulder","rightUpperArm","rightLowerArm","rightHand","leftThumbMetacarpal","leftThumbProximal","leftThumbDistal","leftIndexProximal","leftIndexIntermediate","leftIndexDistal","leftMiddleProximal","leftMiddleIntermediate","leftMiddleDistal","leftRingProximal","leftRingIntermediate","leftRingDistal","leftLittleProximal","leftLittleIntermediate","leftLittleDistal","rightThumbMetacarpal","rightThumbProximal","rightThumbDistal","rightIndexProximal","rightIndexIntermediate","rightIndexDistal","rightMiddleProximal","rightMiddleIntermediate","rightMiddleDistal","rightRingProximal","rightRingIntermediate","rightRingDistal","rightLittleProximal","rightLittleIntermediate","rightLittleDistal"],CH={hips:null,spine:"hips",chest:"spine",upperChest:"chest",neck:"upperChest",head:"neck",leftEye:"head",rightEye:"head",jaw:"head",leftUpperLeg:"hips",leftLowerLeg:"leftUpperLeg",leftFoot:"leftLowerLeg",leftToes:"leftFoot",rightUpperLeg:"hips",rightLowerLeg:"rightUpperLeg",rightFoot:"rightLowerLeg",rightToes:"rightFoot",leftShoulder:"upperChest",leftUpperArm:"leftShoulder",leftLowerArm:"leftUpperArm",leftHand:"leftLowerArm",rightShoulder:"upperChest",rightUpperArm:"rightShoulder",rightLowerArm:"rightUpperArm",rightHand:"rightLowerArm",leftThumbMetacarpal:"leftHand",leftThumbProximal:"leftThumbMetacarpal",leftThumbDistal:"leftThumbProximal",leftIndexProximal:"leftHand",leftIndexIntermediate:"leftIndexProximal",leftIndexDistal:"leftIndexIntermediate",leftMiddleProximal:"leftHand",leftMiddleIntermediate:"leftMiddleProximal",leftMiddleDistal:"leftMiddleIntermediate",leftRingProximal:"leftHand",leftRingIntermediate:"leftRingProximal",leftRingDistal:"leftRingIntermediate",leftLittleProximal:"leftHand",leftLittleIntermediate:"leftLittleProximal",leftLittleDistal:"leftLittleIntermediate",rightThumbMetacarpal:"rightHand",rightThumbProximal:"rightThumbMetacarpal",rightThumbDistal:"rightThumbProximal",rightIndexProximal:"rightHand",rightIndexIntermediate:"rightIndexProximal",rightIndexDistal:"rightIndexIntermediate",rightMiddleProximal:"rightHand",rightMiddleIntermediate:"rightMiddleProximal",rightMiddleDistal:"rightMiddleIntermediate",rightRingProximal:"rightHand",rightRingIntermediate:"rightRingProximal",rightRingDistal:"rightRingIntermediate",rightLittleProximal:"rightHand",rightLittleIntermediate:"rightLittleProximal",rightLittleDistal:"rightLittleIntermediate"};function x6(n){return n.invert?n.invert():n.inverse(),n}var ld=new $,ud=new An,iT=class{constructor(n){this.humanBones=n,this.restPose=this.getAbsolutePose()}getAbsolutePose(){const n={};return Object.keys(this.humanBones).forEach(e=>{const t=e,i=this.getBoneNode(t);i&&(ld.copy(i.position),ud.copy(i.quaternion),n[t]={position:ld.toArray(),rotation:ud.toArray()})}),n}getPose(){const n={};return Object.keys(this.humanBones).forEach(e=>{const t=e,i=this.getBoneNode(t);if(!i)return;ld.set(0,0,0),ud.identity();const r=this.restPose[t];r?.position&&ld.fromArray(r.position).negate(),r?.rotation&&x6(ud.fromArray(r.rotation)),ld.add(i.position),ud.premultiply(i.quaternion),n[t]={position:ld.toArray(),rotation:ud.toArray()}}),n}setPose(n){Object.entries(n).forEach(([e,t])=>{const i=e,r=this.getBoneNode(i);if(!r)return;const a=this.restPose[i];a&&(t?.position&&(r.position.fromArray(t.position),a.position&&r.position.add(ld.fromArray(a.position))),t?.rotation&&(r.quaternion.fromArray(t.rotation),a.rotation&&r.quaternion.multiply(ud.fromArray(a.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([n,e])=>{const t=this.getBoneNode(n);t&&(e?.position&&t.position.fromArray(e.position),e?.rotation&&t.quaternion.fromArray(e.rotation))})}getBone(n){var e;return(e=this.humanBones[n])!=null?e:void 0}getBoneNode(n){var e,t;return(t=(e=this.humanBones[n])==null?void 0:e.node)!=null?t:null}},Hx=new $,OH=new An,DH=new $,qA=class S6 extends iT{static _setupTransforms(e){const t=new ii;t.name="VRMHumanoidRig";const i={},r={},a={};kx.forEach(l=>{var u;const f=e.getBoneNode(l);if(f){const m=new $,g=new An;f.updateWorldMatrix(!0,!1),f.matrixWorld.decompose(m,g,Hx),i[l]=m,r[l]=f.quaternion.clone();const y=new An;(u=f.parent)==null||u.matrixWorld.decompose(Hx,y,Hx),a[l]=y}});const s={};return kx.forEach(l=>{var u;const f=e.getBoneNode(l);if(f){const m=i[l];let g=l,y;for(;y==null&&(g=CH[g],g!=null);)y=i[g];const _=new ii;_.name="Normalized_"+f.name,(g?(u=s[g])==null?void 0:u.node:t).add(_),_.position.copy(m),y&&_.position.sub(y),s[l]={node:_}}}),{rigBones:s,root:t,parentWorldRotations:a,boneRotations:r}}constructor(e){const{rigBones:t,root:i,parentWorldRotations:r,boneRotations:a}=S6._setupTransforms(e);super(t),this.original=e,this.root=i,this._parentWorldRotations=r,this._boneRotations=a}update(){kx.forEach(e=>{const t=this.original.getBoneNode(e);if(t!=null){const i=this.getBoneNode(e),r=this._parentWorldRotations[e],a=OH.copy(r).invert(),s=this._boneRotations[e];if(t.quaternion.copy(i.quaternion).multiply(r).premultiply(a).multiply(s),e==="hips"){const l=i.getWorldPosition(DH);t.parent.updateWorldMatrix(!0,!1);const u=t.parent.matrixWorld,f=l.applyMatrix4(u.invert());t.position.copy(f)}}})}},$A=class T6{get restPose(){return console.warn("VRMHumanoid: restPose is deprecated. Use either rawRestPose or normalizedRestPose instead."),this.rawRestPose}get rawRestPose(){return this._rawHumanBones.restPose}get normalizedRestPose(){return this._normalizedHumanBones.restPose}get humanBones(){return this._rawHumanBones.humanBones}get rawHumanBones(){return this._rawHumanBones.humanBones}get normalizedHumanBones(){return this._normalizedHumanBones.humanBones}get normalizedHumanBonesRoot(){return this._normalizedHumanBones.root}constructor(e,t){var i;this.autoUpdateHumanBones=(i=t?.autoUpdateHumanBones)!=null?i:!0,this._rawHumanBones=new iT(e),this._normalizedHumanBones=new qA(this._rawHumanBones)}copy(e){return this.autoUpdateHumanBones=e.autoUpdateHumanBones,this._rawHumanBones=new iT(e.humanBones),this._normalizedHumanBones=new qA(this._rawHumanBones),this}clone(){return new T6(this.humanBones,{autoUpdateHumanBones:this.autoUpdateHumanBones}).copy(this)}getAbsolutePose(){return console.warn("VRMHumanoid: getAbsolutePose() is deprecated. Use either getRawAbsolutePose() or getNormalizedAbsolutePose() instead."),this.getRawAbsolutePose()}getRawAbsolutePose(){return this._rawHumanBones.getAbsolutePose()}getNormalizedAbsolutePose(){return this._normalizedHumanBones.getAbsolutePose()}getPose(){return console.warn("VRMHumanoid: getPose() is deprecated. Use either getRawPose() or getNormalizedPose() instead."),this.getRawPose()}getRawPose(){return this._rawHumanBones.getPose()}getNormalizedPose(){return this._normalizedHumanBones.getPose()}setPose(e){return console.warn("VRMHumanoid: setPose() is deprecated. Use either setRawPose() or setNormalizedPose() instead."),this.setRawPose(e)}setRawPose(e){return this._rawHumanBones.setPose(e)}setNormalizedPose(e){return this._normalizedHumanBones.setPose(e)}resetPose(){return console.warn("VRMHumanoid: resetPose() is deprecated. Use either resetRawPose() or resetNormalizedPose() instead."),this.resetRawPose()}resetRawPose(){return this._rawHumanBones.resetPose()}resetNormalizedPose(){return this._normalizedHumanBones.resetPose()}getBone(e){return console.warn("VRMHumanoid: getBone() is deprecated. Use either getRawBone() or getNormalizedBone() instead."),this.getRawBone(e)}getRawBone(e){return this._rawHumanBones.getBone(e)}getNormalizedBone(e){return this._normalizedHumanBones.getBone(e)}getBoneNode(e){return console.warn("VRMHumanoid: getBoneNode() is deprecated. Use either getRawBoneNode() or getNormalizedBoneNode() instead."),this.getRawBoneNode(e)}getRawBoneNode(e){return this._rawHumanBones.getBoneNode(e)}getNormalizedBoneNode(e){return this._normalizedHumanBones.getBoneNode(e)}update(){this.autoUpdateHumanBones&&this._normalizedHumanBones.update()}},LH={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"},IH=new Set(["1.0","1.0-beta"]),YA={leftThumbProximal:"leftThumbMetacarpal",leftThumbIntermediate:"leftThumbProximal",rightThumbProximal:"rightThumbMetacarpal",rightThumbIntermediate:"rightThumbProximal"},UH=class{get name(){return"VRMHumanoidLoaderPlugin"}constructor(n,e){this.parser=n,this.helperRoot=e?.helperRoot,this.autoUpdateHumanBones=e?.autoUpdateHumanBones}afterRoot(n){return Bi(this,null,function*(){n.userData.vrmHumanoid=yield this._import(n)})}_import(n){return Bi(this,null,function*(){const e=yield this._v1Import(n);if(e)return e;const t=yield this._v0Import(n);return t||null})}_v1Import(n){return Bi(this,null,function*(){var e,t;const i=this.parser.json;if(!(((e=i.extensionsUsed)==null?void 0:e.indexOf("VRMC_vrm"))!==-1))return null;const a=(t=i.extensions)==null?void 0:t.VRMC_vrm;if(!a)return null;const s=a.specVersion;if(!IH.has(s))return console.warn(`VRMHumanoidLoaderPlugin: Unknown VRMC_vrm specVersion "${s}"`),null;const l=a.humanoid;if(!l)return null;const u=l.humanBones.leftThumbIntermediate!=null||l.humanBones.rightThumbIntermediate!=null,f={};l.humanBones!=null&&(yield Promise.all(Object.entries(l.humanBones).map(g=>Bi(this,[g],function*([y,_]){let x=y;const w=_.node;if(u){const S=YA[x];S!=null&&(x=S)}const T=yield this.parser.getDependency("node",w);if(T==null){console.warn(`A glTF node bound to the humanoid bone ${x} (index = ${w}) does not exist`);return}f[x]={node:T}}))));const m=new $A(this._ensureRequiredBonesExist(f),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(n.scene.add(m.normalizedHumanBonesRoot),this.helperRoot){const g=new XA(m);this.helperRoot.add(g),g.renderOrder=this.helperRoot.renderOrder}return m})}_v0Import(n){return Bi(this,null,function*(){var e;const i=(e=this.parser.json.extensions)==null?void 0:e.VRM;if(!i)return null;const r=i.humanoid;if(!r)return null;const a={};r.humanBones!=null&&(yield Promise.all(r.humanBones.map(l=>Bi(this,null,function*(){const u=l.bone,f=l.node;if(u==null||f==null)return;const m=yield this.parser.getDependency("node",f);if(m==null){console.warn(`A glTF node bound to the humanoid bone ${u} (index = ${f}) does not exist`);return}const g=YA[u],y=g??u;if(a[y]!=null){console.warn(`Multiple bone entries for ${y} detected (index = ${f}), ignoring duplicated entries.`);return}a[y]={node:m}}))));const s=new $A(this._ensureRequiredBonesExist(a),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(n.scene.add(s.normalizedHumanBonesRoot),this.helperRoot){const l=new XA(s);this.helperRoot.add(l),l.renderOrder=this.helperRoot.renderOrder}return s})}_ensureRequiredBonesExist(n){const e=Object.values(LH).filter(t=>n[t]==null);if(e.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${e.join(", ")}`);return n}},KA=class extends Nn{constructor(){super(),this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new Gn(new Float32Array(195),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Gn(new Uint16Array(189),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,n=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,n=!0),n&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let n=0;n<64;n++){const e=n/63*this._currentTheta;this._attrPos.setXYZ(n+1,this._currentRadius*Math.sin(e),0,this._currentRadius*Math.cos(e))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<63;n++)this._attrIndex.setXYZ(n*3,0,n+1,n+2);this._attrIndex.needsUpdate=!0}},PH=class extends Nn{constructor(){super(),this.radius=0,this._currentRadius=0,this.tail=new $,this._currentTail=new $,this._attrPos=new Gn(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Gn(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,n=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),n=!0),n&&this._buildPosition()}_buildPosition(){for(let n=0;n<32;n++){const e=n/16*Math.PI;this._attrPos.setXYZ(n,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+n,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+n,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<32;n++){const e=(n+1)%32;this._attrIndex.setXY(n*2,n,e),this._attrIndex.setXY(64+n*2,32+n,32+e),this._attrIndex.setXY(128+n*2,64+n,64+e)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}},a2=new An,ZA=new An,P0=new $,QA=new $,JA=Math.sqrt(2)/2,BH=new An(0,0,-JA,JA),zH=new $(0,1,0),FH=class extends Us{constructor(n){super(),this.matrixAutoUpdate=!1,this.vrmLookAt=n;{const e=new KA;e.radius=.5;const t=new Is({color:65280,transparent:!0,opacity:.5,side:Eo,depthTest:!1,depthWrite:!1});this._meshPitch=new Br(e,t),this.add(this._meshPitch)}{const e=new KA;e.radius=.5;const t=new Is({color:16711680,transparent:!0,opacity:.5,side:Eo,depthTest:!1,depthWrite:!1});this._meshYaw=new Br(e,t),this.add(this._meshYaw)}{const e=new PH;e.radius=.1;const t=new sa({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new ro(e,t),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(n){const e=Fi.DEG2RAD*this.vrmLookAt.yaw;this._meshYaw.geometry.theta=e,this._meshYaw.geometry.update();const t=Fi.DEG2RAD*this.vrmLookAt.pitch;this._meshPitch.geometry.theta=t,this._meshPitch.geometry.update(),this.vrmLookAt.getLookAtWorldPosition(P0),this.vrmLookAt.getLookAtWorldQuaternion(a2),a2.multiply(this.vrmLookAt.getFaceFrontQuaternion(ZA)),this._meshYaw.position.copy(P0),this._meshYaw.quaternion.copy(a2),this._meshPitch.position.copy(P0),this._meshPitch.quaternion.copy(a2),this._meshPitch.quaternion.multiply(ZA.setFromAxisAngle(zH,e)),this._meshPitch.quaternion.multiply(BH);const{target:i,autoUpdate:r}=this.vrmLookAt;i!=null&&r&&(i.getWorldPosition(QA).sub(P0),this._lineTarget.geometry.tail.copy(QA),this._lineTarget.geometry.update(),this._lineTarget.position.copy(P0)),super.updateMatrixWorld(n)}},kH=new $,HH=new $;function rT(n,e){return n.matrixWorld.decompose(kH,e,HH),e}function b2(n){return[Math.atan2(-n.z,n.x),Math.atan2(n.y,Math.sqrt(n.x*n.x+n.z*n.z))]}function eR(n){const e=Math.round(n/2/Math.PI);return n-2*Math.PI*e}var tR=new $(0,0,1),VH=new $,GH=new $,jH=new $,WH=new An,Vx=new An,nR=new An,XH=new An,Gx=new Ya,E6=class M6{constructor(e,t){this.offsetFromHeadBone=new $,this.autoUpdate=!0,this.faceFront=new $(0,0,1),this.humanoid=e,this.applier=t,this._yaw=0,this._pitch=0,this._needsUpdate=!0,this._restHeadWorldQuaternion=this.getLookAtWorldQuaternion(new An)}get yaw(){return this._yaw}set yaw(e){this._yaw=e,this._needsUpdate=!0}get pitch(){return this._pitch}set pitch(e){this._pitch=e,this._needsUpdate=!0}get euler(){return console.warn("VRMLookAt: euler is deprecated. use getEuler() instead."),this.getEuler(new Ya)}getEuler(e){return e.set(Fi.DEG2RAD*this._pitch,Fi.DEG2RAD*this._yaw,0,"YXZ")}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new M6(this.humanoid,this.applier).copy(this)}reset(){this._yaw=0,this._pitch=0,this._needsUpdate=!0}getLookAtWorldPosition(e){const t=this.humanoid.getRawBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getRawBoneNode("head");return rT(t,e)}getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared(tR)<.01)return e.copy(this._restHeadWorldQuaternion).invert();const[t,i]=b2(this.faceFront);return Gx.set(0,.5*Math.PI+t,i,"YZX"),e.setFromEuler(Gx).premultiply(XH.copy(this._restHeadWorldQuaternion).invert())}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(Vx),this.getFaceFrontQuaternion(nR),e.copy(tR).applyQuaternion(Vx).applyQuaternion(nR).applyEuler(this.getEuler(Gx))}lookAt(e){const t=WH.copy(this._restHeadWorldQuaternion).multiply(x6(this.getLookAtWorldQuaternion(Vx))),i=this.getLookAtWorldPosition(GH),r=jH.copy(e).sub(i).applyQuaternion(t).normalize(),[a,s]=b2(this.faceFront),[l,u]=b2(r),f=eR(l-a),m=eR(s-u);this._yaw=Fi.RAD2DEG*f,this._pitch=Fi.RAD2DEG*m,this._needsUpdate=!0}update(e){this.target!=null&&this.autoUpdate&&this.lookAt(this.target.getWorldPosition(VH)),this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}};E6.EULER_ORDER="YXZ";var qH=E6,$H=new $(0,0,1),wu=new An,vm=new An,Yo=new Ya(0,0,0,"YXZ"),x2=class{constructor(n,e,t,i,r){this.humanoid=n,this.rangeMapHorizontalInner=e,this.rangeMapHorizontalOuter=t,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=r,this.faceFront=new $(0,0,1),this._restQuatLeftEye=new An,this._restQuatRightEye=new An,this._restLeftEyeParentWorldQuat=new An,this._restRightEyeParentWorldQuat=new An;const a=this.humanoid.getRawBoneNode("leftEye"),s=this.humanoid.getRawBoneNode("rightEye");a&&(this._restQuatLeftEye.copy(a.quaternion),rT(a.parent,this._restLeftEyeParentWorldQuat)),s&&(this._restQuatRightEye.copy(s.quaternion),rT(s.parent,this._restRightEyeParentWorldQuat))}applyYawPitch(n,e){const t=this.humanoid.getRawBoneNode("leftEye"),i=this.humanoid.getRawBoneNode("rightEye"),r=this.humanoid.getNormalizedBoneNode("leftEye"),a=this.humanoid.getNormalizedBoneNode("rightEye");t&&(e<0?Yo.x=-Fi.DEG2RAD*this.rangeMapVerticalDown.map(-e):Yo.x=Fi.DEG2RAD*this.rangeMapVerticalUp.map(e),n<0?Yo.y=-Fi.DEG2RAD*this.rangeMapHorizontalInner.map(-n):Yo.y=Fi.DEG2RAD*this.rangeMapHorizontalOuter.map(n),wu.setFromEuler(Yo),this._getWorldFaceFrontQuat(vm),r.quaternion.copy(vm).multiply(wu).multiply(vm.invert()),wu.copy(this._restLeftEyeParentWorldQuat),t.quaternion.copy(r.quaternion).multiply(wu).premultiply(wu.invert()).multiply(this._restQuatLeftEye)),i&&(e<0?Yo.x=-Fi.DEG2RAD*this.rangeMapVerticalDown.map(-e):Yo.x=Fi.DEG2RAD*this.rangeMapVerticalUp.map(e),n<0?Yo.y=-Fi.DEG2RAD*this.rangeMapHorizontalOuter.map(-n):Yo.y=Fi.DEG2RAD*this.rangeMapHorizontalInner.map(n),wu.setFromEuler(Yo),this._getWorldFaceFrontQuat(vm),a.quaternion.copy(vm).multiply(wu).multiply(vm.invert()),wu.copy(this._restRightEyeParentWorldQuat),i.quaternion.copy(a.quaternion).multiply(wu).premultiply(wu.invert()).multiply(this._restQuatRightEye))}lookAt(n){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const e=Fi.RAD2DEG*n.y,t=Fi.RAD2DEG*n.x;this.applyYawPitch(e,t)}_getWorldFaceFrontQuat(n){if(this.faceFront.distanceToSquared($H)<.01)return n.identity();const[e,t]=b2(this.faceFront);return Yo.set(0,.5*Math.PI+e,t,"YZX"),n.setFromEuler(Yo)}};x2.type="bone";var aT=class{constructor(n,e,t,i,r){this.expressions=n,this.rangeMapHorizontalInner=e,this.rangeMapHorizontalOuter=t,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=r}applyYawPitch(n,e){e<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-e))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(e))),n<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-n))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(n)))}lookAt(n){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const e=Fi.RAD2DEG*n.y,t=Fi.RAD2DEG*n.x;this.applyYawPitch(e,t)}};aT.type="expression";var iR=class{constructor(n,e){this.inputMaxValue=n,this.outputScale=e}map(n){return this.outputScale*d6(n/this.inputMaxValue)}},YH=new Set(["1.0","1.0-beta"]),s2=.01,KH=class{get name(){return"VRMLookAtLoaderPlugin"}constructor(n,e){this.parser=n,this.helperRoot=e?.helperRoot}afterRoot(n){return Bi(this,null,function*(){const e=n.userData.vrmHumanoid;if(e===null)return;if(e===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const t=n.userData.vrmExpressionManager;if(t!==null){if(t===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");n.userData.vrmLookAt=yield this._import(n,e,t)}})}_import(n,e,t){return Bi(this,null,function*(){if(e==null||t==null)return null;const i=yield this._v1Import(n,e,t);if(i)return i;const r=yield this._v0Import(n,e,t);return r||null})}_v1Import(n,e,t){return Bi(this,null,function*(){var i,r,a;const s=this.parser.json;if(!(((i=s.extensionsUsed)==null?void 0:i.indexOf("VRMC_vrm"))!==-1))return null;const u=(r=s.extensions)==null?void 0:r.VRMC_vrm;if(!u)return null;const f=u.specVersion;if(!YH.has(f))return console.warn(`VRMLookAtLoaderPlugin: Unknown VRMC_vrm specVersion "${f}"`),null;const m=u.lookAt;if(!m)return null;const g=m.type==="expression"?1:10,y=this._v1ImportRangeMap(m.rangeMapHorizontalInner,g),_=this._v1ImportRangeMap(m.rangeMapHorizontalOuter,g),x=this._v1ImportRangeMap(m.rangeMapVerticalDown,g),w=this._v1ImportRangeMap(m.rangeMapVerticalUp,g);let T;m.type==="expression"?T=new aT(t,y,_,x,w):T=new x2(e,y,_,x,w);const S=this._importLookAt(e,T);return S.offsetFromHeadBone.fromArray((a=m.offsetFromHeadBone)!=null?a:[0,.06,0]),S})}_v1ImportRangeMap(n,e){var t,i;let r=(t=n?.inputMaxValue)!=null?t:90;const a=(i=n?.outputScale)!=null?i:e;return r<s2&&(console.warn("VRMLookAtLoaderPlugin: inputMaxValue of a range map is too small. Consider reviewing the range map!"),r=s2),new iR(r,a)}_v0Import(n,e,t){return Bi(this,null,function*(){var i,r,a,s;const u=(i=this.parser.json.extensions)==null?void 0:i.VRM;if(!u)return null;const f=u.firstPerson;if(!f)return null;const m=f.lookAtTypeName==="BlendShape"?1:10,g=this._v0ImportDegreeMap(f.lookAtHorizontalInner,m),y=this._v0ImportDegreeMap(f.lookAtHorizontalOuter,m),_=this._v0ImportDegreeMap(f.lookAtVerticalDown,m),x=this._v0ImportDegreeMap(f.lookAtVerticalUp,m);let w;f.lookAtTypeName==="BlendShape"?w=new aT(t,g,y,_,x):w=new x2(e,g,y,_,x);const T=this._importLookAt(e,w);return f.firstPersonBoneOffset?T.offsetFromHeadBone.set((r=f.firstPersonBoneOffset.x)!=null?r:0,(a=f.firstPersonBoneOffset.y)!=null?a:.06,-((s=f.firstPersonBoneOffset.z)!=null?s:0)):T.offsetFromHeadBone.set(0,.06,0),T.faceFront.set(0,0,-1),w instanceof x2&&w.faceFront.set(0,0,-1),T})}_v0ImportDegreeMap(n,e){var t,i;const r=n?.curve;JSON.stringify(r)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported");let a=(t=n?.xRange)!=null?t:90;const s=(i=n?.yRange)!=null?i:e;return a<s2&&(console.warn("VRMLookAtLoaderPlugin: xRange of a degree map is too small. Consider reviewing the degree map!"),a=s2),new iR(a,s)}_importLookAt(n,e){const t=new qH(n,e);if(this.helperRoot){const i=new FH(t);this.helperRoot.add(i),i.renderOrder=this.helperRoot.renderOrder}return t}};function ZH(n,e){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(n)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:e+n)}var QH=new Set(["1.0","1.0-beta"]),JH=class{get name(){return"VRMMetaLoaderPlugin"}constructor(n,e){var t,i,r;this.parser=n,this.needThumbnailImage=(t=e?.needThumbnailImage)!=null?t:!1,this.acceptLicenseUrls=(i=e?.acceptLicenseUrls)!=null?i:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(r=e?.acceptV0Meta)!=null?r:!0}afterRoot(n){return Bi(this,null,function*(){n.userData.vrmMeta=yield this._import(n)})}_import(n){return Bi(this,null,function*(){const e=yield this._v1Import(n);if(e!=null)return e;const t=yield this._v0Import(n);return t??null})}_v1Import(n){return Bi(this,null,function*(){var e,t,i;const r=this.parser.json;if(!(((e=r.extensionsUsed)==null?void 0:e.indexOf("VRMC_vrm"))!==-1))return null;const s=(t=r.extensions)==null?void 0:t.VRMC_vrm;if(s==null)return null;const l=s.specVersion;if(!QH.has(l))return console.warn(`VRMMetaLoaderPlugin: Unknown VRMC_vrm specVersion "${l}"`),null;const u=s.meta;if(!u)return null;const f=u.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(f))throw new Error(`VRMMetaLoaderPlugin: The license url "${f}" is not accepted`);let g;return this.needThumbnailImage&&u.thumbnailImage!=null&&(g=(i=yield this._extractGLTFImage(u.thumbnailImage))!=null?i:void 0),{metaVersion:"1",name:u.name,version:u.version,authors:u.authors,copyrightInformation:u.copyrightInformation,contactInformation:u.contactInformation,references:u.references,thirdPartyLicenses:u.thirdPartyLicenses,thumbnailImage:g,licenseUrl:u.licenseUrl,avatarPermission:u.avatarPermission,allowExcessivelyViolentUsage:u.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:u.allowExcessivelySexualUsage,commercialUsage:u.commercialUsage,allowPoliticalOrReligiousUsage:u.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:u.allowAntisocialOrHateUsage,creditNotation:u.creditNotation,allowRedistribution:u.allowRedistribution,modification:u.modification,otherLicenseUrl:u.otherLicenseUrl}})}_v0Import(n){return Bi(this,null,function*(){var e;const i=(e=this.parser.json.extensions)==null?void 0:e.VRM;if(!i)return null;const r=i.meta;if(!r)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.0 meta but acceptV0Meta is false");let a;return this.needThumbnailImage&&r.texture!=null&&r.texture!==-1&&(a=yield this.parser.getDependency("texture",r.texture)),{metaVersion:"0",allowedUserName:r.allowedUserName,author:r.author,commercialUssageName:r.commercialUssageName,contactInformation:r.contactInformation,licenseName:r.licenseName,otherLicenseUrl:r.otherLicenseUrl,otherPermissionUrl:r.otherPermissionUrl,reference:r.reference,sexualUssageName:r.sexualUssageName,texture:a??void 0,title:r.title,version:r.version,violentUssageName:r.violentUssageName}})}_extractGLTFImage(n){return Bi(this,null,function*(){var e;const i=(e=this.parser.json.images)==null?void 0:e[n];if(i==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${n}] of glTF as a thumbnail but the image doesn't exist`),null;let r=i.uri;if(i.bufferView!=null){const s=yield this.parser.getDependency("bufferView",i.bufferView),l=new Blob([s],{type:i.mimeType});r=URL.createObjectURL(l)}return r==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${n}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new Ym().loadAsync(ZH(r,this.parser.options.path)).catch(s=>(console.error(s),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}},eV=class{constructor(n){this.scene=n.scene,this.meta=n.meta,this.humanoid=n.humanoid,this.expressionManager=n.expressionManager,this.firstPerson=n.firstPerson,this.lookAt=n.lookAt}update(n){this.humanoid.update(),this.lookAt&&this.lookAt.update(n),this.expressionManager&&this.expressionManager.update()}},tV=class extends eV{constructor(n){super(n),this.materials=n.materials,this.springBoneManager=n.springBoneManager,this.nodeConstraintManager=n.nodeConstraintManager}update(n){super.update(n),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(n),this.materials&&this.materials.forEach(e=>{e.update&&e.update(n)})}},nV=Object.defineProperty,rR=Object.getOwnPropertySymbols,iV=Object.prototype.hasOwnProperty,rV=Object.prototype.propertyIsEnumerable,aR=(n,e,t)=>e in n?nV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sR=(n,e)=>{for(var t in e||(e={}))iV.call(e,t)&&aR(n,t,e[t]);if(rR)for(var t of rR(e))rV.call(e,t)&&aR(n,t,e[t]);return n},Ed=(n,e,t)=>new Promise((i,r)=>{var a=u=>{try{l(t.next(u))}catch(f){r(f)}},s=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(a,s);l((t=t.apply(n,e)).next())}),aV={"":3e3,srgb:3001};function sV(n,e){parseInt($f,10)>=152?n.colorSpace=e:n.encoding=aV[e]}var oV=class{get pending(){return Promise.all(this._pendings)}constructor(n,e){this._parser=n,this._materialParams=e,this._pendings=[]}assignPrimitive(n,e){e!=null&&(this._materialParams[n]=e)}assignColor(n,e,t){e!=null&&(this._materialParams[n]=new Pt().fromArray(e),t&&this._materialParams[n].convertSRGBToLinear())}assignTexture(n,e,t){return Ed(this,null,function*(){const i=Ed(this,null,function*(){e!=null&&(yield this._parser.assignTexture(this._materialParams,n,e),t&&sV(this._materialParams[n],"srgb"))});return this._pendings.push(i),i})}assignTextureByIndex(n,e,t){return Ed(this,null,function*(){return this.assignTexture(n,e!=null?{index:e}:void 0,t)})}},lV=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;

  // COMPAT: pre-r151 uses a common uvTransform
  #if THREE_VRM_THREE_REVISION < 151
    uniform mat3 uvTransform;
  #endif
#endif

// #include <uv2_pars_vertex>
// COMAPT: pre-r151 uses uv2 for lightMap and aoMap
#if THREE_VRM_THREE_REVISION < 151
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    attribute vec2 uv2;
    varying vec2 vUv2;
    uniform mat3 uv2Transform;
  #endif
#endif

// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    // COMPAT: pre-r151 uses a common uvTransform
    #if THREE_VRM_THREE_REVISION >= 151
      vUv = uv;
    #else
      vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    #endif
  #endif

  // #include <uv2_vertex>
  // COMAPT: pre-r151 uses uv2 for lightMap and aoMap
  #if THREE_VRM_THREE_REVISION < 151
    #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
      vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
    #endif
  #endif

  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  #ifdef OUTLINE
    float worldNormalLength = length( transformedNormal );
    vec3 outlineOffset = outlineWidthFactor * worldNormalLength * objectNormal;

    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      float outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
      outlineOffset *= outlineTex;
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      outlineOffset *= vViewPosition.z / projectionMatrix[ 1 ].y;
    #endif

    gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,uV=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
  uniform mat3 shadeMultiplyTextureUvTransform;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;
uniform float emissiveIntensity;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

// #include <uv2_pars_fragment>
// COMAPT: pre-r151 uses uv2 for lightMap and aoMap
#if THREE_VRM_THREE_REVISION < 151
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    varying vec2 vUv2;
  #endif
#endif

#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#include <alphatest_pars_fragment>

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
// COMPAT: pre-r151 doesn't have BRDF_Lambert in <common>
#if THREE_VRM_THREE_REVISION < 151
  vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
    return RECIPROCAL_PI * diffuseColor;
  }
#endif

#include <lights_pars_begin>

#include <normal_pars_fragment>

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

// COMPAT: pre-r156 uses a struct GeometricContext
#if THREE_VRM_THREE_REVISION >= 157
  void RE_Direct_MToon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
    float dotNL = clamp( dot( geometryNormal, directLight.direction ), -1.0, 1.0 );
    vec3 irradiance = directLight.color;

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;

    irradiance *= dotNL;

    float shading = getShading( dotNL, shadow, material.shadingShift );

    // toon shaded diffuse
    reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
  }

  void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
    // indirect diffuse will use diffuseColor, no shadeColor involved
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;
  }
#else
  void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
    float dotNL = clamp( dot( geometry.normal, directLight.direction ), -1.0, 1.0 );
    vec3 irradiance = directLight.color;

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;

    irradiance *= dotNL;

    float shading = getShading( dotNL, shadow, material.shadingShift );

    // toon shaded diffuse
    reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
  }

  void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
    // indirect diffuse will use diffuseColor, no shadeColor involved
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;
  }
#endif

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

// COMPAT: pre-r151
// USE_NORMALMAP_OBJECTSPACE used to be OBJECTSPACE_NORMALMAP in pre-r151
#if defined( USE_NORMALMAP_OBJECTSPACE ) || defined( OBJECTSPACE_NORMALMAP )

  uniform mat3 normalMatrix;

#endif

// COMPAT: pre-r151
// USE_NORMALMAP_TANGENTSPACE used to be TANGENTSPACE_NORMALMAP in pre-r151
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( TANGENTSPACE_NORMALMAP ) )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126, r151
  #if THREE_VRM_THREE_REVISION >= 151

    mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {

      vec3 q0 = dFdx( eye_pos.xyz );
      vec3 q1 = dFdy( eye_pos.xyz );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = surf_norm;

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );

      return mat3( T * scale, B * scale, N );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <colorspace_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, -uvRotSin, uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive * emissiveIntensity;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    vec4 sampledDiffuseColor = texture2D( map, mapUv );
    #ifdef DECODE_VIDEO_TEXTURE
      sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
    #endif
    diffuseColor *= sampledDiffuseColor;
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>

  // #include <normal_fragment_begin>
  float faceDirection = gl_FrontFacing ? 1.0 : -1.0;

  #ifdef FLAT_SHADED

    vec3 fdx = dFdx( vViewPosition );
    vec3 fdy = dFdy( vViewPosition );
    vec3 normal = normalize( cross( fdx, fdy ) );

  #else

    vec3 normal = normalize( vNormal );

    #ifdef DOUBLE_SIDED

      normal *= faceDirection;

    #endif

  #endif

  #ifdef USE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;

  #endif

  #ifdef USE_NORMALMAP_TANGENTSPACE

    #ifdef USE_TANGENT

      mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

    #else

      mat3 tbn = getTangentFrame( - vViewPosition, normal, normalMapUv );

    #endif

    #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

      tbn[0] *= faceDirection;
      tbn[1] *= faceDirection;

    #endif

  #endif

  #ifdef USE_CLEARCOAT_NORMALMAP

    #ifdef USE_TANGENT

      mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

    #else

      mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );

    #endif

    #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

      tbn2[0] *= faceDirection;
      tbn2[1] *= faceDirection;

    #endif

  #endif

  // non perturbed normal for clearcoat among others

  vec3 nonPerturbedNormal = normal;

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  // COMPAT: pre-r151
  // USE_NORMALMAP_OBJECTSPACE used to be OBJECTSPACE_NORMALMAP in pre-r151
  #if defined( USE_NORMALMAP_OBJECTSPACE ) || defined( OBJECTSPACE_NORMALMAP )

    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      normal = normal * faceDirection;

    #endif

    normal = normalize( normalMatrix * normal );

  // COMPAT: pre-r151
  // USE_NORMALMAP_TANGENTSPACE used to be TANGENTSPACE_NORMALMAP in pre-r151
  #elif defined( USE_NORMALMAP_TANGENTSPACE ) || defined( TANGENTSPACE_NORMALMAP )

    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    // COMPAT: pre-r151
    #if THREE_VRM_THREE_REVISION >= 151 || defined( USE_TANGENT )

      normal = normalize( tbn * mapN );

    #else

      normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    vec2 shadeMultiplyTextureUv = ( shadeMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadeColor *= texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv ).rgb;
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  // COMPAT: pre-r156 uses a struct GeometricContext
  #if THREE_VRM_THREE_REVISION >= 157
    vec3 geometryPosition = - vViewPosition;
    vec3 geometryNormal = normal;
    vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

    vec3 geometryClearcoatNormal;

    #ifdef USE_CLEARCOAT

      geometryClearcoatNormal = clearcoatNormal;

    #endif
  #else
    GeometricContext geometry;

    geometry.position = - vViewPosition;
    geometry.normal = normal;
    geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

    #ifdef USE_CLEARCOAT

      geometry.clearcoatNormal = clearcoatNormal;

    #endif
  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getPointLightInfo( pointLight, geometryPosition, directLight );
      #else
        getPointLightInfo( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getSpotLightInfo( spotLight, geometryPosition, directLight );
      #else
        getSpotLightInfo( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getDirectionalLightInfo( directionalLight, directLight );
      #else
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    // COMPAT: pre-r156 uses a struct GeometricContext
    // COMPAT: pre-r156 doesn't have a define USE_LIGHT_PROBES
    #if THREE_VRM_THREE_REVISION >= 157
      #if defined( USE_LIGHT_PROBES )
        irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
      #endif
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        // COMPAT: pre-r156 uses a struct GeometricContext
        #if THREE_VRM_THREE_REVISION >= 157
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
        #else
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
        #endif

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  #if defined( OUTLINE )
    col = outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor );
  #endif

  #ifdef OPAQUE
    diffuseColor.a = 1.0;
  #endif

  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}
`,cV={None:"none"},oR={None:"none",ScreenCoordinates:"screenCoordinates"},fV={3e3:"",3001:"srgb"};function jx(n){return parseInt($f,10)>=152?n.colorSpace:fV[n.encoding]}var hV=class extends nl{constructor(n={}){var e;super({vertexShader:lV,fragmentShader:uV}),this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.fog=!0,this.normalMapType=Hc,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=cV.None,this._outlineWidthMode=oR.None,this._isOutline=!1,n.transparentWithZWrite&&(n.depthWrite=!0),delete n.transparentWithZWrite,n.fog=!0,n.lights=!0,n.clipping=!0,this.uniforms=_E.merge([Vt.common,Vt.normalmap,Vt.emissivemap,Vt.fog,Vt.lights,{litFactor:{value:new Pt(1,1,1)},mapUvTransform:{value:new Sn},colorAlpha:{value:1},normalMapUvTransform:{value:new Sn},shadeColorFactor:{value:new Pt(0,0,0)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new Sn},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new Sn},shadingShiftTextureScale:{value:1},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new Pt(1,1,1)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new Sn},parametricRimColorFactor:{value:new Pt(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new Sn},rimLightingMixFactor:{value:1},parametricRimFresnelPowerFactor:{value:5},parametricRimLiftFactor:{value:0},emissive:{value:new Pt(0,0,0)},emissiveIntensity:{value:1},emissiveMapUvTransform:{value:new Sn},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new Sn},outlineWidthFactor:{value:0},outlineColorFactor:{value:new Pt(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new Sn},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},(e=n.uniforms)!=null?e:{}]),this.setValues(n),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[...Object.entries(this._generateDefines()).map(([t,i])=>`${t}:${i}`),this.matcapTexture?`matcapTextureColorSpace:${jx(this.matcapTexture)}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureColorSpace:${jx(this.shadeMultiplyTexture)}`:"",this.rimMultiplyTexture?`rimMultiplyTextureColorSpace:${jx(this.rimMultiplyTexture)}`:""].join(","),this.onBeforeCompile=t=>{const i=parseInt($f,10),r=Object.entries(sR(sR({},this._generateDefines()),this.defines)).filter(([a,s])=>!!s).map(([a,s])=>`#define ${a} ${s}`).join(`
`)+`
`;t.vertexShader=r+t.vertexShader,t.fragmentShader=r+t.fragmentShader,i<154&&(t.fragmentShader=t.fragmentShader.replace("#include <colorspace_fragment>","#include <encodings_fragment>"))}}get color(){return this.uniforms.litFactor.value}set color(n){this.uniforms.litFactor.value=n}get map(){return this.uniforms.map.value}set map(n){this.uniforms.map.value=n}get normalMap(){return this.uniforms.normalMap.value}set normalMap(n){this.uniforms.normalMap.value=n}get normalScale(){return this.uniforms.normalScale.value}set normalScale(n){this.uniforms.normalScale.value=n}get emissive(){return this.uniforms.emissive.value}set emissive(n){this.uniforms.emissive.value=n}get emissiveIntensity(){return this.uniforms.emissiveIntensity.value}set emissiveIntensity(n){this.uniforms.emissiveIntensity.value=n}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(n){this.uniforms.emissiveMap.value=n}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(n){this.uniforms.shadeColorFactor.value=n}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(n){this.uniforms.shadeMultiplyTexture.value=n}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(n){this.uniforms.shadingShiftFactor.value=n}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(n){this.uniforms.shadingShiftTexture.value=n}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(n){this.uniforms.shadingShiftTextureScale.value=n}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(n){this.uniforms.shadingToonyFactor.value=n}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(n){this.uniforms.giEqualizationFactor.value=n}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(n){this.uniforms.matcapFactor.value=n}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(n){this.uniforms.matcapTexture.value=n}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(n){this.uniforms.parametricRimColorFactor.value=n}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(n){this.uniforms.rimMultiplyTexture.value=n}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(n){this.uniforms.rimLightingMixFactor.value=n}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(n){this.uniforms.parametricRimFresnelPowerFactor.value=n}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(n){this.uniforms.parametricRimLiftFactor.value=n}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(n){this.uniforms.outlineWidthMultiplyTexture.value=n}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(n){this.uniforms.outlineWidthFactor.value=n}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(n){this.uniforms.outlineColorFactor.value=n}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(n){this.uniforms.outlineLightingMixFactor.value=n}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(n){this.uniforms.uvAnimationMaskTexture.value=n}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(n){this.uniforms.uvAnimationScrollXOffset.value=n}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(n){this.uniforms.uvAnimationScrollYOffset.value=n}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(n){this.uniforms.uvAnimationRotationPhase.value=n}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(n){this._ignoreVertexColor=n,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(n){this._v0CompatShade=n,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(n){this._debugMode=n,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(n){this._outlineWidthMode=n,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(n){this._isOutline=n,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(n){this._uploadUniformsWorkaround(),this._updateUVAnimation(n)}copy(n){return super.copy(n),this.map=n.map,this.normalMap=n.normalMap,this.emissiveMap=n.emissiveMap,this.shadeMultiplyTexture=n.shadeMultiplyTexture,this.shadingShiftTexture=n.shadingShiftTexture,this.matcapTexture=n.matcapTexture,this.rimMultiplyTexture=n.rimMultiplyTexture,this.outlineWidthMultiplyTexture=n.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=n.uvAnimationMaskTexture,this.normalMapType=n.normalMapType,this.uvAnimationScrollXSpeedFactor=n.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=n.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=n.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=n.ignoreVertexColor,this.v0CompatShade=n.v0CompatShade,this.debugMode=n.debugMode,this.outlineWidthMode=n.outlineWidthMode,this.isOutline=n.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(n){this.uniforms.uvAnimationScrollXOffset.value+=n*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=n*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=n*this.uvAnimationRotationSpeedFactor,this.uniforms.alphaTest.value=this.alphaTest,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),this.uniformsNeedUpdate=!0}_generateDefines(){const n=parseInt($f,10),e=this.outlineWidthMultiplyTexture!==null,t=this.map!==null||this.normalMap!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:n,OUTLINE:this._isOutline,MTOON_USE_UV:e||t,MTOON_UVS_VERTEX_ONLY:e&&!t,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this._isOutline&&this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_SCREEN:this._isOutline&&this._outlineWidthMode===oR.ScreenCoordinates}}_updateTextureMatrix(n,e){n.value&&(n.value.matrixAutoUpdate&&n.value.updateMatrix(),e.value.copy(n.value.matrix))}},dV=new Set(["1.0","1.0-beta"]),w6=class S2{get name(){return S2.EXTENSION_NAME}constructor(e,t={}){var i,r,a,s;this.parser=e,this.materialType=(i=t.materialType)!=null?i:hV,this.renderOrderOffset=(r=t.renderOrderOffset)!=null?r:0,this.v0CompatShade=(a=t.v0CompatShade)!=null?a:!1,this.debugMode=(s=t.debugMode)!=null?s:"none",this._mToonMaterialSet=new Set}beforeRoot(){return Ed(this,null,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return Ed(this,null,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?this.materialType:null}extendMaterialParams(e,t){const i=this._getMToonExtension(e);return i?this._extendMaterialParams(i,t):null}loadMesh(e){return Ed(this,null,function*(){var t;const i=this.parser,a=(t=i.json.meshes)==null?void 0:t[e];if(a==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const s=a.primitives,l=yield i.loadMesh(e);if(s.length===1){const u=l,f=s[0].material;f!=null&&this._setupPrimitive(u,f)}else{const u=l;for(let f=0;f<s.length;f++){const m=u.children[f],g=s[f].material;g!=null&&this._setupPrimitive(m,g)}}return l})}_removeUnlitExtensionIfMToonExists(){const i=this.parser.json.materials;i?.map((r,a)=>{var s;this._getMToonExtension(a)&&((s=r.extensions)!=null&&s.KHR_materials_unlit)&&delete r.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t,i;const s=(t=this.parser.json.materials)==null?void 0:t[e];if(s==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const l=(i=s.extensions)==null?void 0:i[S2.EXTENSION_NAME];if(l==null)return;const u=l.specVersion;if(!dV.has(u)){console.warn(`MToonMaterialLoaderPlugin: Unknown ${S2.EXTENSION_NAME} specVersion "${u}"`);return}return l}_extendMaterialParams(e,t){return Ed(this,null,function*(){var i;delete t.metalness,delete t.roughness;const r=new oV(this.parser,t);r.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),r.assignColor("shadeColorFactor",e.shadeColorFactor),r.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),r.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),r.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),r.assignPrimitive("shadingShiftTextureScale",(i=e.shadingShiftTexture)==null?void 0:i.scale),r.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),r.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),r.assignColor("matcapFactor",e.matcapFactor),r.assignTexture("matcapTexture",e.matcapTexture,!0),r.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),r.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),r.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),r.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),r.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),r.assignPrimitive("outlineWidthMode",e.outlineWidthMode),r.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),r.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),r.assignColor("outlineColorFactor",e.outlineColorFactor),r.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),r.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),r.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),r.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),r.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),r.assignPrimitive("v0CompatShade",this.v0CompatShade),r.assignPrimitive("debugMode",this.debugMode),yield r.pending})}_setupPrimitive(e,t){const i=this._getMToonExtension(t);if(i){const r=this._parseRenderOrder(i);e.renderOrder=r+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_shouldGenerateOutline(e){return typeof e.outlineWidthMode=="string"&&e.outlineWidthMode!=="none"&&typeof e.outlineWidthFactor=="number"&&e.outlineWidthFactor>0}_generateOutline(e){const t=e.material;if(!(t instanceof aa)||!this._shouldGenerateOutline(t))return;e.material=[t];const i=t.clone();i.name+=" (Outline)",i.isOutline=!0,i.side=fs,e.material.push(i);const r=e.geometry,a=r.index?r.index.count:r.attributes.position.count/3;r.addGroup(0,a,0),r.addGroup(0,a,1)}_addToMaterialSet(e){const t=e.material,i=new Set;Array.isArray(t)?t.forEach(r=>i.add(r)):i.add(t);for(const r of i)this._mToonMaterialSet.add(r)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!=null?t:0)}};w6.EXTENSION_NAME="VRMC_materials_mtoon";var pV=w6,mV=(n,e,t)=>new Promise((i,r)=>{var a=u=>{try{l(t.next(u))}catch(f){r(f)}},s=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(a,s);l((t=t.apply(n,e)).next())}),A6=class sT{get name(){return sT.EXTENSION_NAME}constructor(e){this.parser=e}extendMaterialParams(e,t){return mV(this,null,function*(){const i=this._getHDREmissiveMultiplierExtension(e);if(i==null)return;console.warn("VRMMaterialsHDREmissiveMultiplierLoaderPlugin: `VRMC_materials_hdr_emissiveMultiplier` is archived. Use `KHR_materials_emissive_strength` instead.");const r=i.emissiveMultiplier;t.emissiveIntensity=r})}_getHDREmissiveMultiplierExtension(e){var t,i;const s=(t=this.parser.json.materials)==null?void 0:t[e];if(s==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const l=(i=s.extensions)==null?void 0:i[sT.EXTENSION_NAME];if(l!=null)return l}};A6.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";var gV=A6,yV=Object.defineProperty,vV=Object.defineProperties,_V=Object.getOwnPropertyDescriptors,lR=Object.getOwnPropertySymbols,bV=Object.prototype.hasOwnProperty,xV=Object.prototype.propertyIsEnumerable,uR=(n,e,t)=>e in n?yV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Au=(n,e)=>{for(var t in e||(e={}))bV.call(e,t)&&uR(n,t,e[t]);if(lR)for(var t of lR(e))xV.call(e,t)&&uR(n,t,e[t]);return n},cR=(n,e)=>vV(n,_V(e)),SV=(n,e,t)=>new Promise((i,r)=>{var a=u=>{try{l(t.next(u))}catch(f){r(f)}},s=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(a,s);l((t=t.apply(n,e)).next())});function _m(n){return Math.pow(n,2.2)}var TV=class{get name(){return"VRMMaterialsV0CompatPlugin"}constructor(n){var e;this.parser=n,this._renderQueueMapTransparent=new Map,this._renderQueueMapTransparentZWrite=new Map;const t=this.parser.json;t.extensionsUsed=(e=t.extensionsUsed)!=null?e:[],t.extensionsUsed.indexOf("KHR_texture_transform")===-1&&t.extensionsUsed.push("KHR_texture_transform")}beforeRoot(){return SV(this,null,function*(){var n;const e=this.parser.json,t=(n=e.extensions)==null?void 0:n.VRM,i=t?.materialProperties;i&&(this._populateRenderQueueMap(i),i.forEach((r,a)=>{var s,l;const u=(s=e.materials)==null?void 0:s[a];if(u==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${a}] of glTF but the material doesn't exist`);return}if(r.shader==="VRM/MToon"){const f=this._parseV0MToonProperties(r,u);e.materials[a]=f}else if((l=r.shader)!=null&&l.startsWith("VRM/Unlit")){const f=this._parseV0UnlitProperties(r,u);e.materials[a]=f}else r.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${r.shader}`)}))})}_parseV0MToonProperties(n,e){var t,i,r,a,s,l,u,f,m,g,y,_,x,w,T,S,O,L,C,P,B,j,X,k,U,K,ye,ue,we,Ae,Z,le,de,Le,ee,be,Ge,Ye,xe,Ke,et,xt,bt,Kt,Wt,tn,un,Jt,ie,_t,ut,pt,Ze,Ot,ft;const St=(i=(t=n.keywordMap)==null?void 0:t._ALPHABLEND_ON)!=null?i:!1,re=((r=n.floatProperties)==null?void 0:r._ZWrite)===1&&St,q=this._v0ParseRenderQueue(n),Ce=(s=(a=n.keywordMap)==null?void 0:a._ALPHATEST_ON)!=null?s:!1,We=St?"BLEND":Ce?"MASK":"OPAQUE",Qe=Ce?(u=(l=n.floatProperties)==null?void 0:l._Cutoff)!=null?u:.5:void 0,Ut=((m=(f=n.floatProperties)==null?void 0:f._CullMode)!=null?m:2)===0,wt=this._portTextureTransform(n),Gt=((y=(g=n.vectorProperties)==null?void 0:g._Color)!=null?y:[1,1,1,1]).map((Te,ke)=>ke===3?Te:_m(Te)),$t=(_=n.textureProperties)==null?void 0:_._MainTex,rt=$t!=null?{index:$t,extensions:Au({},wt)}:void 0,Tt=(w=(x=n.floatProperties)==null?void 0:x._BumpScale)!=null?w:1,Ct=(T=n.textureProperties)==null?void 0:T._BumpMap,pe=Ct!=null?{index:Ct,scale:Tt,extensions:Au({},wt)}:void 0,Re=((O=(S=n.vectorProperties)==null?void 0:S._EmissionColor)!=null?O:[0,0,0,1]).map(_m),yt=(L=n.textureProperties)==null?void 0:L._EmissionMap,he=yt!=null?{index:yt,extensions:Au({},wt)}:void 0,vt=((P=(C=n.vectorProperties)==null?void 0:C._ShadeColor)!=null?P:[.97,.81,.86,1]).map(_m),at=(B=n.textureProperties)==null?void 0:B._ShadeTexture,At=at!=null?{index:at,extensions:Au({},wt)}:void 0;let ct=(X=(j=n.floatProperties)==null?void 0:j._ShadeShift)!=null?X:0,Be=(U=(k=n.floatProperties)==null?void 0:k._ShadeToony)!=null?U:.9;Be=Fi.lerp(Be,1,.5+.5*ct),ct=-ct-(1-Be);const Ft=(ye=(K=n.floatProperties)==null?void 0:K._IndirectLightIntensity)!=null?ye:.1,Qt=Ft?1-Ft:void 0,_n=(ue=n.textureProperties)==null?void 0:ue._SphereAdd,bn=_n!=null?[1,1,1]:void 0,mi=_n!=null?{index:_n}:void 0,gi=(Ae=(we=n.floatProperties)==null?void 0:we._RimLightingMix)!=null?Ae:0,ei=(Z=n.textureProperties)==null?void 0:Z._RimTexture,Ti=ei!=null?{index:ei,extensions:Au({},wt)}:void 0,hr=((de=(le=n.vectorProperties)==null?void 0:le._RimColor)!=null?de:[0,0,0,1]).map(_m),Fr=(ee=(Le=n.floatProperties)==null?void 0:Le._RimFresnelPower)!=null?ee:1,Ki=(Ge=(be=n.floatProperties)==null?void 0:be._RimLift)!=null?Ge:0,ar=["none","worldCoordinates","screenCoordinates"][(xe=(Ye=n.floatProperties)==null?void 0:Ye._OutlineWidthMode)!=null?xe:0];let sr=(et=(Ke=n.floatProperties)==null?void 0:Ke._OutlineWidth)!=null?et:0;sr=.01*sr;const wr=(xt=n.textureProperties)==null?void 0:xt._OutlineWidthTexture,ui=wr!=null?{index:wr,extensions:Au({},wt)}:void 0,yr=((Kt=(bt=n.vectorProperties)==null?void 0:bt._OutlineColor)!=null?Kt:[0,0,0]).map(_m),Ua=((tn=(Wt=n.floatProperties)==null?void 0:Wt._OutlineColorMode)!=null?tn:0)===1?(Jt=(un=n.floatProperties)==null?void 0:un._OutlineLightingMix)!=null?Jt:1:0,oa=(ie=n.textureProperties)==null?void 0:ie._UvAnimMaskTexture,Gi=oa!=null?{index:oa,extensions:Au({},wt)}:void 0,Pa=(ut=(_t=n.floatProperties)==null?void 0:_t._UvAnimScrollX)!=null?ut:0;let Ar=(Ze=(pt=n.floatProperties)==null?void 0:pt._UvAnimScrollY)!=null?Ze:0;Ar!=null&&(Ar=-Ar);const la=(ft=(Ot=n.floatProperties)==null?void 0:Ot._UvAnimRotation)!=null?ft:0,Q={specVersion:"1.0",transparentWithZWrite:re,renderQueueOffsetNumber:q,shadeColorFactor:vt,shadeMultiplyTexture:At,shadingShiftFactor:ct,shadingToonyFactor:Be,giEqualizationFactor:Qt,matcapFactor:bn,matcapTexture:mi,rimLightingMixFactor:gi,rimMultiplyTexture:Ti,parametricRimColorFactor:hr,parametricRimFresnelPowerFactor:Fr,parametricRimLiftFactor:Ki,outlineWidthMode:ar,outlineWidthFactor:sr,outlineWidthMultiplyTexture:ui,outlineColorFactor:yr,outlineLightingMixFactor:Ua,uvAnimationMaskTexture:Gi,uvAnimationScrollXSpeedFactor:Pa,uvAnimationScrollYSpeedFactor:Ar,uvAnimationRotationSpeedFactor:la};return cR(Au({},e),{pbrMetallicRoughness:{baseColorFactor:Gt,baseColorTexture:rt},normalTexture:pe,emissiveTexture:he,emissiveFactor:Re,alphaMode:We,alphaCutoff:Qe,doubleSided:Ut,extensions:{VRMC_materials_mtoon:Q}})}_parseV0UnlitProperties(n,e){var t,i,r,a,s;const l=n.shader==="VRM/UnlitTransparentZWrite",u=n.shader==="VRM/UnlitTransparent"||l,f=this._v0ParseRenderQueue(n),m=n.shader==="VRM/UnlitCutout",g=u?"BLEND":m?"MASK":"OPAQUE",y=m?(i=(t=n.floatProperties)==null?void 0:t._Cutoff)!=null?i:.5:void 0,_=this._portTextureTransform(n),x=((a=(r=n.vectorProperties)==null?void 0:r._Color)!=null?a:[1,1,1,1]).map(_m),w=(s=n.textureProperties)==null?void 0:s._MainTex,T=w!=null?{index:w,extensions:Au({},_)}:void 0,S={specVersion:"1.0",transparentWithZWrite:l,renderQueueOffsetNumber:f,shadeColorFactor:x,shadeMultiplyTexture:T};return cR(Au({},e),{pbrMetallicRoughness:{baseColorFactor:x,baseColorTexture:T},alphaMode:g,alphaCutoff:y,extensions:{VRMC_materials_mtoon:S}})}_portTextureTransform(n){var e,t,i,r,a;const s=(e=n.vectorProperties)==null?void 0:e._MainTex;if(s==null)return{};const l=[(t=s?.[0])!=null?t:0,(i=s?.[1])!=null?i:0],u=[(r=s?.[2])!=null?r:1,(a=s?.[3])!=null?a:1];return l[1]=1-u[1]-l[1],{KHR_texture_transform:{offset:l,scale:u}}}_v0ParseRenderQueue(n){var e,t;const i=n.shader==="VRM/UnlitTransparentZWrite",r=((e=n.keywordMap)==null?void 0:e._ALPHABLEND_ON)!=null||n.shader==="VRM/UnlitTransparent"||i,a=((t=n.floatProperties)==null?void 0:t._ZWrite)===1||i;let s=0;if(r){const l=n.renderQueue;l!=null&&(a?s=this._renderQueueMapTransparentZWrite.get(l):s=this._renderQueueMapTransparent.get(l))}return s}_populateRenderQueueMap(n){const e=new Set,t=new Set;n.forEach(i=>{var r,a;const s=i.shader==="VRM/UnlitTransparentZWrite",l=((r=i.keywordMap)==null?void 0:r._ALPHABLEND_ON)!=null||i.shader==="VRM/UnlitTransparent"||s,u=((a=i.floatProperties)==null?void 0:a._ZWrite)===1||s;if(l){const f=i.renderQueue;f!=null&&(u?t.add(f):e.add(f))}}),e.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${e.size} render queues for Transparent materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),t.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${t.size} render queues for TransparentZWrite materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),Array.from(e).sort().forEach((i,r)=>{const a=Math.min(Math.max(r-e.size+1,-9),0);this._renderQueueMapTransparent.set(i,a)}),Array.from(t).sort().forEach((i,r)=>{const a=Math.min(Math.max(r,0),9);this._renderQueueMapTransparentZWrite.set(i,a)})}},fR=(n,e,t)=>new Promise((i,r)=>{var a=u=>{try{l(t.next(u))}catch(f){r(f)}},s=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(a,s);l((t=t.apply(n,e)).next())}),Bf=new $,Wx=class extends Us{constructor(n){super(),this._attrPosition=new Gn(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(zC);const e=new Nn;e.setAttribute("position",this._attrPosition);const t=new sa({color:16711935,depthTest:!1,depthWrite:!1});this._line=new zu(e,t),this.add(this._line),this.constraint=n}updateMatrixWorld(n){Bf.setFromMatrixPosition(this.constraint.destination.matrixWorld),this._attrPosition.setXYZ(0,Bf.x,Bf.y,Bf.z),this.constraint.source&&Bf.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,Bf.x,Bf.y,Bf.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(n)}};function hR(n,e){return e.set(n.elements[12],n.elements[13],n.elements[14])}var EV=new $,MV=new $;function wV(n,e){return n.decompose(EV,e,MV),e}function N_(n){return n.invert?n.invert():n.inverse(),n}var JE=class{constructor(n,e){this.destination=n,this.source=e,this.weight=1}},AV=new $,RV=new $,NV=new $,CV=new An,OV=new An,DV=new An,LV=class extends JE{get aimAxis(){return this._aimAxis}set aimAxis(n){this._aimAxis=n,this._v3AimAxis.set(n==="PositiveX"?1:n==="NegativeX"?-1:0,n==="PositiveY"?1:n==="NegativeY"?-1:0,n==="PositiveZ"?1:n==="NegativeZ"?-1:0)}get dependencies(){const n=new Set([this.source]);return this.destination.parent&&n.add(this.destination.parent),n}constructor(n,e){super(n,e),this._aimAxis="PositiveX",this._v3AimAxis=new $(1,0,0),this._dstRestQuat=new An}setInitState(){this._dstRestQuat.copy(this.destination.quaternion)}update(){this.destination.updateWorldMatrix(!0,!1),this.source.updateWorldMatrix(!0,!1);const n=CV.identity(),e=OV.identity();this.destination.parent&&(wV(this.destination.parent.matrixWorld,n),N_(e.copy(n)));const t=AV.copy(this._v3AimAxis).applyQuaternion(this._dstRestQuat).applyQuaternion(n),i=hR(this.source.matrixWorld,RV).sub(hR(this.destination.matrixWorld,NV)).normalize(),r=DV.setFromUnitVectors(t,i).premultiply(e).multiply(n).multiply(this._dstRestQuat);this.destination.quaternion.copy(this._dstRestQuat).slerp(r,this.weight)}};function IV(n,e){const t=[n];let i=n.parent;for(;i!==null;)t.unshift(i),i=i.parent;t.forEach(r=>{e(r)})}var UV=class{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(n){this._constraints.add(n);let e=this._objectConstraintsMap.get(n.destination);e==null&&(e=new Set,this._objectConstraintsMap.set(n.destination,e)),e.add(n)}deleteConstraint(n){this._constraints.delete(n),this._objectConstraintsMap.get(n.destination).delete(n)}setInitState(){const n=new Set,e=new Set;for(const t of this._constraints)this._processConstraint(t,n,e,i=>i.setInitState())}update(){const n=new Set,e=new Set;for(const t of this._constraints)this._processConstraint(t,n,e,i=>i.update())}_processConstraint(n,e,t,i){if(t.has(n))return;if(e.has(n))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");e.add(n);const r=n.dependencies;for(const a of r)IV(a,s=>{const l=this._objectConstraintsMap.get(s);if(l)for(const u of l)this._processConstraint(u,e,t,i)});i(n),t.add(n)}},PV=new An,BV=new An,zV=class extends JE{get dependencies(){return new Set([this.source])}constructor(n,e){super(n,e),this._dstRestQuat=new An,this._invSrcRestQuat=new An}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),N_(this._invSrcRestQuat.copy(this.source.quaternion))}update(){const n=PV.copy(this._invSrcRestQuat).multiply(this.source.quaternion),e=BV.copy(this._dstRestQuat).multiply(n);this.destination.quaternion.copy(this._dstRestQuat).slerp(e,this.weight)}},FV=new $,kV=new An,HV=new An,VV=class extends JE{get rollAxis(){return this._rollAxis}set rollAxis(n){this._rollAxis=n,this._v3RollAxis.set(n==="X"?1:0,n==="Y"?1:0,n==="Z"?1:0)}get dependencies(){return new Set([this.source])}constructor(n,e){super(n,e),this._rollAxis="X",this._v3RollAxis=new $(1,0,0),this._dstRestQuat=new An,this._invDstRestQuat=new An,this._invSrcRestQuatMulDstRestQuat=new An}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),N_(this._invDstRestQuat.copy(this._dstRestQuat)),N_(this._invSrcRestQuatMulDstRestQuat.copy(this.source.quaternion)).multiply(this._dstRestQuat)}update(){const n=kV.copy(this._invDstRestQuat).multiply(this.source.quaternion).multiply(this._invSrcRestQuatMulDstRestQuat),e=FV.copy(this._v3RollAxis).applyQuaternion(n),i=HV.setFromUnitVectors(e,this._v3RollAxis).premultiply(this._dstRestQuat).multiply(n);this.destination.quaternion.copy(this._dstRestQuat).slerp(i,this.weight)}},GV=new Set(["1.0","1.0-beta"]),R6=class q0{get name(){return q0.EXTENSION_NAME}constructor(e,t){this.parser=e,this.helperRoot=t?.helperRoot}afterRoot(e){return fR(this,null,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){return fR(this,null,function*(){var t;const i=this.parser.json;if(!(((t=i.extensionsUsed)==null?void 0:t.indexOf(q0.EXTENSION_NAME))!==-1))return null;const a=new UV,s=yield this.parser.getDependencies("node");return s.forEach((l,u)=>{var f;const m=i.nodes[u],g=(f=m?.extensions)==null?void 0:f[q0.EXTENSION_NAME];if(g==null)return;const y=g.specVersion;if(!GV.has(y)){console.warn(`VRMNodeConstraintLoaderPlugin: Unknown ${q0.EXTENSION_NAME} specVersion "${y}"`);return}const _=g.constraint;if(_.roll!=null){const x=this._importRollConstraint(l,s,_.roll);a.addConstraint(x)}else if(_.aim!=null){const x=this._importAimConstraint(l,s,_.aim);a.addConstraint(x)}else if(_.rotation!=null){const x=this._importRotationConstraint(l,s,_.rotation);a.addConstraint(x)}}),e.scene.updateMatrixWorld(),a.setInitState(),a})}_importRollConstraint(e,t,i){const{source:r,rollAxis:a,weight:s}=i,l=t[r],u=new VV(e,l);if(a!=null&&(u.rollAxis=a),s!=null&&(u.weight=s),this.helperRoot){const f=new Wx(u);this.helperRoot.add(f)}return u}_importAimConstraint(e,t,i){const{source:r,aimAxis:a,weight:s}=i,l=t[r],u=new LV(e,l);if(a!=null&&(u.aimAxis=a),s!=null&&(u.weight=s),this.helperRoot){const f=new Wx(u);this.helperRoot.add(f)}return u}_importRotationConstraint(e,t,i){const{source:r,weight:a}=i,s=t[r],l=new zV(e,s);if(a!=null&&(l.weight=a),this.helperRoot){const u=new Wx(l);this.helperRoot.add(u)}return l}};R6.EXTENSION_NAME="VRMC_node_constraint";var jV=R6,o2=(n,e,t)=>new Promise((i,r)=>{var a=u=>{try{l(t.next(u))}catch(f){r(f)}},s=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(a,s);l((t=t.apply(n,e)).next())}),eM=class{},Xx=new $,cd=new $,N6=class extends eM{get type(){return"capsule"}constructor(n){var e,t,i,r;super(),this.offset=(e=n?.offset)!=null?e:new $(0,0,0),this.tail=(t=n?.tail)!=null?t:new $(0,0,0),this.radius=(i=n?.radius)!=null?i:0,this.inside=(r=n?.inside)!=null?r:!1}calculateCollision(n,e,t,i){Xx.setFromMatrixPosition(n),cd.subVectors(this.tail,this.offset).applyMatrix4(n),cd.sub(Xx);const r=cd.lengthSq();i.copy(e).sub(Xx);const a=cd.dot(i);a<=0||(r<=a||cd.multiplyScalar(a/r),i.sub(cd));const s=i.length(),l=this.inside?this.radius-t-s:s-t-this.radius;return l<0&&(i.multiplyScalar(1/s),this.inside&&i.negate()),l}},qx=new $,dR=new Sn,C6=class extends eM{get type(){return"plane"}constructor(n){var e,t;super(),this.offset=(e=n?.offset)!=null?e:new $(0,0,0),this.normal=(t=n?.normal)!=null?t:new $(0,0,1)}calculateCollision(n,e,t,i){i.setFromMatrixPosition(n),i.negate().add(e),dR.getNormalMatrix(n),qx.copy(this.normal).applyNormalMatrix(dR).normalize();const r=i.dot(qx)-t;return i.copy(qx),r}},WV=new $,O6=class extends eM{get type(){return"sphere"}constructor(n){var e,t,i;super(),this.offset=(e=n?.offset)!=null?e:new $(0,0,0),this.radius=(t=n?.radius)!=null?t:0,this.inside=(i=n?.inside)!=null?i:!1}calculateCollision(n,e,t,i){i.subVectors(e,WV.setFromMatrixPosition(n));const r=i.length(),a=this.inside?this.radius-t-r:r-t-this.radius;return a<0&&(i.multiplyScalar(1/r),this.inside&&i.negate()),a}},Ru=new $,XV=class extends Nn{constructor(n){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new $,this._currentTail=new $,this._shape=n,this._attrPos=new Gn(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Gn(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;const e=this._shape.radius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,n=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),n=!0);const t=Ru.copy(this._shape.tail).divideScalar(this.worldScale);this._currentTail.distanceToSquared(t)>1e-10&&(this._currentTail.copy(t),n=!0),n&&this._buildPosition()}_buildPosition(){Ru.copy(this._currentTail).sub(this._currentOffset);const n=Ru.length()/this._currentRadius;for(let i=0;i<=16;i++){const r=i/16*Math.PI;this._attrPos.setXYZ(i,-Math.sin(r),-Math.cos(r),0),this._attrPos.setXYZ(17+i,n+Math.sin(r),Math.cos(r),0),this._attrPos.setXYZ(34+i,-Math.sin(r),0,-Math.cos(r)),this._attrPos.setXYZ(51+i,n+Math.sin(r),0,Math.cos(r))}for(let i=0;i<32;i++){const r=i/16*Math.PI;this._attrPos.setXYZ(68+i,0,Math.sin(r),Math.cos(r)),this._attrPos.setXYZ(100+i,n,Math.sin(r),Math.cos(r))}const e=Math.atan2(Ru.y,Math.sqrt(Ru.x*Ru.x+Ru.z*Ru.z)),t=-Math.atan2(Ru.z,Ru.x);this.rotateZ(e),this.rotateY(t),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<34;n++){const e=(n+1)%34;this._attrIndex.setXY(n*2,n,e),this._attrIndex.setXY(68+n*2,34+n,34+e)}for(let n=0;n<32;n++){const e=(n+1)%32;this._attrIndex.setXY(136+n*2,68+n,68+e),this._attrIndex.setXY(200+n*2,100+n,100+e)}this._attrIndex.needsUpdate=!0}},qV=class extends Nn{constructor(n){super(),this.worldScale=1,this._currentOffset=new $,this._currentNormal=new $,this._shape=n,this._attrPos=new Gn(new Float32Array(18),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Gn(new Uint16Array(10),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),n=!0),this._currentNormal.equals(this._shape.normal)||(this._currentNormal.copy(this._shape.normal),n=!0),n&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,-.5,-.5,0),this._attrPos.setXYZ(1,.5,-.5,0),this._attrPos.setXYZ(2,.5,.5,0),this._attrPos.setXYZ(3,-.5,.5,0),this._attrPos.setXYZ(4,0,0,0),this._attrPos.setXYZ(5,0,0,.25),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this.lookAt(this._currentNormal),this._attrPos.needsUpdate=!0}_buildIndex(){this._attrIndex.setXY(0,0,1),this._attrIndex.setXY(2,1,2),this._attrIndex.setXY(4,2,3),this._attrIndex.setXY(6,3,0),this._attrIndex.setXY(8,4,5),this._attrIndex.needsUpdate=!0}},$V=class extends Nn{constructor(n){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new $,this._shape=n,this._attrPos=new Gn(new Float32Array(288),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Gn(new Uint16Array(192),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;const e=this._shape.radius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,n=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),n=!0),n&&this._buildPosition()}_buildPosition(){for(let n=0;n<32;n++){const e=n/16*Math.PI;this._attrPos.setXYZ(n,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+n,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+n,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<32;n++){const e=(n+1)%32;this._attrIndex.setXY(n*2,n,e),this._attrIndex.setXY(64+n*2,32+n,32+e),this._attrIndex.setXY(128+n*2,64+n,64+e)}this._attrIndex.needsUpdate=!0}},YV=new $,$x=class extends Us{constructor(n){if(super(),this.matrixAutoUpdate=!1,this.collider=n,this.collider.shape instanceof O6)this._geometry=new $V(this.collider.shape);else if(this.collider.shape instanceof N6)this._geometry=new XV(this.collider.shape);else if(this.collider.shape instanceof C6)this._geometry=new qV(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const e=new sa({color:16711935,depthTest:!1,depthWrite:!1});this._line=new ro(this._geometry,e),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(n){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld);const e=this.matrix.elements;this._geometry.worldScale=YV.set(e[0],e[1],e[2]).length(),this._geometry.update(),super.updateMatrixWorld(n)}},KV=class extends Nn{constructor(n){super(),this.worldScale=1,this._currentRadius=0,this._currentTail=new $,this._springBone=n,this._attrPos=new Gn(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Gn(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;const e=this._springBone.settings.hitRadius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,n=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),n=!0),n&&this._buildPosition()}_buildPosition(){for(let n=0;n<32;n++){const e=n/16*Math.PI;this._attrPos.setXYZ(n,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+n,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+n,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<32;n++){const e=(n+1)%32;this._attrIndex.setXY(n*2,n,e),this._attrIndex.setXY(64+n*2,32+n,32+e),this._attrIndex.setXY(128+n*2,64+n,64+e)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}},ZV=new $,QV=class extends Us{constructor(n){super(),this.matrixAutoUpdate=!1,this.springBone=n,this._geometry=new KV(this.springBone);const e=new sa({color:16776960,depthTest:!1,depthWrite:!1});this._line=new ro(this._geometry,e),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(n){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld);const e=this.matrix.elements;this._geometry.worldScale=ZV.set(e[0],e[1],e[2]).length(),this._geometry.update(),super.updateMatrixWorld(n)}},Yx=class extends ii{constructor(n){super(),this.colliderMatrix=new sn,this.shape=n}updateWorldMatrix(n,e){super.updateWorldMatrix(n,e),JV(this.colliderMatrix,this.matrixWorld,this.shape.offset)}};function JV(n,e,t){const i=e.elements;n.copy(e),t&&(n.elements[12]=i[0]*t.x+i[4]*t.y+i[8]*t.z+i[12],n.elements[13]=i[1]*t.x+i[5]*t.y+i[9]*t.z+i[13],n.elements[14]=i[2]*t.x+i[6]*t.y+i[10]*t.z+i[14])}var eG=new sn;function tG(n){return n.invert?n.invert():n.getInverse(eG.copy(n)),n}var nG=class{constructor(n){this._inverseCache=new sn,this._shouldUpdateInverse=!0,this.matrix=n;const e={set:(t,i,r)=>(this._shouldUpdateInverse=!0,t[i]=r,!0)};this._originalElements=n.elements,n.elements=new Proxy(n.elements,e)}get inverse(){return this._shouldUpdateInverse&&(tG(this._inverseCache.copy(this.matrix)),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}},Kx=new sn,bm=new $,B0=new $,z0=new $,F0=new $,iG=new sn,rG=class{constructor(n,e,t={},i=[]){this._currentTail=new $,this._prevTail=new $,this._boneAxis=new $,this._worldSpaceBoneLength=0,this._center=null,this._initialLocalMatrix=new sn,this._initialLocalRotation=new An,this._initialLocalChildPosition=new $;var r,a,s,l,u,f;this.bone=n,this.bone.matrixAutoUpdate=!1,this.child=e,this.settings={hitRadius:(r=t.hitRadius)!=null?r:0,stiffness:(a=t.stiffness)!=null?a:1,gravityPower:(s=t.gravityPower)!=null?s:0,gravityDir:(u=(l=t.gravityDir)==null?void 0:l.clone())!=null?u:new $(0,-1,0),dragForce:(f=t.dragForce)!=null?f:.4},this.colliderGroups=i}get dependencies(){const n=new Set,e=this.bone.parent;e&&n.add(e);for(let t=0;t<this.colliderGroups.length;t++)for(let i=0;i<this.colliderGroups[t].colliders.length;i++)n.add(this.colliderGroups[t].colliders[i]);return n}get center(){return this._center}set center(n){var e;(e=this._center)!=null&&e.userData.inverseCacheProxy&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=n,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new nG(this._center.matrixWorld)))}get initialLocalChildPosition(){return this._initialLocalChildPosition}get _parentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:Kx}setInitState(){this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07);const n=this._getMatrixWorldToCenter();this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(n),this._prevTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix);const n=this._getMatrixWorldToCenter();this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(n),this._prevTail.copy(this._currentTail)}update(n){if(n<=0)return;this._calcWorldSpaceBoneLength();const e=B0.copy(this._boneAxis).transformDirection(this._initialLocalMatrix).transformDirection(this._parentMatrixWorld);F0.copy(this._currentTail).add(bm.subVectors(this._currentTail,this._prevTail).multiplyScalar(1-this.settings.dragForce)).applyMatrix4(this._getMatrixCenterToWorld()).addScaledVector(e,this.settings.stiffness*n).addScaledVector(this.settings.gravityDir,this.settings.gravityPower*n),z0.setFromMatrixPosition(this.bone.matrixWorld),F0.sub(z0).normalize().multiplyScalar(this._worldSpaceBoneLength).add(z0),this._collision(F0),this._prevTail.copy(this._currentTail),this._currentTail.copy(F0).applyMatrix4(this._getMatrixWorldToCenter());const t=iG.multiplyMatrices(this._parentMatrixWorld,this._initialLocalMatrix).invert();this.bone.quaternion.setFromUnitVectors(this._boneAxis,bm.copy(F0).applyMatrix4(t).normalize()).premultiply(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix)}_collision(n){for(let e=0;e<this.colliderGroups.length;e++)for(let t=0;t<this.colliderGroups[e].colliders.length;t++){const i=this.colliderGroups[e].colliders[t],r=i.shape.calculateCollision(i.colliderMatrix,n,this.settings.hitRadius,bm);if(r<0){n.addScaledVector(bm,-r),n.sub(z0);const a=n.length();n.multiplyScalar(this._worldSpaceBoneLength/a).add(z0)}}}_calcWorldSpaceBoneLength(){bm.setFromMatrixPosition(this.bone.matrixWorld),this.child?B0.setFromMatrixPosition(this.child.matrixWorld):(B0.copy(this._initialLocalChildPosition),B0.applyMatrix4(this.bone.matrixWorld)),this._worldSpaceBoneLength=bm.sub(B0).length()}_getMatrixCenterToWorld(){return this._center?this._center.matrixWorld:Kx}_getMatrixWorldToCenter(){return this._center?this._center.userData.inverseCacheProxy.inverse:Kx}};function aG(n,e){const t=[];let i=n;for(;i!==null;)t.unshift(i),i=i.parent;t.forEach(r=>{e(r)})}function oT(n,e){n.children.forEach(t=>{e(t)||oT(t,e)})}function sG(n){var e;const t=new Map;for(const i of n){let r=i;do{const a=((e=t.get(r))!=null?e:0)+1;if(a===n.size)return r;t.set(r,a),r=r.parent}while(r!==null)}return null}var pR=class{constructor(){this._joints=new Set,this._sortedJoints=[],this._hasWarnedCircularDependency=!1,this._ancestors=[],this._objectSpringBonesMap=new Map,this._isSortedJointsDirty=!1,this._relevantChildrenUpdated=this._relevantChildrenUpdated.bind(this)}get joints(){return this._joints}get springBones(){return console.warn("VRMSpringBoneManager: springBones is deprecated. use joints instead."),this._joints}get colliderGroups(){const n=new Set;return this._joints.forEach(e=>{e.colliderGroups.forEach(t=>{n.add(t)})}),Array.from(n)}get colliders(){const n=new Set;return this.colliderGroups.forEach(e=>{e.colliders.forEach(t=>{n.add(t)})}),Array.from(n)}addJoint(n){this._joints.add(n);let e=this._objectSpringBonesMap.get(n.bone);e==null&&(e=new Set,this._objectSpringBonesMap.set(n.bone,e)),e.add(n),this._isSortedJointsDirty=!0}addSpringBone(n){console.warn("VRMSpringBoneManager: addSpringBone() is deprecated. use addJoint() instead."),this.addJoint(n)}deleteJoint(n){this._joints.delete(n),this._objectSpringBonesMap.get(n.bone).delete(n),this._isSortedJointsDirty=!0}deleteSpringBone(n){console.warn("VRMSpringBoneManager: deleteSpringBone() is deprecated. use deleteJoint() instead."),this.deleteJoint(n)}setInitState(){this._sortJoints();for(let n=0;n<this._sortedJoints.length;n++){const e=this._sortedJoints[n];e.bone.updateMatrix(),e.bone.updateWorldMatrix(!1,!1),e.setInitState()}}reset(){this._sortJoints();for(let n=0;n<this._sortedJoints.length;n++){const e=this._sortedJoints[n];e.bone.updateMatrix(),e.bone.updateWorldMatrix(!1,!1),e.reset()}}update(n){this._sortJoints();for(let e=0;e<this._ancestors.length;e++)this._ancestors[e].updateWorldMatrix(e===0,!1);for(let e=0;e<this._sortedJoints.length;e++){const t=this._sortedJoints[e];t.bone.updateMatrix(),t.bone.updateWorldMatrix(!1,!1),t.update(n),oT(t.bone,this._relevantChildrenUpdated)}}_sortJoints(){if(!this._isSortedJointsDirty)return;const n=[],e=new Set,t=new Set,i=new Set;for(const a of this._joints)this._insertJointSort(a,e,t,n,i);this._sortedJoints=n;const r=sG(i);this._ancestors=[],r&&(this._ancestors.push(r),oT(r,a=>{var s,l;return((l=(s=this._objectSpringBonesMap.get(a))==null?void 0:s.size)!=null?l:0)>0?!0:(this._ancestors.push(a),!1)})),this._isSortedJointsDirty=!1}_insertJointSort(n,e,t,i,r){if(t.has(n))return;if(e.has(n)){this._hasWarnedCircularDependency||(console.warn("VRMSpringBoneManager: Circular dependency detected"),this._hasWarnedCircularDependency=!0);return}e.add(n);const a=n.dependencies;for(const s of a){let l=!1,u=null;aG(s,f=>{const m=this._objectSpringBonesMap.get(f);if(m)for(const g of m)l=!0,this._insertJointSort(g,e,t,i,r);else l||(u=f)}),u&&r.add(u)}i.push(n),t.add(n)}_relevantChildrenUpdated(n){var e,t;return((t=(e=this._objectSpringBonesMap.get(n))==null?void 0:e.size)!=null?t:0)>0?!0:(n.updateWorldMatrix(!1,!1),!1)}},mR="VRMC_springBone_extended_collider",oG=new Set(["1.0","1.0-beta"]),lG=new Set(["1.0"]),D6=class Tm{get name(){return Tm.EXTENSION_NAME}constructor(e,t){var i;this.parser=e,this.jointHelperRoot=t?.jointHelperRoot,this.colliderHelperRoot=t?.colliderHelperRoot,this.useExtendedColliders=(i=t?.useExtendedColliders)!=null?i:!0}afterRoot(e){return o2(this,null,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return o2(this,null,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const i=yield this._v0Import(e);return i??null})}_v1Import(e){return o2(this,null,function*(){var t,i,r,a,s;const l=e.parser.json;if(!(((t=l.extensionsUsed)==null?void 0:t.indexOf(Tm.EXTENSION_NAME))!==-1))return null;const f=new pR,m=yield e.parser.getDependencies("node"),g=(i=l.extensions)==null?void 0:i[Tm.EXTENSION_NAME];if(!g)return null;const y=g.specVersion;if(!oG.has(y))return console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${Tm.EXTENSION_NAME} specVersion "${y}"`),null;const _=(r=g.colliders)==null?void 0:r.map((w,T)=>{var S,O,L,C,P,B,j,X,k,U,K,ye,ue,we,Ae;const Z=m[w.node];if(Z==null)return console.warn(`VRMSpringBoneLoaderPlugin: The collider #${T} attempted to use the node #${w.node} but not found`),null;const le=w.shape,de=(S=w.extensions)==null?void 0:S[mR];if(this.useExtendedColliders&&de!=null){const Le=de.specVersion;if(!lG.has(Le))console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${mR} specVersion "${Le}". Fallbacking to the ${Tm.EXTENSION_NAME} definition`);else{const ee=de.shape;if(ee.sphere)return this._importSphereCollider(Z,{offset:new $().fromArray((O=ee.sphere.offset)!=null?O:[0,0,0]),radius:(L=ee.sphere.radius)!=null?L:0,inside:(C=ee.sphere.inside)!=null?C:!1});if(ee.capsule)return this._importCapsuleCollider(Z,{offset:new $().fromArray((P=ee.capsule.offset)!=null?P:[0,0,0]),radius:(B=ee.capsule.radius)!=null?B:0,tail:new $().fromArray((j=ee.capsule.tail)!=null?j:[0,0,0]),inside:(X=ee.capsule.inside)!=null?X:!1});if(ee.plane)return this._importPlaneCollider(Z,{offset:new $().fromArray((k=ee.plane.offset)!=null?k:[0,0,0]),normal:new $().fromArray((U=ee.plane.normal)!=null?U:[0,0,1])})}}if(le.sphere)return this._importSphereCollider(Z,{offset:new $().fromArray((K=le.sphere.offset)!=null?K:[0,0,0]),radius:(ye=le.sphere.radius)!=null?ye:0,inside:!1});if(le.capsule)return this._importCapsuleCollider(Z,{offset:new $().fromArray((ue=le.capsule.offset)!=null?ue:[0,0,0]),radius:(we=le.capsule.radius)!=null?we:0,tail:new $().fromArray((Ae=le.capsule.tail)!=null?Ae:[0,0,0]),inside:!1});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${T} has no valid shape`)}),x=(a=g.colliderGroups)==null?void 0:a.map((w,T)=>{var S;return{colliders:((S=w.colliders)!=null?S:[]).flatMap(L=>{const C=_?.[L];return C??(console.warn(`VRMSpringBoneLoaderPlugin: The colliderGroup #${T} attempted to use a collider #${L} but not found`),[])}),name:w.name}});return(s=g.springs)==null||s.forEach((w,T)=>{var S;const O=w.joints,L=(S=w.colliderGroups)==null?void 0:S.map(B=>{const j=x?.[B];if(j==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${T} attempted to use a colliderGroup ${B} but not found`);return j}),C=w.center!=null?m[w.center]:void 0;let P;O.forEach(B=>{if(P){const j=P.node,X=m[j],k=B.node,U=m[k],K={hitRadius:P.hitRadius,dragForce:P.dragForce,gravityPower:P.gravityPower,stiffness:P.stiffness,gravityDir:P.gravityDir!=null?new $().fromArray(P.gravityDir):void 0},ye=this._importJoint(X,U,K,L);C&&(ye.center=C),f.addJoint(ye)}P=B})}),f.setInitState(),f})}_v0Import(e){return o2(this,null,function*(){var t,i,r;const a=e.parser.json;if(!(((t=a.extensionsUsed)==null?void 0:t.indexOf("VRM"))!==-1))return null;const l=(i=a.extensions)==null?void 0:i.VRM,u=l?.secondaryAnimation;if(!u)return null;const f=u?.boneGroups;if(!f)return null;const m=new pR,g=yield e.parser.getDependencies("node"),y=(r=u.colliderGroups)==null?void 0:r.map(_=>{var x;const w=g[_.node];return{colliders:((x=_.colliders)!=null?x:[]).map((S,O)=>{var L,C,P;const B=new $(0,0,0);return S.offset&&B.set((L=S.offset.x)!=null?L:0,(C=S.offset.y)!=null?C:0,S.offset.z?-S.offset.z:0),this._importSphereCollider(w,{offset:B,radius:(P=S.radius)!=null?P:0,inside:!1})})}});return f?.forEach((_,x)=>{const w=_.bones;w&&w.forEach(T=>{var S,O,L,C;const P=g[T],B=new $;_.gravityDir?B.set((S=_.gravityDir.x)!=null?S:0,(O=_.gravityDir.y)!=null?O:0,(L=_.gravityDir.z)!=null?L:0):B.set(0,-1,0);const j=_.center!=null?g[_.center]:void 0,X={hitRadius:_.hitRadius,dragForce:_.dragForce,gravityPower:_.gravityPower,stiffness:_.stiffiness,gravityDir:B},k=(C=_.colliderGroups)==null?void 0:C.map(U=>{const K=y?.[U];if(K==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${x} attempted to use a colliderGroup ${U} but not found`);return K});P.traverse(U=>{var K;const ye=(K=U.children[0])!=null?K:null,ue=this._importJoint(U,ye,X,k);j&&(ue.center=j),m.addJoint(ue)})})}),e.scene.updateMatrixWorld(),m.setInitState(),m})}_importJoint(e,t,i,r){const a=new rG(e,t,i,r);if(this.jointHelperRoot){const s=new QV(a);this.jointHelperRoot.add(s),s.renderOrder=this.jointHelperRoot.renderOrder}return a}_importSphereCollider(e,t){const i=new O6(t),r=new Yx(i);if(e.add(r),this.colliderHelperRoot){const a=new $x(r);this.colliderHelperRoot.add(a),a.renderOrder=this.colliderHelperRoot.renderOrder}return r}_importCapsuleCollider(e,t){const i=new N6(t),r=new Yx(i);if(e.add(r),this.colliderHelperRoot){const a=new $x(r);this.colliderHelperRoot.add(a),a.renderOrder=this.colliderHelperRoot.renderOrder}return r}_importPlaneCollider(e,t){const i=new C6(t),r=new Yx(i);if(e.add(r),this.colliderHelperRoot){const a=new $x(r);this.colliderHelperRoot.add(a),a.renderOrder=this.colliderHelperRoot.renderOrder}return r}};D6.EXTENSION_NAME="VRMC_springBone";var uG=D6,cG=class{get name(){return"VRMLoaderPlugin"}constructor(n,e){var t,i,r,a,s,l,u,f,m,g;this.parser=n;const y=e?.helperRoot,_=e?.autoUpdateHumanBones;this.expressionPlugin=(t=e?.expressionPlugin)!=null?t:new wH(n),this.firstPersonPlugin=(i=e?.firstPersonPlugin)!=null?i:new RH(n),this.humanoidPlugin=(r=e?.humanoidPlugin)!=null?r:new UH(n,{helperRoot:y,autoUpdateHumanBones:_}),this.lookAtPlugin=(a=e?.lookAtPlugin)!=null?a:new KH(n,{helperRoot:y}),this.metaPlugin=(s=e?.metaPlugin)!=null?s:new JH(n),this.mtoonMaterialPlugin=(l=e?.mtoonMaterialPlugin)!=null?l:new pV(n),this.materialsHDREmissiveMultiplierPlugin=(u=e?.materialsHDREmissiveMultiplierPlugin)!=null?u:new gV(n),this.materialsV0CompatPlugin=(f=e?.materialsV0CompatPlugin)!=null?f:new TV(n),this.springBonePlugin=(m=e?.springBonePlugin)!=null?m:new uG(n,{colliderHelperRoot:y,jointHelperRoot:y}),this.nodeConstraintPlugin=(g=e?.nodeConstraintPlugin)!=null?g:new jV(n,{helperRoot:y})}beforeRoot(){return r2(this,null,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(n){return r2(this,null,function*(){return yield this.mtoonMaterialPlugin.loadMesh(n)})}getMaterialType(n){const e=this.mtoonMaterialPlugin.getMaterialType(n);return e??null}extendMaterialParams(n,e){return r2(this,null,function*(){yield this.materialsHDREmissiveMultiplierPlugin.extendMaterialParams(n,e),yield this.mtoonMaterialPlugin.extendMaterialParams(n,e)})}afterRoot(n){return r2(this,null,function*(){yield this.metaPlugin.afterRoot(n),yield this.humanoidPlugin.afterRoot(n),yield this.expressionPlugin.afterRoot(n),yield this.lookAtPlugin.afterRoot(n),yield this.firstPersonPlugin.afterRoot(n),yield this.springBonePlugin.afterRoot(n),yield this.nodeConstraintPlugin.afterRoot(n),yield this.mtoonMaterialPlugin.afterRoot(n);const e=n.userData.vrmMeta,t=n.userData.vrmHumanoid;if(e&&t){const i=new tV({scene:n.scene,expressionManager:n.userData.vrmExpressionManager,firstPerson:n.userData.vrmFirstPerson,humanoid:t,lookAt:n.userData.vrmLookAt,meta:e,materials:n.userData.vrmMToonMaterials,springBoneManager:n.userData.vrmSpringBoneManager,nodeConstraintManager:n.userData.vrmNodeConstraintManager});n.userData.vrm=i}})}};/*!
 * @pixiv/three-vrm-core v3.4.2
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-mtoon v3.4.2
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v3.4.2
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-v0compat v3.4.2
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-node-constraint v3.4.2
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-springbone v3.4.2
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function fG(n,e){const t=Fi.degToRad,i=t(e),r=n.humanoid?.getNormalizedBoneNode("leftUpperArm"),a=n.humanoid?.getNormalizedBoneNode("rightUpperArm"),s=n.humanoid?.getNormalizedBoneNode("leftLowerArm"),l=n.humanoid?.getNormalizedBoneNode("rightLowerArm");r&&(r.rotation.z=-i),a&&(a.rotation.z=i),s&&(s.rotation.z=-i*.2),l&&(l.rotation.z=i*.2)}function hG(n){const e=n[10],t=n[152],i=n[13],r=n[14],a=n[61],s=n[291];if(!e||!t||!i||!r||!a||!s)return null;const l=Math.abs(e.y-t.y),u=Math.abs(i.y-r.y)/l,f=Math.abs(a.x-s.x)/l;return u<.04?{A:0,I:0,U:0,E:0,O:0}:{A:Fi.clamp((u-.08)/.1,0,1),I:Fi.clamp((f-.22)/.08,0,1),U:Fi.clamp((.2-f)/.1,0,1),E:Fi.clamp((f-.2)/.1,0,1)*(1-u),O:Fi.clamp((u-.07)/.08,0,1)*Fi.clamp((.26-f)/.06,0,1)}}const $0={current:null};let Zx=0,Qx=0,k0=0,l2={A:0,I:0,U:0,E:0,O:0},Jx=0,u2=0,c2=0,eS=0,tS=0;const gR=(n,e,t,i)=>{const r=Math.hypot(n.x-e.x,n.y-e.y),a=Math.hypot(t.x-i.x,t.y-i.y);return r/a};function dG(){const n=$0.current;if(!n)return null;const e=n[33],t=n[263],i=n[1],r=n[152],a=n[13],s=n[14],l=n[10],u=n[276],f=n[46];if(!e||!t||!i||!a||!s||!r||!u||!f)return null;const m=new $(e.x,e.y,e.z),g=new $(t.x,t.y,t.z),y=new $(r.x,r.y,r.z),_=new $(l.x,l.y,l.z),x=g.clone().sub(m).normalize(),w=y.clone().sub(_).normalize(),T=new $().crossVectors(x,w).normalize();w.copy(new $().crossVectors(T,x).normalize());const S=new sn;S.makeBasis(x,w,T);const O=new Ya().setFromRotationMatrix(S,"YXZ"),L=.04;c2=c2*(1-L)+-O.z*L,u2=u2*(1-L)+O.x*L,Jx=Jx*(1-L)+O.y*L;const C=Math.abs(c2)<.01?0:c2,P=1.5;let B=Math.abs(u2-P)<.035?0:u2-P,j=Jx;const X=Math.abs(l.y-r.y),U=Math.abs(a.y-s.y)/X,ye=Math.max(0,U-.01),ue=Math.min(ye/.15,1),we=.25;k0=k0*(1-we)+ue*we,k0<.02&&(k0=0);const Ae=hG(n);if(!Ae)return null;const Z=.25;for(const et in l2)l2[et]=l2[et]*(1-Z)+Ae[et]*Z;const le=gR(n[159],n[145],n[33],n[133]),de=gR(n[386],n[374],n[362],n[263]),Le=et=>{const Kt=(et-.1)/.1;return Fi.clamp(1-Kt,0,1)},ee=.2;Zx=Zx*(1-ee)+Le(le)*ee,Qx=Qx*(1-ee)+Le(de)*ee;const be=.1;eS=eS*(1-be)+(u.y-e.y)/(i.y-r.y)*be,tS=tS*(1-be)+(f.y-t.y)/(i.y-r.y)*be;let Ge=(eS+tS)/2;const Ye=.2,Ke=Fi.clamp((Ge-Ye)/(.35-Ye)*2,0,4);return{mouthOpen:k0,yaw:C,pitch:B,roll:j,eyeLeftClose:Zx,eyeRightClose:Qx,averageBrow:Ke,viseme:l2}}function pG(n,e){if(!n||!e)return;const{mouthOpen:t,eyeLeftClose:i,eyeRightClose:r,yaw:a,pitch:s,roll:l,viseme:u,averageBrow:f}=e;n.scene.traverse(m=>{if(m.isMesh&&m.morphTargetDictionary&&m.morphTargetInfluences){const g=m.morphTargetDictionary,y=m.morphTargetInfluences;"Fcl_EYE_Close_L"in g&&(y[g.Fcl_EYE_Close_L]=i),"Fcl_EYE_Close_R"in g&&(y[g.Fcl_EYE_Close_R]=r);const _=Object.values(u).reduce((w,T)=>w+T,0);"Fcl_MTH_Close"in g&&(y[g.Fcl_MTH_Close]=Fi.clamp(1-_,0,1)),"Fcl_BRW_Surprised"in g&&(y[g.Fcl_BRW_Surprised]=f),"JawOpen"in g&&(y[g.JawOpen]=t);for(const w in u){const T=`Fcl_MTH_${w}`;T in g&&(y[g[T]]=u[w])}const x=n.humanoid.getNormalizedBoneNode("head");x&&x.rotation.set(Math.cos(s),-Math.sin(l)/2,Math.sin(a))}})}function mG(){const n=jt.useRef(null),[e,t]=jt.useState(null);return jt.useEffect(()=>{const i=new Vk;i.register(r=>new cG(r)),i.load("/vtuber-js/models/Avatar_A_V1.0.vrm",r=>{const a=r.userData.vrm;if(!a){console.error("VRM not found in gltf.userData");return}a.scene.scale.set(1,1,1),a.scene.position.set(0,0,0),a.scene.rotation.set(0,0,0),fG(a,65),n.current=a,t(a.scene)},null,r=>{console.error("Error loading VRM:",r)})},[]),KE((i,r)=>{const a=n.current;if(!a)return;a.update(r);const s=dG();s&&pG(a,s)}),e?Ni.jsx("primitive",{object:e}):null}function gG(){return Ni.jsxs(Nk,{style:{height:"100vh",width:"100%"},children:[Ni.jsx(kk,{makeDefault:!0,position:[0,1.5,2],fov:10}),Ni.jsx("ambientLight",{intensity:.7}),Ni.jsx("directionalLight",{position:[0,1,1],intensity:1.5}),Ni.jsx(Hk,{enableRotate:!1,enableZoom:!1,enablePan:!1,target:[0,1.39,0]}),Ni.jsx(mG,{})]})}var nS={},yR;function yG(){return yR||(yR=1,(function(){var n;function e(D){var F=0;return function(){return F<D.length?{done:!1,value:D[F++]}:{done:!0}}}var t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,F,V){return D==Array.prototype||D==Object.prototype||(D[F]=V.value),D};function i(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof b4=="object"&&b4];for(var F=0;F<D.length;++F){var V=D[F];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=i(this);function a(D,F){if(F)e:{var V=r;D=D.split(".");for(var fe=0;fe<D.length-1;fe++){var De=D[fe];if(!(De in V))break e;V=V[De]}D=D[D.length-1],fe=V[D],F=F(fe),F!=fe&&F!=null&&t(V,D,{configurable:!0,writable:!0,value:F})}}a("Symbol",function(D){function F(Je){if(this instanceof F)throw new TypeError("Symbol is not a constructor");return new V(fe+(Je||"")+"_"+De++,Je)}function V(Je,Ue){this.g=Je,t(this,"description",{configurable:!0,writable:!0,value:Ue})}if(D)return D;V.prototype.toString=function(){return this.g};var fe="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",De=0;return F}),a("Symbol.iterator",function(D){if(D)return D;D=Symbol("Symbol.iterator");for(var F="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),V=0;V<F.length;V++){var fe=r[F[V]];typeof fe=="function"&&typeof fe.prototype[D]!="function"&&t(fe.prototype,D,{configurable:!0,writable:!0,value:function(){return s(e(this))}})}return D});function s(D){return D={next:D},D[Symbol.iterator]=function(){return this},D}function l(D){var F=typeof Symbol<"u"&&Symbol.iterator&&D[Symbol.iterator];return F?F.call(D):{next:e(D)}}function u(D){if(!(D instanceof Array)){D=l(D);for(var F,V=[];!(F=D.next()).done;)V.push(F.value);D=V}return D}var f=typeof Object.create=="function"?Object.create:function(D){function F(){}return F.prototype=D,new F},m;if(typeof Object.setPrototypeOf=="function")m=Object.setPrototypeOf;else{var g;e:{var y={a:!0},_={};try{_.__proto__=y,g=_.a;break e}catch{}g=!1}m=g?function(D,F){if(D.__proto__=F,D.__proto__!==F)throw new TypeError(D+" is not extensible");return D}:null}var x=m;function w(D,F){if(D.prototype=f(F.prototype),D.prototype.constructor=D,x)x(D,F);else for(var V in F)if(V!="prototype")if(Object.defineProperties){var fe=Object.getOwnPropertyDescriptor(F,V);fe&&Object.defineProperty(D,V,fe)}else D[V]=F[V];D.ea=F.prototype}function T(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function S(D){if(D.l)throw new TypeError("Generator is already running");D.l=!0}T.prototype.o=function(D){this.h=D};function O(D,F){D.j={U:F,V:!0},D.g=D.m||D.s}T.prototype.return=function(D){this.j={return:D},this.g=this.s};function L(D,F,V){return D.g=V,{value:F}}function C(D){this.g=new T,this.h=D}function P(D,F){S(D.g);var V=D.g.i;return V?B(D,"return"in V?V.return:function(fe){return{value:fe,done:!0}},F,D.g.return):(D.g.return(F),j(D))}function B(D,F,V,fe){try{var De=F.call(D.g.i,V);if(!(De instanceof Object))throw new TypeError("Iterator result "+De+" is not an object");if(!De.done)return D.g.l=!1,De;var Je=De.value}catch(Ue){return D.g.i=null,O(D.g,Ue),j(D)}return D.g.i=null,fe.call(D.g,Je),j(D)}function j(D){for(;D.g.g;)try{var F=D.h(D.g);if(F)return D.g.l=!1,{value:F.value,done:!1}}catch(V){D.g.h=void 0,O(D.g,V)}if(D.g.l=!1,D.g.j){if(F=D.g.j,D.g.j=null,F.V)throw F.U;return{value:F.return,done:!0}}return{value:void 0,done:!0}}function X(D){this.next=function(F){return S(D.g),D.g.i?F=B(D,D.g.i.next,F,D.g.o):(D.g.o(F),F=j(D)),F},this.throw=function(F){return S(D.g),D.g.i?F=B(D,D.g.i.throw,F,D.g.o):(O(D.g,F),F=j(D)),F},this.return=function(F){return P(D,F)},this[Symbol.iterator]=function(){return this}}function k(D,F){return F=new X(new C(F)),x&&D.prototype&&x(F,D.prototype),F}function U(D,F){D instanceof String&&(D+="");var V=0,fe=!1,De={next:function(){if(!fe&&V<D.length){var Je=V++;return{value:F(Je,D[Je]),done:!1}}return fe=!0,{done:!0,value:void 0}}};return De[Symbol.iterator]=function(){return De},De}var K=typeof Object.assign=="function"?Object.assign:function(D,F){for(var V=1;V<arguments.length;V++){var fe=arguments[V];if(fe)for(var De in fe)Object.prototype.hasOwnProperty.call(fe,De)&&(D[De]=fe[De])}return D};a("Object.assign",function(D){return D||K}),a("Promise",function(D){function F(Ue){this.h=0,this.i=void 0,this.g=[],this.o=!1;var nt=this.j();try{Ue(nt.resolve,nt.reject)}catch(Mt){nt.reject(Mt)}}function V(){this.g=null}function fe(Ue){return Ue instanceof F?Ue:new F(function(nt){nt(Ue)})}if(D)return D;V.prototype.h=function(Ue){if(this.g==null){this.g=[];var nt=this;this.i(function(){nt.l()})}this.g.push(Ue)};var De=r.setTimeout;V.prototype.i=function(Ue){De(Ue,0)},V.prototype.l=function(){for(;this.g&&this.g.length;){var Ue=this.g;this.g=[];for(var nt=0;nt<Ue.length;++nt){var Mt=Ue[nt];Ue[nt]=null;try{Mt()}catch(Xt){this.j(Xt)}}}this.g=null},V.prototype.j=function(Ue){this.i(function(){throw Ue})},F.prototype.j=function(){function Ue(Xt){return function(dn){Mt||(Mt=!0,Xt.call(nt,dn))}}var nt=this,Mt=!1;return{resolve:Ue(this.C),reject:Ue(this.l)}},F.prototype.C=function(Ue){if(Ue===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Ue instanceof F)this.F(Ue);else{e:switch(typeof Ue){case"object":var nt=Ue!=null;break e;case"function":nt=!0;break e;default:nt=!1}nt?this.u(Ue):this.m(Ue)}},F.prototype.u=function(Ue){var nt=void 0;try{nt=Ue.then}catch(Mt){this.l(Mt);return}typeof nt=="function"?this.G(nt,Ue):this.m(Ue)},F.prototype.l=function(Ue){this.s(2,Ue)},F.prototype.m=function(Ue){this.s(1,Ue)},F.prototype.s=function(Ue,nt){if(this.h!=0)throw Error("Cannot settle("+Ue+", "+nt+"): Promise already settled in state"+this.h);this.h=Ue,this.i=nt,this.h===2&&this.D(),this.A()},F.prototype.D=function(){var Ue=this;De(function(){if(Ue.B()){var nt=r.console;typeof nt<"u"&&nt.error(Ue.i)}},1)},F.prototype.B=function(){if(this.o)return!1;var Ue=r.CustomEvent,nt=r.Event,Mt=r.dispatchEvent;return typeof Mt>"u"?!0:(typeof Ue=="function"?Ue=new Ue("unhandledrejection",{cancelable:!0}):typeof nt=="function"?Ue=new nt("unhandledrejection",{cancelable:!0}):(Ue=r.document.createEvent("CustomEvent"),Ue.initCustomEvent("unhandledrejection",!1,!0,Ue)),Ue.promise=this,Ue.reason=this.i,Mt(Ue))},F.prototype.A=function(){if(this.g!=null){for(var Ue=0;Ue<this.g.length;++Ue)Je.h(this.g[Ue]);this.g=null}};var Je=new V;return F.prototype.F=function(Ue){var nt=this.j();Ue.J(nt.resolve,nt.reject)},F.prototype.G=function(Ue,nt){var Mt=this.j();try{Ue.call(nt,Mt.resolve,Mt.reject)}catch(Xt){Mt.reject(Xt)}},F.prototype.then=function(Ue,nt){function Mt(Un,vn){return typeof Un=="function"?function(Yt){try{Xt(Un(Yt))}catch(R){dn(R)}}:vn}var Xt,dn,In=new F(function(Un,vn){Xt=Un,dn=vn});return this.J(Mt(Ue,Xt),Mt(nt,dn)),In},F.prototype.catch=function(Ue){return this.then(void 0,Ue)},F.prototype.J=function(Ue,nt){function Mt(){switch(Xt.h){case 1:Ue(Xt.i);break;case 2:nt(Xt.i);break;default:throw Error("Unexpected state: "+Xt.h)}}var Xt=this;this.g==null?Je.h(Mt):this.g.push(Mt),this.o=!0},F.resolve=fe,F.reject=function(Ue){return new F(function(nt,Mt){Mt(Ue)})},F.race=function(Ue){return new F(function(nt,Mt){for(var Xt=l(Ue),dn=Xt.next();!dn.done;dn=Xt.next())fe(dn.value).J(nt,Mt)})},F.all=function(Ue){var nt=l(Ue),Mt=nt.next();return Mt.done?fe([]):new F(function(Xt,dn){function In(Yt){return function(R){Un[Yt]=R,vn--,vn==0&&Xt(Un)}}var Un=[],vn=0;do Un.push(void 0),vn++,fe(Mt.value).J(In(Un.length-1),dn),Mt=nt.next();while(!Mt.done)})},F}),a("Object.is",function(D){return D||function(F,V){return F===V?F!==0||1/F===1/V:F!==F&&V!==V}}),a("Array.prototype.includes",function(D){return D||function(F,V){var fe=this;fe instanceof String&&(fe=String(fe));var De=fe.length;for(V=V||0,0>V&&(V=Math.max(V+De,0));V<De;V++){var Je=fe[V];if(Je===F||Object.is(Je,F))return!0}return!1}}),a("String.prototype.includes",function(D){return D||function(F,V){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(F instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(F,V||0)!==-1}}),a("Array.prototype.keys",function(D){return D||function(){return U(this,function(F){return F})}});var ye=this||self;function ue(D,F){D=D.split(".");var V=ye;D[0]in V||typeof V.execScript>"u"||V.execScript("var "+D[0]);for(var fe;D.length&&(fe=D.shift());)D.length||F===void 0?V[fe]&&V[fe]!==Object.prototype[fe]?V=V[fe]:V=V[fe]={}:V[fe]=F}function we(D,F){return F=String.fromCharCode.apply(null,F),D==null?F:D+F}var Ae,Z=typeof TextDecoder<"u",le,de=typeof TextEncoder<"u";function Le(D){if(de)D=(le||(le=new TextEncoder)).encode(D);else{var F=void 0;F=F===void 0?!1:F;for(var V=0,fe=new Uint8Array(3*D.length),De=0;De<D.length;De++){var Je=D.charCodeAt(De);if(128>Je)fe[V++]=Je;else{if(2048>Je)fe[V++]=Je>>6|192;else{if(55296<=Je&&57343>=Je){if(56319>=Je&&De<D.length){var Ue=D.charCodeAt(++De);if(56320<=Ue&&57343>=Ue){Je=1024*(Je-55296)+Ue-56320+65536,fe[V++]=Je>>18|240,fe[V++]=Je>>12&63|128,fe[V++]=Je>>6&63|128,fe[V++]=Je&63|128;continue}else De--}if(F)throw Error("Found an unpaired surrogate");Je=65533}fe[V++]=Je>>12|224,fe[V++]=Je>>6&63|128}fe[V++]=Je&63|128}}D=fe.subarray(0,V)}return D}var ee={},be=null;function Ge(D,F){F===void 0&&(F=0),Ke(),F=ee[F];for(var V=Array(Math.floor(D.length/3)),fe=F[64]||"",De=0,Je=0;De<D.length-2;De+=3){var Ue=D[De],nt=D[De+1],Mt=D[De+2],Xt=F[Ue>>2];Ue=F[(Ue&3)<<4|nt>>4],nt=F[(nt&15)<<2|Mt>>6],Mt=F[Mt&63],V[Je++]=Xt+Ue+nt+Mt}switch(Xt=0,Mt=fe,D.length-De){case 2:Xt=D[De+1],Mt=F[(Xt&15)<<2]||fe;case 1:D=D[De],V[Je]=F[D>>2]+F[(D&3)<<4|Xt>>4]+Mt+fe}return V.join("")}function Ye(D){var F=D.length,V=3*F/4;V%3?V=Math.floor(V):"=.".indexOf(D[F-1])!=-1&&(V="=.".indexOf(D[F-2])!=-1?V-2:V-1);var fe=new Uint8Array(V),De=0;return xe(D,function(Je){fe[De++]=Je}),fe.subarray(0,De)}function xe(D,F){function V(Mt){for(;fe<D.length;){var Xt=D.charAt(fe++),dn=be[Xt];if(dn!=null)return dn;if(!/^[\s\xa0]*$/.test(Xt))throw Error("Unknown base64 encoding at char: "+Xt)}return Mt}Ke();for(var fe=0;;){var De=V(-1),Je=V(0),Ue=V(64),nt=V(64);if(nt===64&&De===-1)break;F(De<<2|Je>>4),Ue!=64&&(F(Je<<4&240|Ue>>2),nt!=64&&F(Ue<<6&192|nt))}}function Ke(){if(!be){be={};for(var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),F=["+/=","+/","-_=","-_.","-_"],V=0;5>V;V++){var fe=D.concat(F[V].split(""));ee[V]=fe;for(var De=0;De<fe.length;De++){var Je=fe[De];be[Je]===void 0&&(be[Je]=De)}}}}var et=typeof Uint8Array.prototype.slice=="function",xt;function bt(D,F,V){return F===V?xt||(xt=new Uint8Array(0)):et?D.slice(F,V):new Uint8Array(D.subarray(F,V))}var Kt=0,Wt=0;function tn(D,F){F=F===void 0?{}:F,F=F.v===void 0?!1:F.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=F,D&&un(this,D)}function un(D,F){F=F.constructor===Uint8Array?F:F.constructor===ArrayBuffer?new Uint8Array(F):F.constructor===Array?new Uint8Array(F):F.constructor===String?Ye(F):F instanceof Uint8Array?new Uint8Array(F.buffer,F.byteOffset,F.byteLength):new Uint8Array(0),D.h=F,D.l=0,D.j=D.h.length,D.g=D.l}tn.prototype.reset=function(){this.g=this.l};function Jt(D){for(var F=128,V=0,fe=0,De=0;4>De&&128<=F;De++)F=D.h[D.g++],V|=(F&127)<<7*De;if(128<=F&&(F=D.h[D.g++],V|=(F&127)<<28,fe|=(F&127)>>4),128<=F)for(De=0;5>De&&128<=F;De++)F=D.h[D.g++],fe|=(F&127)<<7*De+3;if(128>F)return D=V>>>0,F=fe>>>0,(fe=F&2147483648)&&(D=~D+1>>>0,F=~F>>>0,D==0&&(F=F+1>>>0)),D=4294967296*F+(D>>>0),fe?-D:D;D.m=!0}tn.prototype.i=function(){var D=this.h,F=D[this.g],V=F&127;return 128>F?(this.g+=1,V):(F=D[this.g+1],V|=(F&127)<<7,128>F?(this.g+=2,V):(F=D[this.g+2],V|=(F&127)<<14,128>F?(this.g+=3,V):(F=D[this.g+3],V|=(F&127)<<21,128>F?(this.g+=4,V):(F=D[this.g+4],V|=(F&15)<<28,128>F?(this.g+=5,V>>>0):(this.g+=5,128<=D[this.g++]&&128<=D[this.g++]&&128<=D[this.g++]&&128<=D[this.g++]&&this.g++,V)))))},tn.prototype.o=function(){var D=this.h[this.g],F=this.h[this.g+1],V=this.h[this.g+2],fe=this.h[this.g+3];return this.g+=4,V=(D<<0|F<<8|V<<16|fe<<24)>>>0,D=2*(V>>31)+1,F=V>>>23&255,V&=8388607,F==255?V?NaN:1/0*D:F==0?D*Math.pow(2,-149)*V:D*Math.pow(2,F-150)*(V+Math.pow(2,23))};var ie=[];function _t(){this.g=new Uint8Array(64),this.h=0}_t.prototype.push=function(D){if(!(this.h+1<this.g.length)){var F=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(F)}this.g[this.h++]=D},_t.prototype.length=function(){return this.h},_t.prototype.end=function(){var D=this.g,F=this.h;return this.h=0,bt(D,0,F)};function ut(D,F){for(;127<F;)D.push(F&127|128),F>>>=7;D.push(F)}function pt(D){var F={},V=F.N===void 0?!1:F.N;this.o={v:F.v===void 0?!1:F.v},this.N=V,F=this.o,ie.length?(V=ie.pop(),F&&(V.v=F.v),D&&un(V,D),D=V):D=new tn(D,F),this.g=D,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}pt.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function Ze(D){var F=D.g;if((F=F.g==F.j)||(F=D.j)||(F=D.g,F=F.m||0>F.g||F.g>F.j),F)return!1;D.m=D.g.g,F=D.g.i();var V=F&7;return V!=0&&V!=5&&V!=1&&V!=2&&V!=3&&V!=4?(D.j=!0,!1):(D.i=F,D.l=F>>>3,D.h=V,!0)}function Ot(D){switch(D.h){case 0:if(D.h!=0)Ot(D);else{for(D=D.g;D.h[D.g]&128;)D.g++;D.g++}break;case 1:D.h!=1?Ot(D):(D=D.g,D.g+=8);break;case 2:if(D.h!=2)Ot(D);else{var F=D.g.i();D=D.g,D.g+=F}break;case 5:D.h!=5?Ot(D):(D=D.g,D.g+=4);break;case 3:F=D.l;do{if(!Ze(D)){D.j=!0;break}if(D.h==4){D.l!=F&&(D.j=!0);break}Ot(D)}while(!0);break;default:D.j=!0}}function ft(D,F,V){var fe=D.g.j,De=D.g.i(),Je=D.g.g+De;if(D.g.j=Je,V(F,D),V=Je-D.g.g,V!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+De+" bytes, instead read "+(De-V)+" bytes, either the data ended unexpectedly or the message misreported its own length");return D.g.g=Je,D.g.j=fe,F}function St(D){return D.g.o()}function on(D){var F=D.g.i();D=D.g;var V=D.g;D.g+=F,D=D.h;var fe;if(Z)(fe=Ae)||(fe=Ae=new TextDecoder("utf-8",{fatal:!1})),fe=fe.decode(D.subarray(V,V+F));else{F=V+F;for(var De=[],Je=null,Ue,nt,Mt;V<F;)Ue=D[V++],128>Ue?De.push(Ue):224>Ue?V>=F?De.push(65533):(nt=D[V++],194>Ue||(nt&192)!==128?(V--,De.push(65533)):De.push((Ue&31)<<6|nt&63)):240>Ue?V>=F-1?De.push(65533):(nt=D[V++],(nt&192)!==128||Ue===224&&160>nt||Ue===237&&160<=nt||((fe=D[V++])&192)!==128?(V--,De.push(65533)):De.push((Ue&15)<<12|(nt&63)<<6|fe&63)):244>=Ue?V>=F-2?De.push(65533):(nt=D[V++],(nt&192)!==128||(Ue<<28)+(nt-144)>>30!==0||((fe=D[V++])&192)!==128||((Mt=D[V++])&192)!==128?(V--,De.push(65533)):(Ue=(Ue&7)<<18|(nt&63)<<12|(fe&63)<<6|Mt&63,Ue-=65536,De.push((Ue>>10&1023)+55296,(Ue&1023)+56320))):De.push(65533),8192<=De.length&&(Je=we(Je,De),De.length=0);fe=we(Je,De)}return fe}function re(D,F,V){var fe=D.g.i();for(fe=D.g.g+fe;D.g.g<fe;)V.push(F.call(D.g))}function q(D,F){D.h==2?re(D,tn.prototype.o,F):F.push(St(D))}function Ce(){this.h=[],this.i=0,this.g=new _t}function We(D,F){F.length!==0&&(D.h.push(F),D.i+=F.length)}function Qe(D){var F=D.i+D.g.length();if(F===0)return new Uint8Array(0);F=new Uint8Array(F);for(var V=D.h,fe=V.length,De=0,Je=0;Je<fe;Je++){var Ue=V[Je];Ue.length!==0&&(F.set(Ue,De),De+=Ue.length)}return V=D.g,fe=V.h,fe!==0&&(F.set(V.g.subarray(0,fe),De),V.h=0),D.h=[F],F}function He(D,F,V){if(V!=null){ut(D.g,8*F+5),D=D.g;var fe=V;fe=(V=0>fe?1:0)?-fe:fe,fe===0?0<1/fe?Kt=Wt=0:(Wt=0,Kt=2147483648):isNaN(fe)?(Wt=0,Kt=2147483647):34028234663852886e22<fe?(Wt=0,Kt=(V<<31|2139095040)>>>0):11754943508222875e-54>fe?(fe=Math.round(fe/Math.pow(2,-149)),Wt=0,Kt=(V<<31|fe)>>>0):(F=Math.floor(Math.log(fe)/Math.LN2),fe*=Math.pow(2,-F),fe=Math.round(8388608*fe),16777216<=fe&&++F,Wt=0,Kt=(V<<31|F+127<<23|fe&8388607)>>>0),V=Kt,D.push(V>>>0&255),D.push(V>>>8&255),D.push(V>>>16&255),D.push(V>>>24&255)}}var Ut=typeof Uint8Array=="function";function wt(D,F,V){if(D!=null)return typeof D=="object"?Ut&&D instanceof Uint8Array?V(D):Gt(D,F,V):F(D)}function Gt(D,F,V){if(Array.isArray(D)){for(var fe=Array(D.length),De=0;De<D.length;De++)fe[De]=wt(D[De],F,V);return Array.isArray(D)&&D.W&&Tt(fe),fe}fe={};for(De in D)fe[De]=wt(D[De],F,V);return fe}function $t(D){return typeof D=="number"?isFinite(D)?D:String(D):D}var rt={W:{value:!0,configurable:!0}};function Tt(D){return Array.isArray(D)&&!Object.isFrozen(D)&&Object.defineProperties(D,rt),D}var Ct;function pe(D,F,V){var fe=Ct;Ct=null,D||(D=fe),fe=this.constructor.ca,D||(D=fe?[fe]:[]),this.j=fe?0:-1,this.m=this.g=null,this.h=D;e:{if(fe=this.h.length,D=fe-1,fe&&(fe=this.h[D],!(fe===null||typeof fe!="object"||Array.isArray(fe)||Ut&&fe instanceof Uint8Array))){this.l=D-this.j,this.i=fe;break e}F!==void 0&&-1<F?(this.l=Math.max(F,D+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(V)for(F=0;F<V.length;F++)D=V[F],D<this.l?(D+=this.j,(fe=this.h[D])?Tt(fe):this.h[D]=Re):(yt(this),(fe=this.i[D])?Tt(fe):this.i[D]=Re)}var Re=Object.freeze(Tt([]));function yt(D){var F=D.l+D.j;D.h[F]||(D.i=D.h[F]={})}function he(D,F,V){return F===-1?null:V!==void 0&&V||F>=D.l?D.i?D.i[F]:void 0:D.h[F+D.j]}function vt(D,F){var V=V===void 0?!1:V,fe=he(D,F,V);return fe==null&&(fe=Re),fe===Re&&(fe=Tt([]),Be(D,F,fe,V)),fe}function at(D){var F=vt(D,3);if(D.m||(D.m={}),!D.m[3]){for(var V=0;V<F.length;V++)F[V]=+F[V];D.m[3]=!0}return F}function At(D,F,V){return D=he(D,F),D??V}function ct(D,F,V){return D=he(D,F),D=D==null?D:+D,D??(V===void 0?0:V)}function Be(D,F,V,fe){fe!==void 0&&fe||F>=D.l?(yt(D),D.i[F]=V):D.h[F+D.j]=V}function Ft(D,F,V){if(V===-1)return null;if(D.g||(D.g={}),!D.g[V]){var fe=he(D,V,!1);fe&&(D.g[V]=new F(fe))}return D.g[V]}function Qt(D,F){D.g||(D.g={});var V=D.g[1];if(!V){var fe=vt(D,1);V=[];for(var De=0;De<fe.length;De++)V[De]=new F(fe[De]);D.g[1]=V}return V}function _n(D,F,V){var fe=fe===void 0?!1:fe;D.g||(D.g={});var De=V&&mi(V);D.g[F]=V,Be(D,F,De,fe)}function bn(D,F,V,fe){var De=Qt(D,V);F=F||new V,D=vt(D,1),fe!=null?(De.splice(fe,0,F),D.splice(fe,0,mi(F))):(De.push(F),D.push(mi(F)))}pe.prototype.toJSON=function(){var D=mi(this);return Gt(D,$t,Ge)};function mi(D,F){if(D.g)for(var V in D.g){var fe=D.g[V];if(Array.isArray(fe))for(var De=0;De<fe.length;De++)fe[De]&&mi(fe[De]);else fe&&mi(fe)}return D.h}pe.prototype.toString=function(){return mi(this).toString()};function gi(D,F){if(D=D.o){We(F,F.g.end());for(var V=0;V<D.length;V++)We(F,D[V])}}function ei(D,F){if(F.h==4)return!1;var V=F.m;return Ot(F),F.N||(F=bt(F.g.h,V,F.g.g),(V=D.o)?V.push(F):D.o=[F]),!0}function Ti(D){pe.call(this,D,-1,Fr)}w(Ti,pe),Ti.prototype.getRows=function(){return he(this,1)},Ti.prototype.getCols=function(){return he(this,2)},Ti.prototype.getPackedDataList=function(){return at(this)},Ti.prototype.getLayout=function(){return At(this,4,0)};function hr(D,F){for(;Ze(F);)switch(F.i){case 8:var V=F.g.i();Be(D,1,V);break;case 16:V=F.g.i(),Be(D,2,V);break;case 29:case 26:q(F,D.getPackedDataList());break;case 32:V=Jt(F.g),Be(D,4,V);break;default:if(!ei(D,F))return D}return D}var Fr=[3];function Ki(D,F){var V=void 0;return new(V||(V=Promise))(function(fe,De){function Je(Mt){try{nt(F.next(Mt))}catch(Xt){De(Xt)}}function Ue(Mt){try{nt(F.throw(Mt))}catch(Xt){De(Xt)}}function nt(Mt){Mt.done?fe(Mt.value):new V(function(Xt){Xt(Mt.value)}).then(Je,Ue)}nt((F=F.apply(D,void 0)).next())})}function ar(D){pe.call(this,D)}w(ar,pe);function sr(D,F){for(;Ze(F);)switch(F.i){case 8:var V=F.g.i();Be(D,1,V);break;case 21:V=St(F),Be(D,2,V);break;case 26:V=on(F),Be(D,3,V);break;case 34:V=on(F),Be(D,4,V);break;default:if(!ei(D,F))return D}return D}function wr(D){pe.call(this,D,-1,ui)}w(wr,pe),wr.prototype.addClassification=function(D,F){return bn(this,D,ar,F),this};var ui=[1];function yr(D){pe.call(this,D)}w(yr,pe);function Ta(D,F){for(;Ze(F);)switch(F.i){case 13:var V=St(F);Be(D,1,V);break;case 21:V=St(F),Be(D,2,V);break;case 29:V=St(F),Be(D,3,V);break;case 37:V=St(F),Be(D,4,V);break;case 45:V=St(F),Be(D,5,V);break;default:if(!ei(D,F))return D}return D}function Ua(D){pe.call(this,D,-1,Gi)}w(Ua,pe);function oa(D){e:{var F=new Ua;for(D=new pt(D);Ze(D);)switch(D.i){case 10:var V=ft(D,new yr,Ta);bn(F,V,yr,void 0);break;default:if(!ei(F,D))break e}}return F}var Gi=[1];function Pa(D){pe.call(this,D)}w(Pa,pe);function Ar(D){pe.call(this,D,-1,Q)}w(Ar,pe),Ar.prototype.getVertexType=function(){return At(this,1,0)},Ar.prototype.getPrimitiveType=function(){return At(this,2,0)},Ar.prototype.getVertexBufferList=function(){return at(this)},Ar.prototype.getIndexBufferList=function(){return vt(this,4)};function la(D,F){for(;Ze(F);)switch(F.i){case 8:var V=Jt(F.g);Be(D,1,V);break;case 16:V=Jt(F.g),Be(D,2,V);break;case 29:case 26:q(F,D.getVertexBufferList());break;case 32:case 34:V=F;var fe=D.getIndexBufferList();V.h==2?re(V,tn.prototype.i,fe):fe.push(V.g.i());break;default:if(!ei(D,F))return D}return D}var Q=[3,4];function Te(D){pe.call(this,D)}w(Te,pe),Te.prototype.getMesh=function(){return Ft(this,Ar,1)},Te.prototype.getPoseTransformMatrix=function(){return Ft(this,Ti,2)};function ke(D){e:{var F=new Te;for(D=new pt(D);Ze(D);)switch(D.i){case 10:var V=ft(D,new Ar,la);_n(F,1,V);break;case 18:V=ft(D,new Ti,hr),_n(F,2,V);break;default:if(!ei(F,D))break e}}return F}function je(D,F,V){if(V=D.createShader(V===0?D.VERTEX_SHADER:D.FRAGMENT_SHADER),D.shaderSource(V,F),D.compileShader(V),!D.getShaderParameter(V,D.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+D.getShaderInfoLog(V));return V}function Ne(D){return Qt(D,ar).map(function(F){return{index:At(F,1,0),Y:ct(F,2),label:he(F,3)!=null?At(F,3,""):void 0,displayName:he(F,4)!=null?At(F,4,""):void 0}})}function gt(D){return{x:ct(D,1),y:ct(D,2),z:ct(D,3),visibility:he(D,4)!=null?ct(D,4):void 0}}function Lt(D,F){this.h=D,this.g=F,this.l=0}function Ht(D,F,V){return Bt(D,F),typeof D.g.canvas.transferToImageBitmap=="function"?Promise.resolve(D.g.canvas.transferToImageBitmap()):V?Promise.resolve(D.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(D.g.canvas):(D.i===void 0&&(D.i=document.createElement("canvas")),new Promise(function(fe){D.i.height=D.g.canvas.height,D.i.width=D.g.canvas.width,D.i.getContext("2d",{}).drawImage(D.g.canvas,0,0,D.g.canvas.width,D.g.canvas.height),fe(D.i)}))}function Bt(D,F){var V=D.g;if(D.m===void 0){var fe=je(V,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),De=je(V,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Je=V.createProgram();if(V.attachShader(Je,fe),V.attachShader(Je,De),V.linkProgram(Je),!V.getProgramParameter(Je,V.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+V.getProgramInfoLog(Je));fe=D.m=Je,V.useProgram(fe),De=V.getUniformLocation(fe,"sampler0"),D.j={I:V.getAttribLocation(fe,"aVertex"),H:V.getAttribLocation(fe,"aTex"),da:De},D.s=V.createBuffer(),V.bindBuffer(V.ARRAY_BUFFER,D.s),V.enableVertexAttribArray(D.j.I),V.vertexAttribPointer(D.j.I,2,V.FLOAT,!1,0,0),V.bufferData(V.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),V.STATIC_DRAW),V.bindBuffer(V.ARRAY_BUFFER,null),D.o=V.createBuffer(),V.bindBuffer(V.ARRAY_BUFFER,D.o),V.enableVertexAttribArray(D.j.H),V.vertexAttribPointer(D.j.H,2,V.FLOAT,!1,0,0),V.bufferData(V.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),V.STATIC_DRAW),V.bindBuffer(V.ARRAY_BUFFER,null),V.uniform1i(De,0)}fe=D.j,V.useProgram(D.m),V.canvas.width=F.width,V.canvas.height=F.height,V.viewport(0,0,F.width,F.height),V.activeTexture(V.TEXTURE0),D.h.bindTexture2d(F.glName),V.enableVertexAttribArray(fe.I),V.bindBuffer(V.ARRAY_BUFFER,D.s),V.vertexAttribPointer(fe.I,2,V.FLOAT,!1,0,0),V.enableVertexAttribArray(fe.H),V.bindBuffer(V.ARRAY_BUFFER,D.o),V.vertexAttribPointer(fe.H,2,V.FLOAT,!1,0,0),V.bindFramebuffer(V.DRAW_FRAMEBUFFER?V.DRAW_FRAMEBUFFER:V.FRAMEBUFFER,null),V.clearColor(0,0,0,0),V.clear(V.COLOR_BUFFER_BIT),V.colorMask(!0,!0,!0,!0),V.drawArrays(V.TRIANGLE_FAN,0,4),V.disableVertexAttribArray(fe.I),V.disableVertexAttribArray(fe.H),V.bindBuffer(V.ARRAY_BUFFER,null),D.h.bindTexture2d(0)}function hn(D){this.g=D}var ln=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function en(D,F){return F+D}function Cn(D,F){window[D]=F}function Ln(D){var F=document.createElement("script");return F.setAttribute("src",D),F.setAttribute("crossorigin","anonymous"),new Promise(function(V){F.addEventListener("load",function(){V()},!1),F.addEventListener("error",function(){V()},!1),document.body.appendChild(F)})}function Ci(){return Ki(this,function D(){return k(D,function(F){switch(F.g){case 1:return F.m=2,L(F,WebAssembly.instantiate(ln),4);case 4:F.g=3,F.m=0;break;case 2:return F.m=0,F.j=null,F.return(!1);case 3:return F.return(!0)}})})}function Tn(D){if(this.g=D,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=D&&D.locateFile||en,typeof window=="object")var F=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")F=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=F,D.options){F=l(Object.keys(D.options));for(var V=F.next();!V.done;V=F.next()){V=V.value;var fe=D.options[V].default;fe!==void 0&&(this.j[V]=typeof fe=="function"?fe():fe)}}}n=Tn.prototype,n.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function ri(D,F){return D.g.files===void 0?[]:typeof D.g.files=="function"?D.g.files(F):D.g.files}function an(D){return Ki(D,function F(){var V=this,fe,De,Je,Ue,nt,Mt,Xt,dn,In,Un,vn;return k(F,function(Yt){switch(Yt.g){case 1:return fe=V,V.R?(De=ri(V,V.j),L(Yt,Ci(),2)):Yt.return();case 2:if(Je=Yt.h,typeof window=="object")return Cn("createMediapipeSolutionsWasm",{locateFile:V.locateFile}),Cn("createMediapipeSolutionsPackedAssets",{locateFile:V.locateFile}),Mt=De.filter(function(R){return R.data!==void 0}),Xt=De.filter(function(R){return R.data===void 0}),dn=Promise.all(Mt.map(function(R){var H=ki(fe,R.url);if(R.path!==void 0){var W=R.path;H=H.then(function(Y){return fe.overrideFile(W,Y),Promise.resolve(Y)})}return H})),In=Promise.all(Xt.map(function(R){return R.simd===void 0||R.simd&&Je||!R.simd&&!Je?Ln(fe.locateFile(R.url,fe.S)):Promise.resolve()})).then(function(){return Ki(fe,function R(){var H,W,Y=this;return k(R,function(se){if(se.g==1)return H=window.createMediapipeSolutionsWasm,W=window.createMediapipeSolutionsPackedAssets,L(se,H(W),2);Y.h=se.h,se.g=0})})}),Un=function(){return Ki(fe,function R(){var H=this;return k(R,function(W){return H.g.graph&&H.g.graph.url?W=L(W,ki(H,H.g.graph.url),0):(W.g=0,W=void 0),W})})}(),L(Yt,Promise.all([In,dn,Un]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Ue=De.filter(function(R){return R.simd===void 0||R.simd&&Je||!R.simd&&!Je}).map(function(R){return fe.locateFile(R.url,fe.S)}),importScripts.apply(null,u(Ue)),L(Yt,createMediapipeSolutionsWasm(Module),6);case 6:V.h=Yt.h,V.l=new OffscreenCanvas(1,1),V.h.canvas=V.l,nt=V.h.GL.createContext(V.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),V.h.GL.makeContextCurrent(nt),Yt.g=4;break;case 7:if(V.l=document.createElement("canvas"),vn=V.l.getContext("webgl2",{}),!vn&&(vn=V.l.getContext("webgl",{}),!vn))return alert("Failed to create WebGL canvas context when passing video frame."),Yt.return();V.D=vn,V.h.canvas=V.l,V.h.createContext(V.l,!0,!0,{});case 4:V.i=new V.h.SolutionWasm,V.R=!1,Yt.g=0}})})}function yi(D){return Ki(D,function F(){var V=this,fe,De,Je,Ue,nt,Mt,Xt,dn;return k(F,function(In){if(In.g==1){if(V.g.graph&&V.g.graph.url&&V.P===V.g.graph.url)return In.return();if(V.o=!0,!V.g.graph||!V.g.graph.url){In.g=2;return}return V.P=V.g.graph.url,L(In,ki(V,V.g.graph.url),3)}for(In.g!=2&&(fe=In.h,V.i.loadGraph(fe)),De=l(Object.keys(V.B)),Je=De.next();!Je.done;Je=De.next())Ue=Je.value,V.i.overrideFile(Ue,V.B[Ue]);if(V.B={},V.g.listeners)for(nt=l(V.g.listeners),Mt=nt.next();!Mt.done;Mt=nt.next())Xt=Mt.value,Ka(V,Xt);dn=V.j,V.j={},V.setOptions(dn),In.g=0})})}n.reset=function(){return Ki(this,function D(){var F=this;return k(D,function(V){F.i&&(F.i.reset(),F.m={},F.s={}),V.g=0})})},n.setOptions=function(D,F){var V=this;if(F=F||this.g.options){for(var fe=[],De=[],Je={},Ue=l(Object.keys(D)),nt=Ue.next();!nt.done;Je={K:Je.K,L:Je.L},nt=Ue.next()){var Mt=nt.value;Mt in this.j&&this.j[Mt]===D[Mt]||(this.j[Mt]=D[Mt],nt=F[Mt],nt!==void 0&&(nt.onChange&&(Je.K=nt.onChange,Je.L=D[Mt],fe.push(function(Xt){return function(){return Ki(V,function dn(){var In,Un=this;return k(dn,function(vn){if(vn.g==1)return L(vn,Xt.K(Xt.L),2);In=vn.h,In===!0&&(Un.o=!0),vn.g=0})})}}(Je))),nt.graphOptionXref&&(Mt={valueNumber:nt.type===1?D[Mt]:0,valueBoolean:nt.type===0?D[Mt]:!1,valueString:nt.type===2?D[Mt]:""},nt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),nt.graphOptionXref),Mt),De.push(nt))))}(fe.length!==0||De.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(De),this.u=(this.u===void 0?[]:this.u).concat(fe))}};function Wn(D){return Ki(D,function F(){var V=this,fe,De,Je,Ue,nt,Mt,Xt;return k(F,function(dn){switch(dn.g){case 1:if(!V.o)return dn.return();if(!V.u){dn.g=2;break}fe=l(V.u),De=fe.next();case 3:if(De.done){dn.g=5;break}return Je=De.value,L(dn,Je(),4);case 4:De=fe.next(),dn.g=3;break;case 5:V.u=void 0;case 2:if(V.A){for(Ue=new V.h.GraphOptionChangeRequestList,nt=l(V.A),Mt=nt.next();!Mt.done;Mt=nt.next())Xt=Mt.value,Ue.push_back(Xt);V.i.changeOptions(Ue),Ue.delete(),V.A=void 0}V.o=!1,dn.g=0}})})}n.initialize=function(){return Ki(this,function D(){var F=this;return k(D,function(V){return V.g==1?L(V,an(F),2):V.g!=3?L(V,yi(F),3):L(V,Wn(F),0)})})};function ki(D,F){return Ki(D,function V(){var fe=this,De,Je;return k(V,function(Ue){return F in fe.F?Ue.return(fe.F[F]):(De=fe.locateFile(F,""),Je=fetch(De).then(function(nt){return nt.arrayBuffer()}),fe.F[F]=Je,Ue.return(Je))})})}n.overrideFile=function(D,F){this.i?this.i.overrideFile(D,F):this.B[D]=F},n.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},n.send=function(D,F){return Ki(this,function V(){var fe=this,De,Je,Ue,nt,Mt,Xt,dn,In,Un;return k(V,function(vn){switch(vn.g){case 1:return fe.g.inputs?(De=1e3*(F??performance.now()),L(vn,fe.C,2)):vn.return();case 2:return L(vn,fe.initialize(),3);case 3:for(Je=new fe.h.PacketDataList,Ue=l(Object.keys(D)),nt=Ue.next();!nt.done;nt=Ue.next())if(Mt=nt.value,Xt=fe.g.inputs[Mt]){e:{var Yt=fe,R=D[Mt];switch(Xt.type){case"video":var H=Yt.m[Xt.stream];if(H||(H=new Lt(Yt.h,Yt.D),Yt.m[Xt.stream]=H),Yt=H,Yt.l===0&&(Yt.l=Yt.h.createTexture()),typeof HTMLVideoElement<"u"&&R instanceof HTMLVideoElement){var W=R.videoWidth;H=R.videoHeight}else typeof HTMLImageElement<"u"&&R instanceof HTMLImageElement?(W=R.naturalWidth,H=R.naturalHeight):(W=R.width,H=R.height);H={glName:Yt.l,width:W,height:H},W=Yt.g,W.canvas.width=H.width,W.canvas.height=H.height,W.activeTexture(W.TEXTURE0),Yt.h.bindTexture2d(Yt.l),W.texImage2D(W.TEXTURE_2D,0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,R),Yt.h.bindTexture2d(0),Yt=H;break e;case"detections":for(H=Yt.m[Xt.stream],H||(H=new hn(Yt.h),Yt.m[Xt.stream]=H),Yt=H,Yt.data||(Yt.data=new Yt.g.DetectionListData),Yt.data.reset(R.length),H=0;H<R.length;++H){W=R[H];var Y=Yt.data,se=Y.setBoundingBox,ae=H,oe=W.T,ve=new Pa;Be(ve,1,oe.Z),Be(ve,2,oe.$),Be(ve,3,oe.height),Be(ve,4,oe.width),Be(ve,5,oe.rotation),Be(ve,6,oe.X);var ze=oe=new Ce;He(ze,1,he(ve,1)),He(ze,2,he(ve,2)),He(ze,3,he(ve,3)),He(ze,4,he(ve,4)),He(ze,5,he(ve,5));var tt=he(ve,6);if(tt!=null&&tt!=null){ut(ze.g,48);var dt=ze.g,Et=tt;tt=0>Et,Et=Math.abs(Et);var Nt=Et>>>0;for(Et=Math.floor((Et-Nt)/4294967296),Et>>>=0,tt&&(Et=~Et>>>0,Nt=(~Nt>>>0)+1,4294967295<Nt&&(Nt=0,Et++,4294967295<Et&&(Et=0))),Kt=Nt,Wt=Et,tt=Kt,Nt=Wt;0<Nt||127<tt;)dt.push(tt&127|128),tt=(tt>>>7|Nt<<25)>>>0,Nt>>>=7;dt.push(tt)}if(gi(ve,ze),oe=Qe(oe),se.call(Y,ae,oe),W.O)for(Y=0;Y<W.O.length;++Y)ve=W.O[Y],ze=!!ve.visibility,se=Yt.data,ae=se.addNormalizedLandmark,oe=H,ve=Object.assign(Object.assign({},ve),{visibility:ze?ve.visibility:0}),ze=new yr,Be(ze,1,ve.x),Be(ze,2,ve.y),Be(ze,3,ve.z),ve.visibility&&Be(ze,4,ve.visibility),dt=ve=new Ce,He(dt,1,he(ze,1)),He(dt,2,he(ze,2)),He(dt,3,he(ze,3)),He(dt,4,he(ze,4)),He(dt,5,he(ze,5)),gi(ze,dt),ve=Qe(ve),ae.call(se,oe,ve);if(W.M)for(Y=0;Y<W.M.length;++Y){if(se=Yt.data,ae=se.addClassification,oe=H,ve=W.M[Y],ze=new ar,Be(ze,2,ve.Y),ve.index&&Be(ze,1,ve.index),ve.label&&Be(ze,3,ve.label),ve.displayName&&Be(ze,4,ve.displayName),dt=ve=new Ce,Nt=he(ze,1),Nt!=null&&Nt!=null)if(ut(dt.g,8),tt=dt.g,0<=Nt)ut(tt,Nt);else{for(Et=0;9>Et;Et++)tt.push(Nt&127|128),Nt>>=7;tt.push(1)}He(dt,2,he(ze,2)),tt=he(ze,3),tt!=null&&(tt=Le(tt),ut(dt.g,26),ut(dt.g,tt.length),We(dt,dt.g.end()),We(dt,tt)),tt=he(ze,4),tt!=null&&(tt=Le(tt),ut(dt.g,34),ut(dt.g,tt.length),We(dt,dt.g.end()),We(dt,tt)),gi(ze,dt),ve=Qe(ve),ae.call(se,oe,ve)}}Yt=Yt.data;break e;default:Yt={}}}switch(dn=Yt,In=Xt.stream,Xt.type){case"video":Je.pushTexture2d(Object.assign(Object.assign({},dn),{stream:In,timestamp:De}));break;case"detections":Un=dn,Un.stream=In,Un.timestamp=De,Je.pushDetectionList(Un);break;default:throw Error("Unknown input config type: '"+Xt.type+"'")}}return fe.i.send(Je),L(vn,fe.C,4);case 4:Je.delete(),vn.g=0}})})};function Ba(D,F,V){return Ki(D,function fe(){var De,Je,Ue,nt,Mt,Xt,dn=this,In,Un,vn,Yt,R,H,W,Y;return k(fe,function(se){switch(se.g){case 1:if(!V)return se.return(F);for(De={},Je=0,Ue=l(Object.keys(V)),nt=Ue.next();!nt.done;nt=Ue.next())Mt=nt.value,Xt=V[Mt],typeof Xt!="string"&&Xt.type==="texture"&&F[Xt.stream]!==void 0&&++Je;1<Je&&(dn.G=!1),In=l(Object.keys(V)),nt=In.next();case 2:if(nt.done){se.g=4;break}if(Un=nt.value,vn=V[Un],typeof vn=="string")return W=De,Y=Un,L(se,Ei(dn,Un,F[vn]),14);if(Yt=F[vn.stream],vn.type==="detection_list"){if(Yt){for(var ae=Yt.getRectList(),oe=Yt.getLandmarksList(),ve=Yt.getClassificationsList(),ze=[],tt=0;tt<ae.size();++tt){var dt=ae.get(tt);e:{var Et=new Pa;for(dt=new pt(dt);Ze(dt);)switch(dt.i){case 13:var Nt=St(dt);Be(Et,1,Nt);break;case 21:Nt=St(dt),Be(Et,2,Nt);break;case 29:Nt=St(dt),Be(Et,3,Nt);break;case 37:Nt=St(dt),Be(Et,4,Nt);break;case 45:Nt=St(dt),Be(Et,5,Nt);break;case 48:Nt=Jt(dt.g),Be(Et,6,Nt);break;default:if(!ei(Et,dt))break e}}Et={Z:ct(Et,1),$:ct(Et,2),height:ct(Et,3),width:ct(Et,4),rotation:ct(Et,5,0),X:At(Et,6,0)},dt=Qt(oa(oe.get(tt)),yr).map(gt);var kt=ve.get(tt);e:for(Nt=new wr,kt=new pt(kt);Ze(kt);)switch(kt.i){case 10:Nt.addClassification(ft(kt,new ar,sr));break;default:if(!ei(Nt,kt))break e}Et={T:Et,O:dt,M:Ne(Nt)},ze.push(Et)}ae=ze}else ae=[];De[Un]=ae,se.g=7;break}if(vn.type==="proto_list"){if(Yt){for(ae=Array(Yt.size()),oe=0;oe<Yt.size();oe++)ae[oe]=Yt.get(oe);Yt.delete()}else ae=[];De[Un]=ae,se.g=7;break}if(Yt===void 0){se.g=3;break}if(vn.type==="float_list"){De[Un]=Yt,se.g=7;break}if(vn.type==="proto"){De[Un]=Yt,se.g=7;break}if(vn.type!=="texture")throw Error("Unknown output config type: '"+vn.type+"'");return R=dn.s[Un],R||(R=new Lt(dn.h,dn.D),dn.s[Un]=R),L(se,Ht(R,Yt,dn.G),13);case 13:H=se.h,De[Un]=H;case 7:vn.transform&&De[Un]&&(De[Un]=vn.transform(De[Un])),se.g=3;break;case 14:W[Y]=se.h;case 3:nt=In.next(),se.g=2;break;case 4:return se.return(De)}})})}function Ei(D,F,V){return Ki(D,function fe(){var De=this,Je;return k(fe,function(Ue){return typeof V=="number"||V instanceof Uint8Array||V instanceof De.h.Uint8BlobList?Ue.return(V):V instanceof De.h.Texture2dDataOut?(Je=De.s[F],Je||(Je=new Lt(De.h,De.D),De.s[F]=Je),Ue.return(Ht(Je,V,De.G))):Ue.return(void 0)})})}function Ka(D,F){for(var V=F.name||"$",fe=[].concat(u(F.wants)),De=new D.h.StringList,Je=l(F.wants),Ue=Je.next();!Ue.done;Ue=Je.next())De.push_back(Ue.value);Je=D.h.PacketListener.implement({onResults:function(nt){for(var Mt={},Xt=0;Xt<F.wants.length;++Xt)Mt[fe[Xt]]=nt.get(Xt);var dn=D.listeners[V];dn&&(D.C=Ba(D,Mt,F.outs).then(function(In){In=dn(In);for(var Un=0;Un<F.wants.length;++Un){var vn=Mt[fe[Un]];typeof vn=="object"&&vn.hasOwnProperty&&vn.hasOwnProperty("delete")&&vn.delete()}In&&(D.C=In)}))}}),D.i.attachMultiListener(De,Je),De.delete()}n.onResults=function(D,F){this.listeners[F||"$"]=D},ue("Solution",Tn),ue("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Mi(D){D=ke(D);var F=D.getMesh();if(!F)return D;var V=new Float32Array(F.getVertexBufferList());F.getVertexBufferList=function(){return V};var fe=new Uint32Array(F.getIndexBufferList());return F.getIndexBufferList=function(){return fe},D}var dr={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(D){return D.map(Mi)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(D){return D.map(function(F){return Qt(oa(F),yr).map(gt)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Zi=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],or=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],lr=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Rr=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Ea=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],ao=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Co=[].concat(u(Zi),u(or),u(lr),u(Rr),u(Ea),u(ao));function ol(D){D=D||{},D=Object.assign(Object.assign({},dr),D),this.g=new Tn(D)}n=ol.prototype,n.close=function(){return this.g.close(),Promise.resolve()},n.onResults=function(D){this.g.onResults(D)},n.initialize=function(){return Ki(this,function D(){var F=this;return k(D,function(V){return L(V,F.g.initialize(),0)})})},n.reset=function(){this.g.reset()},n.send=function(D){return Ki(this,function F(){var V=this;return k(F,function(fe){return L(fe,V.g.send(D),0)})})},n.setOptions=function(D){this.g.setOptions(D)},ue("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),ue("FaceMesh",ol),ue("FACEMESH_LIPS",Zi),ue("FACEMESH_LEFT_EYE",or),ue("FACEMESH_LEFT_EYEBROW",lr),ue("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),ue("FACEMESH_RIGHT_EYE",Rr),ue("FACEMESH_RIGHT_EYEBROW",Ea),ue("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),ue("FACEMESH_FACE_OVAL",ao),ue("FACEMESH_CONTOURS",Co),ue("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),ue("matrixDataToMatrix",function(D){for(var F=D.getCols(),V=D.getRows(),fe=D.getPackedDataList(),De=[],Je=0;Je<V;Je++)De.push(Array(F));for(Je=0;Je<V;Je++)for(var Ue=0;Ue<F;Ue++){var nt=D.getLayout()===1?Je*F+Ue:Ue*V+Je;De[Je][Ue]=fe[nt]}return De}),ue("VERSION","0.4.1633559619")}).call(nS)),nS}var vG=yG();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _G=1e-7,bG=1e-4;class xG{refCount(e){return Qs("refCount")}incRef(e){return Qs("incRef")}timerAvailable(){return!0}time(e){return Qs("time")}read(e){return Qs("read")}readSync(e){return Qs("readSync")}readToGPU(e,t){return Qs("readToGPU")}numDataIds(){return Qs("numDataIds")}disposeData(e,t){return Qs("disposeData")}write(e,t,i){return Qs("write")}move(e,t,i,r,a){return Qs("move")}createTensorFromGPUData(e,t,i){return Qs("createTensorFromGPUData")}memory(){return Qs("memory")}floatPrecision(){return Qs("floatPrecision")}epsilon(){return this.floatPrecision()===32?_G:bG}dispose(){return Qs("dispose")}}function Qs(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ce(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function sl(n,e,t=""){ce(Oc(n,e),()=>t+` Shapes ${n} and ${e} must match`)}function ug(n){ce(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Qr(n){if(n.length===0)return 1;let e=n[0];for(let t=1;t<n.length;t++)e*=n[t];return e}function SG(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==null&&e[t]!==null&&n[t]!==e[t])return!1;return!0}function Oc(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function S1(n){return n%1===0}function T2(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function O3(n,e){const t=e.length;return n=n==null?e.map((i,r)=>r):[].concat(n),ce(n.every(i=>i>=-t&&i<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${n}`),ce(n.every(i=>S1(i)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(i=>i<0?t+i:i)}function TG(n,e){const t=[],i=[],r=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||r?null:O3(e,n).sort();let s=0;for(let l=0;l<n.length;++l){if(a!=null){if(a[s]===l&&n[l]!==1)throw new Error(`Can't squeeze axis ${l} since its dim '${n[l]}' is not 1`);(a[s]==null||a[s]>l)&&n[l]===1&&(t.push(n[l]),i.push(l)),a[s]<=l&&s++}n[l]!==1&&(t.push(n[l]),i.push(l))}return{newShape:t,keptDims:i}}function EG(n,e){return L6(n,e)}function L6(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else if(n==="string")t=new Array(e);else throw new Error(`Unknown data type ${n}`);return t}function MG(n,e){for(let t=0;t<n.length;t++){const i=n[t];if(isNaN(i)||!isFinite(i))throw Error(`A tensor of type ${e} being uploaded contains ${i}.`)}}function wG(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function lT(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function AG(n){if(n==null)return 0;let e=0;return n.forEach(t=>e+=t.length),e}function tM(n){return typeof n=="string"||n instanceof String}function RG(n){return typeof n=="boolean"}function NG(n){return typeof n=="number"}function D3(n){return Array.isArray(n)?D3(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":NG(n)?"float32":tM(n)?"string":RG(n)?"bool":"float32"}function uT(n){return!!(n&&n.constructor&&n.call&&n.apply)}function nM(n){const e=n.length;if(e<2)return[];const t=new Array(e-1);t[e-2]=n[e-1];for(let i=e-3;i>=0;--i)t[i]=t[i+1]*n[i+1];return t}function I6(n,e,t,i=!1){const r=new Array;if(e.length===1){const a=e[0]*(i?2:1);for(let s=0;s<a;s++)r[s]=t[n+s]}else{const a=e[0],s=e.slice(1),l=s.reduce((u,f)=>u*f)*(i?2:1);for(let u=0;u<a;u++)r[u]=I6(n+u*l,s,t,i)}return r}function cT(n,e,t=!1){if(n.length===0)return e[0];const i=n.reduce((r,a)=>r*a)*(t?2:1);if(i===0)return[];if(i!==e.length)throw new Error(`[${n}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return I6(0,n,e,t)}function U6(n,e){const t=iM(n,e);for(let i=0;i<t.length;i++)t[i]=1;return t}function iM(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${e}`)}function Ro(n){n.forEach(e=>{ce(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function Fd(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vR="tfjsflags";class CG{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=OG,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(li().getBool("IS_TEST")||li().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,i){if(this.flagRegistry[e]={evaluationFn:t,setHook:i},this.urlFlags[e]!=null){const r=this.urlFlags[e];li().getBool("IS_TEST")||li().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${r}.`),this.set(e,r)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Fd(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);vR in e&&e[vR].split(",").forEach(i=>{const[r,a]=i.split(":");this.urlFlags[r]=LG(r,a)})}}function OG(n){const e={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...i)=>(DG(e,i[0],i[1]),i.join("="))),e}function DG(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function LG(n,e){const t=e.toLowerCase();return t==="true"||t==="false"?t==="true":`${+t}`===t?+t:e}function li(){return P6}let P6=null;function IG(n){P6=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let iS;function B6(){if(iS==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");iS=n}return iS}function UG(){const n=B6();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function rM(n,e){const t=UG();if(t.has(n))return t.get(n);{const i=e();return t.set(n,i),t.get(n)}}const PG="Abs",BG="Acos",zG="Acosh",z6="Add",FG="AddN",kG="All",HG="Any",VG="ArgMax",GG="ArgMin",jG="Asin",WG="Asinh",XG="Atan",qG="Atanh",$G="Atan2",YG="AvgPool",KG="AvgPool3D",ZG="BatchMatMul",QG="BatchToSpaceND",JG="Bincount",ej="BitwiseAnd",tj="BroadcastArgs",F6="Cast",nj="Ceil",ij="ClipByValue",rj="Complex",aj="ComplexAbs",sj="Concat",oj="Conv2D",lj="Conv2DBackpropFilter",uj="Conv2DBackpropInput",cj="Conv3D",fj="Conv3DBackpropInputV2",hj="Cos",dj="Cosh",pj="Cumprod",mj="Cumsum",gj="CropAndResize",yj="DenseBincount",vj="DepthToSpace",_j="DepthwiseConv2dNative",bj="DepthwiseConv2dNativeBackpropFilter",xj="DepthwiseConv2dNativeBackpropInput",Sj="Diag",Tj="Dilation2D",Ej="RealDiv",Mj="Einsum",wj="Elu",Aj="Erf",Rj="Equal",Nj="Exp",Cj="ExpandDims",Oj="Expm1",Dj="FFT",Lj="Fill",Ij="FlipLeftRight",Uj="Floor",Pj="FloorDiv",Bj="FusedBatchNorm",zj="GatherV2",Fj="GatherNd",kj="Greater",Hj="GreaterEqual",k6="Identity",Vj="IFFT",Gj="Imag",jj="IsFinite",Wj="IsInf",Xj="IsNan",qj="LeakyRelu",$j="Less",Yj="LessEqual",Kj="LinSpace",Zj="Log",Qj="Log1p",Jj="LogicalAnd",eW="LogicalNot",tW="LogicalOr",nW="LRN",iW="Max",rW="Maximum",aW="MaxPool",sW="MaxPool3D",oW="MaxPoolWithArgmax",lW="Mean",uW="Min",cW="Minimum",fW="MirrorPad",hW="Mod",dW="Multinomial",pW="Multiply",mW="Neg",gW="NotEqual",yW="NonMaxSuppressionV3",vW="NonMaxSuppressionV4",_W="NonMaxSuppressionV5",bW="OnesLike",xW="OneHot",SW="Pack",TW="PadV2",EW="Pow",MW="Prelu",wW="Prod",AW="RaggedGather",RW="RaggedRange",NW="RaggedTensorToTensor",CW="Range",OW="Real",DW="Reciprocal",LW="Relu",IW="Reshape",UW="ResizeNearestNeighbor",PW="ResizeBilinear",BW="Relu6",zW="Reverse",FW="Round",kW="Rsqrt",HW="ScatterNd",VW="TensorScatterUpdate",GW="SearchSorted",jW="Select",WW="Selu",XW="Slice",qW="Sin",$W="Sinh",YW="Sign",KW="Sigmoid",ZW="Softplus",QW="Sqrt",JW="Sum",eX="SpaceToBatchND",tX="SplitV",nX="Softmax",iX="SparseFillEmptyRows",rX="SparseReshape",aX="SparseSegmentMean",sX="SparseSegmentSum",oX="SparseToDense",lX="SquaredDifference",uX="StaticRegexReplace",cX="StridedSlice",fX="StringNGrams",hX="StringSplit",dX="StringToHashBucketFast",pX="Sub",mX="Tan",gX="Tanh",H6="Tile",yX="TopK",vX="Transform",rS="Transpose",_X="Unique",bX="Unpack",xX="UnsortedSegmentSum",SX="ZerosLike",TX="Step",_R="FromPixels",EX="RotateWithOffset",bR="_FusedMatMul",xR="FusedConv2D",SR="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H0(...n){li().getBool("IS_TEST")||li().getBool("PROD")||console.warn(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6=rM("kernelRegistry",()=>new Map),MX=rM("gradRegistry",()=>new Map);function fT(n,e){const t=wX(n,e);return V6.get(t)}function TR(n){return MX.get(n)}function ER(n){const e=V6.entries(),t=[];for(;;){const{done:i,value:r}=e.next();if(i)break;const[a,s]=r,[l]=a.split("_");l===n&&t.push(s)}return t}function wX(n,e){return`${e}_${n}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G6(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AX(n,e){return n instanceof Float32Array&&e==="float32"||n instanceof Int32Array&&e==="int32"||n instanceof Uint8Array&&e==="bool"}function j6(n,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=T1(n)),li().getBool("DEBUG")&&MG(n,e),AX(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){const t=new Uint8Array(n.length);for(let i=0;i<t.length;++i)Math.round(n[i])!==0&&(t[i]=1);return t}else throw new Error(`Unknown data type ${e}`)}function C_(){return li().platform.now()}function RX(n,e="utf-8"){return e=e||"utf-8",li().platform.encode(n,e)}function MR(n,e="utf-8"){return e=e||"utf-8",li().platform.decode(n,e)}function il(n){return li().platform.isTypedArray!=null?li().platform.isTypedArray(n):G6(n)}function T1(n,e=[],t=!1){if(e==null&&(e=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||Fd(n)||n==null||il(n)&&t)e.push(n);else if(Array.isArray(n)||il(n))for(let i=0;i<n.length;++i)T1(n[i],e,t);else{let i=-1;for(const r of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(r)&&(i=Math.max(i,Number(r)));for(let r=0;r<=i;r++)T1(n[r],e,t)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NX{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new OX)}profileKernel(e,t,i){let r;const a=()=>{r=i()};let s;const l=C_();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(a);else{a();for(const f of r)f.dataSync();s=Promise.resolve({kernelMs:C_()-l})}if(li().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let f=0;f<r.length;f++){const m=r[f];m.data().then(g=>{CX(g,m.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:s.then(f=>f.kernelMs),extraInfo:s.then(f=>f.getExtraProfileInfo!=null?f.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:i,timeMs:r,inputs:a,extraInfo:s}=e;i.forEach(l=>{Promise.all([l.data(),r,s]).then(u=>{this.logger.logKernelProfile(t,l,u[0],u[1],a,u[2])})})}}function CX(n,e,t){if(e!=="float32")return!1;for(let i=0;i<n.length;i++){const r=n[i];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${t}'`),!0}return!1}class OX{logKernelProfile(e,t,i,r,a,s){const l=typeof r=="number"?T2(`${r}ms`,9):r.error,u=T2(e,25),f=t.rank,m=t.size,g=T2(t.shape.toString(),14);let y="";for(const _ in a){const x=a[_];if(x!=null){const w=x.shape||t.shape,T=w.length;y+=`${_}: ${T}D ${T>0?w:""} `}}console.log(`%c${u}	%c${l}	%c${f}D ${g}	%c${m}	%c${y}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DX(n,e,t){const i={},r={};for(let u=0;u<e.length;u++)i[e[u].id]=!0;for(let u=0;u<n.length;u++){const f=n[u],m=f.inputs;for(const g in m){const y=m[g];let _=!1;for(let x=0;x<e.length;x++)if(i[y.id]){f.outputs.forEach(w=>i[w.id]=!0),_=!0,r[f.id]=!0;break}if(_)break}}const a={};a[t.id]=!0;const s={};for(let u=n.length-1;u>=0;u--){const f=n[u],m=f.inputs;for(let g=0;g<f.outputs.length;g++)if(a[f.outputs[g].id]){for(const y in m)a[m[y].id]=!0,s[f.id]=!0;break}}const l=[];for(let u=0;u<n.length;u++){const f=n[u];if(r[f.id]&&s[f.id]){const m={};for(const y in f.inputs){const _=f.inputs[y];i[_.id]&&(m[y]=_)}const g=Object.assign({},f);g.inputs=m,g.outputs=f.outputs,l.push(g)}}return l}function LX(n,e,t,i){for(let r=e.length-1;r>=0;r--){const a=e[r],s=[];if(a.outputs.forEach(u=>{const f=n[u.id];f!=null?s.push(f):s.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const l=a.gradient(s);for(const u in a.inputs){if(!(u in l))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(l)}.`);const f=t(()=>l[u]());if(f.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${f.dtype}'`);const m=a.inputs[u];if(!Oc(f.shape,m.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${u}' has shape '${f.shape}', which does not match the shape of the input '${m.shape}'`);if(n[m.id]==null)n[m.id]=f;else{const g=n[m.id];n[m.id]=i(g,f),g.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wR=20,V0=3,aS=7;function IX(n,e,t,i){const r=nM(e),a=UX(n,e,t,r),s=e.length,l=E2(n,e,t,r,a),u=["Tensor"];return i&&(u.push(`  dtype: ${t}`),u.push(`  rank: ${s}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(l.map(f=>"    "+f).join(`
`)),u.join(`
`)}function UX(n,e,t,i){const r=Qr(e),a=i[i.length-1],s=new Array(a).fill(0),l=e.length,u=t==="complex64"?K0(n):n;if(l>1)for(let f=0;f<r/a;f++){const m=f*a;for(let g=0;g<a;g++)s[g]=Math.max(s[g],Y0(u[m+g],0,t).length)}return s}function Y0(n,e,t){let i;return Array.isArray(n)?i=`${parseFloat(n[0].toFixed(aS))} + ${parseFloat(n[1].toFixed(aS))}j`:tM(n)?i=`'${n}'`:t==="bool"?i=W6(n):i=parseFloat(n.toFixed(aS)).toString(),T2(i,e)}function W6(n){return n===0?"false":"true"}function E2(n,e,t,i,r,a=!0){const s=t==="complex64"?2:1,l=e[0],u=e.length;if(u===0){if(t==="complex64"){const w=K0(n);return[Y0(w[0],0,t)]}return t==="bool"?[W6(n[0])]:[n[0].toString()]}if(u===1){if(l>wR){const T=V0*s;let S=Array.from(n.slice(0,T)),O=Array.from(n.slice((l-V0)*s,l*s));return t==="complex64"&&(S=K0(S),O=K0(O)),["["+S.map((L,C)=>Y0(L,r[C],t)).join(", ")+", ..., "+O.map((L,C)=>Y0(L,r[l-V0+C],t)).join(", ")+"]"]}return["["+(t==="complex64"?K0(n):Array.from(n)).map((T,S)=>Y0(T,r[S],t)).join(", ")+"]"]}const f=e.slice(1),m=i.slice(1),g=i[0]*s,y=[];if(l>wR){for(let w=0;w<V0;w++){const T=w*g,S=T+g;y.push(...E2(n.slice(T,S),f,t,m,r,!1))}y.push("...");for(let w=l-V0;w<l;w++){const T=w*g,S=T+g;y.push(...E2(n.slice(T,S),f,t,m,r,w===l-1))}}else for(let w=0;w<l;w++){const T=w*g,S=T+g;y.push(...E2(n.slice(T,S),f,t,m,r,w===l-1))}const _=u===2?",":"";y[0]="["+(l>0?y[0]+_:"");for(let w=1;w<y.length-1;w++)y[w]=" "+y[w]+_;let x=`,
`;for(let w=2;w<u;w++)x+=`
`;return y[y.length-1]=" "+y[y.length-1]+"]"+(a?"":x),y}function K0(n){const e=[];for(let t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hT{constructor(e,t,i){if(this.dtype=t,this.shape=e.slice(),this.size=Qr(e),i!=null){const r=i.length;ce(r===this.size,()=>`Length of values '${r}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=i||L6(t,this.size),this.strides=nM(e)}set(e,...t){t.length===0&&(t=[0]),ce(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const i=this.locToIndex(t);this.values[i]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(const r of e){if(r<0||r>=this.shape[t]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}t++}let i=e[e.length-1];for(let r=0;r<e.length-1;++r)i+=this.strides[r]*e[r];return this.values[i]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let i=0;i<e.length-1;++i)t+=this.strides[i]*e[i];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const t=new Array(this.shape.length);for(let i=0;i<t.length-1;++i)t[i]=Math.floor(e/this.strides[i]),e-=t[i]*this.strides[i];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Pl().makeTensor(this.values,this.shape,this.dtype)}}let Pl=null,Em=null;function PX(n){Pl=n}function BX(n){Em=n}class Ur{constructor(e,t,i,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Qr(e),this.strides=nM(e),this.dataId=i,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Em.buffer(this.shape,this.dtype,e)}bufferSync(){return Em.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return cT(this.shape,e,this.dtype==="complex64")}arraySync(){return cT(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Pl().read(this.dataId);if(this.dtype==="string"){const t=await e;try{return t.map(i=>MR(i))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Pl().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Pl().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>MR(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Pl().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Pl().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Em.print(this,e)}clone(){return this.throwIfDisposed(),Em.clone(this)}toString(e=!1){const t=this.dataSync();return IX(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Em.cast(this,e)}variable(e=!0,t,i){return this.throwIfDisposed(),Pl().makeVariable(this,e,t,i)}}Object.defineProperty(Ur,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function X6(){return rM("Tensor",()=>Ur)}X6();class O_ extends Ur{constructor(e,t,i,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=i}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Oc(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Pl().disposeTensor(this),this.dataId=e.dataId,Pl().incRef(this,null)}dispose(){Pl().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(O_,Symbol.hasInstance,{value:n=>n instanceof Ur&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var AR;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(AR||(AR={}));var dT;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(dT||(dT={}));var pT;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(pT||(pT={}));var mT;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(mT||(mT={}));var gT;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(gT||(gT={}));const zX={float32:mT,int32:dT,bool:pT,complex64:gT};function FX(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${n} with ${e}`)}return zX[n][e]}function q6(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function $6(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zr(n,e){if(n.dtype===e.dtype)return[n,e];const t=FX(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function kX(n,e){ce(n.dtype===e.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${e.dtype}) input must match`)}function Y6(n){const e=[];return K6(n,e,new Set),e}function K6(n,e,t){if(n==null)return;if(n instanceof Ur){e.push(n);return}if(!HX(n))return;const i=n;for(const r in i){const a=i[r];t.has(a)||(t.add(a),K6(a,e,t))}}function HX(n){return Array.isArray(n)||typeof n=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sS(n){return n.kernelName!=null}class RR{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Zm{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new RR}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const i=e[t];if(await this.initializeBackend(i).success){await this.setBackend(i);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,i=1){return e in this.registryFactory?(H0(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:i},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:t,asyncInit:i}=this.initializeBackend(e);if(!(i?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new NX(this.backendInstance),!0}setupRegisteredKernels(){ER(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){ER(e).forEach(i=>{i.disposeFunc!=null&&i.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const i=t.factory();if(i&&!(i instanceof xG)&&typeof i.then=="function"){const r=++this.pendingBackendInitId,a=i.then(s=>r<this.pendingBackendInitId?!1:(this.registry[e]=s,this.pendingBackendInit=null,!0)).catch(s=>(r<this.pendingBackendInitId||(this.pendingBackendInit=null,H0(`Initialization of backend ${e} failed`),H0(s.stack||s.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(i){return H0(`Initialization of backend ${e} failed`),H0(i.stack||i.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const i=e[t],{success:r,asyncInit:a}=this.initializeBackend(i);if(a||r)return{name:i,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const i=this.state.tensorInfo.get(t),r=i.backend,a=this.readSync(t),s=r.refCount(t);r.disposeData(t,!0),i.backend=e,e.move(t,a,i.shape,i.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let i=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}let r;return this.scopedRun(()=>this.startScope(i),()=>this.endScope(r),()=>(r=t(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,t,i){e();try{const r=i();return t(),r}catch(r){throw t(),r}}nextTensorId(){return Zm.nextTensorId++}nextVariableId(){return Zm.nextVariableId++}clone(e){const t=Se.runKernel(k6,{x:e}),i={x:e},r=s=>({x:()=>{const l="float32",u={x:s},f={dtype:l};return Se.runKernel(F6,u,f)}}),a=[];return this.addTapeNode(this.state.activeScope.name,i,[t],r,a,{}),t}runKernel(e,t,i){if(this.backendName==null&&this.backend,!(fT(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:i})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,i){const r=this.backend.numDataIds();let a=0;i.forEach(u=>{a+=u.dtype==="complex64"?3:1});const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=r-t-a-s;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let t,i=[];const r=this.isTapeOn(),a=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let u;const f=sS(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(sS(e)){const{kernelName:x,inputs:w,attrs:T}=e;this.backendName==null&&this.backend;const S=fT(x,this.backendName);ce(S!=null,()=>`Cannot find registered kernel '${x}' for backend '${this.backendName}'`),l=()=>{const O=this.backend.numDataIds();u=S.kernelFunc({inputs:w,attrs:T,backend:this.backend});const L=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(x,O,L);const C=L.map(P=>P.rank!=null?P:this.makeTensorFromTensorInfo(P));if(r){const P=this.getTensorsForGradient(x,w,C);i=this.saveTensorsForBackwardMode(P)}return C}}else{const{forwardFunc:x}=e,w=T=>{r&&(i=T.map(S=>this.keep(this.clone(S))))};l=()=>{const T=this.backend.numDataIds();u=this.tidy(()=>x(this.backend,w));const S=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,T,S),S}}const{inputs:m,attrs:g}=e,y=sS(e)?null:e.backwardsFunc;let _;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=l():(_=this.profiler.profileKernel(f,m,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(_),t=_.outputs)}),r&&this.addTapeNode(f,m,t,y,i,g),this.state.profiling&&this.state.activeProfile.kernels.push({name:f,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(m).map(x=>m[x]!=null?m[x].shape:null),outputShapes:t.map(x=>x.shape),kernelTimeMs:_.timeMs,extraInfo:_.extraInfo}),Array.isArray(u)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(i=>this.keep(this.clone(i)))}getTensorsForGradient(e,t,i){const r=TR(e);if(r!=null){const a=r.inputsToSave||[],s=r.outputsToSave||[];let l;r.saveAllInputs?(ce(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(t).map(f=>t[f])):l=a.map(f=>t[f]);const u=i.filter((f,m)=>s[m]);return l.concat(u)}return[]}makeTensor(e,t,i,r){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");i=i||"float32",r=r||this.backend;let a=e;i==="string"&&tM(e[0])&&(a=e.map(u=>RX(u)));const s=r.write(a,t,i),l=new Ur(t,i,s,this.nextTensorId());if(this.trackTensor(l,r),i==="string"){const u=this.state.tensorInfo.get(s),f=AG(a);this.state.numBytes+=f-u.bytes,u.bytes=f}return l}makeTensorFromDataId(e,t,i,r){i=i||"float32";const a={dataId:e,shape:t,dtype:i};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){const{dataId:i,shape:r,dtype:a}=e,s=new Ur(r,a,i,this.nextTensorId());return this.trackTensor(s,t),s}makeVariable(e,t=!0,i,r){i=i||this.nextVariableId().toString(),r!=null&&r!==e.dtype&&(e=e.cast(r));const a=new O_(e,t,i,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*lT(e.dtype)),this.state.numBytes+=i,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:i})),e instanceof O_||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const i=e.size*lT(e.dtype);this.state.numBytes-=i}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,i=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(r=>r.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-i;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,i,r,a,s){const l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:i,saved:a},u=TR(e);u!=null&&(r=u.gradFunc),r!=null&&(l.gradient=f=>(f=f.map((m,g)=>{if(m==null){const y=i[g],_=iM(y.size,y.dtype);return this.makeTensor(_,y.shape,y.dtype)}return m}),r(f.length>1?f:f[0],a,s))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Y6(e),i=new Set(t.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const s=this.state.activeScope.track[a];!s.kept&&!i.has(s.id)&&s.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(a=>{!a.kept&&a.scopeId===r.id&&this.track(a)})}gradients(e,t,i,r=!1){if(ce(t.length>0,()=>"gradients() received an empty list of xs."),i!=null&&i.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${i.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));ce(a instanceof Ur,()=>"The result y returned by f() must be a tensor.");const s=DX(this.state.activeTape,t,a);if(!r&&s.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const l={};l[a.id]=i??VX(a.shape),LX(l,s,f=>this.tidy(f),GX);const u=t.map(f=>l[f.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(f=>{for(const m of f.saved)m.dispose()}),this.state.activeTape=null),{value:a,grads:u}})}customGrad(e){return ce(uT(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{ce(t.every(l=>l instanceof Ur),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let i;const r={};t.forEach((l,u)=>{r[u]=l});const a=(l,u)=>(i=e(...t,u),ce(i.value instanceof Ur,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),ce(uT(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),s=(l,u)=>{const f=i.gradFunc(l,u),m=Array.isArray(f)?f:[f];ce(m.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),ce(m.every(y=>y instanceof Ur),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const g={};return m.forEach((y,_)=>{g[_]=()=>y}),g};return this.runKernelFunc({forwardFunc:a,backwardsFunc:s,inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=C_(),i=await this.backend.time(e);return i.wallMs=C_()-t,i}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new RR;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Zm.nextTensorId=0;Zm.nextVariableId=0;function VX(n){const e=U6(Qr(n),"float32");return Se.makeTensor(e,n,"float32")}function Z6(){const n=B6();if(n._tfengine==null){const e=new CG(n);n._tfengine=new Zm(e)}return IG(n._tfengine.ENV),PX(()=>n._tfengine),n._tfengine}const Se=Z6();function GX(n,e){const t={a:n,b:e};return Se.runKernel(z6,t)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jX(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ps=li();Ps.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ps.registerFlag("IS_BROWSER",()=>jX());Ps.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Ps.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ps.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Ps.registerFlag("PROD",()=>!1);Ps.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ps.getBool("DEBUG"));Ps.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ps.registerFlag("IS_TEST",()=>!1);Ps.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ps.getBool("DEBUG"));Ps.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ps.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Ps.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sh(n,e){let t=n;if(il(n))return e==="string"?[]:[n.length];if(q6(n)){const r=n.channels||"RGBA";return[n.height,n.width*r.length]}else if($6(n))return[n.buffer.size/(e==null?4:lT(e))];if(!Array.isArray(n))return[];const i=[];for(;Array.isArray(t)||il(t)&&e!=="string";)i.push(t.length),t=t[0];return Array.isArray(n)&&li().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Q6(n,i,[]),i}function Q6(n,e,t){if(t=t||[],!Array.isArray(n)&&!il(n)){ce(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}ce(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${n.length} elements`),ce(n.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const i=e.slice(1);for(let r=0;r<n.length;++r)Q6(n[r],i,t.concat(r))}function NR(n,e,t,i){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==e||n==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${i}' must be ${n} tensor, but got ${e} tensor`)}}function te(n,e,t,i="numeric"){if(n instanceof X6())return NR(i,n.dtype,e,t),n;let r=D3(n);if(r!=="string"&&["bool","int32","float32"].indexOf(i)>=0&&(r=i),NR(i,r,e,t),n==null||!il(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const u=n==null?"null":n.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${u}'`)}const a=sh(n,r);!il(n)&&!Array.isArray(n)&&(n=[n]);const l=r!=="string"?j6(n,r):T1(n,[],!0);return Se.makeTensor(l,a,r)}function D_(n,e,t,i="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((a,s)=>te(a,`${e}[${s}]`,t,i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6="__op";function _e(n){const e=Object.keys(n);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0];const i=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+J6;const r=(...a)=>{Se.startScope(t);try{const s=i(...a);return Fd(s)&&console.error("Cannot return a Promise inside of tidy."),Se.endScope(s),s}catch(s){throw Se.endScope(null),s}};return Object.defineProperty(r,"name",{value:t,configurable:!0}),r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WX(n,e){const t=te(n,"real","complex"),i=te(e,"imag","complex");sl(t.shape,i.shape,`real and imag shapes, ${t.shape} and ${i.shape}, must match in call to tf.complex().`);const r={real:t,imag:i};return Se.runKernel(rj,r)}const Qf=_e({complex_:WX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oh(n,e,t,i){if(i==null)i=D3(n);else if(i==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if($6(n)||q6(n)){if(i!=="float32"&&i!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${i}.`);return Se.backend.createTensorFromGPUData(n,e||t,i)}if(!il(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Ro(e);const r=Qr(e),a=Qr(t);ce(r===a,()=>`Based on the provided shape, [${e}], the tensor should have ${r} values but has ${a}`);for(let s=0;s<t.length;++s){const l=t[s],u=s===t.length-1?l!==Qr(e.slice(s)):!0;ce(t[s]===e[s]||!u,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!il(n)&&!Array.isArray(n)&&(n=[n]),e=e||t,n=i!=="string"?j6(n,i):T1(n,[],!0),Se.makeTensor(n,e,i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uu(n,e,t){const i=sh(n,t);return oh(n,e,i,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kd={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Wl{static join(e){return new Wl(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(i=>il(i)?i.buffer:i),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let i=0;i<e.length;i++){const r=e[i];i!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=t+r.byteLength;this.shards.push({buffer:r,start:t,end:a}),t=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const i=this.findShardForByte(e);if(i===-1)throw new Error(`Could not find start shard for byte ${e}`);const r=t-e,a=new ArrayBuffer(r),s=new Uint8Array(a);let l=0;for(let u=i;u<this.shards.length;u++){const f=this.shards[u],g=e+l-f.start,y=l,x=Math.min(t,f.end)-f.start,w=new Uint8Array(f.buffer,g,x-g);if(s.set(w,y),l+=w.length,t<f.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(r){return e<r.start?-1:e>=r.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const i=XX(this.shards,t);return i===-1?-1:(this.previousShardIndex=i,this.previousShardIndex)}}function XX(n,e){let t=0,i=n.length;for(;t<=i;){const r=Math.floor((i-t)/2)+t,a=e(n[r]);if(a===0)return r;a<0?i=r:t=r+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jn(n,e){return Se.tidy(n,e)}function Er(n){Y6(n).forEach(t=>t.dispose())}function Ou(n){return Se.keep(n)}function qX(){return Se.backendName}function $X(){return Se.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jf=4;async function YX(n,e){const t=[],i=[],r=Array.isArray(n)?n.map(s=>s.name):Object.keys(n);for(let s=0;s<r.length;++s){const l=r[s],u=Array.isArray(n)?n[s].tensor:n[l];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${l}': ${u.dtype}`);const f={name:l,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const m=new Promise(async g=>{const y=await u.bytes(),_=y.reduce((T,S)=>T+S.length,0)+Jf*y.length,x=new Uint8Array(_);let w=0;for(let T=0;T<y.length;T++){const S=y[T],O=new Uint8Array(new Uint32Array([S.length]).buffer);x.set(O,w),w+=Jf,x.set(S,w),w+=S.length}g(x)});i.push(m)}else i.push(u.data());e!=null&&(f.group=e),t.push(f)}const a=await Promise.all(i);return{data:QX(a),specs:t}}function eO(n,e){const t=new Wl(n),i={};let r=0;for(const a of e){const s=KX(a,(l,u)=>t.slice(r+l,r+u));i[a.name]=tO(a,t.slice(r,r+s)),r+=s}return i}function KX(n,e){const t=Qr(n.shape);let i;if("quantization"in n){const r=n.quantization;i=kd[r.dtype]}else if(n.dtype==="string"){let r=0;for(let a=0;a<t;a++)r+=Jf+new Uint32Array(e(r,r+Jf))[0];return r}else i=kd[n.dtype];return t*i}async function ZX(n,e){const t=Qr(n.shape);let i;if("quantization"in n){const r=n.quantization;i=kd[r.dtype]}else if(n.dtype==="string"){let r=0;for(let a=0;a<t;a++)r+=Jf+new Uint32Array(await e(r,r+Jf))[0];return r}else i=kd[n.dtype];return t*i}function tO(n,e){const t=n.name,i=n.dtype,r=n.shape,a=Qr(r);let s,l=0;if("quantization"in n){const u=n.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${n.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(i!=="float32")throw new Error(`Weight ${n.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${i}.`)}else throw new Error(`Weight ${n.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const f=kd[u.dtype],m=u.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(i==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){s=new Float32Array(m.length);for(let g=0;g<m.length;g++){const y=m[g];s[g]=y*u.scale+u.min}}else if(u.dtype==="float16")s=aq()(m);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(i==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);s=new Int32Array(m.length);for(let g=0;g<m.length;g++){const y=m[g];s[g]=Math.round(y*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${t}': ${i}`);l+=a*f}else if(i==="string"){const u=Qr(n.shape);s=[];for(let f=0;f<u;f++){const m=new Uint32Array(e.slice(l,l+Jf))[0];l+=Jf;const g=new Uint8Array(e.slice(l,l+m));s.push(g),l+=m}}else{const u=kd[i];if(i==="float32")s=new Float32Array(e);else if(i==="int32")s=new Int32Array(e);else if(i==="bool")s=new Uint8Array(e);else if(i==="complex64"){s=new Float32Array(e);const f=new Float32Array(s.length/2),m=new Float32Array(s.length/2);for(let x=0;x<f.length;x++)f[x]=s[x*2],m[x]=s[x*2+1];const g=Uu(f,r,"float32"),y=Uu(m,r,"float32"),_=Qf(g,y);return g.dispose(),y.dispose(),_}else throw new Error(`Unsupported dtype in weight '${t}': ${i}`);l+=a*u}return Uu(s,r,i)}async function CR(n,e,t){let i=new Uint8Array(e);for(;i.byteLength<t;){const{done:r,value:a}=await n.read();if(r&&a==null){const l=t-i.byteLength;throw new Error(`Reader is done but ${l} bytes are still expected`)}const s=new Uint8Array(i.length+a.byteLength);s.set(i,0),s.set(new Uint8Array(a),i.length),i=s}return i.buffer}async function nO(n,e){const t={},i=n.getReader();let r=new ArrayBuffer(0);for(const a of e){const s=await ZX(a,async(f,m)=>(r=await CR(i,r,m),r.slice(f,m)));r=await CR(i,r,s);const l=r.slice(0,s);r=r.slice(s);const u=tO(a,l);if(t[a.name]=u,qX()==="webgpu"){const f=$X();"uploadToGPU"in f&&Qr(u.shape)>=li().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&f.uploadToGPU(u.dataId)}}return t}function QX(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let e=0;const t=[];n.forEach(a=>{if(e+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const i=new Uint8Array(e);let r=0;return t.forEach(a=>{i.set(new Uint8Array(a.buffer),r),r+=a.byteLength}),i.buffer}const aM=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function OR(n){return aM?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function JX(n){if(aM)return Buffer.from(n).toString("base64");const e=new Uint8Array(n);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);return btoa(t)}function eq(n){if(aM){const i=Buffer.from(n,"base64");return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}const e=atob(n),t=new Uint8Array(e.length);for(let i=0;i<e.length;++i)t.set([e.charCodeAt(i)],i);return t.buffer}function tq(n){return Wl.join(n)}function DR(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);const t=n.split("/");return t[t.length-1]}function iO(n,e){const t={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:e};return n.signature!=null&&(t.signature=n.signature),n.userDefinedMetadata!=null&&(t.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(t.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(t.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(t.trainingConfig=n.trainingConfig),t}function rO(n,e,t){const i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(i.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");i.weightSpecs=e,i.weightData=t}return n.signature!=null&&(i.signature=n.signature),n.userDefinedMetadata!=null&&(i.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(i.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(i.initializerSignature=n.initializerSignature),i}async function sM(n,e){let t,i;return n.weightsManifest!=null&&([t,i]=await e(n.weightsManifest)),rO(n,t,i)}function H1(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:OR(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:OR(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new Wl(n.weightData).byteLength}}function yT(n){const e=[];for(const t of n)e.push(...t.weights);return e}function nq(){const n=t=>{let i=t<<13,r=0;for(;(i&8388608)===0;)r-=8388608,i<<=1;return i&=-8388609,r+=947912704,i|r},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=n(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function iq(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let e=1;e<31;e++)n[e]=e<<23;for(let e=33;e<63;e++)n[e]=2147483648+(e-32<<23);return n}function rq(){const n=new Uint32Array(64);for(let e=0;e<64;e++)n[e]=1024;return n[0]=n[32]=0,n}function aq(){const n=nq(),e=iq(),t=rq();return i=>{const r=new ArrayBuffer(4*i.length),a=new Uint32Array(r);for(let s=0;s<i.length;s++){const l=i[s],u=n[t[l>>10]+(l&1023)]+e[l>>10];a[s]=u}return new Float32Array(r)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Sr.instance==null&&(Sr.instance=new Sr),Sr.instance}static registerSaveRouter(e){Sr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Sr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Sr.getHandlers(e,"save")}static getLoadHandlers(e,t){return Sr.getHandlers(e,"load",t)}static getHandlers(e,t,i){const r=[];return(t==="load"?Sr.getInstance().loadRouters:Sr.getInstance().saveRouters).forEach(s=>{const l=s(e,i);l!==null&&r.push(l)}),r}}const sq=n=>Sr.registerSaveRouter(n),oq=n=>Sr.registerLoadRouter(n),lq=n=>Sr.getSaveHandlers(n),uq=(n,e)=>Sr.getLoadHandlers(n,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vT="tensorflowjs",_T=1,Md="models_store",Gf="model_info_store";function aO(){if(!li().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function bT(n){const e=n.result;e.createObjectStore(Md,{keyPath:"modelPath"}),e.createObjectStore(Gf,{keyPath:"modelPath"})}class Hd{constructor(e){if(this.indexedDB=aO(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((i,r)=>{const a=this.indexedDB.open(vT,_T);a.onupgradeneeded=()=>bT(a),a.onsuccess=()=>{const s=a.result;if(t==null){const l=s.transaction(Md,"readonly"),f=l.objectStore(Md).get(this.modelPath);f.onsuccess=()=>{if(f.result==null)return s.close(),r(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));i(f.result.modelArtifacts)},f.onerror=m=>(s.close(),r(f.error)),l.oncomplete=()=>s.close()}else{t.weightData=Wl.join(t.weightData);const l=H1(t),u=s.transaction(Gf,"readwrite");let f=u.objectStore(Gf),m;try{m=f.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(y){return r(y)}let g;m.onsuccess=()=>{g=s.transaction(Md,"readwrite");const y=g.objectStore(Md);let _;try{_=y.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:l})}catch(x){return r(x)}_.onsuccess=()=>i({modelArtifactsInfo:l}),_.onerror=x=>{f=u.objectStore(Gf);const w=f.delete(this.modelPath);w.onsuccess=()=>(s.close(),r(_.error)),w.onerror=T=>(s.close(),r(_.error))}},m.onerror=y=>(s.close(),r(m.error)),u.oncomplete=()=>{g==null?s.close():g.oncomplete=()=>s.close()}}},a.onerror=s=>r(a.error)})}}Hd.URL_SCHEME="indexeddb://";const sO=n=>li().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Hd.URL_SCHEME)?cq(n.slice(Hd.URL_SCHEME.length)):null;Sr.registerSaveRouter(sO);Sr.registerLoadRouter(sO);function cq(n){return new Hd(n)}function fq(n){return n.startsWith(Hd.URL_SCHEME)?n.slice(Hd.URL_SCHEME.length):n}class hq{constructor(){this.indexedDB=aO()}async listModels(){return new Promise((e,t)=>{const i=this.indexedDB.open(vT,_T);i.onupgradeneeded=()=>bT(i),i.onsuccess=()=>{const r=i.result,a=r.transaction(Gf,"readonly"),l=a.objectStore(Gf).getAll();l.onsuccess=()=>{const u={};for(const f of l.result)u[f.modelPath]=f.modelArtifactsInfo;e(u)},l.onerror=u=>(r.close(),t(l.error)),a.oncomplete=()=>r.close()},i.onerror=r=>t(i.error)})}async removeModel(e){return e=fq(e),new Promise((t,i)=>{const r=this.indexedDB.open(vT,_T);r.onupgradeneeded=()=>bT(r),r.onsuccess=()=>{const a=r.result,s=a.transaction(Gf,"readwrite"),l=s.objectStore(Gf),u=l.get(e);let f;u.onsuccess=()=>{if(u.result==null)return a.close(),i(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const m=l.delete(e),g=()=>{f=a.transaction(Md,"readwrite");const _=f.objectStore(Md).delete(e);_.onsuccess=()=>t(u.result.modelArtifactsInfo),_.onerror=x=>i(u.error)};m.onsuccess=g,m.onerror=y=>(g(),a.close(),i(u.error))}},u.onerror=m=>(a.close(),i(u.error)),s.oncomplete=()=>{f==null?a.close():f.oncomplete=()=>a.close()}},r.onerror=a=>i(r.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tc="/",Mm="tensorflowjs_models",oO="info",dq="model_topology",pq="weight_specs",mq="weight_data",gq="model_metadata";function lO(n){return{info:[Mm,n,oO].join(Tc),topology:[Mm,n,dq].join(Tc),weightSpecs:[Mm,n,pq].join(Tc),weightData:[Mm,n,mq].join(Tc),modelMetadata:[Mm,n,gq].join(Tc)}}function uO(n){for(const e of Object.values(n))window.localStorage.removeItem(e)}function yq(n){const e=n.split(Tc);if(e.length<3)throw new Error(`Invalid key format: ${n}`);return e.slice(1,e.length-1).join(Tc)}function vq(n){return n.startsWith(Vd.URL_SCHEME)?n.slice(Vd.URL_SCHEME.length):n}class Vd{constructor(e){if(!li().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=lO(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),i=JSON.stringify(e.weightSpecs),r=H1(e),a=Wl.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,JX(a));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:r}}catch{throw uO(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},i=JSON.parse(this.LS.getItem(this.keys.topology));if(i==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=i;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(r==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const l=JSON.parse(a);t.format=l.format,t.generatedBy=l.generatedBy,t.convertedBy=l.convertedBy,l.signature!=null&&(t.signature=l.signature),l.userDefinedMetadata!=null&&(t.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(t.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(t.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(t.trainingConfig=l.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(s==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=eq(s),t}}Vd.URL_SCHEME="localstorage://";const cO=n=>li().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Vd.URL_SCHEME)?_q(n.slice(Vd.URL_SCHEME.length)):null;Sr.registerSaveRouter(cO);Sr.registerLoadRouter(cO);function _q(n){return new Vd(n)}class bq{constructor(){ce(li().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),ce(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=Mm+Tc,i=Tc+oO;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(i)){const s=yq(a);e[s]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=vq(e);const t=lO(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);const i=JSON.parse(this.LS.getItem(t.info));return uO(t),i}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Im="://";class us{constructor(){this.managers={}}static getInstance(){return us.instance==null&&(us.instance=new us),us.instance}static registerManager(e,t){ce(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Im)&&(e=e.slice(0,e.indexOf(Im))),ce(e.length>0,()=>"scheme must not be an empty string.");const i=us.getInstance();ce(i.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),i.managers[e]=t}static getManager(e){const t=us.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(us.getInstance().managers)}}function M2(n){if(n.indexOf(Im)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${us.getSchemes().join(",")}`);return{scheme:n.split(Im)[0],path:n.split(Im)[1]}}async function fO(n,e,t=!1){ce(n!==e,()=>`Old path and new path are the same: '${n}'`);const i=Sr.getLoadHandlers(n);ce(i.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),ce(i.length<2,()=>`Copying failed because more than one (${i.length}) load handlers for source URL ${n}.`);const r=i[0],a=Sr.getSaveHandlers(e);ce(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),ce(a.length<2,()=>`Copying failed because more than one (${i.length}) save handlers for destination URL ${e}.`);const s=a[0],l=M2(n).scheme,u=M2(n).path,f=l===M2(n).scheme,m=await r.load();t&&f&&await us.getManager(l).removeModel(u);const g=await s.save(m);return t&&!f&&await us.getManager(l).removeModel(u),g.modelArtifactsInfo}async function xq(){const n=us.getSchemes(),e={};for(const t of n){const i=await us.getManager(t).listModels();for(const r in i){const a=t+Im+r;e[a]=i[r]}}return e}async function Sq(n){const e=M2(n);return us.getManager(e.scheme).removeModel(e.path)}async function Tq(n,e){return fO(n,e,!1)}async function Eq(n,e){return fO(n,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mq{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!li().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",i=>{if(i.source===window&&i.data.name===this.messageName){i.stopPropagation();const r=this.functionRefs[i.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return G6(e)}}if(li().get("IS_BROWSER")){li().setPlatform("browser",new Mq);try{us.registerManager(Vd.URL_SCHEME,new bq)}catch{}try{us.registerManager(Hd.URL_SCHEME,new hq)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wq={importFetch:()=>require("node-fetch")};let oS;class Aq{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return li().global.fetch!=null?li().global.fetch(e,t):(oS==null&&(oS=wq.importFetch()),oS(e,t))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}li().get("IS_NODE")&&!li().get("IS_BROWSER")&&li().setPlatform("node",new Aq);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dc(n,e="float32",t){return e=e||"float32",Ro(n),new hT(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rq(n,e){const t=te(n,"x","cast");if(!wG(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");const i={x:t},r={dtype:e};return Se.runKernel(F6,i,r)}const fr=_e({cast_:Rq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nq(n){const t={x:te(n,"x","clone","string_or_numeric")};return Se.runKernel(k6,t)}const Wf=_e({clone_:Nq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hO(n,e=!1){console.log(n.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Z6();const Cq={buffer:Dc,cast:fr,clone:Wf,print:hO};BX(Cq);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oq(n,e){let t=te(n,"a","add"),i=te(e,"b","add");[t,i]=zr(t,i);const r={a:t,b:i};return Se.runKernel(z6,r)}const pn=_e({add_:Oq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dq(n,e){let t=te(n,"a","floorDiv"),i=te(e,"b","floorDiv");[t,i]=zr(t,i);const r={a:t,b:i};return Se.runKernel(Pj,r)}const dO=_e({floorDiv_:Dq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lq(n,e){let t=te(n,"a","div"),i=te(e,"b","div");if([t,i]=zr(t,i),t.dtype==="int32"&&i.dtype==="int32")return dO(t,i);const r={a:t,b:i},a={};return Se.runKernel(Ej,r,a)}const oi=_e({div_:Lq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iq(n,e){let t=te(n,"a","mul"),i=te(e,"b","mul");[t,i]=zr(t,i);const r={a:t,b:i};return Se.runKernel(pW,r)}const zt=_e({mul_:Iq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uq(n){const e=te(n,"x","abs");if(e.dtype==="complex64"){const t={x:e};return Se.runKernel(aj,t)}else{const t={x:e};return Se.runKernel(PG,t)}}const To=_e({abs_:Uq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pq(n){const t={x:te(n,"x","acos")};return Se.runKernel(BG,t)}const Bq=_e({acos_:Pq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zq(n){const t={x:te(n,"x","acosh")};return Se.runKernel(zG,t)}const Fq=_e({acosh_:zq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kq(n){ce(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),ce(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const e=n.map((r,a)=>te(r,`tensors${a}`,"addN")),t=e[0];e.forEach(r=>{if(r.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(r=>{if(!Oc(r.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const i=e;return Se.runKernel(FG,i)}const Hq=_e({addN_:kq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vq(n,e=null,t=!1){const r={x:te(n,"x","all","bool")},a={axis:e,keepDims:t};return Se.runKernel(kG,r,a)}const Gq=_e({all_:Vq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jq(n,e=null,t=!1){const r={x:te(n,"x","any","bool")},a={axis:e,keepDims:t};return Se.runKernel(HG,r,a)}const Wq=_e({any_:jq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xq(n,e=0){const i={x:te(n,"x","argMax")},r={axis:e};return Se.runKernel(VG,i,r)}const qq=_e({argMax_:Xq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $q(n,e=0){const i={x:te(n,"x","argMin")},r={axis:e};return Se.runKernel(GG,i,r)}const Yq=_e({argMin_:$q});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kq(n){const t={x:te(n,"x","asin")};return Se.runKernel(jG,t)}const Zq=_e({asin_:Kq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qq(n){const t={x:te(n,"x","asinh")};return Se.runKernel(WG,t)}const Jq=_e({asinh_:Qq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$(n){const t={x:te(n,"x","atan")};return Se.runKernel(XG,t)}const t$=_e({atan_:e$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$(n,e){let t=te(n,"a","atan2"),i=te(e,"b","atan2");[t,i]=zr(t,i);const r={a:t,b:i};return Se.runKernel($G,r)}const i$=_e({atan2_:n$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r$(n){const t={x:te(n,"x","atanh")};return Se.runKernel(qG,t)}const a$=_e({atanh_:r$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$(n,e,t,i,r,a,s="channelsLast"){const[l,u]=E1(e);let f;if(s==="channelsLast")f=[l,u,n[3],n[3]];else if(s==="channelsFirst")f=[l,u,n[1],n[1]];else throw new Error(`Unknown dataFormat ${s}`);return oM(n,f,t,i,r,a,!1,s)}function oM(n,e,t,i,r,a,s=!1,l="channelsLast"){let[u,f,m,g]=[-1,-1,-1,-1];if(l==="channelsLast")[u,f,m,g]=n;else if(l==="channelsFirst")[u,g,f,m]=n;else throw new Error(`Unknown dataFormat ${l}`);const[y,_,,x]=e,[w,T]=E1(t),[S,O]=E1(i),L=xT(y,S),C=xT(_,O),{padInfo:P,outHeight:B,outWidth:j}=u$(r,f,m,w,T,L,C,a,l),X=s?x*g:x;let k;return l==="channelsFirst"?k=[u,X,B,j]:l==="channelsLast"&&(k=[u,B,j,X]),{batchSize:u,dataFormat:l,inHeight:f,inWidth:m,inChannels:g,outHeight:B,outWidth:j,outChannels:X,padInfo:P,strideHeight:w,strideWidth:T,filterHeight:y,filterWidth:_,effectiveFilterHeight:L,effectiveFilterWidth:C,dilationHeight:S,dilationWidth:O,inShape:n,outShape:k,filterShape:e}}function o$(n,e,t,i,r){i==null&&(i=l$(n,e,t));const a=n[0],s=n[1],l=L_((a-e+2*i)/t+1,r),u=L_((s-e+2*i)/t+1,r);return[l,u]}function l$(n,e,t,i=1){const r=xT(e,i);return Math.floor((n[0]*(t-1)-t+r)/2)}function E1(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function xT(n,e){return e<=1?n:n+(n-1)*(e-1)}function u$(n,e,t,i,r,a,s,l,u){let f,m,g;if(typeof n=="number"){f={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const _=o$([e,t],a,i,n,l);m=_[0],g=_[1]}else if(n==="same"){m=Math.ceil(e/i),g=Math.ceil(t/r);const y=Math.max(0,(m-1)*i+a-e),_=Math.max(0,(g-1)*r+s-t),x=Math.floor(y/2),w=y-x,T=Math.floor(_/2),S=_-T;f={top:x,bottom:w,left:T,right:S,type:"SAME"}}else if(n==="valid")f={top:0,bottom:0,left:0,right:0,type:"VALID"},m=Math.ceil((e-a+1)/i),g=Math.ceil((t-s+1)/r);else if(typeof n=="object"){const y=u==="channelsLast"?n[1][0]:n[2][0],_=u==="channelsLast"?n[1][1]:n[2][1],x=u==="channelsLast"?n[2][0]:n[3][0],w=u==="channelsLast"?n[2][1]:n[3][1];f={top:y,bottom:_,left:x,right:w,type:y===0&&_===0&&x===0&&w===0?"VALID":"EXPLICIT"},m=L_((e-a+y+_)/i+1,l),g=L_((t-s+x+w)/r+1,l)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:f,outHeight:m,outWidth:g}}function L_(n,e){if(!e)return Math.trunc(n);switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${e}`)}}function I_(n){const[e,t,i]=E1(n);return e===1&&t===1&&i===1}function lh(n,e){return I_(n)||I_(e)}function Qm(n){return E1(n).every(e=>e>0)}function Xl(n,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")ce(S1(e),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(i=>{i.forEach(r=>{ce(S1(r),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${r}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$(n,e){const i={x:te(n,"x","reshape","string_or_numeric")},r={shape:e};return Se.runKernel(IW,i,r)}const lt=_e({reshape_:c$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$(n,e,t,i,r){const a=te(n,"x","avgPool","float32"),s=1;ce(lh(t,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`);let l=a,u=!1;a.rank===3&&(u=!0,l=lt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ce(l.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${l.rank}.`),Xl("avgPool",i,r);const f={x:l},m={filterSize:e,strides:t,pad:i,dimRoundingMode:r};let g=Se.runKernel(YG,f,m);return g=fr(g,a.dtype),u?lt(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const pO=_e({avgPool_:f$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$(n,e,t,i,r,a="NDHWC"){const s=te(n,"x","avgPool3d","float32");let l=s,u=!1;s.rank===4&&(u=!0,l=lt(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),ce(l.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${l.rank}.`),ce(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),ce(typeof t=="number"&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),Xl("avgPool3d",i,r);const f={x:l},m={filterSize:e,strides:t,pad:i,dimRoundingMode:r,dataFormat:a};let g=Se.runKernel(KG,f,m);return g=fr(g,l.dtype),u?lt(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const d$=_e({avgPool3d_:h$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$(n,e=0){ce(n.length>=1,()=>"Pass at least one tensor to concat");const t=D_(n,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),t.length===1)return Wf(t[0]);const i=t,r={axis:e};return Se.runKernel(sj,i,r)}const La=_e({concat_:p$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$(n,e,t=!1,i=!1){let r=te(n,"a","matMul"),a=te(e,"b","matMul");[r,a]=zr(r,a);const s={a:r,b:a},l={transposeA:t,transposeB:i};return Se.runKernel(ZG,s,l)}const Yi=_e({matMul_:m$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g$(n){const t={x:te(n,"x","sigmoid","float32")};return Se.runKernel(KW,t)}const Od=_e({sigmoid_:g$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y$(n,e,t){const i=te(n,"x","slice","string_or_numeric");if(i.rank===0)throw new Error("Slicing scalar is not possible");const r={x:i},a={begin:e,size:t};return Se.runKernel(XW,r,a)}const Kn=_e({slice_:y$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$(n){const t={x:te(n,"x","tanh","float32")};return Se.runKernel(gX,t)}const ST=_e({tanh_:v$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$(n,e,t,i,r,a){const s=te(n,"forgetBias","basicLSTMCell"),l=te(e,"lstmKernel","basicLSTMCell"),u=te(t,"lstmBias","basicLSTMCell"),f=te(i,"data","basicLSTMCell"),m=te(r,"c","basicLSTMCell"),g=te(a,"h","basicLSTMCell"),y=La([f,g],1),_=Yi(y,l),x=pn(_,u),w=x.shape[0],T=x.shape[1]/4,S=[w,T],O=Kn(x,[0,0],S),L=Kn(x,[0,T],S),C=Kn(x,[0,T*2],S),P=Kn(x,[0,T*3],S),B=pn(zt(Od(O),ST(L)),zt(m,Od(pn(s,C)))),j=zt(ST(B),Od(P));return[B,j]}const b$=_e({basicLSTMCell_:_$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$(n,e,t){const i=te(n,"x","batchToSpaceND"),r=e.reduce((l,u)=>l*u);ce(i.rank>=1+e.length,()=>`input rank is ${i.rank} but should be > than blockShape.length ${e.length}`),ce(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),ce(i.shape[0]%r===0,()=>`input tensor batch is ${i.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${r}`);const a={x:i},s={blockShape:e,crops:t};return Se.runKernel(QG,a,s)}const mO=_e({batchToSpaceND_:x$});function S$(n){let e;return n.rank===0||n.rank===1?e=lt(n,[1,1,1,n.size]):n.rank===2?e=lt(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?e=lt(n,[1,n.shape[0],n.shape[1],n.shape[2]]):e=n,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$(n,e,t,i,r,a){a==null&&(a=.001);const s=te(n,"x","batchNorm"),l=te(e,"mean","batchNorm"),u=te(t,"variance","batchNorm");let f;r!=null&&(f=te(r,"scale","batchNorm"));let m;i!=null&&(m=te(i,"offset","batchNorm")),ce(l.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ce(m==null||l.rank===m.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ce(f==null||l.rank===f.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const y={x:S$(s),scale:f,offset:m,mean:l,variance:u},_={varianceEpsilon:a},x=Se.runKernel(Bj,y,_);return lt(x,s.shape)}const L3=_e({batchNorm_:T$});function E$(n,e,t,i,r,a){const s=te(n,"x","batchNorm"),l=te(e,"mean","batchNorm"),u=te(t,"variance","batchNorm");let f;r!=null&&(f=te(r,"scale","batchNorm"));let m;return i!=null&&(m=te(i,"offset","batchNorm")),ce(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),ce(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${l.rank}.`),ce(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),f!=null&&ce(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${f.rank}.`),m!=null&&ce(m.rank===2||m.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${m.rank}.`),L3(s,l,u,m,f,a)}const M$=_e({batchNorm2d_:E$});function w$(n,e,t,i,r,a){const s=te(n,"x","batchNorm"),l=te(e,"mean","batchNorm"),u=te(t,"variance","batchNorm");let f;r!=null&&(f=te(r,"scale","batchNorm"));let m;return i!=null&&(m=te(i,"offset","batchNorm")),ce(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),ce(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${l.rank}.`),ce(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),f!=null&&ce(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${f.rank}.`),m!=null&&ce(m.rank===3||m.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${m.rank}.`),L3(s,l,u,m,f,a)}const A$=_e({batchNorm3d_:w$});function R$(n,e,t,i,r,a){const s=te(n,"x","batchNorm"),l=te(e,"mean","batchNorm"),u=te(t,"variance","batchNorm");let f;r!=null&&(f=te(r,"scale","batchNorm"));let m;return i!=null&&(m=te(i,"offset","batchNorm")),ce(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),ce(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${l.rank}.`),ce(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),f!=null&&ce(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${f.rank}.`),m!=null&&ce(m.rank===4||m.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${m.rank}.`),L3(s,l,u,m,f,a)}const N$=_e({batchNorm4d_:R$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C$(n,e,t){const i=te(n,"x","bincount"),r=te(e,"weights","bincount");ce(i.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${i.dtype}`),ce(t>=0,()=>`size must be non-negative, but got ${t}.`),ce(r.size===i.size||r.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${i.shape}, weights shape: ${r.shape}.`);const a={x:i,weights:r},s={size:t};return Se.runKernel(JG,a,s)}const gO=_e({bincount_:C$});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O$(n,e){const t=te(n,"x","bitwiseAnd"),i=te(e,"y","bitwiseAnd");if(!Oc(t.shape,i.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${t.shape}, y: ${i.shape}`);if(t.dtype!=="int32"||i.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${t.dtype} and type of y: ${i.dtype}`);const r={a:t,b:i};return Se.runKernel(ej,r)}const D$=_e({bitwiseAnd_:O$});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L$(n,e){const t=te(n,"s0","broadcastArgs","int32"),i=te(e,"s1","broadcastArgs","int32");if(t.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(i.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${i.rank}`);const r={s0:t,s1:i};return Se.runKernel(tj,r)}const I$=_e({broadcastArgs_:L$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U$(n,e){let t=te(n,"broadcastTo","x");const i=t.shape;if(Ro(e),e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){const f=t.shape.slice();for(;f.length<e.length;)f.unshift(1);t=lt(t,f)}const r=t.shape,a=Array.from(e);for(let f=e.length-1;f>=0;f--)if(r[f]===e[f])a[f]=1;else if(t.shape[f]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${e}].`);if(a.map((f,m)=>f>1?m:-1).filter(f=>f>=0).length===0)return Wf(t);const l={x:t},u={reps:a};return Se.runKernel(H6,l,u)}const w2=_e({broadcastTo_:U$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$(n){const t={x:te(n,"x","ceil","float32")};return Se.runKernel(nj,t)}const B$=_e({ceil_:P$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1(n,e,t){Ro(n),t=t||D3(e);const i={shape:n,value:e,dtype:t};return Se.runKernel(Lj,{},i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$(n,e,t){const i=te(n,"x","clipByValue");if(ce(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`),e===t)return V1(i.shape,e,i.dtype);const r={x:i},a={clipValueMin:e,clipValueMax:t};return Se.runKernel(ij,r,a)}const yO=_e({clipByValue_:z$});function F$(n){return La(n,0)}const k$=_e({concat1d_:F$});function H$(n,e){return La(n,e)}const V$=_e({concat2d_:H$});function G$(n,e){return La(n,e)}const j$=_e({concat3d_:G$});function W$(n,e){return La(n,e)}const X$=_e({concat4d_:W$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$(n,e,t,i,r="NHWC",a=[1,1],s){const l=te(n,"x","conv2d","float32"),u=te(e,"filter","conv2d","float32");let f=l,m=!1;l.rank===3&&(m=!0,f=lt(l,[1,l.shape[0],l.shape[1],l.shape[2]])),ce(f.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${f.rank}.`),ce(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),Xl("conv2d",i,s);const g=r==="NHWC"?f.shape[3]:f.shape[1];ce(g===u.shape[2],()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${u.shape[2]}.`),ce(lh(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),ce(Qm(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),ce(Qm(t),()=>"Error in conv2D: Strides should be larger than 0.");const y={x:f,filter:u},_={strides:t,pad:i,dataFormat:r,dilations:a,dimRoundingMode:s},x=Se.runKernel(oj,y,_);return m?lt(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const I3=_e({conv2d_:q$});function $$(n,e,t,i,r="NWC",a=1,s){const l=te(n,"x","conv1d"),u=te(e,"filter","conv1d");let f=l,m=!1;l.rank===2&&(m=!0,f=lt(l,[1,l.shape[0],l.shape[1]])),ce(f.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`),ce(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),Xl("conv1d",i,s),ce(f.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${f.shape[2]}) must match input depth for filter ${u.shape[1]}.`),ce(lh(t,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${a}'`),ce(Qm(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),ce(Qm(t),()=>"Error in conv1D: Stride should be larger than 0."),ce(r==="NWC",()=>`Error in conv1d: got dataFormat of ${r} but only NWC is currently supported.`);const g=lt(u,[1,u.shape[0],u.shape[1],u.shape[2]]),y=lt(f,[f.shape[0],1,f.shape[1],f.shape[2]]),T=I3(y,g,[1,t],i,"NHWC",[1,a],s);return m?lt(T,[T.shape[2],T.shape[3]]):lt(T,[T.shape[0],T.shape[2],T.shape[3]])}const Y$=_e({conv1d_:$$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$(n,e,t,i,r,a="NHWC",s){ce(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let l=n,u=e,f=!1;e.rank===3&&(f=!0,u=lt(e,[1,e.shape[0],e.shape[1],e.shape[2]]),l=[1,n[0],n[1],n[2]]),ce(l.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${l.length}.`),ce(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),ce(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);const m=a==="NHWC"?l[3]:l[1],g=a==="NHWC"?u.shape[3]:u.shape[1];ce(m===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${m}) must match input depth for filter ${t.shape[2]}.`),ce(g===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${g}) must match output depth for filter ${t.shape[3]}.`),Xl("conv2dDerInput",r,s);const y={dy:u,filter:t},_={strides:i,pad:r,dataFormat:a,dimRoundingMode:s,inputShape:l},x=Se.runKernel(uj,y,_);return f?lt(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const vO=_e({conv2DBackpropInput_:K$});function Z$(n,e,t,i,r,a){const s=te(n,"x","conv2dTranspose"),l=te(e,"filter","conv2dTranspose");return vO(t,s,l,i,r,"NHWC",a)}const Q$=_e({conv2dTranspose_:Z$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$(n,e,t,i,r="NDHWC",a=[1,1,1]){const s=te(n,"x","conv3d"),l=te(e,"filter","conv3d");let u=s,f=!1;s.rank===4&&(f=!0,u=lt(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),ce(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),ce(l.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${l.rank}.`),ce(u.shape[4]===l.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${l.shape[3]}.`),ce(lh(t,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),ce(r==="NDHWC",()=>`Error in conv3d: got dataFormat of ${r} but only NDHWC is currently supported.`),ce(Qm(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),ce(Qm(t),()=>"Error in conv3D: Strides should be larger than 0.");const m={x:u,filter:l},g={strides:t,pad:i,dataFormat:r,dilations:a},y=Se.runKernel(cj,m,g);return f?lt(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const eY=_e({conv3d_:J$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tY(n,e,t,i,r){ce(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let a=n,s=e,l=!1;e.rank===4&&(l=!0,s=lt(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,n[0],n[1],n[2],n[3]]);const u=a[4],f=s.shape[4];ce(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),ce(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),ce(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),ce(u===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${t.shape[3]}.`),ce(f===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${f}) must match output depth for filter ${t.shape[4]}.`);const m={dy:s,filter:t},g={pad:r,strides:i,inputShape:a},y=Se.runKernel(fj,m,g);return l?lt(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const nY=_e({conv3DBackpropInput_:tY});function iY(n,e,t,i,r){const a=te(n,"x","conv3dTranspose"),s=te(e,"filter","conv3dTranspose");return nY(t,a,s,i,r)}const rY=_e({conv3dTranspose_:iY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aY(n){const t={x:te(n,"x","cos","float32")};return Se.runKernel(hj,t)}const sY=_e({cos_:aY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oY(n){const t={x:te(n,"x","cosh","float32")};return Se.runKernel(dj,t)}const lY=_e({cosh_:oY});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uY(n,e=0,t=!1,i=!1){const a={x:te(n,"x","cumprod")},s={axis:e,exclusive:t,reverse:i};return Se.runKernel(pj,a,s)}const cY=_e({cumprod_:uY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fY(n,e=0,t=!1,i=!1){const a={x:te(n,"x","cumsum")},s={axis:e,exclusive:t,reverse:i};return Se.runKernel(mj,a,s)}const hY=_e({cumsum_:fY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dY(n,e,t,i=!1){const r=te(n,"x","denseBincount"),a=te(e,"weights","denseBincount");ce(r.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${r.dtype}`),ce(r.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${r.rank}.`),ce(t>=0,()=>`size must be non-negative, but got ${t}.`),ce(a.size===r.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${r.shape}, weights shape: ${a.shape}.`);const s={x:r,weights:a},l={size:t,binaryOutput:i};return Se.runKernel(yj,s,l)}const pY=_e({denseBincount_:dY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mY(n,e,t="NHWC"){const i=te(n,"x","depthToSpace","float32"),r=t==="NHWC"?i.shape[1]:i.shape[2],a=t==="NHWC"?i.shape[2]:i.shape[3],s=t==="NHWC"?i.shape[3]:i.shape[1];ce(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),ce(r*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${e}  for depthToSpace with input shape
    ${i.shape}`),ce(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${i.shape}`),ce(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${i.shape}`);const l={x:i},u={blockSize:e,dataFormat:t};return Se.runKernel(vj,l,u)}const gY=_e({depthToSpace_:mY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yY(n,e,t,i,r="NHWC",a=[1,1],s){const l=te(n,"x","depthwiseConv2d","float32"),u=te(e,"filter","depthwiseConv2d","float32");let f=l,m=!1;l.rank===3&&(m=!0,f=lt(l,[1,l.shape[0],l.shape[1],l.shape[2]])),ce(f.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),ce(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const g=r==="NHWC"?f.shape[3]:f.shape[1];ce(g===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${g}) must match the inChannels dimension in filter ${u.shape[2]}.`),Xl("depthwiseConv2d",i,s);const y={x:f,filter:u},_={strides:t,pad:i,dataFormat:r,dilations:a,dimRoundingMode:s},x=Se.runKernel(_j,y,_);return m?lt(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const lM=_e({depthwiseConv2d_:yY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vY(n){const t={x:te(n,"x","diag")};return Se.runKernel(Sj,t)}const _Y=_e({diag_:vY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bY(n,e,t,i,r=[1,1],a="NHWC"){const s=te(n,"x","dilation2d"),l=te(e,"filter","dilation2d");ce(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),ce(l.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${l.rank}.`),ce(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let u=s,f=!1;s.rank===3&&(u=lt(s,[1,s.shape[0],s.shape[1],s.shape[2]]),f=!0),ce(u.shape[3]===l.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${l.shape[2]}`);const m={x:u,filter:l},g={strides:t,pad:i,dilations:r},y=Se.runKernel(Tj,m,g);return f?lt(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const xY=_e({dilation2d_:bY});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SY(n,e){const t=[];for(let i=0;i<e.length;i++){const r=n[n.length-i-1],a=e.length-i-1,s=e[a];(r==null||r===1&&s>1)&&t.unshift(a)}return t}function Sa(n,e){const t=Math.max(n.length,e.length),i=new Array(t);for(let r=0;r<t;r++){let a=n[n.length-r-1];a==null&&(a=1);let s=e[e.length-r-1];if(s==null&&(s=1),a===1)i[t-r-1]=s;else if(s===1)i[t-r-1]=a;else if(a!==s){const l=`Operands could not be broadcast together with shapes ${n} and ${e}.`;throw Error(l)}else i[t-r-1]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TY(n,e){let t=te(n,"a","equal","string_or_numeric"),i=te(e,"b","equal","string_or_numeric");[t,i]=zr(t,i),Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel(Rj,r)}const _O=_e({equal_:TY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EY(n,e,t){const i=te(e,"a","where"),r=te(t,"b","where"),a=te(n,"condition","where","bool"),s=Sa(Sa(a.shape,i.shape),r.shape),l=w2(a,s),u=w2(i,s),f=w2(r,s),m={condition:l,t:u,e:f};return Se.runKernel(jW,m)}const Xf=_e({where_:EY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MY(n){const t={x:te(n,"x","zerosLike")};return Se.runKernel(SX,t)}const Ao=_e({zerosLike_:MY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wY(n,e){let t=te(n,"a","div"),i=te(e,"b","div");[t,i]=zr(t,i);const r=oi(t,i),a=Ao(r),s=_O(i,a);return Xf(s,a,r)}const AY=_e({divNoNan_:wY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RY(n,e){const t=te(n,"t1","dot"),i=te(e,"t2","dot");ce((t.rank===1||t.rank===2)&&(i.rank===1||i.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${i.rank}.`);const r=t.rank===1?t.size:t.shape[1],a=i.rank===1?i.size:i.shape[0];if(ce(r===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${r} and ${a}.`),t.rank===1&&i.rank===1){const s=lt(t,[1,-1]),l=lt(i,[-1,1]),u=Yi(s,l);return lt(u,[])}else if(t.rank===1&&i.rank===2){const s=lt(t,[1,-1]),l=lt(i,[i.shape[0],i.shape[1]]),u=Yi(s,l);return lt(u,[u.size])}else if(t.rank===2&&i.rank===1){const s=lt(i,[-1,1]),l=Yi(t,s);return lt(l,[l.size])}else{const s=lt(i,[i.shape[0],i.shape[1]]);return Yi(t,s)}}const NY=_e({dot_:RY});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CY(n,...e){const t=e.map((r,a)=>te(r,`tensors${a}`,"einsum")),i={equation:n};return Se.runKernel(Mj,t,i)}const wm=_e({einsum_:CY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OY(n){const t={x:te(n,"x","elu","float32")};return Se.runKernel(wj,t)}const bO=_e({elu_:OY});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DY(n,e){const t=te(n,"x","ensureShape","string_or_numeric");if(!SG(t.shape,e))throw new Error(`EnsureShape: Shape of tensor ${t.shape} is not compatible with expected shape ${e}`);return n}const LY=_e({ensureShape_:DY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IY(n){let e=te(n,"x","erf");ce(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=fr(e,"float32"));const t={x:e};return Se.runKernel(Aj,t)}const UY=_e({erf_:IY});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(n,e,t){const i=n.length+e.length,r=[];let a=0,s=0;for(let l=0;l<i;l++)t.indexOf(l)===-1?r.push(n[a++]):r.push(e[s++]);return r}function U3(n,e){const t=e.map(i=>1);return PY(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BY(n,e=null,t=!1){const r={x:te(n,"x","max")},a={reductionIndices:e,keepDims:t};return Se.runKernel(iW,r,a)}const Um=_e({max_:BY});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zY(n,e=null,t=!1){const r={x:te(n,"x","min")},a={axis:e,keepDims:t};return Se.runKernel(uW,r,a)}const TT=_e({min_:zY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FY(n,e){let t=te(n,"base","pow"),i=te(e,"exp","pow");[t,i]=zr(t,i);const r={a:t,b:i};return Se.runKernel(EW,r)}const M1=_e({pow_:FY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Si(n,e){if((il(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&il(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return oh(n,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kY(n){const t={x:te(n,"x","sqrt","float32")};return Se.runKernel(QW,t)}const Lc=_e({sqrt_:kY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HY(n){const e=te(n,"x","square"),t={};return Se.runKernel("Square",{x:e},t)}const Fl=_e({square_:HY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VY(n,e=null,t=!1){let i=te(n,"x","sum");i.dtype==="bool"&&(i=fr(i,"int32"));const r={x:i},a={axis:e,keepDims:t};return Se.runKernel(JW,r,a)}const cr=_e({sum_:VY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GY(n,e="euclidean",t=null,i=!1){n=te(n,"x","norm");const r=xO(n,e,t);let a=r.shape;if(i){const s=O3(t,n.shape);a=U3(r.shape,s)}return lt(r,a)}function xO(n,e,t=null){if(n.rank===0)return To(n);if(n.rank!==1&&t===null)return xO(lt(n,[-1]),e,t);if(n.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return cr(To(n),t);if(e===1/0)return Um(To(n),t);if(e===-1/0)return TT(To(n),t);if(e==="euclidean"||e===2)return Lc(cr(M1(To(n),Si(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return Um(cr(To(n),t[0]),t[1]-1);if(e===1/0)return Um(cr(To(n),t[1]),t[0]);if(e===-1/0)return TT(cr(To(n),t[1]),t[0]);if(e==="fro"||e==="euclidean")return Lc(cr(Fl(n),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const P3=_e({norm_:GY});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jY(n,e=null,t=!1){return P3(n,"euclidean",e,t)}const WY=_e({euclideanNorm_:jY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XY(n){const t={x:te(n,"x","exp")};return Se.runKernel(Nj,t)}const Ic=_e({exp_:XY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qY(n,e=0){const t=te(n,"x","expandDims","string_or_numeric");ce(e<=t.rank,()=>"Axis must be <= rank of the tensor");const i={input:t},r={dim:e};return Se.runKernel(Cj,i,r)}const Qo=_e({expandDims_:qY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(n){const t={x:te(n,"x","expm1")};return Se.runKernel(Oj,t)}const YY=_e({expm1_:$Y});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KY(n,e){const t=te(n,"x","tile","string_or_numeric");ce(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);const i={x:t},r={reps:e};return Se.runKernel(H6,i,r)}const l1=_e({tile_:KY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZY(n,e,t,i="float32"){e==null&&(e=n);const r=Dc([n,e],i),a=n<=e?n:e;for(let l=0;l<a;++l)r.set(1,l,l);const s=lt(r.toTensor(),[n,e]);if(t==null)return s;if(t.length===1)return l1(Qo(s,0),[t[0],1,1]);if(t.length===2)return l1(Qo(Qo(s,0),0),[t[0],t[1],1,1]);if(t.length===3)return l1(Qo(Qo(Qo(s,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}const SO=_e({eye_:ZY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QY(n){const t={x:te(n,"x","floor","float32")};return Se.runKernel(Uj,t)}const TO=_e({floor_:QY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JY(n,e,t=0,i=0){const r=te(n,"x","gather"),a=te(e,"indices","gather","int32"),s={x:r,indices:a},l={axis:t,batchDims:i};return Se.runKernel(zj,s,l)}const EO=_e({gather_:JY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eK(n,e){let t=te(n,"a","greater","string_or_numeric"),i=te(e,"b","greater","string_or_numeric");[t,i]=zr(t,i),Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel(kj,r)}const B3=_e({greater_:eK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tK(n,e){let t=te(n,"a","greaterEqual","string_or_numeric"),i=te(e,"b","greaterEqual","string_or_numeric");[t,i]=zr(t,i),Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel(Hj,r)}const MO=_e({greaterEqual_:tK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nK(n){const t={input:te(n,"input","imag")};return Se.runKernel(Gj,t)}const z3=_e({imag_:nK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iK(n){const t={x:te(n,"x","isFinite")};return Se.runKernel(jj,t)}const rK=_e({isFinite_:iK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aK(n){const t={x:te(n,"x","isInf")};return Se.runKernel(Wj,t)}const sK=_e({isInf_:aK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oK(n){const t={x:te(n,"x","isNaN")};return Se.runKernel(Xj,t)}const lK=_e({isNaN_:oK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uK(n,e=.2){const i={x:te(n,"x","leakyRelu")},r={alpha:e};return Se.runKernel(qj,i,r)}const wO=_e({leakyRelu_:uK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cK(n,e){let t=te(n,"a","less","string_or_numeric"),i=te(e,"b","less","string_or_numeric");[t,i]=zr(t,i),Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel($j,r)}const ET=_e({less_:cK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fK(n,e){let t=te(n,"a","lessEqual","string_or_numeric"),i=te(e,"b","lessEqual","string_or_numeric");[t,i]=zr(t,i),Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel(Yj,r)}const uM=_e({lessEqual_:fK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hK(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");const i={start:n,stop:e,num:t};return Se.runKernel(Kj,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dK(n,e=5,t=1,i=1,r=.5){const a=te(n,"x","localResponseNormalization");ce(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),ce(S1(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=a,l=!1;a.rank===3&&(l=!0,s=lt(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const u={x:s},f={depthRadius:e,bias:t,alpha:i,beta:r},m=Se.runKernel(nW,u,f);return l?lt(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const pK=_e({localResponseNormalization_:dK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mK(n){const t={x:te(n,"x","log","float32")};return Se.runKernel(Zj,t)}const w1=_e({log_:mK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gK(n){const t={x:te(n,"x","log1p")};return Se.runKernel(Qj,t)}const AO=_e({log1p_:gK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yK(n,e){ce(uT(n),()=>"The f passed in variableGrads(f) must be a function"),ce(e==null||Array.isArray(e)&&e.every(f=>f instanceof O_),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const t=e!=null;if(!t){e=[];for(const f in Se.registeredVariables)e.push(Se.registeredVariables[f])}const i=t?e.filter(f=>!f.trainable):null,r=e.length;e=e.filter(f=>f.trainable),ce(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${r} variables is trainable.`);const a=!0,{value:s,grads:l}=Se.gradients(n,e,null,a);ce(l.some(f=>f!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),ce(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);const u={};return e.forEach((f,m)=>{l[m]!=null&&(u[f.name]=l[m])}),i?.forEach(f=>u[f.name]=null),{value:s,grads:u}}function Uc(n){return Se.customGrad(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vK(n){const t={x:te(n,"x","neg")};return Se.runKernel(mW,t)}const Pu=_e({neg_:vK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _K(n){const t={x:te(n,"x","softplus")};return Se.runKernel(ZW,t)}const RO=_e({softplus_:_K});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bK(n){const e=te(n,"x","logSigmoid");return Uc(i=>({value:Pu(RO(Pu(i))),gradFunc:s=>zt(s,Od(Pu(i)))}))(e)}const xK=_e({logSigmoid_:bK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SK(n,e){let t=te(n,"a","sub"),i=te(e,"b","sub");[t,i]=zr(t,i);const r={a:t,b:i};return Se.runKernel(pX,r)}const Zn=_e({sub_:SK});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TK(n,e=-1){const t=te(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return Uc((r,a)=>{const l=Um(r,e,!0),u=Zn(r,l),f=Zn(fr(u,"float32"),w1(cr(Ic(u),e,!0)));return a([f]),{value:f,gradFunc:(g,y)=>{const[_]=y,x=!0,w=Ic(_);return Zn(g,zt(cr(g,e,x),w))}}})(t)}const EK=_e({logSoftmax_:TK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MK(n,e=null,t=!1){const i=te(n,"x","logSumExp"),r=O3(e,i.shape),a=Um(i,r,!0),s=Zn(i,a),l=Ic(s),u=cr(l,r),f=w1(u),m=pn(lt(a,f.shape),f);if(t){const g=U3(m.shape,r);return lt(m,g)}return m}const NO=_e({logSumExp_:MK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wK(n,e){const t=te(n,"a","logicalAnd","bool"),i=te(e,"b","logicalAnd","bool");Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel(Jj,r)}const U_=_e({logicalAnd_:wK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AK(n){const t={x:te(n,"x","logicalNot","bool")};return Se.runKernel(eW,t)}const CO=_e({logicalNot_:AK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RK(n,e){const t=te(n,"a","logicalOr","bool"),i=te(e,"b","logicalOr","bool");Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel(tW,r)}const OO=_e({logicalOr_:RK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NK(n,e){const t=te(n,"a","logicalXor","bool"),i=te(e,"b","logicalXor","bool");return Sa(t.shape,i.shape),U_(OO(n,e),CO(U_(n,e)))}const CK=_e({logicalXor_:NK});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f2=2147483648;function OK(n,e,t="left"){const i=te(n,"sortedSequence","searchSorted"),r=te(e,"values","searchSorted"),a=i.shape[i.shape.length-1],s=r.shape[r.shape.length-1],l=lt(i,[-1,a]),u=lt(r,[-1,s]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Qr(u.shape)>=f2)throw new Error(`values tensor size must less than ${f2}`);if(l.shape[1]>=f2)throw new Error(`trailing dim_size must less than ${f2} for int32 output type, was ${l.shape[1]}`);const f={sortedSequence:l,values:u},m={side:t};return Se.runKernel(GW,f,m)}const cM=_e({searchSorted_:OK});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DK(n,e){return cM(n,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LK(n,e,t,i,r){const a=te(n,"x","maxPool"),s=1;let l=a,u=!1;a.rank===3&&(u=!0,l=lt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ce(l.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${l.rank}.`),ce(lh(t,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`),Xl("maxPool",i,r);const f={x:l},m={filterSize:e,strides:t,pad:i,dimRoundingMode:r},g=Se.runKernel(aW,f,m);return u?lt(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const DO=_e({maxPool_:LK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IK(n,e=[1,1,1],t,i,r,a="NDHWC"){const s=te(n,"x","maxPool3d");let l=s,u=!1;s.rank===4&&(u=!0,l=lt(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),ce(l.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${l.rank}.`),ce(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Xl("maxPool3d",i,r);const f={x:l},m={filterSize:e,strides:t,pad:i,dimRoundingMode:r,dataFormat:a},g=Se.runKernel(sW,f,m);return u?lt(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const UK=_e({maxPool3d_:IK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PK(n,e,t,i,r=!1){const s={x:te(n,"x","maxPoolWithArgmax")},l={filterSize:e,strides:t,pad:i,includeBatchInIndex:r},u=Se.runKernel(oW,s,l);return{result:u[0],indexes:u[1]}}const BK=_e({maxPoolWithArgmax_:PK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zK(n,e){let t=te(n,"a","maximum"),i=te(e,"b","maximum");[t,i]=zr(t,i),t.dtype==="bool"&&(t=fr(t,"int32"),i=fr(i,"int32")),Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel(rW,r)}const LO=_e({maximum_:zK});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FK(n,e=null,t=!1){const r={x:te(n,"x","mean")},a={axis:e,keepDims:t};return Se.runKernel(lW,r,a)}const P_=_e({mean_:FK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jm(n,e="float32"){if(Ro(n),e==="complex64"){const i=Jm(n,"float32"),r=Jm(n,"float32");return Qf(i,r)}const t=iM(Qr(n),e);return Se.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wd(n,e="float32"){if(Ro(n),e==="complex64"){const i=wd(n,"float32"),r=Jm(n,"float32");return Qf(i,r)}const t=U6(Qr(n),e);return Se.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kK(n,e,{indexing:t="xy"}={}){if(t!=="xy"&&t!=="ij")throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(n===void 0)return[];let i=te(n,"x","meshgrid",n instanceof Ur?n.dtype:"float32");if(e===void 0)return[i];let r=te(e,"y","meshgrid",e instanceof Ur?e.dtype:"float32");const a=Qr(i.shape),s=Qr(r.shape);return t==="xy"?(i=lt(i,[1,-1]),r=lt(r,[-1,1]),[Yi(wd([s,1],i.dtype),i),Yi(r,wd([1,a],r.dtype))]):(i=lt(i,[-1,1]),r=lt(r,[1,-1]),[Yi(i,wd([1,s],i.dtype)),Yi(wd([a,1],r.dtype),r)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HK(n,e){let t=te(n,"a","minimum"),i=te(e,"b","minimum");[t,i]=zr(t,i),t.dtype==="bool"&&(t=fr(t,"int32"),i=fr(i,"int32")),Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel(cW,r)}const B_=_e({minimum_:HK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VK(n,e,t){ce(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);const i=te(n,"x","mirrorPad");if(i.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ce(e.length===i.rank,()=>`Padding doesn't match input. Must be ${i.rank}. Got ${e.length}.`);const r=t==="reflect"?1:0;for(let l=0;l<i.rank;l++)ce(e[l].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ce(e[l][0]>=0&&e[l][0]<=i.shape[l]-r&&e[l][1]>=0&&e[l][1]<=i.shape[l]-r,()=>`Padding in dimension ${l} cannot be greater than or equal to ${i.shape[l]-r} or less than 0 for input of shape ${i.shape}`);const a={paddings:e,mode:t},s={x:i};return Se.runKernel(fW,s,a)}const GK=_e({mirrorPad_:VK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jK(n,e){let t=te(n,"a","mod"),i=te(e,"b","mod");[t,i]=zr(t,i);const r={a:t,b:i};return Se.runKernel(hW,r)}const WK=_e({mod_:jK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XK(n,e=null,t=!1){n=te(n,"x","moments");const i=O3(e,n.shape),r=P_(n,i,t);let a=r.shape;t||(a=U3(r.shape,i));const s=Fl(Zn(fr(n,"float32"),lt(r,a))),l=P_(s,i,t);return{mean:r,variance:l}}const qK=_e({moments_:XK});function $K(n,e,t,i){const r=te(e,"data","multiRNNCell"),a=D_(t,"c","multiRNNCell"),s=D_(i,"h","multiRNNCell");let l=r;const u=[];for(let g=0;g<n.length;g++){const y=n[g](l,a[g],s[g]);u.push(y[0]),u.push(y[1]),l=y[1]}const f=[],m=[];for(let g=0;g<u.length;g+=2)f.push(u[g]),m.push(u[g+1]);return[f,m]}const YK=_e({multiRNNCell_:$K});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KK(n,e,t,i=!1){const r=te(n,"logits","multinomial"),a=r.size,s=r.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);t=t||Math.random();const u={logits:s===1?lt(r,[1,-1]):r},f={numSamples:e,seed:t,normalized:i},m=Se.runKernel(dW,u,f);return s===1?lt(m,[m.size]):m}const ZK=_e({multinomial_:KK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QK(n,e){let t=te(n,"a","notEqual","string_or_numeric"),i=te(e,"b","notEqual","string_or_numeric");[t,i]=zr(t,i),Sa(t.shape,i.shape);const r={a:t,b:i};return Se.runKernel(gW,r)}const IO=_e({notEqual_:QK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JK(n,e,t=1,i=0,r="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const s={indices:te(n,"indices","oneHot","int32")},l={dtype:r,depth:e,onValue:t,offValue:i};return Se.runKernel(xW,s,l)}const eZ=_e({oneHot_:JK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tZ(n){const t={x:te(n,"x","onesLike")};return Se.runKernel(bW,t)}const nZ=_e({onesLike_:tZ});function iZ(n,e){const t=te(n,"v1","outerProduct"),i=te(e,"v2","outerProduct");ce(t.rank===1&&i.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${i.rank}.`);const r=lt(t,[-1,1]),a=lt(i,[1,-1]);return Yi(r,a)}const rZ=_e({outerProduct_:iZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aZ(n,e,t=0){const i=te(n,"x","pad");if(i.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const r={paddings:e,constantValue:t},a={x:i};return Se.runKernel(TW,a,r)}const G1=_e({pad_:aZ});function sZ(n,e,t=0){return ce(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),G1(n,[e],t)}const oZ=_e({pad1d_:sZ});function lZ(n,e,t=0){return ce(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),G1(n,e,t)}const uZ=_e({pad2d_:lZ});function cZ(n,e,t=0){return ce(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),G1(n,e,t)}const fZ=_e({pad3d_:cZ});function hZ(n,e,t=0){return ce(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),G1(n,e,t)}const dZ=_e({pad4d_:hZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pZ(n,e,t){const i=te(n,"x","spaceToBatchND");ce(i.rank>=1+e.length,()=>`input rank ${i.rank} should be > than [blockShape] ${e.length}`),ce(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),ce(i.shape.reduce((s,l,u)=>u>0&&u<=e.length?s&&(l+t[u-1][0]+t[u-1][1])%e[u-1]===0:s,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);const r={x:i},a={blockShape:e,paddings:t};return Se.runKernel(eX,r,a)}const UO=_e({spaceToBatchND_:pZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mZ(n,e,t,i,r,a,s){r==null&&(r=[1,1]),a==null&&(a=1),i===0&&(i="valid");const l=te(n,"x","maxPool");let u=l,f=!1;l.rank===3&&(f=!0,u=lt(l,[1,l.shape[0],l.shape[1],l.shape[2]])),ce(lh(a,r),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${r}'`);const m=s$(u.shape,e,a,r,i),g=[m.dilationHeight,m.dilationWidth];let y;i==="same"?y=yZ([m.filterHeight,m.filterWidth],g):y=[[0,0],[0,0]];const _=g[0]===1&&g[1]===1,[x,w]=gZ([m.inHeight,m.inWidth],g,y),T=_?i:"valid",S=_?u:UO(u,g,x),L=(t==="avg"?()=>pO(S,e,a,T,s):()=>DO(S,e,a,T,s))(),C=_?L:mO(L,g,w);return f?lt(C,[C.shape[1],C.shape[2],C.shape[3]]):C}function gZ(n,e,t){const i=t.map(m=>m[0]),r=t.map(m=>m[1]),a=n.concat(i,r),s=e.map((m,g)=>(m-a[g]%m)%m),l=r.map((m,g)=>m+s[g]),u=e.map((m,g)=>[i[g],l[g]]),f=e.map((m,g)=>[0,s[g]]);return[u,f]}function yZ(n,e){const i=n.map((s,l)=>s+(s-1)*(e[l]-1)).map(s=>s-1),r=i.map(s=>Math.floor(s/2)),a=i.map((s,l)=>s-r[l]);return i.map((s,l)=>[r[l],a[l]])}const vZ=_e({pool_:mZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Z(n,e){const t=te(n,"x","prelu"),i=te(e,"alpha","prelu"),r={x:t,alpha:i};return Se.runKernel(MW,r)}const PO=_e({prelu_:_Z});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bZ(n,e=null,t=!1){let i=te(n,"x","prod");i.dtype==="bool"&&(i=fr(i,"int32"));const r={x:i},a={axis:e,keepDims:t};return Se.runKernel(wW,r,a)}const xZ=_e({prod_:bZ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SZ(n,e,t,i){const r=n.map((m,g)=>te(m,`tensors${g}`,"raggedGather","int32")),a=te(e,"paramsDenseValues","raggedGather"),s=te(t,"indices","raggedGather","int32"),l={paramsNestedSplits:r,paramsDenseValues:a,indices:s},u={outputRaggedRank:i},f=Se.runKernel(AW,l,u);return{outputNestedSplits:f.slice(0,f.length-1),outputDenseValues:f[f.length-1]}}const TZ=_e({raggedGather_:SZ});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EZ(n,e,t){const i=te(n,"starts","raggedRange"),r=te(e,"limits","raggedRange",i.dtype),a=te(t,"deltas","raggedRange",i.dtype),s={starts:i,limits:r,deltas:a},l=Se.runKernel(RW,s);return{rtNestedSplits:l[0],rtDenseValues:l[1]}}const MZ=_e({raggedRange_:EZ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wZ(n,e,t,i,r){const a=te(n,"shape","raggedTensorToTensor","int32"),s=te(e,"values","raggedTensorToTensor"),l=te(t,"defaultValue","raggedTensorToTensor",s.dtype),u=i.map((g,y)=>te(g,`tensors${y}`,"raggedTensorToTensor","int32")),f={shape:a,values:s,defaultValue:l,rowPartitionTensors:u},m={rowPartitionTypes:r};return Se.runKernel(NW,f,m)}const AZ=_e({raggedTensorToTensor_:wZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZ(n,e,t){Ro(n);const i=Qr(n);let r=null;if(t==null||t==="float32")r=new Float32Array(i);else if(t==="int32")r=new Int32Array(i);else if(t==="bool")r=new Uint8Array(i);else throw new Error(`Unknown data type ${t}`);for(let a=0;a<i;a++)r[a]=e();return Se.makeTensor(r,n,t)}const NZ=_e({rand_:RZ});var A2={exports:{}},CZ=A2.exports,LR;function OZ(){return LR||(LR=1,function(n){(function(e,t,i){function r(u){var f=this,m=l();f.next=function(){var g=2091639*f.s0+f.c*23283064365386963e-26;return f.s0=f.s1,f.s1=f.s2,f.s2=g-(f.c=g|0)},f.c=1,f.s0=m(" "),f.s1=m(" "),f.s2=m(" "),f.s0-=m(u),f.s0<0&&(f.s0+=1),f.s1-=m(u),f.s1<0&&(f.s1+=1),f.s2-=m(u),f.s2<0&&(f.s2+=1),m=null}function a(u,f){return f.c=u.c,f.s0=u.s0,f.s1=u.s1,f.s2=u.s2,f}function s(u,f){var m=new r(u),g=f&&f.state,y=m.next;return y.int32=function(){return m.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,g&&(typeof g=="object"&&a(g,m),y.state=function(){return a(m,{})}),y}function l(){var u=4022871197,f=function(m){m=String(m);for(var g=0;g<m.length;g++){u+=m.charCodeAt(g);var y=.02519603282416938*u;u=y>>>0,y-=u,y*=u,u=y>>>0,y-=u,u+=y*4294967296}return(u>>>0)*23283064365386963e-26};return f}t&&t.exports?t.exports=s:this.alea=s})(CZ,n)}(A2)),A2.exports}var R2={exports:{}},DZ=R2.exports,IR;function LZ(){return IR||(IR=1,function(n){(function(e,t,i){function r(l){var u=this,f="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var g=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^g^g>>>8},l===(l|0)?u.x=l:f+=l;for(var m=0;m<f.length+64;m++)u.x^=f.charCodeAt(m)|0,u.next()}function a(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u}function s(l,u){var f=new r(l),m=u&&u.state,g=function(){return(f.next()>>>0)/4294967296};return g.double=function(){do var y=f.next()>>>11,_=(f.next()>>>0)/4294967296,x=(y+_)/(1<<21);while(x===0);return x},g.int32=f.next,g.quick=g,m&&(typeof m=="object"&&a(m,f),g.state=function(){return a(f,{})}),g}t&&t.exports?t.exports=s:this.xor128=s})(DZ,n)}(R2)),R2.exports}var N2={exports:{}},IZ=N2.exports,UR;function UZ(){return UR||(UR=1,function(n){(function(e,t,i){function r(l){var u=this,f="";u.next=function(){var g=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(g^g<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,l===(l|0)?u.x=l:f+=l;for(var m=0;m<f.length+64;m++)u.x^=f.charCodeAt(m)|0,m==f.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u.v=l.v,u.d=l.d,u}function s(l,u){var f=new r(l),m=u&&u.state,g=function(){return(f.next()>>>0)/4294967296};return g.double=function(){do var y=f.next()>>>11,_=(f.next()>>>0)/4294967296,x=(y+_)/(1<<21);while(x===0);return x},g.int32=f.next,g.quick=g,m&&(typeof m=="object"&&a(m,f),g.state=function(){return a(f,{})}),g}t&&t.exports?t.exports=s:this.xorwow=s})(IZ,n)}(N2)),N2.exports}var C2={exports:{}},PZ=C2.exports,PR;function BZ(){return PR||(PR=1,function(n){(function(e,t,i){function r(l){var u=this;u.next=function(){var m=u.x,g=u.i,y,_;return y=m[g],y^=y>>>7,_=y^y<<24,y=m[g+1&7],_^=y^y>>>10,y=m[g+3&7],_^=y^y>>>3,y=m[g+4&7],_^=y^y<<7,y=m[g+7&7],y=y^y<<13,_^=y^y<<9,m[g]=_,u.i=g+1&7,_};function f(m,g){var y,_=[];if(g===(g|0))_[0]=g;else for(g=""+g,y=0;y<g.length;++y)_[y&7]=_[y&7]<<15^g.charCodeAt(y)+_[y+1&7]<<13;for(;_.length<8;)_.push(0);for(y=0;y<8&&_[y]===0;++y);for(y==8?_[7]=-1:_[y],m.x=_,m.i=0,y=256;y>0;--y)m.next()}f(u,l)}function a(l,u){return u.x=l.x.slice(),u.i=l.i,u}function s(l,u){l==null&&(l=+new Date);var f=new r(l),m=u&&u.state,g=function(){return(f.next()>>>0)/4294967296};return g.double=function(){do var y=f.next()>>>11,_=(f.next()>>>0)/4294967296,x=(y+_)/(1<<21);while(x===0);return x},g.int32=f.next,g.quick=g,m&&(m.x&&a(m,f),g.state=function(){return a(f,{})}),g}t&&t.exports?t.exports=s:this.xorshift7=s})(PZ,n)}(C2)),C2.exports}var O2={exports:{}},zZ=O2.exports,BR;function FZ(){return BR||(BR=1,function(n){(function(e,t,i){function r(l){var u=this;u.next=function(){var m=u.w,g=u.X,y=u.i,_,x;return u.w=m=m+1640531527|0,x=g[y+34&127],_=g[y=y+1&127],x^=x<<13,_^=_<<17,x^=x>>>15,_^=_>>>12,x=g[y]=x^_,u.i=y,x+(m^m>>>16)|0};function f(m,g){var y,_,x,w,T,S=[],O=128;for(g===(g|0)?(_=g,g=null):(g=g+"\0",_=0,O=Math.max(O,g.length)),x=0,w=-32;w<O;++w)g&&(_^=g.charCodeAt((w+32)%g.length)),w===0&&(T=_),_^=_<<10,_^=_>>>15,_^=_<<4,_^=_>>>13,w>=0&&(T=T+1640531527|0,y=S[w&127]^=_+T,x=y==0?x+1:0);for(x>=128&&(S[(g&&g.length||0)&127]=-1),x=127,w=512;w>0;--w)_=S[x+34&127],y=S[x=x+1&127],_^=_<<13,y^=y<<17,_^=_>>>15,y^=y>>>12,S[x]=_^y;m.w=T,m.X=S,m.i=x}f(u,l)}function a(l,u){return u.i=l.i,u.w=l.w,u.X=l.X.slice(),u}function s(l,u){l==null&&(l=+new Date);var f=new r(l),m=u&&u.state,g=function(){return(f.next()>>>0)/4294967296};return g.double=function(){do var y=f.next()>>>11,_=(f.next()>>>0)/4294967296,x=(y+_)/(1<<21);while(x===0);return x},g.int32=f.next,g.quick=g,m&&(m.X&&a(m,f),g.state=function(){return a(f,{})}),g}t&&t.exports?t.exports=s:this.xor4096=s})(zZ,n)}(O2)),O2.exports}var D2={exports:{}},kZ=D2.exports,zR;function HZ(){return zR||(zR=1,function(n){(function(e,t,i){function r(l){var u=this,f="";u.next=function(){var g=u.b,y=u.c,_=u.d,x=u.a;return g=g<<25^g>>>7^y,y=y-_|0,_=_<<24^_>>>8^x,x=x-g|0,u.b=g=g<<20^g>>>12^y,u.c=y=y-_|0,u.d=_<<16^y>>>16^x,u.a=x-g|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,l===Math.floor(l)?(u.a=l/4294967296|0,u.b=l|0):f+=l;for(var m=0;m<f.length+20;m++)u.b^=f.charCodeAt(m)|0,u.next()}function a(l,u){return u.a=l.a,u.b=l.b,u.c=l.c,u.d=l.d,u}function s(l,u){var f=new r(l),m=u&&u.state,g=function(){return(f.next()>>>0)/4294967296};return g.double=function(){do var y=f.next()>>>11,_=(f.next()>>>0)/4294967296,x=(y+_)/(1<<21);while(x===0);return x},g.int32=f.next,g.quick=g,m&&(typeof m=="object"&&a(m,f),g.state=function(){return a(f,{})}),g}t&&t.exports?t.exports=s:this.tychei=s})(kZ,n)}(D2)),D2.exports}var L2={exports:{}};const VZ={},GZ=Object.freeze(Object.defineProperty({__proto__:null,default:VZ},Symbol.toStringTag,{value:"Module"})),jZ=r8(GZ);var WZ=L2.exports,FR;function XZ(){return FR||(FR=1,function(n){(function(e,t,i){var r=256,a=6,s=52,l="random",u=i.pow(r,a),f=i.pow(2,s),m=f*2,g=r-1,y;function _(C,P,B){var j=[];P=P==!0?{entropy:!0}:P||{};var X=S(T(P.entropy?[C,L(t)]:C??O(),3),j),k=new x(j),U=function(){for(var K=k.g(a),ye=u,ue=0;K<f;)K=(K+ue)*r,ye*=r,ue=k.g(1);for(;K>=m;)K/=2,ye/=2,ue>>>=1;return(K+ue)/ye};return U.int32=function(){return k.g(4)|0},U.quick=function(){return k.g(4)/4294967296},U.double=U,S(L(k.S),t),(P.pass||B||function(K,ye,ue,we){return we&&(we.S&&w(we,k),K.state=function(){return w(k,{})}),ue?(i[l]=K,ye):K})(U,X,"global"in P?P.global:this==i,P.state)}function x(C){var P,B=C.length,j=this,X=0,k=j.i=j.j=0,U=j.S=[];for(B||(C=[B++]);X<r;)U[X]=X++;for(X=0;X<r;X++)U[X]=U[k=g&k+C[X%B]+(P=U[X])],U[k]=P;(j.g=function(K){for(var ye,ue=0,we=j.i,Ae=j.j,Z=j.S;K--;)ye=Z[we=g&we+1],ue=ue*r+Z[g&(Z[we]=Z[Ae=g&Ae+ye])+(Z[Ae]=ye)];return j.i=we,j.j=Ae,ue})(r)}function w(C,P){return P.i=C.i,P.j=C.j,P.S=C.S.slice(),P}function T(C,P){var B=[],j=typeof C,X;if(P&&j=="object")for(X in C)try{B.push(T(C[X],P-1))}catch{}return B.length?B:j=="string"?C:C+"\0"}function S(C,P){for(var B=C+"",j,X=0;X<B.length;)P[g&X]=g&(j^=P[g&X]*19)+B.charCodeAt(X++);return L(P)}function O(){try{var C;return y&&(C=y.randomBytes)?C=C(r):(C=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(C)),L(C)}catch{var P=e.navigator,B=P&&P.plugins;return[+new Date,e,B,e.screen,L(t)]}}function L(C){return String.fromCharCode.apply(0,C)}if(S(i.random(),t),n.exports){n.exports=_;try{y=jZ}catch{}}else i["seed"+l]=_})(typeof self<"u"?self:WZ,[],Math)}(L2)),L2.exports}var lS,kR;function qZ(){if(kR)return lS;kR=1;var n=OZ(),e=LZ(),t=UZ(),i=BZ(),r=FZ(),a=HZ(),s=XZ();return s.alea=n,s.xor128=e,s.xorwow=t,s.xorshift7=i,s.xor4096=r,s.tychei=a,lS=s,lS}var fM=qZ();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hM{constructor(e,t,i,r,a){this.mean=e,this.stdDev=t,this.dtype=i,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const s=a||Math.random();this.random=fM.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const r=this.nextVal;return this.nextVal=NaN,r}let e,t,i=!1;for(;!i;){let r,a,s;do r=2*this.random()-1,a=2*this.random()-1,s=r*r+a*a;while(s>=1||s===0);const l=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*r*l,t=this.mean+this.stdDev*a*l,(!this.truncated||this.isValidTruncated(e))&&(i=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class $Z{constructor(e,t,i,r){this.alpha=e,this.beta=1/t,this.dtype=i;const a=r||Math.random();this.randu=fM.alea(a.toString()),this.randn=new hM(0,1,i,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,i,r,a,s;for(;;){do r=this.randn.nextValue(),s=1+this.c*r;while(s<=0);if(s*=s*s,e=r*r,t=1-.331*e*e,i=.5*e+this.d*(1-s+Math.log(s)),a=this.randu(),a<t||Math.log(a)<i)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class YZ{constructor(e=0,t=1,i,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=i,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=fM.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KZ(n,e,t=1,i="float32",r){if(Ro(n),t==null&&(t=1),i==null&&(i="float32"),i!=="float32"&&i!=="int32")throw new Error(`Unsupported data type ${i}`);const a=new $Z(e,t,i,r),s=Dc(n,i);for(let l=0;l<s.values.length;l++)s.values[l]=a.nextValue();return s.toTensor()}const ZZ=_e({randomGamma_:KZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QZ(n,e=0,t=1,i,r){if(Ro(n),i!=null&&i==="bool")throw new Error(`Unsupported data type ${i}`);const a=new hM(e,t,i,!1,r),s=Dc(n,i);for(let l=0;l<s.values.length;l++)s.values[l]=a.nextValue();return s.toTensor()}const BO=_e({randomNormal_:QZ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JZ(n,e,t){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return BO(n,0,1,e,t)}const eQ=_e({randomStandardNormal_:JZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tQ(n,e=0,t=1,i="float32",r){Ro(n);const a=Dc(n,i),s=new YZ(e,t,null,r);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}const dM=_e({randomUniform_:tQ});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(n,e,t,i){return dM(n,e,t,"int32",i)}const iQ=_e({randomUniformInt_:nQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1(n,e,t=1,i="float32"){if(t===0)throw new Error("Cannot have a step of zero");const r={start:n,stop:e,step:t,dtype:i};return Se.runKernel(CW,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQ(n){const t={input:te(n,"input","real")};return Se.runKernel(OW,t)}const R1=_e({real_:rQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aQ(n){const t={x:te(n,"x","reciprocal")};return Se.runKernel(DW,t)}const sQ=_e({reciprocal_:aQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQ(n){const t={x:te(n,"x","relu")};return Se.runKernel(LW,t)}const F3=_e({relu_:oQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQ(n){const t={x:te(n,"x","relu6")};return Se.runKernel(BW,t)}const zO=_e({relu6_:lQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQ(n,e){const i={x:te(n,"x","reverse")},r={dims:e};return Se.runKernel(zW,i,r)}const Gd=_e({reverse_:uQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cQ(n){const e=te(n,"x","reverse");return ce(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Gd(e,0)}const fQ=_e({reverse1d_:cQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hQ(n,e){const t=te(n,"x","reverse");return ce(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),Gd(t,e)}const dQ=_e({reverse2d_:hQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pQ(n,e){const t=te(n,"x","reverse");return ce(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),Gd(t,e)}const mQ=_e({reverse3d_:pQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gQ(n,e){const t=te(n,"x","reverse");return ce(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),Gd(t,e)}const yQ=_e({reverse4d_:gQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vQ(n){const t={x:te(n,"x","round")};return Se.runKernel(FW,t)}const FO=_e({round_:vQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Q(n){const t={x:te(n,"x","rsqrt","float32")};return Se.runKernel(kW,t)}const bQ=_e({rsqrt_:_Q});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xQ(n){const t={x:te(n,"x","selu")};return Se.runKernel(WW,t)}const SQ=_e({selu_:xQ});function TQ(n,e,t,i,r,a=[1,1],s="NHWC"){const l=te(n,"x","separableConv2d"),u=te(e,"depthwiseFilter","separableConv2d"),f=te(t,"pointwiseFilter","separableConv2d");let m=l,g=!1;if(l.rank===3&&(g=!0,m=lt(l,[1,l.shape[0],l.shape[1],l.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ce(m.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${m.rank}.`),ce(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),ce(f.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),ce(f.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${f.shape[0]}.`),ce(f.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${f.shape[1]}.`);const y=u.shape[2],_=u.shape[3];ce(f.shape[2]===y*_,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${y*_}, but got ${f.shape[2]}.`);const x=lM(m,u,i,r,s,a),T=I3(x,f,1,"valid",s);return g?lt(T,[T.shape[1],T.shape[2],T.shape[3]]):T}const EQ=_e({separableConv2d_:TQ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function MQ(n,e){const t=te(n,"x","setdiff1d"),i=te(e,"y","setdiff1d");ce(t.dtype===i.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${i.dtype}).`),ce(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),ce(i.rank===1,()=>`y should be 1D tensor, but got y (${i.shape}).`);const r=await t.data(),a=await i.data(),s=new Set(a);let l=0;for(let m=0;m<r.length;m++)s.has(r[m])||l++;const u=new hT([l],t.dtype),f=new hT([l],"int32");for(let m=0,g=0;m<r.length;m++)s.has(r[m])||(u.values[g]=r[m],f.values[g]=m,g++);return[u.toTensor(),f.toTensor()]}const wQ=MQ;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQ(n){const t={x:te(n,"x","sign")};return Se.runKernel(YW,t)}const RQ=_e({sign_:AQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQ(n){const t={x:te(n,"x","sin","float32")};return Se.runKernel(qW,t)}const CQ=_e({sin_:NQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQ(n){const t={x:te(n,"x","sinh")};return Se.runKernel($W,t)}const DQ=_e({sinh_:OQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQ(n,e,t){const i=te(n,"x","slice1d");return ce(i.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${i.rank} tensor`),Kn(i,[e],[t])}const IQ=_e({slice1d_:LQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UQ(n,e,t){const i=te(n,"x","slice2d");return ce(i.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${i.rank} tensor`),Kn(i,e,t)}const PQ=_e({slice2d_:UQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BQ(n,e,t){const i=te(n,"x","slice3d");return ce(i.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${i.rank} tensor`),Kn(i,e,t)}const zQ=_e({slice3d_:BQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FQ(n,e,t){const i=te(n,"x","slice4d");return ce(i.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${i.rank} tensor`),Kn(i,e,t)}const kQ=_e({slice4d_:FQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQ(n,e=-1){const t=te(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);const i={logits:t},r={dim:e};return Se.runKernel(nX,i,r)}const VQ=_e({softmax_:HQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GQ(n){ce(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const e={input:n};return Se.runKernel(Dj,e)}const pM=_e({fft_:GQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQ(n){ce(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const e={input:n};return Se.runKernel(Vj,e)}const z_=_e({ifft_:jQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WQ(n){const e=n.shape[n.shape.length-1],t=n.size/e;let i;if(e<=2){const r=lt(n,[t,e]);i=z_(r)}else{const r=[t,2*(e-1)],a=lt(R1(n),[t,e]),s=lt(z3(n),[t,e]),l=Gd(Kn(a,[0,1],[t,e-2]),1),u=zt(Gd(Kn(s,[0,1],[t,e-2]),1),Si(-1)),f=La([a,l],1),m=La([s,u],1),g=lt(Qf(f,m),[r[0],r[1]]);i=z_(g)}if(i=R1(i),n.rank===3&&n.shape[0]!==0){const r=i,a=n.shape[0];i=lt(i,[a,i.shape[0]/a,i.shape[1]]),r.dispose()}return i}const kO=_e({irfft_:WQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XQ(n,e,t=0){const r={x:te(n,"x","split")},a={numOrSizeSplits:e,axis:t};return Se.runKernel(tX,r,a)}const N1=_e({split_:XQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qQ(n,e){ce(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let t=n.shape[n.shape.length-1];const i=n.size/t;let r;if(e!=null&&e<t){const x=n.shape.map(T=>0),w=n.shape.map(T=>T);w[n.shape.length-1]=e,r=Kn(n,x,w),t=e}else if(e!=null&&e>t){const x=n.shape.map(w=>w);x[n.shape.length-1]=e-t,r=La([n,Jm(x)],n.shape.length-1),t=e}else r=n;const a=Ao(r),s=lt(Qf(r,a),[i,t]),l=pM(s),u=Math.floor(t/2)+1,f=R1(l),m=z3(l),g=N1(f,[u,t-u],f.shape.length-1),y=N1(m,[u,t-u],m.shape.length-1),_=r.shape.slice();return _[r.shape.length-1]=u,lt(Qf(g[0],y[0]),_)}const mM=_e({rfft_:qQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Q(n,e){let t=te(n,"a","squaredDifference"),i=te(e,"b","squaredDifference");[t,i]=zr(t,i),Sa(t.shape,i.shape);const r={a:t,b:i},a={};return Se.runKernel(lX,r,a)}const HO=_e({squaredDifference_:$Q});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YQ(n,e){const t=te(n,"x","squeeze","string_or_numeric");return lt(t,TG(t.shape,e).newShape)}const va=_e({squeeze_:YQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KQ(n,e=0){const t=D_(n,"tensors","stack","string_or_numeric");ce(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&ce(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");const i=t,r={axis:e};return Se.runKernel(SW,i,r)}const Pc=_e({stack_:KQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZQ(n,e=0){const i={x:te(n,"x","step")},r={alpha:e};return Se.runKernel(TX,i,r)}const VO=_e({step_:ZQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QQ(n,e,t,i,r=0,a=0,s=0,l=0,u=0){const m={x:te(n,"x","stridedSlice","string_or_numeric")},g={begin:e,end:t,strides:i,beginMask:r,endMask:a,ellipsisMask:s,newAxisMask:l,shrinkAxisMask:u};return Se.runKernel(cX,m,g)}const JQ=_e({stridedSlice_:QQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eJ(n){const t={x:te(n,"x","tan","float32")};return Se.runKernel(mX,t)}const tJ=_e({tan_:eJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xa(n,e){ug(n);const t=sh(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return oh(n,null,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qf(n,e,t){if(ug(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const i=sh(n,t);if(i.length!==2&&i.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(i.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return oh(n,e,i,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GO(n,e,t){if(ug(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const i=sh(n,t);if(i.length!==3&&i.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(i.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return oh(n,e,i,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nJ(n,e,t){if(ug(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const i=sh(n,t);if(i.length!==4&&i.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(i.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return oh(n,e,i,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iJ(n,e,t){if(ug(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const i=sh(n,t);if(i.length!==5&&i.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(i.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return oh(n,e,i,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rJ(n,e,t){if(ug(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const i=sh(n,t);if(i.length!==6&&i.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(i.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||i,oh(n,e,i,t)}function aJ(n,e,t){const i=e.rank>1?e.shape[e.rank-1]:1,r=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${n}, sliceDim: ${i}, and batchDim: ${r}.`;if(t.rank<r)throw new Error(a+` update.rank < ${r}. `);if(n.length<i+(t.rank-r))throw new Error(a+` Output shape length < ${i+(t.rank-r)}`);if(t.rank!==r+n.length-i)throw new Error(a+` update.rank != ${r+n.length-i}`);for(let s=0;s<r;++s)if(t.shape[s]!==e.shape[s])throw new Error(a+` updates.shape[${s}] (${t.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<t.rank-r;++s)if(t.shape[s+r]!==n[s+i])throw new Error(a+` updates.shape[${s+r}] (${t.shape[s+r]}) != shape[${s+r}] (${n[s+r]})`)}function jO(n,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}aJ(t,e,n)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sJ(n,e,t){const i=te(n,"tensor","tensorScatterupdate"),r=te(e,"indices","tensorScatterupdate","int32"),a=te(t,"updates","tensorScatterupdate");if(jO(a,r,i.shape),i.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${i.dtype} and ${a.dtype}.`);const s={tensor:i,indices:r,updates:a},l={};return Se.runKernel(VW,s,l)}const oJ=_e({tensorScatterUpdate_:sJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lJ(n,e=1,t=!0){const i=te(n,"x","topk");if(i.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const r=i.shape[i.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>r)throw new Error(`'k' passed to topk() must be <= the last dimension (${r}) but got ${e}`);const a={x:i},s={k:e,sorted:t},[l,u]=Se.runKernel(yX,a,s);return{values:l,indices:u}}const uJ=_e({topk_:lJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cJ(n,e=0,t=1,i,r){if(Ro(n),i!=null&&i==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new hM(e,t,i,!0,r),s=Dc(n,i);for(let l=0;l<s.values.length;l++)s.values[l]=a.nextValue();return s.toTensor()}const fJ=_e({truncatedNormal_:cJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hJ(n,e=0){const t=te(n,"x","unique","string_or_numeric");ce(t.rank>0,()=>"The input tensor must be at least 1D");const i={x:t},r={axis:e},[a,s]=Se.runKernel(_X,i,r);return{values:a,indices:s}}const dJ=_e({unique_:hJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pJ(n,e,t){const i=te(n,"x","unsortedSegmentSum"),r=te(e,"segmentIds","unsortedSegmentSum","int32");ce(S1(t),()=>"numSegments must be of dtype int");const a={x:i,segmentIds:r},s={numSegments:t};return Se.runKernel(xX,a,s)}const mJ=_e({unsortedSegmentSum_:pJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJ(n,e=0){const t=te(n,"x","unstack","string_or_numeric");ce(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);const i={value:t},r={axis:e};return Se.runKernel(bX,i,r)}const Jd=_e({unstack_:gJ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yJ(n,e){return cM(n,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vJ(n,e=!0,t,i){return Se.makeVariable(n,e,t,i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _J(n,e){const t=[];for(let a=0;a<e.length;a++)e[a]&&t.push(a);const i=Dc(n,"int32"),r=Dc([t.length,n.length],"int32");for(let a=0;a<t.length;a++){const s=i.indexToLoc(t[a]),l=a*n.length;r.values.set(s,l)}return r.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function bJ(n){const e=te(n,"condition","whereAsync","bool"),t=await e.data(),i=_J(e.shape,t);return n!==e&&e.dispose(),i}const WO=bJ;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function xJ(n,e,t){const i=te(n,"tensor","boolMask"),r=te(e,"mask","boolMask","bool"),a=t??0,s=r.rank,l=i.shape;ce(s>0,()=>"mask cannot be scalar"),sl(l.slice(a,a+s),r.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let w=a;w<a+s;w++)u*=l[w];const f=l.slice(0,a).concat([u],l.slice(a+s)),m=lt(i,f),g=lt(r,[-1]),y=await WO(g),_=va(y,[1]),x=EO(m,_,a);return n!==i&&i.dispose(),e!==r&&r.dispose(),_.dispose(),m.dispose(),g.dispose(),y.dispose(),x}const SJ=xJ;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TJ(n,e,t){const i=te(n,"x","transpose");if(e==null&&(e=i.shape.map((s,l)=>l).reverse()),ce(i.rank===e.length,()=>`Error in transpose: rank of input ${i.rank} must match length of perm ${e}.`),e.forEach(s=>{ce(s>=0&&s<i.rank,()=>`All entries in 'perm' must be between 0 and ${i.rank-1} but got ${e}`)}),i.rank<=1)return i.clone();const r={x:i},a={perm:e};return i.dtype==="complex64"?Jn(()=>{let s=R1(i),l=z3(i);return s=Se.runKernel(rS,{x:s},a),l=Se.runKernel(rS,{x:l},a),t&&(l=Pu(l)),Qf(s,l)}):Se.runKernel(rS,r,a)}const MT=_e({transpose_:TJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EJ(n,e,t,i,r=!0){const a=te(n,"v","movingAverage"),s=te(e,"x","movingAverage"),l=te(t,"decay","movingAverage");kX(a,s),ce(Oc(a.shape,s.shape),()=>"Shape mismatch in v and x");const u=Si(1),f=Zn(u,l);let m=zt(Zn(s,a),f);if(r){ce(i!=null,()=>"When using zeroDebias: true, step is required.");const g=te(i,"step","movingAverage");m=oi(m,Zn(u,M1(l,g)))}return pn(a,m)}const MJ=_e({movingAverage_:EJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wJ(n,e,t){Ro(t);const i=te(n,"indices","scatterND","int32"),r=te(e,"updates","scatterND");jO(r,i,t);const a={indices:i,updates:r},s={shape:t};return Se.runKernel(HW,a,s)}const AJ=_e({scatterND_:wJ});function RJ(n,e,t,i){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const r=n.rank>0?n.shape[0]:1,a=n.rank>1?n.shape[1]:1;if(t.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${a}.`);const s=e.size;if(!(e.rank===0||e.rank===1&&s===r))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${r}]`);if(e.dtype!==i.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NJ(n,e,t,i=0){Ro(t);const r=te(n,"sparseIndices","sparseToDense","int32"),a=te(e,"sparseValues","sparseToDense","string_or_numeric"),s=te(i,"defaultValue","sparseToDense",a.dtype);RJ(r,a,t,s);const l={sparseIndices:r,sparseValues:a,defaultValue:s},u={outputShape:t};return Se.runKernel(oX,l,u)}const CJ=_e({sparseToDense_:NJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OJ(n,e){const t=te(e,"indices","gatherND","int32"),r={params:te(n,"x","gatherND","string_or_numeric"),indices:t};return Se.runKernel(Fj,r)}const DJ=_e({gatherND_:OJ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LJ(n,e){if(e==null)return n.shape.slice();if(Oc(n.shape,e))return e;if(n.shape.length===e.length){const t=[];for(let i=0;i<n.shape.length;i++)e[i]==null&&n.shape[i]!=null?t.push(n.shape[i]):t.push(e[i]);return t}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IJ(n,e,t,i){const r=te(n,"x","dropout");if(ce(r.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${r.dtype} tensor instead.`),ce(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return n instanceof Ur?r.clone():r;const a=LJ(r,t),s=1-e,l=oi(TO(pn(dM(a,0,1,"float32",i),s)),s);return zt(r,l)}const UJ=_e({dropout_:IJ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XO(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function gM(n,e,t){const i=1-n%2,r=new Float32Array(n);for(let a=0;a<n;++a){const s=2*Math.PI*a/(n+i-1);r[a]=e-t*Math.cos(s)}return Xa(r,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function PJ(n,e,t=1){const i=te(n,"predictions","inTopK"),r=te(e,"targets","inTopK");ce(i.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${i.rank}`),ce(i.rank-1===r.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${i.rank} and targets rank ${r.rank}`),sl(i.shape.slice(0,i.shape.length-1),r.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=i.shape[i.shape.length-1];ce(t>0&&t<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${t}`);const s=await i.data(),l=await r.data(),[u,f]=[s.length/a,a],m=EG("bool",u);for(let g=0;g<u;g++){const y=g*f,_=s.subarray(y,y+f),x=[];for(let w=0;w<_.length;w++)x.push({value:_[w],index:w});x.sort((w,T)=>T.value-w.value),m[g]=0;for(let w=0;w<t;w++)if(x[w].index===l[g]){m[g]=1;break}}return n!==i&&i.dispose(),e!==r&&r.dispose(),Uu(m,r.shape,"bool")}const BJ=PJ;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJ(n,e,t,i,r,a="NHWC",s){let l=n;n.rank===3&&(l=lt(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let u=e;u.rank===3&&(u=lt(e,[1,e.shape[0],e.shape[1],e.shape[2]])),ce(l.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${l.shape}.`),ce(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),ce(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);const f=a==="NHWC"?l.shape[3]:l.shape[1],m=a==="NHWC"?u.shape[3]:u.shape[1];ce(f===t[2],()=>`Error in conv2dDerFilter: depth of input ${f}) must match input depth in filter (${t[2]}.`),ce(m===t[3],()=>`Error in conv2dDerFilter: depth of dy (${m}) must match output depth for filter (${t[3]}).`),Xl("conv2dDerFilter",r,s);const g={x:l,dy:u},y={strides:i,pad:r,dataFormat:a,dimRoundingMode:s,filterShape:t};return Se.runKernel(lj,g,y)}const FJ=_e({conv2DBackpropFilter_:zJ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yM(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return zt(n,VO(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function vM(n,e){let t=e;const i=SY(n.shape,e.shape);return i.length>0&&(t=cr(t,i)),lt(t,n.shape)}function _M(n,e,t,i){if(e==="linear")return n;if(e==="relu")return F3(n);if(e==="elu")return bO(n);if(e==="relu6")return zO(n);if(e==="prelu")return PO(n,t);if(e==="leakyrelu")return wO(n,i);if(e==="sigmoid")return Od(n);throw new Error(`Unknown fused activation ${e}.`)}const bM=(n,e)=>!(n>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kJ({x:n,filter:e,strides:t,pad:i,dataFormat:r="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:l,activation:u="linear",preluActivationWeights:f,leakyreluAlpha:m}){if(u=u||"linear",bM(Se.state.gradientDepth,u)===!1){ce(r==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${r} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let B=I3(n,e,t,i,r,a,s);return l!=null&&(B=pn(B,l)),_M(B,u,f,m)}const g=te(n,"x","conv2d","float32"),y=te(e,"filter","conv2d","float32");let _=g,x=!1;g.rank===3&&(x=!0,_=lt(g,[1,g.shape[0],g.shape[1],g.shape[2]])),ce(_.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${_.rank}.`),ce(y.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${y.rank}.`),Xl("fused conv2d",i,s);const w=r==="NHWC"?_.shape[3]:_.shape[1];ce(y.shape[2]===w,()=>`Error in conv2d: depth of input (${w}) must match input depth for filter ${y.shape[2]}.`),ce(lh(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);const T=oM(_.shape,y.shape,t,a,i,s);let S;l!=null&&(S=te(l,"bias","fused conv2d"),[S]=zr(S,g),r==="NHWC"?Sa(T.outShape,S.shape):(ce(S.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${S.shape.length}.`),ce(S.shape.length===0||S.shape[0]===T.outChannels||S.shape[0]===1,()=>`Error in fused conv2d: bias shape (${S.shape}) is not compatible with the number of output channels (${T.outChannels})`)));let O;if(f!=null){const B=f.shape;if(ce(B.length<=1||B.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${B.length}.`),B.length===1)ce(B[0]===1||B[0]===T.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${B}) is not compatible with the number of output channels (${T.outChannels}).`);else if(B.length===3)try{Sa(B,T.outShape)}catch{const X=`Error in fused conv2d: PReLU activation weights (${B}) is not compatible with the output shape of the conv2d (${T.outShape}).`;throw Error(X)}O=te(f,"prelu weights","fused conv2d")}const L=(B,j)=>{ce(r==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${r} but only NHWC is currently supported.`);const[X,k,U,K]=j,ye=yM(B,U,u);ce(I_(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const ue=vO(k.shape,ye,X,t,i),we=FJ(k,ye,X.shape,t,i),Ae=[ue,we];if(K!=null){const Z=vM(K,ye);Ae.push(Z)}return Ae},C={x:_,filter:y,bias:S,preluActivationWeights:O},P={strides:t,pad:i,dataFormat:r,dilations:a,dimRoundingMode:s,activation:u,leakyreluAlpha:m};return l==null?Uc((j,X,k)=>{let U=Se.runKernel(xR,C,P);return k([X,j,U]),x&&(U=lt(U,[U.shape[1],U.shape[2],U.shape[3]])),{value:U,gradFunc:L}})(_,y):Uc((j,X,k,U)=>{let K=Se.runKernel(xR,C,P);return U([X,j,K,k]),x&&(K=lt(K,[K.shape[1],K.shape[2],K.shape[3]])),{value:K,gradFunc:L}})(_,y,S)}const HJ=_e({fusedConv2d_:kJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJ(n,e,t,i,r,a=[1,1],s){let l=n;n.rank===3&&(l=lt(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let u=e;u.rank===3&&(u=lt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const f={x:l,dy:u},m={strides:i,pad:r,dimRoundingMode:s,dilations:a,filterShape:t};return Se.runKernel(bj,f,m)}const GJ=_e({depthwiseConv2dNativeBackpropFilter_:VJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jJ(n,e,t,i,r,a=[1,1],s){let l=e,u=!1;e.rank===3&&(u=!0,l=lt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const f={dy:l,filter:t},m={strides:i,pad:r,dimRoundingMode:s,dilations:a,inputShape:n},g=Se.runKernel(xj,f,m);return u?lt(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const WJ=_e({depthwiseConv2dNativeBackpropInput_:jJ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XJ({x:n,filter:e,strides:t,pad:i,dataFormat:r="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:l,activation:u="linear",preluActivationWeights:f,leakyreluAlpha:m}){if(bM(Se.state.gradientDepth,u)===!1){let P=lM(n,e,t,i,r,a,s);return l!=null&&(P=pn(P,l)),_M(P,u,f,m)}const g=te(n,"x","depthwiseConv2d","float32"),y=te(e,"filter","depthwiseConv2d","float32");let _=g,x=!1;g.rank===3&&(x=!0,_=lt(g,[1,g.shape[0],g.shape[1],g.shape[2]])),ce(_.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${_.rank}.`),ce(y.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${y.rank}.`),ce(_.shape[3]===y.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${_.shape[3]}) must match the inChannels dimension in filter ${y.shape[2]}.`),a==null&&(a=[1,1]),ce(lh(t,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),Xl("fused depthwiseConv2d",i,s);const w=oM(_.shape,y.shape,t,a,i,s,!0);let T;l!=null&&(T=te(l,"bias","fused conv2d"),[T]=zr(T,g),Sa(w.outShape,T.shape));let S;f!=null&&(S=te(f,"prelu weights","fused depthwiseConv2d"));const O=(P,B)=>{ce(I_(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[j,X,k,U]=B,K=yM(P,k,u),ye=WJ(X.shape,K,j,t,i,a,s),ue=GJ(X,K,j.shape,t,i,a,s);if(U!=null){const we=vM(T,K);return[ye,ue,we]}return[ye,ue]},L={x:_,filter:y,bias:T,preluActivationWeights:S},C={strides:t,pad:i,dataFormat:r,dilations:a,dimRoundingMode:s,activation:u,leakyreluAlpha:m};return l==null?Uc((B,j,X)=>{let k=Se.runKernel(SR,L,C);return X([j,B,k]),x&&(k=lt(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:O}})(_,y):Uc((B,j,X,k)=>{let U=Se.runKernel(SR,L,C);return k([j,B,U,X]),x&&(U=lt(U,[U.shape[1],U.shape[2],U.shape[3]])),{value:U,gradFunc:O}})(_,y,T)}const qJ=_e({fusedDepthwiseConv2d_:XJ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $J({a:n,b:e,transposeA:t=!1,transposeB:i=!1,bias:r,activation:a="linear",preluActivationWeights:s,leakyreluAlpha:l=.2}){if(bM(Se.state.gradientDepth,a)===!1){let K=Yi(n,e,t,i);return r!=null&&(K=pn(K,r)),_M(K,a,s,l)}let u=te(n,"a","fused matMul"),f=te(e,"b","fused matMul");[u,f]=zr(u,f);const m=t?u.shape[u.rank-2]:u.shape[u.rank-1],g=i?f.shape[f.rank-1]:f.shape[f.rank-2],y=t?u.shape[u.rank-1]:u.shape[u.rank-2],_=i?f.shape[f.rank-2]:f.shape[f.rank-1],x=u.shape.slice(0,-2),w=f.shape.slice(0,-2),T=Qr(x),S=Qr(w);ce(m===g,()=>`Error in fused matMul: inner shapes (${m}) and (${g}) of Tensors with shapes ${u.shape} and ${f.shape} and transposeA=${t} and transposeB=${i} must match.`);const L=Sa(u.shape.slice(0,-2),f.shape.slice(0,-2)).concat([y,_]),C=t?lt(u,[T,m,y]):lt(u,[T,y,m]),P=i?lt(f,[S,_,g]):lt(f,[S,g,_]);let B;r!=null&&(B=te(r,"bias","fused matMul"),[B]=zr(B,u),Sa(L,B.shape));let j;s!=null&&(j=te(s,"prelu weights","fused matMul"));const X=(K,ye)=>{const[ue,we,Ae,Z]=ye,le=yM(lt(K,Ae.shape),Ae,a);let de,Le;if(!t&&!i?(de=Yi(le,we,!1,!0),Le=Yi(ue,le,!0,!1)):!t&&i?(de=Yi(le,we,!1,!1),Le=Yi(le,ue,!0,!1)):t&&!i?(de=Yi(we,le,!1,!0),Le=Yi(ue,le,!1,!1)):(de=Yi(we,le,!0,!0),Le=Yi(le,ue,!0,!0)),r!=null){const ee=vM(Z,le);return[de,Le,ee]}else return[de,Le]},k={a:C,b:P,bias:B,preluActivationWeights:j},U={transposeA:t,transposeB:i,activation:a,leakyreluAlpha:l};return r==null?Uc((ye,ue,we)=>{const Ae=Se.runKernel(bR,k,U);return we([ye,ue,Ae]),{value:lt(Ae,L),gradFunc:X}})(C,P):Uc((ye,ue,we,Ae)=>{const Z=Se.runKernel(bR,k,U);return Ae([ye,ue,Z,we]),{value:lt(Z,L),gradFunc:X}})(C,P,B)}const YJ=_e({fusedMatMul_:$J});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KJ=Object.freeze(Object.defineProperty({__proto__:null,conv2d:HJ,depthwiseConv2d:qJ,matMul:YJ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJ(n){return gM(n,.54,.46)}const QJ=_e({hammingWindow_:ZJ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JJ(n){return gM(n,.5,.5)}const qO=_e({hannWindow_:JJ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eee(n,e,t,i=!1,r=0){let a=0;const s=[];for(;a+e<=n.size;)s.push(Kn(n,a,e)),a+=t;if(i)for(;a<n.size;){const l=a+e-n.size,u=La([Kn(n,a,e-l),V1([l],r)]);s.push(u),a+=t}return s.length===0?qf([],[0,e]):lt(La(s),[s.length,e])}const $O=_e({frame_:eee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tee(n,e,t,i,r=qO){i==null&&(i=XO(e));const a=$O(n,e,t),s=zt(a,r(e));return mM(s,i)}const nee=_e({stft_:tee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iee(n,e,t,i,r="bilinear",a=0){const s=te(n,"image","cropAndResize"),l=te(e,"boxes","cropAndResize","float32"),u=te(t,"boxInd","cropAndResize","int32"),f=l.shape[0];ce(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),ce(l.rank===2&&l.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${f},4] but had shape ${l.shape}.`),ce(u.rank===1&&u.shape[0]===f,()=>`Error in cropAndResize: boxInd must be have size [${f}] but had shape ${l.shape}.`),ce(i.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${i.length}.`),ce(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),ce(r==="bilinear"||r==="nearest",()=>`method must be bilinear or nearest, but was ${r}`);const m={image:s,boxes:l,boxInd:u},g={method:r,extrapolationValue:a,cropSize:i};return Se.runKernel(gj,m,g)}const ree=_e({cropAndResize_:iee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aee(n){const e=te(n,"image","flipLeftRight","float32");ce(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const t={image:e};return Se.runKernel(Ij,t,{})}const see=_e({flipLeftRight_:aee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oee(n){const e=te(n,"image","grayscaleToRGB"),t=e.rank-1,i=e.shape[t];ce(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),ce(i===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${i}.`);const r=new Array(e.rank);return r.fill(1,0,t),r[t]=3,l1(e,r)}const lee=_e({grayscaleToRGB_:oee});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uee(n){const e=te(n,"image","RGBToGrayscale"),t=e.rank-1,i=e.shape[t];ce(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),ce(i===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${i}.`);const r=e.dtype,a=fr(e,"float32"),s=Xa([.2989,.587,.114]);let l;switch(e.rank){case 2:l=wm("ij,j->i",a,s);break;case 3:l=wm("ijk,k->ij",a,s);break;case 4:l=wm("ijkl,l->ijk",a,s);break;case 5:l=wm("ijklm,m->ijkl",a,s);break;case 6:l=wm("ijklmn,n->ijklm",a,s);break;default:throw new Error("Not a valid tensor rank.")}return l=Qo(l,-1),fr(l,r)}const cee=_e({rgbToGrayscale_:uee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fee(n,e,t=0,i=.5){const r=te(n,"image","rotateWithOffset","float32");ce(r.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${r.rank}.`);const a={image:r},s={radians:e,fillValue:t,center:i};return Se.runKernel(EX,a,s)}const hee=_e({rotateWithOffset_:fee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cg(n,e,t,i,r,a){i==null&&(i=.5),r==null&&(r=Number.NEGATIVE_INFINITY),a==null&&(a=0);const s=n.shape[0];return t=Math.min(t,s),ce(0<=i&&i<=1,()=>`iouThreshold must be in [0, 1], but was '${i}'`),ce(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),ce(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),ce(e.rank===1,()=>"scores must be a 1D tensor"),ce(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),ce(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:t,iouThreshold:i,scoreThreshold:r,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dee(n,e,t,i=.5,r=Number.NEGATIVE_INFINITY){const a=te(n,"boxes","nonMaxSuppression","float32"),s=te(e,"scores","nonMaxSuppression","float32"),l=cg(a,s,t,i,r);t=l.maxOutputSize,i=l.iouThreshold,r=l.scoreThreshold;const u={maxOutputSize:t,iouThreshold:i,scoreThreshold:r};return Se.runKernel(yW,{boxes:a,scores:s},u)}const pee=_e({nonMaxSuppression_:dee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mee(n,e,t){const i=gee(n,e,t),r=i<0?-(i+1):i;n.splice(r,0,e)}function gee(n,e,t){return vee(n,e,t||yee)}function yee(n,e){return n>e?1:n<e?-1:0}function vee(n,e,t){let i=0,r=n.length,a=0,s=!1;for(;i<r;){a=i+(r-i>>>1);const l=t(e,n[a]);l>0?i=a+1:(r=a,s=!l)}return s?i:-i-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ee(n,e,t,i,r){return xM(n,e,t,i,r,0)}function bee(n,e,t,i,r,a){return xM(n,e,t,i,r,0,!1,a,!0)}function xee(n,e,t,i,r,a){return xM(n,e,t,i,r,a,!0)}function xM(n,e,t,i,r,a,s=!1,l=!1,u=!1){const f=[];for(let T=0;T<e.length;T++)e[T]>r&&f.push({score:e[T],boxIndex:T,suppressBeginIndex:0});f.sort(HR);const m=a>0?-.5/a:0,g=[],y=[];for(;g.length<t&&f.length>0;){const T=f.pop(),{score:S,boxIndex:O,suppressBeginIndex:L}=T;if(S<r)break;let C=!1;for(let P=g.length-1;P>=L;--P){const B=See(n,O,g[P]);if(B>=i){C=!0;break}if(T.score=T.score*Tee(i,m,B),T.score<=r)break}T.suppressBeginIndex=g.length,C||(T.score===S?(g.push(O),y.push(T.score)):T.score>r&&mee(f,T,HR))}const _=g.length,x=t-_;l&&x>0&&(g.push(...new Array(x).fill(0)),y.push(...new Array(x).fill(0)));const w={selectedIndices:g};return s&&(w.selectedScores=y),u&&(w.validOutputs=_),w}function See(n,e,t){const i=n.subarray(e*4,e*4+4),r=n.subarray(t*4,t*4+4),a=Math.min(i[0],i[2]),s=Math.min(i[1],i[3]),l=Math.max(i[0],i[2]),u=Math.max(i[1],i[3]),f=Math.min(r[0],r[2]),m=Math.min(r[1],r[3]),g=Math.max(r[0],r[2]),y=Math.max(r[1],r[3]),_=(l-a)*(u-s),x=(g-f)*(y-m);if(_<=0||x<=0)return 0;const w=Math.max(a,f),T=Math.max(s,m),S=Math.min(l,g),O=Math.min(u,y),L=Math.max(S-w,0)*Math.max(O-T,0);return L/(_+x-L)}function Tee(n,e,t){const i=Math.exp(e*t*t);return t<=n?i:0}function HR(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Eee(n,e,t,i=.5,r=Number.NEGATIVE_INFINITY){const a=te(n,"boxes","nonMaxSuppressionAsync"),s=te(e,"scores","nonMaxSuppressionAsync"),l=cg(a,s,t,i,r);t=l.maxOutputSize,i=l.iouThreshold,r=l.scoreThreshold;const u=await Promise.all([a.data(),s.data()]),f=u[0],m=u[1],{selectedIndices:g}=_ee(f,m,t,i,r);return a!==n&&a.dispose(),s!==e&&s.dispose(),Xa(g,"int32")}const Mee=Eee;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wee(n,e,t,i=.5,r=Number.NEGATIVE_INFINITY,a=0){const s=te(n,"boxes","nonMaxSuppression"),l=te(e,"scores","nonMaxSuppression"),u=cg(s,l,t,i,r,a);t=u.maxOutputSize,i=u.iouThreshold,r=u.scoreThreshold,a=u.softNmsSigma;const f={boxes:s,scores:l},m={maxOutputSize:t,iouThreshold:i,scoreThreshold:r,softNmsSigma:a},g=Se.runKernel(_W,f,m);return{selectedIndices:g[0],selectedScores:g[1]}}const Aee=_e({nonMaxSuppressionWithScore_:wee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ree(n,e,t,i=.5,r=Number.NEGATIVE_INFINITY,a=0){const s=te(n,"boxes","nonMaxSuppressionAsync"),l=te(e,"scores","nonMaxSuppressionAsync"),u=cg(s,l,t,i,r,a);t=u.maxOutputSize,i=u.iouThreshold,r=u.scoreThreshold,a=u.softNmsSigma;const f=await Promise.all([s.data(),l.data()]),m=f[0],g=f[1],{selectedIndices:y,selectedScores:_}=xee(m,g,t,i,r,a);return s!==n&&s.dispose(),l!==e&&l.dispose(),{selectedIndices:Xa(y,"int32"),selectedScores:Xa(_)}}const Nee=Ree;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cee(n,e,t,i=.5,r=Number.NEGATIVE_INFINITY,a=!1){const s=te(n,"boxes","nonMaxSuppression"),l=te(e,"scores","nonMaxSuppression"),u=cg(s,l,t,i,r,null),f=u.maxOutputSize,m=u.iouThreshold,g=u.scoreThreshold,y={boxes:s,scores:l},_={maxOutputSize:f,iouThreshold:m,scoreThreshold:g,padToMaxOutputSize:a},x=Se.runKernel(vW,y,_);return{selectedIndices:x[0],validOutputs:x[1]}}const Oee=_e({nonMaxSuppressionPadded_:Cee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Dee(n,e,t,i=.5,r=Number.NEGATIVE_INFINITY,a=!1){const s=te(n,"boxes","nonMaxSuppressionAsync"),l=te(e,"scores","nonMaxSuppressionAsync"),u=cg(s,l,t,i,r,null),f=u.maxOutputSize,m=u.iouThreshold,g=u.scoreThreshold,[y,_]=await Promise.all([s.data(),l.data()]),{selectedIndices:x,validOutputs:w}=bee(y,_,f,m,g,a);return s!==n&&s.dispose(),l!==e&&l.dispose(),{selectedIndices:Xa(x,"int32"),validOutputs:Si(w,"int32")}}const Lee=Dee;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iee(n,e,t=!1,i=!1){const r=te(n,"images","resizeBilinear");ce(r.rank===3||r.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`),ce(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),ce(i===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=r,s=!1;r.rank===3&&(s=!0,a=lt(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={images:a},u={alignCorners:t,halfPixelCenters:i,size:e},f=Se.runKernel(PW,l,u);return s?lt(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Uee=_e({resizeBilinear_:Iee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pee(n,e,t=!1,i=!1){const r=te(n,"images","resizeNearestNeighbor");ce(r.rank===3||r.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`),ce(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),ce(r.dtype==="float32"||r.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),ce(i===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=r,s=!1;r.rank===3&&(s=!0,a=lt(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={images:a},u={alignCorners:t,halfPixelCenters:i,size:e},f=Se.runKernel(UW,l,u);return s?lt(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Bee=_e({resizeNearestNeighbor_:Pee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zee(n,e="binary",t=!1,i=.5){const r=te(n,"image","threshold"),a=.2989,s=.587,l=.114,u=r.shape[0]*r.shape[1];let f=zt(Xa([i]),255),m,g,y,_;if(ce(r.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${r.rank}.`),ce(r.shape[2]===3||r.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${r.shape[2]}.`),ce(r.dtype==="int32"||r.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${r.dtype}.`),ce(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),r.shape[2]===3){[m,g,y]=N1(r,[1,1,1],-1);const T=zt(m,a),S=zt(g,s),O=zt(y,l);_=pn(pn(T,S),O)}else _=n;if(e==="otsu"){const T=gO(fr(FO(_),"int32"),Uu([]),256);f=Fee(T,u)}const x=t?uM(_,f):B3(_,f);return fr(zt(x,255),"int32")}function Fee(n,e){let t=Xa([-1]),i=Xa([0]),r=Xa([0]),a,s,l,u,f,m;for(let g=0;g<n.size-1;g++){a=Kn(n,0,g+1),s=Kn(n,g+1),f=oi(cr(a),e),m=oi(cr(s),e);const y=cr(zt(a,A1(0,a.size)));l=oi(y,cr(a));const _=V1(s.shape,a.size),x=pn(A1(0,s.size),_),w=zt(s,x);u=oi(cr(w),cr(s));const T=Zn(l,u),S=Zn(l,u),O=zt(f,m);r=zt(zt(O,T),S);const L=B3(r,i);i=Xf(L,r,i),t=Xf(L,Xa([g]),t)}return t}const kee=_e({threshold_:zee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(n,e,t="nearest",i="constant",r=0,a){const s=te(n,"image","transform","float32"),l=te(e,"transforms","transform","float32");ce(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),ce(l.rank===2&&(l.shape[0]===s.shape[0]||l.shape[0]===1)&&l.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),ce(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const u={image:s,transforms:l},f={interpolation:t,fillMode:i,fillValue:r,outputShape:a};return Se.runKernel(vX,u,f)}const Vee=_e({transform_:Hee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gee(n,e,t){const i=te(n,"a","bandPart");ce(i.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${i.rank}.`);const r=i.shape,[a,s]=i.shape.slice(-2);let l,u;typeof e=="number"?(ce(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),ce(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),l=te(e<0?a:e,"numLower","bandPart")):(ce(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),l=Xf(ET(e,0),a,B_(e,a))),typeof t=="number"?(ce(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`),ce(t<=s,()=>`bandPart(): numUpper (${t}) must not be greater than the number of columns (${s}).`),u=te(t<0?s:t,"numUpper","bandPart")):(ce(t.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=Xf(ET(t,0),s,B_(t,s)));const f=lt(A1(0,a,1,"int32"),[-1,1]),m=A1(0,s,1,"int32"),g=Zn(f,m),y=U_(uM(g,l),MO(g,Pu(u))),_=Jm([a,s],i.dtype);return lt(Pc(Jd(lt(i,[-1,a,s])).map(x=>Xf(y,x,_))),r)}const jee=_e({bandPart_:Gee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wee(n){let e;if(Array.isArray(n)){e=!1,ce(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const r=n[0].shape[0];for(let a=1;a<n.length;++a)ce(n[a].shape[0]===r,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[a].shape[0]} vs. ${r})`)}else e=!0,n=N1(n,n.shape[0],0).map(r=>va(r,[0]));ce(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const t=[],i=n;for(let r=0;r<n.length;++r)t.push(Se.tidy(()=>{let a=i[r];if(r>0)for(let s=0;s<r;++s){const l=zt(cr(zt(t[s],a)),t[s]);a=Zn(a,l)}return oi(a,P3(a,"euclidean"))}));return e?Pc(t,0):t}const Xee=_e({gramSchmidt_:Wee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qee(n,e=!1){if(ce(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return VR(n,e);{const t=n.shape.slice(0,n.shape.length-2).reduce((u,f)=>u*f),i=Jd(lt(n,[t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),r=[],a=[];i.forEach(u=>{const[f,m]=VR(u,e);r.push(f),a.push(m)});const s=lt(Pc(r,0),n.shape),l=lt(Pc(a,0),n.shape);return[s,l]}}function VR(n,e=!1){return Se.tidy(()=>{ce(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const t=n.shape[0],i=n.shape[1];let r=SO(t),a=Wf(n);const s=qf([[1]],[1,1]);let l=Wf(s);const u=t>=i?i:t;for(let f=0;f<u;++f){const m=a,g=l,y=r;[l,a,r]=Se.tidy(()=>{const _=Kn(a,[f,f],[t-f,1]),x=P3(_),w=Kn(a,[f,f],[1,1]),T=Xf(B3(w,0),qf([[-1]]),qf([[1]])),S=Zn(w,zt(T,x)),O=oi(_,S);O.shape[0]===1?l=Wf(s):l=La([s,Kn(O,[1,0],[O.shape[0]-1,O.shape[1]])],0);const L=Pu(oi(Yi(T,S),x)),C=Kn(a,[f,0],[t-f,i]),P=zt(L,l),B=MT(l);if(f===0)a=Zn(C,Yi(P,Yi(B,C)));else{const k=Zn(C,Yi(P,Yi(B,C)));a=La([Kn(a,[0,0],[f,i]),k],0)}const j=MT(P),X=Kn(r,[0,f],[t,r.shape[1]-f]);if(f===0)r=Zn(X,Yi(Yi(X,l),j));else{const k=Zn(X,Yi(Yi(X,l),j));r=La([Kn(r,[0,0],[t,f]),k],1)}return[l,a,r]}),Er([m,g,y])}return!e&&t>i&&(r=Kn(r,[0,0],[t,i]),a=Kn(a,[0,0],[i,i])),[r,a]})}const $ee=_e({qr_:qee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ds;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ds||(Ds={}));function Yee(n,e,t=Ds.SUM_BY_NONZERO_WEIGHTS){const i=te(n,"losses","computeWeightedLoss");let r=null;e!=null&&(r=te(e,"weights","computeWeightedLoss"));const a=r==null?i:zt(i,r);if(t===Ds.NONE)return a;if(t===Ds.SUM)return cr(a);if(t===Ds.MEAN){if(r==null)return P_(a);{const s=i.size/r.size,l=oi(cr(a),cr(r));return s>1?oi(l,Si(s)):l}}if(t===Ds.SUM_BY_NONZERO_WEIGHTS){if(r==null)return oi(cr(a),Si(i.size));{const s=zt(r,wd(i.shape)),l=fr(cr(IO(s,Si(0))),"float32");return oi(cr(a),l)}}throw Error(`Unknown reduction: ${t}`)}const Vc=_e({computeWeightedLoss_:Yee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kee(n,e,t,i=Ds.SUM_BY_NONZERO_WEIGHTS){const r=te(n,"labels","absoluteDifference"),a=te(e,"predictions","absoluteDifference");let s=null;t!=null&&(s=te(t,"weights","absoluteDifference")),sl(r.shape,a.shape,"Error in absoluteDifference: ");const l=To(Zn(r,a));return Vc(l,s,i)}const Zee=_e({absoluteDifference_:Kee});function Qee(n,e,t,i,r=Ds.SUM_BY_NONZERO_WEIGHTS){const a=te(n,"labels","cosineDistance"),s=te(e,"predictions","cosineDistance");let l=null;i!=null&&(l=te(i,"weights","cosineDistance")),sl(a.shape,s.shape,"Error in cosineDistance: ");const u=Si(1),f=Zn(u,cr(zt(a,s),t,!0));return Vc(f,l,r)}const Jee=_e({cosineDistance_:Qee});function ete(n,e,t,i=Ds.SUM_BY_NONZERO_WEIGHTS){let r=te(n,"labels","hingeLoss");const a=te(e,"predictions","hingeLoss");let s=null;t!=null&&(s=te(t,"weights","hingeLoss")),sl(r.shape,a.shape,"Error in hingeLoss: ");const l=Si(1);r=Zn(zt(Si(2),r),l);const u=F3(Zn(l,zt(r,a)));return Vc(u,s,i)}const tte=_e({hingeLoss_:ete});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nte(n,e,t,i=1,r=Ds.SUM_BY_NONZERO_WEIGHTS){const a=te(n,"labels","huberLoss"),s=te(e,"predictions","huberLoss");let l=null;t!=null&&(l=te(t,"weights","huberLoss")),sl(a.shape,s.shape,"Error in huberLoss: ");const u=Si(i),f=To(Zn(s,a)),m=B_(f,u),g=Zn(f,m),y=pn(zt(Si(.5),Fl(m)),zt(u,g));return Vc(y,l,r)}const ite=_e({huberLoss_:nte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rte(n,e,t,i=1e-7,r=Ds.SUM_BY_NONZERO_WEIGHTS){const a=te(n,"labels","logLoss"),s=te(e,"predictions","logLoss");let l=null;t!=null&&(l=te(t,"weights","logLoss")),sl(a.shape,s.shape,"Error in logLoss: ");const u=Si(1),f=Si(i),m=Pu(zt(a,w1(pn(s,f)))),g=zt(Zn(u,a),w1(pn(Zn(u,s),f))),y=Zn(m,g);return Vc(y,l,r)}const ate=_e({logLoss_:rte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ste(n,e,t,i=Ds.SUM_BY_NONZERO_WEIGHTS){const r=te(n,"labels","meanSquaredError"),a=te(e,"predictions","meanSquaredError");let s=null;t!=null&&(s=te(t,"weights","meanSquaredError")),sl(r.shape,a.shape,"Error in meanSquaredError: ");const l=HO(r,a);return Vc(l,s,i)}const ote=_e({meanSquaredError_:ste});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lte(n,e){const t=te(n,"labels","sigmoidCrossEntropyWithLogits"),i=te(e,"logits","sigmoidCrossEntropyWithLogits");sl(t.shape,i.shape,"Error in sigmoidCrossEntropyWithLogits: ");const r=F3(i),a=zt(i,t),s=AO(Ic(Pu(To(i))));return pn(Zn(r,a),s)}function ute(n,e,t,i=0,r=Ds.SUM_BY_NONZERO_WEIGHTS){let a=te(n,"multiClassLabels","sigmoidCrossEntropy");const s=te(e,"logits","sigmoidCrossEntropy");let l=null;if(t!=null&&(l=te(t,"weights","sigmoidCrossEntropy")),sl(a.shape,s.shape,"Error in sigmoidCrossEntropy: "),i>0){const f=Si(i),m=Si(1),g=Si(.5);a=pn(zt(a,Zn(m,f)),zt(g,f))}const u=lte(a,s);return Vc(u,l,r)}const cte=_e({sigmoidCrossEntropy_:ute});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fte(n,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return Uc((r,a,s)=>{const u=NO(a,[t],!0),f=Zn(fr(a,"float32"),u);s([r,f]);const m=Pu(zt(f,r));return{value:cr(m,[t]),gradFunc:(_,x)=>{const[w,T]=x,S=U3(_.shape,[t]);return[zt(lt(_,S),Zn(fr(w,"float32"),Ic(T))),zt(lt(_,S),Zn(Ic(T),fr(w,"float32")))]}}})(n,e)}function hte(n,e,t,i=0,r=Ds.SUM_BY_NONZERO_WEIGHTS){let a=te(n,"onehotLabels","softmaxCrossEntropy");const s=te(e,"logits","softmaxCrossEntropy");let l=null;if(t!=null&&(l=te(t,"weights","softmaxCrossEntropy")),sl(a.shape,s.shape,"Error in softmaxCrossEntropy: "),i>0){const f=Si(i),m=Si(1),g=Si(a.shape[1]);a=pn(zt(a,Zn(m,f)),oi(f,g))}const u=fte(a,s);return Vc(u,l,r)}const dte=_e({softmaxCrossEntropy_:hte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pte(n,e,t,i){const r=te(n,"indices","sparseFillEmptyRows","int32"),a=te(e,"values","sparseFillEmptyRows"),s=te(t,"denseShape","sparseFillEmptyRows","int32"),l=te(i,"defaultValue","sparseFillEmptyRows",a.dtype);if(r.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(l.rank!==0)throw new Error(`Default value should be a scalar but received shape ${l.shape}`);const u={indices:r,values:a,denseShape:s,defaultValue:l},f=Se.runKernel(iX,u);return{outputIndices:f[0],outputValues:f[1],emptyRowIndicator:f[2],reverseIndexMap:f[3]}}const mte=_e({sparseFillEmptyRows_:pte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gte(n,e,t){const i=te(n,"inputIndices","sparseReshape","int32"),r=te(e,"inputShape","sparseReshape","int32"),a=te(t,"newShape","sparseReshape","int32");if(i.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${i.shape}`);if(r.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${r.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const s={inputIndices:i,inputShape:r,newShape:a},l=Se.runKernel(rX,s);return{outputIndices:l[0],outputShape:l[1]}}const yte=_e({sparseReshape_:gte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(n,e,t){const i=te(n,"data","sparseSegmentMean"),r=te(e,"indices","sparseSegmentMean","int32"),a=te(t,"segmentIds","sparseSegmentMean","int32");if(i.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${r.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);const s={data:i,indices:r,segmentIds:a};return Se.runKernel(aX,s)}const _te=_e({sparseSegmentMean_:vte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bte(n,e,t){const i=te(n,"data","sparseSegmentSum"),r=te(e,"indices","sparseSegmentSum","int32"),a=te(t,"segmentIds","sparseSegmentSum","int32");if(i.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${r.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);const s={data:i,indices:r,segmentIds:a};return Se.runKernel(sX,s)}const xte=_e({sparseSegmentSum_:bte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ste(n,e,t,i,r,a,s,l){const u=te(n,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);const f=te(e,"dataSplits","stringNGrams");if(f.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const m={separator:t,nGramWidths:i,leftPad:r,rightPad:a,padWidth:s,preserveShortSequences:l},g={data:u,dataSplits:f},y=Se.runKernel(fX,g,m);return{nGrams:y[0],nGramsSplits:y[1]}}const Tte=_e({stringNGrams_:Ste});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(n,e,t=!0){const i=te(n,"input","stringSplit","string"),r=te(e,"delimiter","stringSplit","string");if(i.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${i.shape}`);if(r.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${r.shape}`);const a={skipEmpty:t},s={input:i,delimiter:r},l=Se.runKernel(hX,s,a);return{indices:l[0],values:l[1],shape:l[2]}}const Mte=_e({stringSplit_:Ete});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wte(n,e){const t=te(n,"input","stringToHashBucketFast","string"),i={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const r={input:t};return Se.runKernel(dX,r,i)}const Ate=_e({stringToHashBucketFast_:wte});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rte(n,e,t,i=!0){const r=te(n,"input","staticRegexReplace","string"),a={pattern:e,rewrite:t,replaceGlobal:i};return Se.runKernel(uX,{x:r},a)}const Nte=_e({staticRegexReplace_:Rte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cte={fft:pM,ifft:z_,rfft:mM,irfft:kO},Ote={hammingWindow:QJ,hannWindow:qO,frame:$O,stft:nee},fg={flipLeftRight:see,grayscaleToRGB:lee,resizeNearestNeighbor:Bee,resizeBilinear:Uee,rgbToGrayscale:cee,rotateWithOffset:hee,cropAndResize:ree,nonMaxSuppression:pee,nonMaxSuppressionAsync:Mee,nonMaxSuppressionWithScore:Aee,nonMaxSuppressionWithScoreAsync:Nee,nonMaxSuppressionPadded:Oee,nonMaxSuppressionPaddedAsync:Lee,threshold:kee,transform:Vee},Dte={bandPart:jee,gramSchmidt:Xee,qr:$ee},Lte={absoluteDifference:Zee,computeWeightedLoss:Vc,cosineDistance:Jee,hingeLoss:tte,huberLoss:ite,logLoss:ate,meanSquaredError:ote,sigmoidCrossEntropy:cte,softmaxCrossEntropy:dte},Ite={sparseFillEmptyRows:mte,sparseReshape:yte,sparseSegmentMean:_te,sparseSegmentSum:xte},Ute={stringNGrams:Tte,stringSplit:Mte,stringToHashBucketFast:Ate,staticRegexReplace:Nte};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pte=new Map,Bte=new Map;class zte{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class vd{constructor(){this.classNameMap={}}static getMap(){return vd.instance==null&&(vd.instance=new vd),vd.instance}static register(e){vd.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Fte(n,e,t){ce(n.className!=null,()=>"Class being registered does not have the static className property defined."),ce(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),ce(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof t>"u"&&(t=n.className);const i=t,r=e+">"+i;return vd.register(n),Pte.set(r,n),Bte.set(n,r),n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ep extends zte{minimize(e,t=!1,i){const{value:r,grads:a}=this.computeGradients(e,i);if(i!=null){const s=i.map(l=>({name:l.name,tensor:a[l.name]}));this.applyGradients(s)}else this.applyGradients(a);return Er(a),t?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return yK(e,t)}dispose(){this.iterations_!=null&&Er(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Si(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(ep,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kte extends ep{static get className(){return"Adadelta"}constructor(e,t,i=null){super(),this.learningRate=e,this.rho=t,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],i==null&&(this.epsilon=Se.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,r)=>{const a=Se.registeredVariables[i],s=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${i}/accum_grad`,variable:Jn(()=>Ao(a).variable(s))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${i}/accum_var`,variable:Jn(()=>Ao(a).variable(s))});const l=Array.isArray(e)?e[r].tensor:e[i];if(l==null)return;const u=this.accumulatedGrads[r].variable,f=this.accumulatedUpdates[r].variable;Jn(()=>{const m=pn(zt(u,this.rho),zt(Fl(l),1-this.rho)),g=zt(oi(Lc(pn(f,this.epsilon)),Lc(pn(u,this.epsilon))),l),y=pn(zt(f,this.rho),zt(Fl(g),1-this.rho));u.assign(m),f.assign(y);const _=pn(zt(g,-this.learningRate),a);a.assign(_)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Er(this.accumulatedGrads.map(e=>e.variable)),Er(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,i=!1;this.accumulatedGrads=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.accumulatedUpdates=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(i)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hte extends ep{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,r)=>{const a=Se.registeredVariables[i];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${i}/accumulator`,variable:Jn(()=>V1(a.shape,this.initialAccumulatorValue).variable(!1))});const s=Array.isArray(e)?e[r].tensor:e[i];if(s==null)return;const l=this.accumulatedGrads[r].variable;Jn(()=>{const u=pn(l,Fl(s));l.assign(u);const f=pn(zt(oi(s,Lc(pn(u,Se.backend.epsilon()))),-this.learningRate),a);a.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Er(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map(i=>({originalName:i.name,variable:i.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vte extends ep{static get className(){return"Adam"}constructor(e,t,i,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=i,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Jn(()=>{this.accBeta1=Si(t).variable(),this.accBeta2=Si(i).variable()}),r==null&&(this.epsilon=Se.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(i=>i.name):Object.keys(e);Jn(()=>{const i=Zn(1,this.accBeta1),r=Zn(1,this.accBeta2);t.forEach((a,s)=>{const l=Se.registeredVariables[a],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${a}/m`,variable:Jn(()=>Ao(l).variable(u))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${a}/v`,variable:Jn(()=>Ao(l).variable(u))});const f=Array.isArray(e)?e[s].tensor:e[a];if(f==null)return;const m=this.accumulatedFirstMoment[s].variable,g=this.accumulatedSecondMoment[s].variable,y=pn(zt(m,this.beta1),zt(f,1-this.beta1)),_=pn(zt(g,this.beta2),zt(Fl(f),1-this.beta2)),x=oi(y,i),w=oi(_,r);m.assign(y),g.assign(_);const T=pn(zt(oi(x,pn(Lc(w),this.epsilon)),-this.learningRate),l);l.assign(T)}),this.accBeta1.assign(zt(this.accBeta1,this.beta1)),this.accBeta2.assign(zt(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Er(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Er(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),Jn(()=>{this.accBeta1.assign(M1(this.beta1,this.iterations_+1)),this.accBeta2.assign(M1(this.beta2,this.iterations_+1))});const t=e.length/2,i=!1;this.accumulatedFirstMoment=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(i)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gte extends ep{static get className(){return"Adamax"}constructor(e,t,i,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=i,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Jn(()=>{this.iteration=Si(0).variable(),this.accBeta1=Si(t).variable()}),r==null&&(this.epsilon=Se.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(i=>i.name):Object.keys(e);Jn(()=>{const i=Zn(1,this.accBeta1),r=oi(-this.learningRate,pn(zt(this.iteration,this.decay),1));t.forEach((a,s)=>{const l=Se.registeredVariables[a],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${a}/m`,variable:Ao(l).variable(u)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${a}/v`,variable:Ao(l).variable(u)});const f=Array.isArray(e)?e[s].tensor:e[a];if(f==null)return;const m=this.accumulatedFirstMoment[s].variable,g=this.accumulatedWeightedInfNorm[s].variable,y=pn(zt(m,this.beta1),zt(f,1-this.beta1)),_=zt(g,this.beta2),x=To(f),w=LO(_,x);m.assign(y),g.assign(w);const T=pn(zt(oi(r,i),oi(y,pn(w,this.epsilon))),l);l.assign(T)}),this.iteration.assign(pn(this.iteration,1)),this.accBeta1.assign(zt(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Er(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Er(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YO extends ep{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,r)=>{const a=Array.isArray(e)?e[r].tensor:e[i];if(a==null)return;const s=Se.registeredVariables[i];Jn(()=>{const l=pn(zt(this.c,a),s);s.assign(l)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Ou(Si(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jte extends YO{static get className(){return"Momentum"}constructor(e,t,i=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=i,this.accumulations=[],this.m=Si(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,r)=>{const a=Se.registeredVariables[i];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${i}/momentum`,variable:Jn(()=>Ao(a).variable(!1))});const s=this.accumulations[r].variable,l=Array.isArray(e)?e[r].tensor:e[i];l!=null&&Jn(()=>{let u;const f=pn(zt(this.m,s),l);this.useNesterov?u=pn(zt(this.c,pn(l,zt(f,this.m))),a):u=pn(zt(this.c,f),a),s.assign(f),a.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Er(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map(i=>({originalName:i.name,variable:i.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wte extends ep{static get className(){return"RMSProp"}constructor(e,t=.9,i=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=i,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,r==null&&(this.epsilon=Se.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,r)=>{const a=Se.registeredVariables[i],s=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${i}/rms`,variable:Jn(()=>Ao(a).variable(s))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${i}/momentum`,variable:Jn(()=>Ao(a).variable(s))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${i}/mg`,variable:Jn(()=>Ao(a).variable(s))});const l=Array.isArray(e)?e[r].tensor:e[i];if(l==null)return;const u=this.accumulatedMeanSquares[r].variable,f=this.accumulatedMoments[r].variable;Jn(()=>{const m=pn(zt(u,this.decay),zt(Fl(l),1-this.decay));if(this.centered){const g=this.accumulatedMeanGrads[r].variable,y=pn(zt(g,this.decay),zt(l,1-this.decay)),_=oi(zt(l,this.learningRate),Lc(Zn(m,pn(Fl(y),this.epsilon)))),x=pn(zt(f,this.momentum),_);u.assign(m),g.assign(y),f.assign(x);const w=Zn(a,x);a.assign(w)}else{const g=pn(zt(u,this.decay),zt(Fl(l),1-this.decay)),y=pn(zt(f,this.momentum),oi(zt(l,this.learningRate),Lc(pn(g,this.epsilon))));u.assign(g),f.assign(y);const _=Zn(a,y);a.assign(_)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Er(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Er(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Er(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,i=!1;this.accumulatedMeanSquares=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.accumulatedMoments=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xte=[kte,Hte,Vte,Gte,jte,Wte,YO];function qte(){for(const n of Xte)Fte(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $te="model",Yte=".json",Kte=".weights.bin";function GR(n){return new Promise(e=>setTimeout(e)).then(n)}class jd{constructor(e){if(!li().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(jd.URL_SCHEME)&&(e=e.slice(jd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=$te),this.modelJsonFileName=e+Yte,this.weightDataFileName=e+Kte}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=Wl.join(e.weightData),i=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=iO(e,r),s=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=s,await GR(()=>l.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=i,await GR(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:H1(e)}}}}jd.URL_SCHEME="downloads://";class Zte{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const i=new FileReader;i.onload=r=>{const a=JSON.parse(r.target.result),s=a.modelTopology;if(s==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(a.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:s});return}const u=sM(a,f=>this.loadWeights(f));e(u)},i.onerror=r=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(this.jsonFile)})}loadWeights(e){const t=[],i=[];for(const s of e)t.push(...s.weights),i.push(...s.paths);const r=this.checkManifestAndWeightFiles(e),a=i.map(s=>this.loadWeightsFile(s,r[s]));return Promise.all(a).then(s=>[t,s])}loadWeightsFile(e,t){return new Promise((i,r)=>{const a=new FileReader;a.onload=s=>{const l=s.target.result;i(l)},a.onerror=s=>r(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],i=this.weightsFiles.map(a=>DR(a.name)),r={};for(const a of e)a.paths.forEach(s=>{const l=DR(s);if(t.indexOf(l)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${l}'`);if(t.push(l),i.indexOf(l)===-1)throw new Error(`Weight file with basename '${l}' is not provided.`);r[s]=this.weightsFiles[i.indexOf(l)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}const Qte=n=>li().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(jd.URL_SCHEME)?Jte(n.slice(jd.URL_SCHEME.length)):null;Sr.registerSaveRouter(Qte);function Jte(n="model"){return new jd(n)}function ene(n){return new Zte(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jR(n,e,t,i){s(n),t=t??0,i=i??1,l(t,i);let r=0;const a=u=>(u.then(f=>{const m=t+ ++r/n.length*(i-t);return e(m),f}),u);function s(u){ce(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function l(u,f){ce(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),ce(f>=0&&f<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${f}`),ce(f>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${f}`)}return Promise.all(n.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function KO(n,e){e==null&&(e={});const t=e.fetchFunc==null?li().platform.fetch:e.fetchFunc,i=n.map(g=>t(g,e.requestInit,{isBinary:!0})),l=(e.onProgress==null?await Promise.all(i):await jR(i,e.onProgress,0,.5)).map(g=>g.arrayBuffer());return e.onProgress==null?await Promise.all(l):await jR(l,e.onProgress,.5,1)}function tne(n,e){var t;const i=e.fetchFunc==null?li().platform.fetch:e.fetchFunc;let r=0,a;return(t=e.onProgress)===null||t===void 0||t.call(e,0),new ReadableStream({pull:async s=>{for(var l;r<n.length;){a||(a=(await i(n[r],e.requestInit,{isBinary:!0})).body.getReader());const{done:u,value:f}=await a.read();if(u){r++,a=void 0,(l=e.onProgress)===null||l===void 0||l.call(e,r/n.length);continue}s.enqueue(f);return}s.close()}})}async function nne(n,e="",t,i){return ZO(s=>KO(s,{requestInit:i}))(n,e,t)}function ZO(n){return async(e,t="",i)=>{const r=e.map(()=>!1),a={},s=i!=null?i.map(()=>!1):[],l=[];if(e.forEach((_,x)=>{let w=0;_.weights.forEach(T=>{const S="quantization"in T?T.quantization.dtype:T.dtype,O=kd[S]*Qr(T.shape),L=()=>{r[x]=!0,a[x]==null&&(a[x]=[]),a[x].push({manifestEntry:T,groupOffset:w,sizeBytes:O})};i!=null?i.forEach((C,P)=>{C===T.name&&(L(),s[P]=!0)}):L(),l.push(T.name),w+=O})}),!s.every(_=>_)){const _=i.filter((x,w)=>!s[w]);throw new Error(`Could not find weights in manifest with names: ${_.join(", ")}. 
Manifest JSON has weights with names: ${l.join(", ")}.`)}const u=r.reduce((_,x,w)=>(x&&_.push(w),_),[]),f=[];u.forEach(_=>{e[_].paths.forEach(x=>{const w=t+(t.endsWith("/")?"":"/")+x;f.push(w)})});const m=await n(f),g={};let y=0;return u.forEach(_=>{const x=e[_].paths.length,w=new Wl(m.slice(y,y+x));a[_].forEach(S=>{const O=w.slice(S.groupOffset,S.groupOffset+S.sizeBytes),L=eO(O,[S.manifestEntry]);for(const C in L)g[C]=L[C]}),y+=x}),g}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ine="application/octet-stream",rne="application/json";class SM{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(ce(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=li().platform.fetch,ce(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&ce(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const i=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=iO(e,i);if(t.body.append("model.json",new Blob([JSON.stringify(r)],{type:rne}),"model.json"),e.weightData!=null){const s=Wl.join(e.weightData);t.body.append("model.weights.bin",new Blob([s],{type:ine}),"model.weights.bin")}const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:H1(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let s=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?s+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":s+=" Please make sure the server is serving valid JSON for this request.",new Error(s)}const i=t.modelTopology,r=t.weightsManifest;if(i==null&&r==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return sM(e,t=>this.loadWeights(t))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),i=yT(e.weightsManifest),r=()=>tne(t,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:i,getWeightStream:r})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[i,r]=ane(t),a=this.weightPathPrefix||i,s=[],l=[];for(const u of e)for(const f of u.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(f)):s.push(a+f+r);return this.weightUrlConverter&&s.push(...await Promise.all(l)),s}async loadWeights(e){const t=await this.getWeightUrls(e),i=yT(e),r=await KO(t,this.loadOptions);return[i,r]}}SM.URL_SCHEME_REGEX=/^https?:\/\//;function ane(n){const e=n.lastIndexOf("/"),t=n.lastIndexOf("?"),i=n.substring(0,e),r=t>e?n.substring(t):"";return[i+"/",r]}function wT(n){return n.match(SM.URL_SCHEME_REGEX)!=null}const QO=(n,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(n)?t=n.every(i=>wT(i)):t=wT(n),t)return TM(n,e)}return null};Sr.registerSaveRouter(QO);Sr.registerLoadRouter(QO);function TM(n,e){return new SM(n,e)}function sne(n,e){return TM(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uS{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class JO{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class one{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function lne(n,e,t,i){const r=arguments;return new one(eD(...r))}function eD(n,e,t,i){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new uS(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new uS({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new uS({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:i}))}function une(n){return new JO(n)}function cne(n){return new JO(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tD=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Wl,browserFiles:ene,browserHTTPRequest:sne,concatenateArrayBuffers:tq,copyModel:Tq,decodeWeights:eO,decodeWeightsStream:nO,encodeWeights:YX,fromMemory:lne,fromMemorySync:eD,getLoadHandlers:uq,getModelArtifactsForJSON:sM,getModelArtifactsForJSONSync:rO,getModelArtifactsInfoForJSON:H1,getSaveHandlers:lq,getWeightSpecs:yT,http:TM,isHTTPScheme:wT,listModels:xq,loadWeights:nne,moveModel:Eq,registerLoadRouter:oq,registerSaveRouter:sq,removeModel:Sq,weightsLoaderFactory:ZO,withSaveHandler:une,withSaveHandlerSync:cne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let fd;function fne(n,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,i=!1,r=!1,a=!1,s=!1,l=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)i=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)r=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)a=!0;else if(n.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)l=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if(fT(_R,Se.backendName)!=null){const x={pixels:n},w={numChannels:e};return Se.runKernel(_R,x,w)}const[f,m]=r?[n.videoWidth,n.videoHeight]:[n.width,n.height];let g;if(s)g=n.getContext("2d").getImageData(0,0,f,m).data;else if(i||t)g=n.data;else if(a||r||l){if(fd==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")fd=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else fd=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});fd.canvas.width=f,fd.canvas.height=m,fd.drawImage(n,0,0,f,m),g=fd.getImageData(0,0,f,m).data}let y;if(e===4)y=new Int32Array(g);else{const x=f*m;y=new Int32Array(x*e);for(let w=0;w<x;w++)for(let T=0;T<e;++T)y[w*e+T]=g[w*4+T]}return GO(y,[m,f,e],"int32")}function hne(n){if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const e=n.rank===2?1:n.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`)}async function nD(n,e){let t=te(n,"img","toPixels");if(!(n instanceof Ur)){const f=t;t=fr(f,"int32"),f.dispose()}hne(t);const[i,r]=t.shape.slice(0,2),a=t.rank===2?1:t.shape[2],s=await t.data(),l=t.dtype==="float32"?255:1,u=new Uint8ClampedArray(r*i*4);for(let f=0;f<i*r;++f){const m=[0,0,0,255];for(let y=0;y<a;y++){const _=s[f*a+y];if(t.dtype==="float32"){if(_<0||_>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${_}.`)}else if(t.dtype==="int32"&&(_<0||_>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${_}.`);a===1?(m[0]=_*l,m[1]=_*l,m[2]=_*l):m[y]=_*l}const g=f*4;u[g+0]=Math.round(m[0]),u[g+1]=Math.round(m[1]),u[g+2]=Math.round(m[2]),u[g+3]=Math.round(m[3])}return t!==n&&t.dispose(),u}const iD=_e({fromPixels_:fne});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */qte();/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dne=li();dne.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var eo;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(eo||(eo={}));var WR;(function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(WR||(WR={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pne={};function rD(n){return pne[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z(n,e,t,i,r){const a=e.inputParams[n];if(a&&a.inputIndexStart!==void 0){const l=a.inputIndexStart,u=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?l+1:a.inputIndexEnd,f=l<0?e.inputNames.length+l:l;if(a.type==="tensor")return Oa(e.inputNames[f],t,i,r);if(a.type==="tensors"){const y=e.inputs.slice(l,u);return e.inputNames.slice(l,u).filter((x,w)=>{var T;return((T=y[w])===null||T===void 0?void 0:T.op)!=="NoOp"}).map(x=>Oa(x,t,i,r))}const m=Oa(e.inputNames[f],t,i,r),g=m.dataSync();return a.type==="number"?g[0]:cT(m.shape,g)}const s=e.attrParams[n];return s&&s.value}function Oa(n,e,t,i){const[r,a]=to(n,t);if(i!=null){const l=i.getHashTableHandleByName(r);if(l!=null)return l}const s=t.currentContextIds.find(l=>!!e[F_(r,l)]);return s!==void 0?e[F_(r,s)][a]:void 0}function XR(n,e,t){return e[F_(n,t.currentContextId)]}function _c(n,e){const[t,i,r]=to(n,e);return[F_(t,e&&e.currentContextId),i,r]}function F_(n,e){return e?`${n}-${e}`:n}function to(n,e){if(n==="")return["",0,void 0];const t=e!=null&&e.parseNodeNameCache!=null;if(t){const a=e.parseNodeNameCache.get(n);if(a!=null)return a}const i=n.split(":");let r;if(i.length===1)r=[n,0,void 0];else{const a=i[0],s=i.length===3?i[1]:void 0,l=Number(i[i.length-1]);r=[a,l,s]}return t&&e.parseNodeNameCache.set(n,r),r}function I2(n,e,t){let i=z("pad",n,e,t);if(i==="explicit"){i=z("explicitPaddings",n,e,t);const r=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)r[a][0]=i[a*2],r[a][1]=i[a*2+1];return r}return i}function bc(n){return n.kept?n:Wf(n)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mne=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],gne=Object.freeze(Object.defineProperty({__proto__:null,json:mne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yne=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],vne=Object.freeze(Object.defineProperty({__proto__:null,json:yne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ne=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],bne=Object.freeze(Object.defineProperty({__proto__:null,json:_ne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xne=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Sne=Object.freeze(Object.defineProperty({__proto__:null,json:xne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tne=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Ene=Object.freeze(Object.defineProperty({__proto__:null,json:Tne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mne=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],wne=Object.freeze(Object.defineProperty({__proto__:null,json:Mne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ane=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Rne=Object.freeze(Object.defineProperty({__proto__:null,json:Ane},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nne=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Cne=Object.freeze(Object.defineProperty({__proto__:null,json:Nne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const One=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Dne=Object.freeze(Object.defineProperty({__proto__:null,json:One},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lne=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Ine=Object.freeze(Object.defineProperty({__proto__:null,json:Lne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Une=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Pne=Object.freeze(Object.defineProperty({__proto__:null,json:Une},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bne=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],zne=Object.freeze(Object.defineProperty({__proto__:null,json:Bne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fne=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],kne=Object.freeze(Object.defineProperty({__proto__:null,json:Fne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hne=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Vne=Object.freeze(Object.defineProperty({__proto__:null,json:Hne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gne=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],jne=Object.freeze(Object.defineProperty({__proto__:null,json:Gne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wne=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Xne=Object.freeze(Object.defineProperty({__proto__:null,json:Wne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qne=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],$ne=Object.freeze(Object.defineProperty({__proto__:null,json:qne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yne=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Kne=Object.freeze(Object.defineProperty({__proto__:null,json:Yne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zne=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Qne=Object.freeze(Object.defineProperty({__proto__:null,json:Zne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qR{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[gne,vne,bne,Sne,Ene,wne,Rne,Cne,Dne,Ine,Pne,zne,kne,Vne,jne,Xne,$ne,Kne,Qne],t=[].concat(...e.map(i=>i.json));this.opMappers=t.reduce((i,r)=>(i[r.tfOpName]=r,i),{})}transformGraph(e,t={}){const i=e.node,r=[],a=[],s=[],l=i.reduce((w,T)=>(w[T.name]=this.mapNode(T),T.op.startsWith("Placeholder")?r.push(w[T.name]):T.op==="Const"?a.push(w[T.name]):(T.input==null||T.input.length===0)&&s.push(w[T.name]),w),{});let u=[];const f=[];let m={},g={};t!=null&&(m=this.mapSignatureEntries(t.inputs),g=this.mapSignatureEntries(t.outputs));const y=Object.keys(l);y.forEach(w=>{const T=l[w];T.inputNames.forEach((S,O)=>{const[L,,C]=_c(S),P=l[L];if(P.outputs!=null){const B=P.outputs.indexOf(C);if(B!==-1){const j=`${L}:${B}`;T.inputNames[O]=j}}T.inputs.push(P),P.children.push(T)})}),Object.keys(g).length===0?y.forEach(w=>{const T=l[w];T.children.length===0&&f.push(T)}):Object.keys(g).forEach(w=>{const[T]=_c(w),S=l[T];S!=null&&(S.signatureKey=g[w],f.push(S))}),Object.keys(m).length>0?Object.keys(m).forEach(w=>{const[T]=_c(w),S=l[T];S&&(S.signatureKey=m[w],u.push(S))}):u=r;let _={};e.library!=null&&e.library.function!=null&&(_=e.library.function.reduce((w,T)=>(w[T.signature.name]=this.mapFunction(T),w),{}));const x={nodes:l,inputs:u,outputs:f,weights:a,placeholders:r,signature:t,functions:_};return s.length>0&&(x.initNodes=s),x}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,i)=>(t[e[i].name]=i,t),{})}mapNode(e){const t=rD(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const i={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(r=>r.startsWith("^")?r.slice(1):r),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(i.inputParams=t.inputs.reduce((r,a)=>(r[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},r),{})),t.attrs!=null&&(i.attrParams=t.attrs.reduce((r,a)=>{const s=a.type;let l;switch(a.type){case"string":l=AT(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=AT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":l=IT(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=IT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":l=NT(e.attr,a.tfName,a.defaultValue||0),l===void 0&&a.tfDeprecatedName&&(l=NT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":l=LT(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=LT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":l=RT(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=RT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":l=PT(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=PT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":l=DT(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=DT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":l=UT(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=UT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":l=CT(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=CT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":l=OT(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=OT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":l=$R(e.attr,a.tfName,a.defaultValue),l===void 0&&a.tfDeprecatedName&&(l=$R(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return r[a.name]={value:l,type:s},r},{})),i}mapFunction(e){const t=e.nodeDef,i=[],r=[];let a={};t!=null&&(a=t.reduce((g,y)=>(g[y.name]=this.mapNode(y),y.op==="Const"&&r.push(g[y.name]),g),{}));const s=[],l=[];e.signature.inputArg.forEach(g=>{const[y]=_c(g.name),_={name:y,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:EM(g.type),type:"dtype"}},children:[]};_.signatureKey=g.name,s.push(_),a[y]=_}),Object.keys(a).forEach(g=>{const y=a[g];y.inputNames.forEach((_,x)=>{const[w,,T]=_c(_),S=a[w];if(S.outputs!=null){const O=S.outputs.indexOf(T);if(O!==-1){const L=`${w}:${O}`;y.inputNames[x]=L}}y.inputs.push(S),S.children.push(y)})});const f=e.ret;e.signature.outputArg.forEach(g=>{const[y,_]=_c(f[g.name]),x=a[y];x!=null&&(x.defaultOutput=_,l.push(x))});const m=this.mapArgsToSignature(e);return{nodes:a,inputs:s,outputs:l,weights:r,placeholders:i,signature:m}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,i)=>(t[i.name]=this.mapArgToTensorInfo(i),t),{}),outputs:e.signature.outputArg.reduce((t,i)=>(t[i.name]=this.mapArgToTensorInfo(i,e.ret),t),{})}}mapArgToTensorInfo(e,t){let i=e.name;return t!=null&&(i=t[i]),{name:i,dtype:e.type}}}function Jne(n){const e=li().global;if(typeof e.atob<"u")return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function aD(n,e){const t=Array.isArray(n)?String.fromCharCode.apply(null,n):Jne(n);return e?t:t.toLowerCase()}function AT(n,e,t,i=!1){const r=n[e];return r!=null?aD(r.s,i):t}function RT(n,e,t){const i=n[e];return i?i.b:t}function NT(n,e,t){const i=n[e]||{},r=i.i!=null?i.i:i.f!=null?i.f:t;return typeof r=="number"?r:parseInt(r,10)}function EM(n){switch(typeof n=="string"&&(n=eo[n]),n){case eo.DT_FLOAT:case eo.DT_HALF:return"float32";case eo.DT_INT32:case eo.DT_INT64:case eo.DT_INT8:case eo.DT_UINT8:return"int32";case eo.DT_BOOL:return"bool";case eo.DT_DOUBLE:return"float32";case eo.DT_STRING:return"string";case eo.DT_COMPLEX64:case eo.DT_COMPLEX128:return"complex64";default:return null}}function $R(n,e,t){const i=n[e];return i&&i.func?i.func.name:t}function CT(n,e,t){const i=n[e];return i&&i.type?EM(i.type):t}function OT(n,e,t){const i=n[e];return i&&i.list&&i.list.type?i.list.type.map(r=>EM(r)):t}function sD(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function DT(n,e,t){const i=n[e];return i&&i.shape?sD(i.shape):t}function LT(n,e,t){const i=n[e];return i?((i.list.f&&i.list.f.length?i.list.f:i.list.i)||[]).map(r=>typeof r=="number"?r:parseInt(r,10)):t}function IT(n,e,t,i=!1){const r=n[e];return r&&r.list&&r.list.s?r.list.s.map(a=>aD(a,i)):t}function UT(n,e,t){const i=n[e];return i&&i.list&&i.list.shape?i.list.shape.map(r=>sD(r)):t}function PT(n,e,t){const i=n[e];return i&&i.list&&i.list.b?i.list.b:t}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eie{constructor(e,t,i){this.node=e,this.tensorMap=t,this.context=i,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(r=>this.getInput(r)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((r,a)=>(r[a]=this.getAttr(a),r),{}))}getInput(e){return Oa(e,this.tensorMap,this.context)}getAttr(e,t){const i=this.node.rawAttrs[e];if(i.tensor!=null)return Oa(e,this.tensorMap,this.context);if(i.i!=null||i.f!=null)return NT(this.node.rawAttrs,e,t);if(i.s!=null)return AT(this.node.rawAttrs,e,t);if(i.b!=null)return RT(this.node.rawAttrs,e,t);if(i.shape!=null)return DT(this.node.rawAttrs,e,t);if(i.type!=null)return CT(this.node.rawAttrs,e,t);if(i.list!=null){if(i.list.i!=null||i.list.f!=null)return LT(this.node.rawAttrs,e,t);if(i.list.s!=null)return IT(this.node.rawAttrs,e,t);if(i.list.shape!=null)return UT(this.node.rawAttrs,e,t);if(i.list.b!=null)return PT(this.node.rawAttrs,e,t);if(i.list.type!=null)return OT(this.node.rawAttrs,e,t)}return t}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ia=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:J6,abs:To,acos:Bq,acosh:Fq,add:pn,addN:Hq,all:Gq,any:Wq,argMax:qq,argMin:Yq,asin:Zq,asinh:Jq,atan:t$,atan2:i$,atanh:a$,avgPool:pO,avgPool3d:d$,basicLSTMCell:b$,batchNorm:L3,batchNorm2d:M$,batchNorm3d:A$,batchNorm4d:N$,batchToSpaceND:mO,bincount:gO,bitwiseAnd:D$,booleanMaskAsync:SJ,broadcastArgs:I$,broadcastTo:w2,buffer:Dc,cast:fr,ceil:B$,clipByValue:yO,clone:Wf,complex:Qf,concat:La,concat1d:k$,concat2d:V$,concat3d:j$,concat4d:X$,conv1d:Y$,conv2d:I3,conv2dTranspose:Q$,conv3d:eY,conv3dTranspose:rY,cos:sY,cosh:lY,cosineWindow:gM,cumprod:cY,cumsum:hY,denseBincount:pY,depthToSpace:gY,depthwiseConv2d:lM,diag:_Y,dilation2d:xY,div:oi,divNoNan:AY,dot:NY,dropout:UJ,einsum:wm,elu:bO,enclosingPowerOfTwo:XO,ensureShape:LY,equal:_O,erf:UY,euclideanNorm:WY,exp:Ic,expandDims:Qo,expm1:YY,eye:SO,fft:pM,fill:V1,floor:TO,floorDiv:dO,fused:KJ,gather:EO,gatherND:DJ,greater:B3,greaterEqual:MO,ifft:z_,imag:z3,image:fg,inTopKAsync:BJ,irfft:kO,isFinite:rK,isInf:sK,isNaN:lK,leakyRelu:wO,less:ET,lessEqual:uM,linalg:Dte,linspace:hK,localResponseNormalization:pK,log:w1,log1p:AO,logSigmoid:xK,logSoftmax:EK,logSumExp:NO,logicalAnd:U_,logicalNot:CO,logicalOr:OO,logicalXor:CK,losses:Lte,lowerBound:DK,matMul:Yi,max:Um,maxPool:DO,maxPool3d:UK,maxPoolWithArgmax:BK,maximum:LO,mean:P_,meshgrid:kK,min:TT,minimum:B_,mirrorPad:GK,mod:WK,moments:qK,movingAverage:MJ,mul:zt,multiRNNCell:YK,multinomial:ZK,neg:Pu,norm:P3,notEqual:IO,oneHot:eZ,ones:wd,onesLike:nZ,op:_e,outerProduct:rZ,pad:G1,pad1d:oZ,pad2d:uZ,pad3d:fZ,pad4d:dZ,pool:vZ,pow:M1,prelu:PO,print:hO,prod:xZ,raggedGather:TZ,raggedRange:MZ,raggedTensorToTensor:AZ,rand:NZ,randomGamma:ZZ,randomNormal:BO,randomStandardNormal:eQ,randomUniform:dM,randomUniformInt:iQ,range:A1,real:R1,reciprocal:sQ,relu:F3,relu6:zO,reshape:lt,reverse:Gd,reverse1d:fQ,reverse2d:dQ,reverse3d:mQ,reverse4d:yQ,rfft:mM,round:FO,rsqrt:bQ,scalar:Si,scatterND:AJ,searchSorted:cM,selu:SQ,separableConv2d:EQ,setdiff1dAsync:wQ,sigmoid:Od,sign:RQ,signal:Ote,sin:CQ,sinh:DQ,slice:Kn,slice1d:IQ,slice2d:PQ,slice3d:zQ,slice4d:kQ,softmax:VQ,softplus:RO,spaceToBatchND:UO,sparse:Ite,sparseToDense:CJ,spectral:Cte,split:N1,sqrt:Lc,square:Fl,squaredDifference:HO,squeeze:va,stack:Pc,step:VO,stridedSlice:JQ,string:Ute,sub:Zn,sum:cr,tan:tJ,tanh:ST,tensor:Uu,tensor1d:Xa,tensor2d:qf,tensor3d:GO,tensor4d:nJ,tensor5d:iJ,tensor6d:rJ,tensorScatterUpdate:oJ,tile:l1,topk:uJ,transpose:MT,truncatedNormal:fJ,unique:dJ,unsortedSegmentSum:mJ,unstack:Jd,upperBound:yJ,variable:vJ,where:Xf,whereAsync:WO,zeros:Jm,zerosLike:Ao},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tie=(n,e,t,i=Ia)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[i.add(z("a",n,e,t),z("b",n,e,t))];case"AddN":return[i.addN(z("tensors",n,e,t))];case"FloorMod":case"Mod":return[i.mod(z("a",n,e,t),z("b",n,e,t))];case"Mul":return[i.mul(z("a",n,e,t),z("b",n,e,t))];case"RealDiv":case"Div":return[i.div(z("a",n,e,t),z("b",n,e,t))];case"DivNoNan":return[i.divNoNan(z("a",n,e,t),z("b",n,e,t))];case"FloorDiv":return[i.floorDiv(z("a",n,e,t),z("b",n,e,t))];case"Sub":return[i.sub(z("a",n,e,t),z("b",n,e,t))];case"Minimum":return[i.minimum(z("a",n,e,t),z("b",n,e,t))];case"Maximum":return[i.maximum(z("a",n,e,t),z("b",n,e,t))];case"Pow":return[i.pow(z("a",n,e,t),z("b",n,e,t))];case"SquaredDifference":return[i.squaredDifference(z("a",n,e,t),z("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nie=(n,e,t,i=Ia)=>{switch(n.op){case"Abs":case"ComplexAbs":return[i.abs(z("x",n,e,t))];case"Acos":return[i.acos(z("x",n,e,t))];case"Acosh":return[i.acosh(z("x",n,e,t))];case"Asin":return[i.asin(z("x",n,e,t))];case"Asinh":return[i.asinh(z("x",n,e,t))];case"Atan":return[i.atan(z("x",n,e,t))];case"Atan2":return[i.atan2(z("x",n,e,t),z("y",n,e,t))];case"Atanh":return[i.atanh(z("x",n,e,t))];case"Ceil":return[i.ceil(z("x",n,e,t))];case"Complex":return[i.complex(z("real",n,e,t),z("imag",n,e,t))];case"Cos":return[i.cos(z("x",n,e,t))];case"Cosh":return[i.cosh(z("x",n,e,t))];case"Elu":return[i.elu(z("x",n,e,t))];case"Erf":return[i.erf(z("x",n,e,t))];case"Exp":return[i.exp(z("x",n,e,t))];case"Expm1":return[i.expm1(z("x",n,e,t))];case"Floor":return[i.floor(z("x",n,e,t))];case"Log":return[i.log(z("x",n,e,t))];case"Log1p":return[i.log1p(z("x",n,e,t))];case"Imag":return[i.imag(z("x",n,e,t))];case"Neg":return[i.neg(z("x",n,e,t))];case"Reciprocal":return[i.reciprocal(z("x",n,e,t))];case"Real":return[i.real(z("x",n,e,t))];case"Relu":return[i.relu(z("x",n,e,t))];case"Round":return[i.round(z("x",n,e,t))];case"Selu":return[i.selu(z("x",n,e,t))];case"Sigmoid":return[i.sigmoid(z("x",n,e,t))];case"Sin":return[i.sin(z("x",n,e,t))];case"Sign":return[i.sign(z("x",n,e,t))];case"Sinh":return[i.sinh(z("x",n,e,t))];case"Softplus":return[i.softplus(z("x",n,e,t))];case"Sqrt":return[i.sqrt(z("x",n,e,t))];case"Square":return[i.square(z("x",n,e,t))];case"Tanh":return[i.tanh(z("x",n,e,t))];case"Tan":return[i.tan(z("x",n,e,t))];case"ClipByValue":return[i.clipByValue(z("x",n,e,t),z("clipValueMin",n,e,t),z("clipValueMax",n,e,t))];case"Relu6":return[i.relu6(z("x",n,e,t))];case"Rsqrt":return[i.rsqrt(Oa(n.inputNames[0],e,t))];case"LeakyRelu":return[i.leakyRelu(z("x",n,e,t),z("alpha",n,e,t))];case"Prelu":return[i.prelu(z("x",n,e,t),z("alpha",n,e,t))];case"IsNan":return[i.isNaN(Oa(n.inputNames[0],e,t))];case"IsInf":return[i.isInf(Oa(n.inputNames[0],e,t))];case"IsFinite":return[i.isFinite(Oa(n.inputNames[0],e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zo(n,e,t=""){if(!(typeof n=="number"||typeof e=="number")){ce(n.length===e.length,()=>t+` Shapes ${n} and ${e} must match`);for(let i=0;i<n.length;i++){const r=n[i],a=e[i];ce(r<0||a<0||r===a,()=>t+` Shapes ${n} and ${e} must match`)}}}function YR(n){return!(typeof n=="number"||n.some(e=>e<0))}function G0(n,e,t){let i=BT(n,t);const r=!YR(i);if(r&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${i}`);if(r&&e.forEach(a=>{i=BT(a.shape,i)}),!YR(i))throw new Error(`Non-fully-defined elementShape: ${i}`);return i}function BT(n,e){if(typeof n=="number")return e;if(typeof e=="number")return n;if(n.length!==e.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${e}`);const t=[];for(let i=0;i<n.length;++i){const r=n[i],a=e[i];if(r>=0&&a>=0&&r!==a)throw new Error(`Incompatible shape during merge: ${n} vs. ${e}`);t[i]=r>=0?r:a}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iie{constructor(e,t,i,r,a,s,l){this.name=e,this.dtype=t,this.maxSize=i,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=s,this.clearAfterRead=l,this.tensors=[],this.closed_=!1,this.idTensor=Si(0),Ou(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const i=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),Zo(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),i.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(i.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);i.tensor=t,Ou(t),i.written=!0,this.tensors[e]=i}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((i,r)=>this.write(i,t[r]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let r=0;r<this.size();r++)e.push(r)}if(e.length===0)return Uu([],[0].concat(this.elementShape));const i=this.readMany(e);return Zo(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),Pc(i,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Uu([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const i=this.readMany(t);return Zo(this.elementShape,i[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${i[0].shape})`),La(i,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(!this.dynamicSize&&i>=this.maxSize)throw new Error(`Max index must be < array size (${i}  vs. ${this.maxSize})`);this.writeMany(e,Jd(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let i=0;const r=e.map(u=>(i+=u,i));if(i!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${i}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=i===0?0:t.size/i,s=[];Jn(()=>{t=lt(t,[1,i,a]);for(let u=0;u<e.length;++u){const m=[0,u===0?0:r[u-1],0],g=[1,e[u],a];s[u]=lt(Kn(t,m,g),this.elementShape)}return s});const l=[];for(let u=0;u<e.length;u++)l[u]=u;this.writeMany(l,s)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wd{get id(){return this.idTensor.id}constructor(e,t,i,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=i,e?.forEach(a=>{if(i!==a.dtype)throw new Error(`Invalid data types; op elements ${i}, but list elements ${a.dtype}`);Zo(t,a.shape,"TensorList shape mismatch: "),Ou(a)}),this.idTensor=Si(0),this.maxNumElements=r,Ou(this.idTensor)}copy(){return new Wd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,i=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(i!==-1&&this.tensors.length!==i)throw new Error(`Operation expected a list with ${i} elements but got a list with ${this.tensors.length} elements.`);Zo(e,this.elementShape,"TensorList shape mismatch: ");const r=G0(this.elementShape,this.tensors,e);return Jn(()=>{const a=this.tensors.map(s=>lt(s,r));return Pc(a,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const i=G0(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,Zo(r.shape,e,"TensorList shape mismatch: "),lt(r,i)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Zo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Ou(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new Wd([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let i=0;i<Math.min(this.tensors.length,e);++i)t.tensors[i]=this.tensors[i];return t}getItem(e,t,i){if(i!==this.elementDtype)throw new Error(`Invalid data types; op elements ${i}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Zo(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=G0(this.elementShape,this.tensors,t);return lt(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Zo(this.elementShape,t.shape,"TensorList shape mismatch: "),Ou(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,i){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Zo(this.elementShape,i,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=G0(this.elementShape,this.tensors,i);return e.length===0?Uu([],[0].concat(r)):Jn(()=>{const a=e.map(s=>lt(this.tensors[s],r));return Pc(a,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Zo(this.elementShape,t,"TensorList shape mismatch: ");const i=G0(this.elementShape,this.tensors,t);return this.size()===0?Uu([],[0].concat(i)):Jn(()=>{const r=this.tensors.map(a=>lt(a,i));return La(r,0)})}}function rie(n,e,t){const i=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==t)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${t}`);const r=n.shape.slice(1);Zo(r,e,"TensorList shape mismatch: ");const a=Jd(n);return new Wd(a,e,i)}function aie(n,e,t,i){return new Wd([],n,e,i)}function sie(n,e,t,i){if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(i!=null&&i!==-1&&r>=i)throw new Error(`Max index must be < array size (${r}  vs. ${i})`);const a=new Wd([],t,n.dtype,i),s=Jd(n,0);return e.forEach((l,u)=>{a.setItem(l,s[u])}),a}function oie(n,e,t){let i=0;const r=e.map(m=>(i+=m,i));if(i!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${i}, and tensor's shape is: ${n.shape}`);const a=n.shape.slice(1),s=BT(a,t),l=i===0?0:n.size/i,u=Jn(()=>{const m=[];n=lt(n,[1,i,l]);for(let g=0;g<e.length;++g){const _=[0,g===0?0:r[g-1],0],x=[1,e[g],l];m[g]=lt(Kn(n,_,x),s)}return n.dispose(),m}),f=new Wd([],t,n.dtype,e.length);for(let m=0;m<u.length;m++)f.setItem(m,u[m]);return f}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lie=async(n,e,t)=>{switch(n.op){case"If":case"StatelessIf":{const i=z("thenBranch",n,e,t),r=z("elseBranch",n,e,t),a=z("cond",n,e,t),s=z("args",n,e,t);return(await a.data())[0]?t.functionMap[i].executeFunctionAsync(s,t.tensorArrayMap,t.tensorListMap):t.functionMap[r].executeFunctionAsync(s,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{const i=z("body",n,e,t),r=z("cond",n,e,t),a=z("args",n,e,t),s=await t.functionMap[r].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap),l=a.map(m=>m.id);let u=await s[0].data();s.forEach(m=>{!m.kept&&l.indexOf(m.id)===-1&&m.dispose()});let f=a;for(;u[0];){const m=f;f=await t.functionMap[i].executeFunctionAsync(f,t.tensorArrayMap,t.tensorListMap);const g=f.map(_=>_.id);m.forEach(_=>{!_.kept&&l.indexOf(_.id)===-1&&g.indexOf(_.id)===-1&&_.dispose()});const y=await t.functionMap[r].executeFunctionAsync(f,t.tensorArrayMap,t.tensorListMap);u=await y[0].data(),y.forEach(_=>{!_.kept&&l.indexOf(_.id)===-1&&g.indexOf(_.id)===-1&&_.dispose()})}return f}case"LoopCond":{const i=z("pred",n,e,t);return[bc(i)]}case"Switch":{const i=z("pred",n,e,t);let r=z("data",n,e,t);return r.kept||(r=bc(r)),(await i.data())[0]?[void 0,r]:[r,void 0]}case"Merge":{const i=n.inputNames.find(r=>Oa(r,e,t)!==void 0);if(i){const r=Oa(i,e,t);return[bc(r)]}return}case"Enter":{const i=z("frameName",n,e,t),r=z("tensor",n,e,t);return t.enterFrame(i),[bc(r)]}case"Exit":{const i=z("tensor",n,e,t);return t.exitFrame(),[bc(i)]}case"NextIteration":{const i=z("tensor",n,e,t);return t.nextIteration(),[bc(i)]}case"TensorArrayV3":{const i=z("size",n,e,t),r=z("dtype",n,e,t),a=z("elementShape",n,e,t),s=z("dynamicSize",n,e,t),l=z("clearAfterRead",n,e,t),u=z("identicalElementShapes",n,e,t),f=z("name",n,e,t),m=new iie(f,r,i,a,u,s,l);return t.addTensorArray(m),[m.idTensor,Si(1)]}case"TensorArrayWriteV3":{const i=z("tensorArrayId",n,e,t),r=z("index",n,e,t),a=z("tensor",n,e,t),s=t.getTensorArray(i.id);return s.write(r,a),[s.idTensor]}case"TensorArrayReadV3":{const i=z("tensorArrayId",n,e,t),r=z("index",n,e,t);return[t.getTensorArray(i.id).read(r)]}case"TensorArrayGatherV3":{const i=z("tensorArrayId",n,e,t),r=z("indices",n,e,t),a=z("dtype",n,e,t);return[t.getTensorArray(i.id).gather(r,a)]}case"TensorArrayScatterV3":{const i=z("tensorArrayId",n,e,t),r=z("indices",n,e,t),a=z("tensor",n,e,t),s=t.getTensorArray(i.id);return s.scatter(r,a),[s.idTensor]}case"TensorArrayConcatV3":{const i=z("tensorArrayId",n,e,t),r=t.getTensorArray(i.id),a=z("dtype",n,e,t);return[r.concat(a)]}case"TensorArraySplitV3":{const i=z("tensorArrayId",n,e,t),r=z("tensor",n,e,t),a=z("lengths",n,e,t),s=t.getTensorArray(i.id);return s.split(a,r),[s.idTensor]}case"TensorArraySizeV3":{const i=z("tensorArrayId",n,e,t),r=t.getTensorArray(i.id);return[Si(r.size(),"int32")]}case"TensorArrayCloseV3":{const i=z("tensorArrayId",n,e,t),r=t.getTensorArray(i.id);return r.clearAndClose(),[r.idTensor]}case"TensorListSetItem":{const i=z("tensorListId",n,e,t),r=z("index",n,e,t),a=z("tensor",n,e,t),s=t.getTensorList(i.id);return s.setItem(r,a),[s.idTensor]}case"TensorListGetItem":{const i=z("tensorListId",n,e,t),r=z("index",n,e,t),a=z("elementShape",n,e,t),s=z("elementDType",n,e,t);return[t.getTensorList(i.id).getItem(r,a,s)]}case"TensorListScatterV2":case"TensorListScatter":{const i=z("indices",n,e,t),r=z("tensor",n,e,t),a=z("elementShape",n,e,t),s=z("numElements",n,e,t),l=sie(r,i,a,s);return t.addTensorList(l),[l.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const i=z("elementShape",n,e,t),r=z("elementDType",n,e,t);let a;n.op==="TensorListReserve"?a="numElements":a="maxNumElements";const s=z(a,n,e,t),l=n.op==="TensorListReserve"?-1:s,u=aie(i,r,s,l);return t.addTensorList(u),[u.idTensor]}case"TensorListGather":{const i=z("tensorListId",n,e,t),r=z("indices",n,e,t),a=z("elementShape",n,e,t),s=z("elementDType",n,e,t);return[t.getTensorList(i.id).gather(r,s,a)]}case"TensorListStack":{const i=z("tensorListId",n,e,t),r=z("elementShape",n,e,t),a=z("elementDType",n,e,t),s=z("numElements",n,e,t);return[t.getTensorList(i.id).stack(r,a,s)]}case"TensorListFromTensor":{const i=z("tensor",n,e,t),r=z("elementShape",n,e,t),a=z("elementDType",n,e,t),s=rie(i,r,a);return t.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const i=z("tensorListId",n,e,t),r=t.getTensorList(i.id),a=z("dtype",n,e,t),s=z("elementShape",n,e,t);return[r.concat(a,s)]}case"TensorListPushBack":{const i=z("tensorListId",n,e,t),r=z("tensor",n,e,t),a=t.getTensorList(i.id);return a.pushBack(r),[a.idTensor]}case"TensorListPopBack":{const i=z("tensorListId",n,e,t),r=z("elementShape",n,e,t),a=z("elementDType",n,e,t);return[t.getTensorList(i.id).popBack(r,a)]}case"TensorListSplit":{const i=z("tensor",n,e,t),r=z("elementShape",n,e,t),a=z("lengths",n,e,t),s=oie(i,a,r);return t.addTensorList(s),[s.idTensor]}case"TensorListLength":{const i=z("tensorListId",n,e,t),r=t.getTensorList(i.id);return[Si(r.size(),"int32")]}case"TensorListResize":{const i=z("tensorListId",n,e,t),r=z("size",n,e,t),s=t.getTensorList(i.id).resize(r);return t.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KR(n,e,t){const[i,r]=z("fusedOps",n,e,t),a=i==="biasadd",s=!a,l=r==="prelu",u=i==="fusedbatchnorm",f=z("numArgs",n,e,t);if(a){if(l&&f!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&a&&f!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const m=z("strides",n,e,t),g=I2(n,e,t),y=z("dataFormat",n,e,t).toUpperCase(),_=z("dilations",n,e,t);let[x,w]=z("args",n,e,t);s&&(w=x,x=void 0);const T=z("leakyreluAlpha",n,e,t);return{stride:m,pad:g,dataFormat:y,dilations:_,biasArg:x,preluArg:w,activationFunc:r,leakyreluAlpha:T}}const uie=(n,e,t,i=Ia)=>{switch(n.op){case"Conv1D":{const r=z("stride",n,e,t),a=z("pad",n,e,t),s=z("dataFormat",n,e,t).toUpperCase(),l=z("dilation",n,e,t);return[i.conv1d(z("x",n,e,t),z("filter",n,e,t),r,a,s,l)]}case"Conv2D":{const r=z("strides",n,e,t),a=I2(n,e,t),s=z("dataFormat",n,e,t).toUpperCase(),l=z("dilations",n,e,t);return[i.conv2d(z("x",n,e,t),z("filter",n,e,t),[r[1],r[2]],a,s,[l[1],l[2]])]}case"_FusedConv2D":{const{stride:r,pad:a,dataFormat:s,dilations:l,biasArg:u,preluArg:f,activationFunc:m,leakyreluAlpha:g}=KR(n,e,t);return[i.fused.conv2d({x:z("x",n,e,t),filter:z("filter",n,e,t),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[l[1],l[2]],bias:u,activation:m,preluActivationWeights:f,leakyreluAlpha:g})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:a,dataFormat:s,dilations:l,biasArg:u,preluArg:f,activationFunc:m,leakyreluAlpha:g}=KR(n,e,t);return[i.fused.depthwiseConv2d({x:z("x",n,e,t),filter:z("filter",n,e,t),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[l[1],l[2]],bias:u,activation:m,preluActivationWeights:f,leakyreluAlpha:g})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=z("outputShape",n,e,t),a=z("strides",n,e,t),s=I2(n,e,t);return[i.conv2dTranspose(z("x",n,e,t),z("filter",n,e,t),r,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=z("strides",n,e,t),a=I2(n,e,t),s=z("dilations",n,e,t),l=z("dataFormat",n,e,t).toUpperCase();return[i.depthwiseConv2d(z("input",n,e,t),z("filter",n,e,t),[r[1],r[2]],a,l,[s[1],s[2]])]}case"Conv3D":{const r=z("strides",n,e,t),a=z("pad",n,e,t),s=z("dataFormat",n,e,t).toUpperCase(),l=z("dilations",n,e,t);return[i.conv3d(z("x",n,e,t),z("filter",n,e,t),[r[1],r[2],r[3]],a,s,[l[1],l[2],l[3]])]}case"AvgPool":{const r=z("strides",n,e,t),a=z("pad",n,e,t),s=z("kernelSize",n,e,t);return[i.avgPool(z("x",n,e,t),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPool":{const r=z("strides",n,e,t),a=z("pad",n,e,t),s=z("kernelSize",n,e,t);return[i.maxPool(z("x",n,e,t),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPoolWithArgmax":{const r=z("strides",n,e,t),a=z("pad",n,e,t),s=z("kernelSize",n,e,t),l=z("includeBatchInIndex",n,e,t),{result:u,indexes:f}=i.maxPoolWithArgmax(z("x",n,e,t),[s[1],s[2]],[r[1],r[2]],a,l);return[u,f]}case"AvgPool3D":{const r=z("strides",n,e,t),a=z("pad",n,e,t),s=z("kernelSize",n,e,t);return[i.avgPool3d(z("x",n,e,t),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"MaxPool3D":{const r=z("strides",n,e,t),a=z("pad",n,e,t),s=z("kernelSize",n,e,t);return[i.maxPool3d(z("x",n,e,t),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"Dilation2D":{const r=z("strides",n,e,t),a=z("pad",n,e,t),s=z("dilations",n,e,t),l=r[1],u=r[2],f=s[1],m=s[2];return[i.dilation2d(z("x",n,e,t),z("filter",n,e,t),[l,u],a,[f,m],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cie=(n,e,t,i=Ia)=>{switch(n.op){case"Fill":{const r=z("shape",n,e,t),a=z("dtype",n,e,t),s=z("value",n,e,t);return[i.fill(r,s,a)]}case"LinSpace":{const r=z("start",n,e,t),a=z("stop",n,e,t),s=z("num",n,e,t);return[i.linspace(r,a,s)]}case"Multinomial":{const r=z("logits",n,e,t),a=z("numSamples",n,e,t),s=z("seed",n,e,t);return[i.multinomial(r,a,s)]}case"OneHot":{const r=z("indices",n,e,t),a=z("depth",n,e,t),s=z("onValue",n,e,t),l=z("offValue",n,e,t),u=z("dtype",n,e,t);return[i.oneHot(r,a,s,l,u)]}case"Ones":return[i.ones(z("shape",n,e,t),z("dtype",n,e,t))];case"OnesLike":return[i.onesLike(z("x",n,e,t))];case"RandomStandardNormal":return[i.randomStandardNormal(z("shape",n,e,t),z("dtype",n,e,t),z("seed",n,e,t))];case"RandomUniform":return[i.randomUniform(z("shape",n,e,t),z("minval",n,e,t),z("maxval",n,e,t),z("dtype",n,e,t))];case"RandomUniformInt":return[i.randomUniformInt(z("shape",n,e,t),z("minval",n,e,t),z("maxval",n,e,t),z("seed",n,e,t))];case"Range":{const r=z("start",n,e,t),a=z("stop",n,e,t),s=z("step",n,e,t);return[i.range(r,a,s,z("dtype",n,e,t))]}case"TruncatedNormal":{const r=z("shape",n,e,t),a=z("mean",n,e,t),s=z("stdDev",n,e,t),l=z("seed",n,e,t);return[i.truncatedNormal(r,a,s,z("dtype",n,e,t),l)]}case"Zeros":return[i.zeros(z("shape",n,e,t),z("dtype",n,e,t))];case"ZerosLike":return[i.zerosLike(z("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cS(n,e,t){const i=z("boxes",n,e,t),r=z("scores",n,e,t),a=z("maxOutputSize",n,e,t),s=z("iouThreshold",n,e,t),l=z("scoreThreshold",n,e,t),u=z("softNmsSigma",n,e,t);return{boxes:i,scores:r,maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}}const fie=async(n,e,t,i,r=Ia)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:s,maxOutputSize:l,iouThreshold:u,scoreThreshold:f,softNmsSigma:m}=cS(n,e,t),g=await r.image.nonMaxSuppressionWithScoreAsync(a,s,l,u,f,m);return[g.selectedIndices,g.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:s,maxOutputSize:l,iouThreshold:u,scoreThreshold:f}=cS(n,e,t),m=z("padToMaxOutputSize",n,e,t),g=await r.image.nonMaxSuppressionPaddedAsync(a,s,l,u,f,m);return[g.selectedIndices,g.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:s,maxOutputSize:l,iouThreshold:u,scoreThreshold:f}=cS(n,e,t);return[await r.image.nonMaxSuppressionAsync(a,s,l,u,f)]}case"Where":{const a=r.cast(z("condition",n,e,t),"bool"),s=[await r.whereAsync(a)];return a.dispose(),s}case"ListDiff":return r.setdiff1dAsync(z("x",n,e,t),z("y",n,e,t));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hie=(n,e,t,i=Ia)=>{switch(n.op){case"LowerBound":{const r=z("sortedSequence",n,e,t),a=z("values",n,e,t);return[i.lowerBound(r,a)]}case"TopKV2":{const r=z("x",n,e,t),a=z("k",n,e,t),s=z("sorted",n,e,t),l=i.topk(r,a,s);return[l.values,l.indices]}case"UpperBound":{const r=z("sortedSequence",n,e,t),a=z("values",n,e,t);return[i.upperBound(r,a)]}case"Unique":{const r=z("x",n,e,t),a=i.unique(r);return[a.values,a.indices]}case"UniqueV2":{const r=z("x",n,e,t),a=z("axis",n,e,t),s=i.unique(r,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const die=(n,e,t,i=Ia)=>{switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":const r=z("default",n,e,t);return[Oa(n.name,e,t)||r];case"Placeholder":return[Oa(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const m=z("x",n,e,t);return[bc(m)]}case"IdentityN":return z("x",n,e,t).map(m=>bc(m));case"Snapshot":const a=z("x",n,e,t);return[bc(a)];case"Shape":return[i.tensor1d(z("x",n,e,t).shape,"int32")];case"ShapeN":return z("x",n,e,t).map(m=>i.tensor1d(m.shape));case"Size":return[i.scalar(z("x",n,e,t).size,"int32")];case"Rank":return[i.scalar(z("x",n,e,t).rank,"int32")];case"NoOp":return[i.scalar(1)];case"Print":const s=z("x",n,e,t),l=z("data",n,e,t),u=z("message",n,e,t),f=z("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let m=0;m<l.length;m++)console.log(Array.prototype.slice.call(l[m].dataSync()).slice(0,f));return[s];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pie{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Si(0),this.tensorMap=new Map,Ou(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Si(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const i=await e.data();return this.tensorMap.forEach(r=>r.dispose()),this.tensorMap.clear(),Jn(()=>{const r=Jd(t),a=i.length,s=r.length;ce(a===s,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${s} elements.`);for(let l=0;l<a;l++){const u=i[l],f=r[l];Ou(f),this.tensorMap.set(u,f)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const i=await e.data();return Jn(()=>{const r=[];for(let a=0;a<i.length;a++){const s=i[a],l=this.findWithDefault(s,t);r.push(l)}return Pc(r)})}findWithDefault(e,t){const i=this.tensorMap.get(e);return i??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mie=async(n,e,t,i)=>{switch(n.op){case"HashTable":case"HashTableV2":{const r=i.getHashTableHandleByName(n.name);if(r!=null)return[r];{const a=z("keyDType",n,e,t),s=z("valueDType",n,e,t),l=new pie(a,s);return i.addHashTable(n.name,l),[l.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const r=z("tableHandle",n,e,t,i),a=z("keys",n,e,t),s=z("values",n,e,t);return[await i.getHashTableById(r.id).import(a,s)]}case"LookupTableFind":case"LookupTableFindV2":{const r=z("tableHandle",n,e,t,i),a=z("keys",n,e,t),s=z("defaultValue",n,e,t);return[await i.getHashTableById(r.id).find(a,s)]}case"LookupTableSize":case"LookupTableSizeV2":{const r=z("tableHandle",n,e,t,i);return[i.getHashTableById(r.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gie=(n,e,t,i=Ia)=>{switch(n.op){case"ResizeBilinear":{const r=z("images",n,e,t),a=z("size",n,e,t),s=z("alignCorners",n,e,t),l=z("halfPixelCenters",n,e,t);return[i.image.resizeBilinear(r,[a[0],a[1]],s,l)]}case"ResizeNearestNeighbor":{const r=z("images",n,e,t),a=z("size",n,e,t),s=z("alignCorners",n,e,t),l=z("halfPixelCenters",n,e,t);return[i.image.resizeNearestNeighbor(r,[a[0],a[1]],s,l)]}case"CropAndResize":{const r=z("image",n,e,t),a=z("boxes",n,e,t),s=z("boxInd",n,e,t),l=z("cropSize",n,e,t),u=z("method",n,e,t),f=z("extrapolationValue",n,e,t);return[i.image.cropAndResize(r,a,s,l,u,f)]}case"ImageProjectiveTransformV3":{const r=z("images",n,e,t),a=z("transforms",n,e,t),s=z("outputShape",n,e,t),l=z("fillValue",n,e,t),u=z("interpolation",n,e,t),f=z("fillMode",n,e,t);return[i.image.transform(r,a,u.toLowerCase(),f.toLowerCase(),l,s)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yie=(n,e,t,i=Ia)=>{switch(n.op){case"Equal":return[i.equal(z("a",n,e,t),z("b",n,e,t))];case"NotEqual":return[i.notEqual(z("a",n,e,t),z("b",n,e,t))];case"Greater":return[i.greater(z("a",n,e,t),z("b",n,e,t))];case"GreaterEqual":return[i.greaterEqual(z("a",n,e,t),z("b",n,e,t))];case"Less":return[i.less(z("a",n,e,t),z("b",n,e,t))];case"LessEqual":return[i.lessEqual(z("a",n,e,t),z("b",n,e,t))];case"LogicalAnd":return[i.logicalAnd(z("a",n,e,t),z("b",n,e,t))];case"LogicalNot":return[i.logicalNot(z("a",n,e,t))];case"LogicalOr":return[i.logicalOr(z("a",n,e,t),z("b",n,e,t))];case"Select":case"SelectV2":return[i.where(z("condition",n,e,t),z("a",n,e,t),z("b",n,e,t))];case"BitwiseAnd":return[i.bitwiseAnd(z("a",n,e,t),z("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vie=(n,e,t,i=Ia)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[i.matMul(z("a",n,e,t),z("b",n,e,t),z("transposeA",n,e,t),z("transposeB",n,e,t))];case"Einsum":return[i.einsum(z("equation",n,e,t),...z("tensors",n,e,t))];case"Transpose":return[i.transpose(z("x",n,e,t),z("perm",n,e,t))];case"_FusedMatMul":const[r,a]=z("fusedOps",n,e,t),s=r==="biasadd",l=a==="prelu",u=z("numArgs",n,e,t),f=z("leakyreluAlpha",n,e,t);if(s){if(l&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[m,g]=z("args",n,e,t);return[i.fused.matMul({a:z("a",n,e,t),b:z("b",n,e,t),transposeA:z("transposeA",n,e,t),transposeB:z("transposeB",n,e,t),bias:m,activation:a,preluActivationWeights:g,leakyreluAlpha:f})];case"MatrixBandPart":return[i.linalg.bandPart(z("a",n,e,t),z("numLower",n,e,t),z("numUpper",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ie=(n,e,t,i=Ia)=>{switch(n.op){case"EuclideanNorm":return[i.euclideanNorm(z("x",n,e,t),z("axis",n,e,t),z("keepDims",n,e,t))];case"FusedBatchNorm":case"FusedBatchNormV2":return[i.batchNorm(z("x",n,e,t),z("mean",n,e,t),z("variance",n,e,t),z("offset",n,e,t),z("scale",n,e,t),z("epsilon",n,e,t))];case"FusedBatchNormV3":return[i.batchNorm(z("x",n,e,t),z("mean",n,e,t),z("variance",n,e,t),z("offset",n,e,t),z("scale",n,e,t),z("epsilon",n,e,t))];case"LRN":return[i.localResponseNormalization(z("x",n,e,t),z("radius",n,e,t),z("bias",n,e,t),z("alpha",n,e,t),z("beta",n,e,t))];case"Softmax":return[i.softmax(z("x",n,e,t))];case"LogSoftmax":return[i.logSoftmax(z("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bie=(n,e,t,i=Ia)=>{switch(n.op){case"RaggedGather":{const{outputNestedSplits:r,outputDenseValues:a}=i.raggedGather(z("paramsNestedSplits",n,e,t),z("paramsDenseValues",n,e,t),z("indices",n,e,t),z("outputRaggedRank",n,e,t));return r.concat(a)}case"RaggedRange":{const{rtNestedSplits:r,rtDenseValues:a}=i.raggedRange(z("starts",n,e,t),z("limits",n,e,t),z("splits",n,e,t));return[r,a]}case"RaggedTensorToTensor":return[i.raggedTensorToTensor(z("shape",n,e,t),z("values",n,e,t),z("defaultValue",n,e,t),z("rowPartitionTensors",n,e,t),z("rowPartitionTypes",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xie=(n,e,t,i=Ia)=>{switch(n.op){case"Max":{const l=z("axis",n,e,t),u=z("keepDims",n,e,t);return[i.max(z("x",n,e,t),l,u)]}case"Mean":{const l=z("axis",n,e,t),u=z("keepDims",n,e,t);return[i.mean(z("x",n,e,t),l,u)]}case"Min":{const l=z("axis",n,e,t),u=z("keepDims",n,e,t);return[i.min(z("x",n,e,t),l,u)]}case"Sum":{const l=z("axis",n,e,t),u=z("keepDims",n,e,t);return[i.sum(z("x",n,e,t),l,u)]}case"All":{const l=z("axis",n,e,t),u=z("keepDims",n,e,t);return[i.all(z("x",n,e,t),l,u)]}case"Any":{const l=z("axis",n,e,t),u=z("keepDims",n,e,t);return[i.any(z("x",n,e,t),l,u)]}case"ArgMax":{const l=z("axis",n,e,t);return[i.argMax(z("x",n,e,t),l)]}case"ArgMin":{const l=z("axis",n,e,t);return[i.argMin(z("x",n,e,t),l)]}case"Prod":{const l=z("axis",n,e,t),u=z("keepDims",n,e,t);return[i.prod(z("x",n,e,t),l,u)]}case"Cumprod":{const l=z("axis",n,e,t),u=z("exclusive",n,e,t),f=z("reverse",n,e,t);return[i.cumprod(z("x",n,e,t),l,u,f)]}case"Cumsum":{const l=z("axis",n,e,t),u=z("exclusive",n,e,t),f=z("reverse",n,e,t);return[i.cumsum(z("x",n,e,t),l,u,f)]}case"Bincount":const r=z("x",n,e,t),a=z("weights",n,e,t),s=z("size",n,e,t);return[i.bincount(r,a,s)];case"DenseBincount":{const l=z("x",n,e,t),u=z("weights",n,e,t),f=z("size",n,e,t),m=z("binaryOutput",n,e,t);return[i.denseBincount(l,u,f,m)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sie=(n,e,t,i=Ia)=>{switch(n.op){case"ConcatV2":case"Concat":{const r=z("n",n,e,t),a=z("axis",n,e,t);let s=z("tensors",n,e,t);return s=s.slice(0,r),[i.concat(s,a)]}case"Gather":{const r=z("x",n,e,t),a=z("indices",n,e,t);return[i.gather(r,i.cast(a,"int32"),0)]}case"GatherV2":{const r=z("axis",n,e,t),a=z("batchDims",n,e,t),s=z("x",n,e,t),l=z("indices",n,e,t);return[i.gather(s,i.cast(l,"int32"),r,a)]}case"Reverse":{const r=z("dims",n,e,t),a=[];for(let l=0;l<r.length;l++)r[l]&&a.push(l);const s=z("x",n,e,t);return[i.reverse(s,a)]}case"ReverseV2":{const r=z("axis",n,e,t),a=z("x",n,e,t);return[i.reverse(a,r)]}case"Slice":{const r=z("begin",n,e,t),a=z("size",n,e,t);return[i.slice(z("x",n,e,t),r,a)]}case"StridedSlice":{const r=z("begin",n,e,t),a=z("end",n,e,t),s=z("strides",n,e,t),l=z("beginMask",n,e,t),u=z("endMask",n,e,t),f=z("ellipsisMask",n,e,t),m=z("newAxisMask",n,e,t),g=z("shrinkAxisMask",n,e,t),y=z("x",n,e,t);return[i.stridedSlice(y,r,a,s,l,u,f,m,g)]}case"Pack":return Jn(()=>{const r=z("axis",n,e,t),a=z("tensors",n,e,t),s=a[0].shape,l=i.squeeze(a[0]).shape,u=a.map(f=>{const m=Oc(f.shape,s);if(!m&&!Oc(i.squeeze(f).shape,l))throw new Error("the input tensors shape does not match");return m?f:i.reshape(f,s)});return[i.stack(u,r)]});case"Unpack":{const r=z("axis",n,e,t),a=z("tensor",n,e,t);return i.unstack(a,r)}case"Tile":{const r=z("reps",n,e,t);return[i.tile(z("x",n,e,t),r)]}case"Split":case"SplitV":{const r=z("axis",n,e,t),a=z("numOrSizeSplits",n,e,t),s=z("x",n,e,t);return i.split(s,a,r)}case"ScatterNd":{const r=z("indices",n,e,t),a=z("values",n,e,t),s=z("shape",n,e,t);return[i.scatterND(r,a,s)]}case"GatherNd":{const r=z("x",n,e,t),a=z("indices",n,e,t);return[i.gatherND(r,a)]}case"SparseToDense":{const r=z("sparseIndices",n,e,t),a=z("outputShape",n,e,t),s=z("sparseValues",n,e,t),l=z("defaultValue",n,e,t);return[i.sparseToDense(r,s,a,s.dtype===l.dtype?l:i.cast(l,s.dtype))]}case"TensorScatterUpdate":{const r=z("indices",n,e,t),a=z("values",n,e,t),s=z("tensor",n,e,t);return[i.tensorScatterUpdate(s,r,a)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tie=(n,e,t,i=Ia)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:a,emptyRowIndicator:s,reverseIndexMap:l}=i.sparse.sparseFillEmptyRows(z("indices",n,e,t),z("values",n,e,t),z("denseShape",n,e,t),z("defaultValue",n,e,t));return[r,a,s,l]}case"SparseReshape":{const{outputIndices:r,outputShape:a}=i.sparse.sparseReshape(z("inputIndices",n,e,t),z("inputShape",n,e,t),z("newShape",n,e,t));return[r,a]}case"SparseSegmentMean":return[i.sparse.sparseSegmentMean(z("data",n,e,t),z("indices",n,e,t),z("segmentIds",n,e,t))];case"SparseSegmentSum":return[i.sparse.sparseSegmentSum(z("data",n,e,t),z("indices",n,e,t),z("segmentIds",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eie=(n,e,t,i=Ia)=>{switch(n.op){case"FFT":return[i.fft(z("x",n,e,t))];case"IFFT":return[i.ifft(z("x",n,e,t))];case"RFFT":return[i.rfft(z("x",n,e,t))];case"IRFFT":return[i.irfft(z("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mie=(n,e,t,i=Ia)=>{switch(n.op){case"StaticRegexReplace":return[i.string.staticRegexReplace(z("input",n,e,t),z("pattern",n,e,t),z("rewrite",n,e,t),z("replaceGlobal",n,e,t))];case"StringNGrams":{const{nGrams:r,nGramsSplits:a}=i.string.stringNGrams(z("data",n,e,t),z("dataSplits",n,e,t),z("separator",n,e,t),z("nGramWidths",n,e,t),z("leftPad",n,e,t),z("rightPad",n,e,t),z("padWidth",n,e,t),z("preserveShortSequences",n,e,t));return[r,a]}case"StringSplit":{const{indices:r,values:a,shape:s}=i.string.stringSplit(z("input",n,e,t),z("delimiter",n,e,t),z("skipEmpty",n,e,t));return[r,a,s]}case"StringToHashBucketFast":return[i.string.stringToHashBucketFast(z("input",n,e,t),z("numBuckets",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wie=(n,e,t,i=Ia)=>{switch(n.op){case"Cast":return[i.cast(z("x",n,e,t),z("dtype",n,e,t))];case"ExpandDims":{const r=z("axis",n,e,t);return[i.expandDims(z("x",n,e,t),r)]}case"Squeeze":{const r=z("axis",n,e,t);return[i.squeeze(z("x",n,e,t),r)]}case"Reshape":return[i.reshape(z("x",n,e,t),z("shape",n,e,t))];case"EnsureShape":return[i.ensureShape(z("x",n,e,t),z("shape",n,e,t))];case"MirrorPad":return[i.mirrorPad(z("x",n,e,t),z("padding",n,e,t),z("mode",n,e,t))];case"PadV2":case"Pad":return[i.pad(z("x",n,e,t),z("padding",n,e,t),z("constantValue",n,e,t))];case"SpaceToBatchND":{const r=z("blockShape",n,e,t),a=z("paddings",n,e,t);return[i.spaceToBatchND(z("x",n,e,t),r,a)]}case"BatchToSpaceND":{const r=z("blockShape",n,e,t),a=z("crops",n,e,t);return[i.batchToSpaceND(z("x",n,e,t),r,a)]}case"DepthToSpace":{const r=z("blockSize",n,e,t),a=z("dataFormat",n,e,t).toUpperCase();return[i.depthToSpace(z("x",n,e,t),r,a)]}case"BroadcastTo":return[i.broadcastTo(z("x",n,e,t),z("shape",n,e,t))];case"BroadcastArgs":return[i.broadcastArgs(z("s0",n,e,t),z("s1",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZR(n,e,t,i,r=Jn){const a=((s,l,u)=>{switch(s.category){case"arithmetic":return r(()=>tie(s,l,u));case"basic_math":return r(()=>nie(s,l,u));case"control":return lie(s,l,u);case"convolution":return r(()=>uie(s,l,u));case"creation":return r(()=>cie(s,l,u));case"dynamic":return fie(s,l,u);case"evaluation":return r(()=>hie(s,l,u));case"image":return r(()=>gie(s,l,u));case"graph":return r(()=>die(s,l,u));case"logical":return r(()=>yie(s,l,u));case"matrices":return r(()=>vie(s,l,u));case"normalization":return r(()=>_ie(s,l,u));case"ragged":return r(()=>bie(s,l,u));case"reduction":return r(()=>xie(s,l,u));case"slice_join":return r(()=>Sie(s,l,u));case"sparse":return r(()=>Tie(s,l,u));case"spectral":return r(()=>Eie(s,l,u));case"string":return r(()=>Mie(s,l,u));case"transformation":return r(()=>wie(s,l,u));case"hash_table":return mie(s,l,u,i);case"custom":const f=rD(s.op);if(f&&f.customExecutor)return f.customExecutor(new eie(s,l,u));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,e,t);return Fd(a)?a.then(s=>[].concat(s)):[].concat(a)}class QR{constructor(e={},t={},i={},r={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=i,this.functionMap=r,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const i=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(i))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JR(n,e,t,i){const r=new Set,a=[];let s=null,l=null;const u=new Set,f=new Set(Object.keys(n).map(y=>to(y)[0]));i=i||[];const m=new Set(i.map(y=>to(y.name)[0])),g=[...e];for(;g.length>0;){const y=g.pop();if((_d(y)||Iie(y)||Uie(y))&&s==null&&(s=y,l=s.children.map(_=>_.name).filter(_=>r.has(_))),r.add(y.name),t[y.name]==null&&!f.has(y.name)&&!m.has(y.name)){if(y.inputs.length===0){a.push(y.name);continue}y.inputs.forEach(_=>{u.has(_.name)||(u.add(_.name),g.push(_))})}}return{inputs:n,outputs:e,usedNodes:r,missingInputs:a,dynamicNode:s,syncInputs:l}}function Aie(n,e){const{usedNodes:t,inputs:i}=e,r=Object.keys(i).map(T=>to(T)[0]).map(T=>n.nodes[T]),a=n.initNodes||[],s=T=>t.has(typeof T=="string"?T:T.name);function l(T){return[...new Map(T.map(S=>[S.name,S])).values()]}const u=l([...r,...n.weights,...a]).filter(s),f=l([...u,...Object.values(n.nodes)]).filter(s),m=new Map(f.map(T=>[T.name,T])),g={};for(const T of f){g[T.name]=g[T.name]||0;for(const S of T.children)s(S)||(g[S.name]=Number.POSITIVE_INFINITY),g[S.name]=(g[S.name]||0)+1}const y=Object.entries(g).filter(([,T])=>T===0).map(([T])=>T),_=[...y];for(;y.length>0;){const T=y.pop(),S=m.get(T);for(const O of S.children.filter(s))--g[O.name]===0&&(_.push(O.name),y.push(O.name))}const x=_.map(T=>m.get(T)),w=Rie(x,u);return Nie(w,u),w}function Rie(n,e){const t=new Map(n.map(s=>[s.name,s])),i=e.map(s=>s.name),r=new Set(i);for(;i.length>0;){const s=i.pop(),l=t.get(s);for(const u of l.children)!t.has(u.name)||r.has(u.name)||(r.add(u.name),i.push(u.name))}return n.filter(s=>r.has(s.name))}class h2 extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Nie(n,e){const t=new Map(n.map((l,u)=>[l.name,u])),i=new Set(e.map(l=>l.name)),r=l=>i.has(typeof l=="string"?l:l.name),a=new Set(n.map(l=>l.name)),s=l=>a.has(typeof l=="string"?l:l.name);for(const l of n){for(const u of l.children.filter(s)){if(!t.has(u.name))throw new h2(`Child ${u.name} of node ${l.name} is unreachable.`);if(t.get(l.name)>t.get(u.name))throw new h2(`Node ${l.name} is scheduled to run after its child ${u.name}.`)}if(!r(l))for(const u of l.inputs){if(!t.has(u.name))throw new h2(`Input ${u.name} of node ${l.name} is unreachable.`);if(t.get(u.name)>t.get(l.name))throw new h2(`Node ${l.name} is scheduled to run before its input ${u.name}.`)}}}function Cie(n){const e=new Map(n.map((l,u)=>[l.name,u])),t=Number.MAX_SAFE_INTEGER,i=n.map((l,u)=>_d(l)?t:u),r=l=>{const u=i[e.get(l.name)];return u??-1},a=n.map((l,u)=>l.children.map(r).reduce((f,m)=>Math.max(f,m),i[u])),s=new Map;for(let l=0;l<n.length;++l){const u=a[l];if(u===t)continue;const f=n[l],m=n[u];s.has(m.name)||s.set(m.name,[]),s.get(m.name).push(f)}return s}const Oie=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Die=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Lie=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function _d(n){return Oie.has(n.op)}function Iie(n){return Die.has(n.op)}function Uie(n){return Lie.has(n.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k_{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(i=>e[i].map(r=>r.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(i=>{this._functionExecutorMap[i]=new k_(e.functions[i],this)})}getCompilationKey(e,t){const i=e.map(a=>a.name).sort(),r=t.map(a=>a.name).sort();return i.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const i=JR(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:s}=i;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(r.length>0){const f=t.map(g=>g.name),m=Object.keys(e);throw new Error(`Cannot compute the outputs [${f}] from the provided inputs [${m}]. Missing the following inputs: [${r}]`)}const l=Aie(this.graph,i),u=Cie(l);return{orderedNodes:l,nodeLiveUntilMap:u}}cloneAndKeepTensor(e){if(e==null)return null;const t=e.clone();return Ou(t),t}cloneTensorList(e){return e?e.map(i=>this.cloneAndKeepTensor(i)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,i])=>[t,this.cloneTensorList(i)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const i=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=i.map(y=>this.graph.nodes[to(y)[0]]),a=t.map(y=>to(y)[0]),s=new Set(a);let l=a.map(y=>this.graph.nodes[y]);l.length===0&&(l=this._outputs);const u=this.getCompilationKey(r,l);let f=this.compiledMap.get(u);f==null&&(f=this.compile(e,l),this.compiledMap.set(u,f));try{this.keepIntermediateTensors=li().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(y){this.keepIntermediateTensors=!1,console.warn(y.message)}const m={},g={};return Jn(()=>{const y=new QR(this.weightMap,m,g,this.functionExecutorMap,this.parseNodeNameCache),_=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(S=>{const[O,L]=to(S,y),C=[];C[L]=e[S],_[O]=C,this.keepIntermediateTensors&&(this.clonedTensorsMap[O]=this.cloneTensorList(C))});const x=this.getFrozenTensorIds(_),{orderedNodes:w,nodeLiveUntilMap:T}=f;for(const S of w){if(_[S.name])continue;const O=ZR(S,_,y,this._resourceManager);if(Fd(O))throw new Error(`The execution of the op '${S.op}' returned a promise. Please use model.executeAsync() instead.`);_[S.name]=O,this.keepIntermediateTensors&&(this.clonedTensorsMap[S.name]=this.cloneTensorList(O)),this.checkTensorForDisposalWithNodeLiveUntilInfo(S,_,y,x,s,T.get(S.name))}return this.parent==null&&y.dispose(x),t.map(S=>Oa(S,_,y))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(i=>e[i]).map(i=>i.map(r=>r.id)));return new Set(t)}checkTensorForDisposal(e,t,i,r,a,s,l){if(!(_d(t)||s.has(e))){for(const u of i[e])u!=null&&(l[u.id]=(l[u.id]||0)+t.children.length);for(const u of t.inputs){if(_d(u))continue;const f=XR(u.name,i,r);if(f!=null)for(const m of f){if(!m||m.kept||a.has(m.id))continue;const g=l[m.id];g===1?(m.dispose(),delete l[m.id]):g!=null&&l[m.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,i,r,a,s){function l(u){return _d(u)||a.has(u.name)}if(!(_d(e)||s==null))for(const u of s){if(l(u))continue;const f=XR(u.name,t,i);for(const m of f)!m||m.kept||r.has(m.id)||m.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,i=!1,r={},a={}){this.disposeIntermediateTensors(),i||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=li().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(y){this.keepIntermediateTensors=!1,console.warn(y.message)}const s=new QR(this.weightMap,r,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const l=await this.executeWithControlFlow(e,s,t,i),u=t.map(y=>Oa(y,l,s)),f=u.map(y=>y.id),m=Object.keys(e).map(y=>e[y].id),g=new Set([...f,...m,...this.weightIds]);return Object.values(l).forEach(y=>{y.forEach(_=>{_&&!_.isDisposed&&!g.has(_.id)&&_.dispose()})}),this.parent==null&&s.dispose(g),u}async executeFunctionAsync(e,t,i){const r=e.reduce((a,s,l)=>(a[this.inputs[l].name]=s,a),{});return this._executeAsync(r,this.outputNodes,!0,t,i)}async executeWithControlFlow(e,t,i,r){const a=Object.keys(e),s=a.map(C=>this.graph.nodes[to(C)[0]]),l=i.map(C=>to(C)[0]),u=new Set(l);let f=l.map(C=>this.graph.nodes[C]);f.length===0&&(f=this._outputs);const{usedNodes:m,missingInputs:g,dynamicNode:y,syncInputs:_}=JR(e,f,this.weightMap,this._initNodes),x=[...s,...this.graph.weights,...this._initNodes||[]].map(C=>({node:C,contexts:t.currentContext})),w=Object.assign({},this.weightMap);Object.keys(e).forEach(C=>{const[P,B]=to(C),j=[];j[B]=e[C],w[P]=j});const T={},S=this.getFrozenTensorIds(w),O={};for(;x.length>0;){const C=this.processStack(s,x,t,w,O,S,u,T,m);await Promise.all(C)}y==null&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const L=f.filter(C=>!_d(C)&&!Oa(C.name,w,t)).map(C=>C.name);if(L.length>0){let C="";throw y!=null&&(C=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${_}]`),new Error(`Cannot compute the outputs [${L}] from the provided inputs [${a}]. Consider providing the following inputs: [${g}]. ${C}`)}return w}processStack(e,t,i,r,a,s,l,u,f){const m=[];for(;t.length>0;){const g=t.pop();i.currentContext=g.contexts;let y="";if(g.node.op==="Enter"&&z("isConstant",g.node,r,i)&&([y]=_c(g.node.name,i)),r[g.node.name]==null){const _=ZR(g.node,r,i,this._resourceManager);y||([y]=_c(g.node.name,i));const x=i.currentContext;Fd(_)?m.push(_.then(w=>(r[y]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[y]=this.cloneTensorList(w)),i.currentContext=x,this.checkTensorForDisposal(y,g.node,r,i,s,l,u),this.processChildNodes(g.node,t,i,r,a,f),w))):(r[y]=_,this.keepIntermediateTensors&&(this.clonedTensorsMap[y]=this.cloneTensorList(_)),this.checkTensorForDisposal(y,g.node,r,i,s,l,u),this.processChildNodes(g.node,t,i,r,a,f))}else this.processChildNodes(g.node,t,i,r,a,f)}return m}processChildNodes(e,t,i,r,a,s){e.children.forEach(l=>{const[u]=_c(l.name,i);a[u]||!s.has(l.name)||(l.op==="Merge"?l.inputNames.some(f=>!!Oa(f,r,i))&&(a[u]=!0,t.push({contexts:i.currentContext,node:l})):l.inputNames.every(f=>!!Oa(f,r,i))&&(a[u]=!0,t.push({contexts:i.currentContext,node:l})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const i=e[t],[r]=to(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){const s=a.attrParams.shape.value,l=s.length===i.shape.length&&i.shape.every((u,f)=>s[f]===-1||s[f]===u);ce(l,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${s}], but was [${i.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&ce(i.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${i.dtype}`)})}mapInputs(e){var t,i;const r={};for(const a in e){const s=(i=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||i===void 0?void 0:i[a];s!=null?r[s.name]=e[a]:r[a]=e[a]}return r}checkInputs(e){const t=Object.keys(e).filter(i=>{const[r]=to(i);return this.graph.nodes[r]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>{var i,r;const a=(r=(i=this._signature)===null||i===void 0?void 0:i.outputs)===null||r===void 0?void 0:r[t];return a!=null?a.name:t},{})}checkOutputs(e){e.forEach(t=>{const[i]=to(t);if(!this.graph.nodes[i])throw new Error(`The output '${t}' is not found in the graph`)})}}class Pie{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bie="?tfjs-format=file",zie="model.json";class Fie{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},i=tD){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=i,t==null&&(this.loadOptions={}),this.resourceManager=new Pie}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Fd(e)?e.then(t=>t.getWeightStream==null?this.loadSync(t):this.loadStreaming(t)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const t=await nO(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const i=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const a=this.artifacts.userDefinedMetadata;a.signature!=null&&(r=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=r,this.version=`${i.versions.producer}.${i.versions.minConsumer}`,this.executor=new k_(qR.Instance.transformGraph(i,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const a=qR.Instance.transformGraph(e.modelInitializer);this.initializer=new k_(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){const i=this.io.getSaveHandlers(e);if(i.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(i.length>1)throw new Error(`Found more than one (${i.length}) save handlers for URL '${e}'`);e=i[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t=e instanceof Ur?[e]:e,i={};return t.forEach((r,a)=>i[this.structuredOutputKeys[a]]=r),i}return e}predict(e,t){const i=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(i)}async predictAsync(e,t){const i=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(i)}normalizeInputs(e){var t;if(!(e instanceof Ur)&&!Array.isArray(e)){const a=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(a!=null)for(const s in a){const l=a[s];l.resourceId!=null&&(e[s]=this.resourceIdToCapturedInput[l.resourceId])}return e}e=Array.isArray(e)?e:[e];const i=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+i!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-i} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((a,s)=>{var l,u,f;const m=(f=(u=(l=this.signature)===null||l===void 0?void 0:l.inputs)===null||u===void 0?void 0:u[s])===null||f===void 0?void 0:f.resourceId;return m!=null?a[s]=this.resourceIdToCapturedInput[m]:a[s]=e[r++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,i=Object.keys(t);for(let r=0;r<i.length;r++){const a=i[r],s=t[a];this.resourceIdToCapturedInput[s.resourceId]=e[r]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const i=this.executor.execute(e,t);return i.length>1?i:i[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const i=await this.executor.executeAsync(e,t);return i.length>1?i:i[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,i)=>(t[i]=[e[i]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Er(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function oD(n,e={},t=tD){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof n=="string"&&(n=kie(n));const i=new Fie(n,e,t);return await i.load(),i}function kie(n){return n.endsWith("/")||(n=n+"/"),`${n}${zie}${Bie}`}/**
    * @license
    * Copyright 2024 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var kl=function(){return kl=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},kl.apply(this,arguments)};function Ec(n,e,t,i){return new(t||(t=Promise))(function(r,a){function s(f){try{u(i.next(f))}catch(m){a(m)}}function l(f){try{u(i.throw(f))}catch(m){a(m)}}function u(f){var m;f.done?r(f.value):(m=f.value,m instanceof t?m:new t(function(g){g(m)})).then(s,l)}u((i=i.apply(n,[])).next())})}function Mc(n,e){var t,i,r,a,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(f){return function(m){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,i&&(r=2&m[0]?i.return:m[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,m[1])).done)return r;switch(i=0,r&&(m=[2&m[0],r.value]),m[0]){case 0:case 1:r=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,i=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||m[0]!==6&&m[0]!==2)){s=0;continue}if(m[0]===3&&(!r||m[1]>r[0]&&m[1]<r[3])){s.label=m[1];break}if(m[0]===6&&s.label<r[1]){s.label=r[1],r=m;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(m);break}r[2]&&s.ops.pop(),s.trys.pop();continue}m=e.call(n,s)}catch(g){m=[6,g],i=0}finally{t=r=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([u,f])}}}function zf(n){var e=n.map(function(t){return t[0]});return e.push(n[n.length-1][1]),e}var Hie={lips:zf([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:zf([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:zf([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:zf([[474,475],[475,476],[476,477],[477,474]]),rightEye:zf([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:zf([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:zf([[469,470],[470,471],[471,472],[472,469]]),faceOval:zf([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},Vie=Object.entries(Hie).map(function(n){var e=n[0];return n[1].map(function(t){return[t,e]})}).flat(),lD=new Map(Vie);function zT(n){for(var e={locationData:{relativeKeypoints:[]}},t=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=0;s<n.length;++s){var l=n[s];t=Math.min(t,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),a=Math.max(a,l.y),e.locationData.relativeKeypoints.push({x:l.x,y:l.y})}return e.locationData.relativeBoundingBox={xMin:t,yMin:r,xMax:i,yMax:a,width:i-t,height:a-r},e}var fS={runtime:"mediapipe",maxFaces:1,refineLandmarks:!1},Gie=function(){function n(e){var t=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new vG.FaceMesh({locateFile:function(i,r){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+i:r+"/"+i}}),this.faceMeshSolution.setOptions({refineLandmarks:e.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:e.maxFaces}),this.faceMeshSolution.onResults(function(i){if(t.height=i.image.height,t.width=i.image.width,t.faces=[],i.multiFaceLandmarks!==null)for(var r=i.multiFaceLandmarks,a=0;a<r.length;a++){var s=t.translateOutput(r[a]);t.faces.push({keypoints:s,box:zT(s).locationData.relativeBoundingBox})}})}return n.prototype.translateOutput=function(e){var t=this;return e.map(function(i,r){var a={x:i.x*t.width,y:i.y*t.height,z:i.z*t.width},s=lD.get(r);return s!=null&&(a.name=s),a})},n.prototype.estimateFaces=function(e,t){return Ec(this,void 0,void 0,function(){var i,r;return Mc(this,function(a){switch(a.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Ur?(r=ImageData.bind,[4,nD(e)]):[3,2];case 1:return i=new(r.apply(ImageData,[void 0,a.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:i=e,a.label=3;case 3:return e=i,[4,this.faceMeshSolution.send({image:e})];case 4:return a.sent(),[2,this.faces]}})})},n.prototype.dispose=function(){this.faceMeshSolution.close()},n.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},n.prototype.initialize=function(){return this.faceMeshSolution.initialize()},n}();function jie(n){return Ec(this,void 0,void 0,function(){var e,t;return Mc(this,function(i){switch(i.label){case 0:return e=function(r){if(r==null)return kl({},fS);var a=kl({},r);return a.runtime="mediapipe",a.maxFaces==null&&(a.maxFaces=fS.maxFaces),a.refineLandmarks==null&&(a.refineLandmarks=fS.refineLandmarks),a}(n),[4,(t=new Gie(e)).initialize()];case 1:return i.sent(),[2,t]}})})}var hS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wie={};(function(){var n;function e(R){var H=0;return function(){return H<R.length?{done:!1,value:R[H++]}:{done:!0}}}var t=typeof Object.defineProperties=="function"?Object.defineProperty:function(R,H,W){return R==Array.prototype||R==Object.prototype||(R[H]=W.value),R},i=function(R){R=[typeof globalThis=="object"&&globalThis,R,typeof window=="object"&&window,typeof self=="object"&&self,typeof hS=="object"&&hS];for(var H=0;H<R.length;++H){var W=R[H];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}(this);function r(R,H){if(H)e:{var W=i;R=R.split(".");for(var Y=0;Y<R.length-1;Y++){var se=R[Y];if(!(se in W))break e;W=W[se]}(H=H(Y=W[R=R[R.length-1]]))!=Y&&H!=null&&t(W,R,{configurable:!0,writable:!0,value:H})}}function a(R){return(R={next:R})[Symbol.iterator]=function(){return this},R}function s(R){var H=typeof Symbol<"u"&&Symbol.iterator&&R[Symbol.iterator];return H?H.call(R):{next:e(R)}}function l(R){if(!(R instanceof Array)){R=s(R);for(var H,W=[];!(H=R.next()).done;)W.push(H.value);R=W}return R}r("Symbol",function(R){function H(se,ae){this.g=se,t(this,"description",{configurable:!0,writable:!0,value:ae})}if(R)return R;H.prototype.toString=function(){return this.g};var W="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Y=0;return function se(ae){if(this instanceof se)throw new TypeError("Symbol is not a constructor");return new H(W+(ae||"")+"_"+Y++,ae)}}),r("Symbol.iterator",function(R){if(R)return R;R=Symbol("Symbol.iterator");for(var H="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),W=0;W<H.length;W++){var Y=i[H[W]];typeof Y=="function"&&typeof Y.prototype[R]!="function"&&t(Y.prototype,R,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return R});var u,f=typeof Object.create=="function"?Object.create:function(R){function H(){}return H.prototype=R,new H};if(typeof Object.setPrototypeOf=="function")u=Object.setPrototypeOf;else{var m;e:{var g={};try{g.__proto__={a:!0},m=g.a;break e}catch{}m=!1}u=m?function(R,H){if(R.__proto__=H,R.__proto__!==H)throw new TypeError(R+" is not extensible");return R}:null}var y=u;function _(R,H){if(R.prototype=f(H.prototype),R.prototype.constructor=R,y)y(R,H);else for(var W in H)if(W!="prototype")if(Object.defineProperties){var Y=Object.getOwnPropertyDescriptor(H,W);Y&&Object.defineProperty(R,W,Y)}else R[W]=H[W];R.na=H.prototype}function x(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function w(R){if(R.l)throw new TypeError("Generator is already running");R.l=!0}function T(R,H){R.j={da:H,ea:!0},R.g=R.o||R.u}function S(R,H,W){return R.g=W,{value:H}}function O(R){this.g=new x,this.h=R}function L(R,H,W,Y){try{var se=H.call(R.g.i,W);if(!(se instanceof Object))throw new TypeError("Iterator result "+se+" is not an object");if(!se.done)return R.g.l=!1,se;var ae=se.value}catch(oe){return R.g.i=null,T(R.g,oe),C(R)}return R.g.i=null,Y.call(R.g,ae),C(R)}function C(R){for(;R.g.g;)try{var H=R.h(R.g);if(H)return R.g.l=!1,{value:H.value,done:!1}}catch(W){R.g.h=void 0,T(R.g,W)}if(R.g.l=!1,R.g.j){if(H=R.g.j,R.g.j=null,H.ea)throw H.da;return{value:H.return,done:!0}}return{value:void 0,done:!0}}function P(R){this.next=function(H){return w(R.g),R.g.i?H=L(R,R.g.i.next,H,R.g.s):(R.g.s(H),H=C(R)),H},this.throw=function(H){return w(R.g),R.g.i?H=L(R,R.g.i.throw,H,R.g.s):(T(R.g,H),H=C(R)),H},this.return=function(H){return function(W,Y){w(W.g);var se=W.g.i;return se?L(W,"return"in se?se.return:function(ae){return{value:ae,done:!0}},Y,W.g.return):(W.g.return(Y),C(W))}(R,H)},this[Symbol.iterator]=function(){return this}}function B(R){return function(H){function W(se){return H.next(se)}function Y(se){return H.throw(se)}return new Promise(function(se,ae){(function oe(ve){ve.done?se(ve.value):Promise.resolve(ve.value).then(W,Y).then(oe,ae)})(H.next())})}(new P(new O(R)))}x.prototype.s=function(R){this.h=R},x.prototype.return=function(R){this.j={return:R},this.g=this.u},r("Promise",function(R){function H(oe){this.h=0,this.i=void 0,this.g=[],this.s=!1;var ve=this.j();try{oe(ve.resolve,ve.reject)}catch(ze){ve.reject(ze)}}function W(){this.g=null}function Y(oe){return oe instanceof H?oe:new H(function(ve){ve(oe)})}if(R)return R;W.prototype.h=function(oe){if(this.g==null){this.g=[];var ve=this;this.i(function(){ve.l()})}this.g.push(oe)};var se=i.setTimeout;W.prototype.i=function(oe){se(oe,0)},W.prototype.l=function(){for(;this.g&&this.g.length;){var oe=this.g;this.g=[];for(var ve=0;ve<oe.length;++ve){var ze=oe[ve];oe[ve]=null;try{ze()}catch(tt){this.j(tt)}}}this.g=null},W.prototype.j=function(oe){this.i(function(){throw oe})},H.prototype.j=function(){function oe(tt){return function(dt){ze||(ze=!0,tt.call(ve,dt))}}var ve=this,ze=!1;return{resolve:oe(this.D),reject:oe(this.l)}},H.prototype.D=function(oe){if(oe===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(oe instanceof H)this.H(oe);else{e:switch(typeof oe){case"object":var ve=oe!=null;break e;case"function":ve=!0;break e;default:ve=!1}ve?this.A(oe):this.o(oe)}},H.prototype.A=function(oe){var ve=void 0;try{ve=oe.then}catch(ze){return void this.l(ze)}typeof ve=="function"?this.I(ve,oe):this.o(oe)},H.prototype.l=function(oe){this.u(2,oe)},H.prototype.o=function(oe){this.u(1,oe)},H.prototype.u=function(oe,ve){if(this.h!=0)throw Error("Cannot settle("+oe+", "+ve+"): Promise already settled in state"+this.h);this.h=oe,this.i=ve,this.h===2&&this.G(),this.B()},H.prototype.G=function(){var oe=this;se(function(){if(oe.C()){var ve=i.console;ve!==void 0&&ve.error(oe.i)}},1)},H.prototype.C=function(){if(this.s)return!1;var oe=i.CustomEvent,ve=i.Event,ze=i.dispatchEvent;return ze===void 0||(typeof oe=="function"?oe=new oe("unhandledrejection",{cancelable:!0}):typeof ve=="function"?oe=new ve("unhandledrejection",{cancelable:!0}):(oe=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,oe),oe.promise=this,oe.reason=this.i,ze(oe))},H.prototype.B=function(){if(this.g!=null){for(var oe=0;oe<this.g.length;++oe)ae.h(this.g[oe]);this.g=null}};var ae=new W;return H.prototype.H=function(oe){var ve=this.j();oe.M(ve.resolve,ve.reject)},H.prototype.I=function(oe,ve){var ze=this.j();try{oe.call(ve,ze.resolve,ze.reject)}catch(tt){ze.reject(tt)}},H.prototype.then=function(oe,ve){function ze(Nt,kt){return typeof Nt=="function"?function(mn){try{tt(Nt(mn))}catch(Bn){dt(Bn)}}:kt}var tt,dt,Et=new H(function(Nt,kt){tt=Nt,dt=kt});return this.M(ze(oe,tt),ze(ve,dt)),Et},H.prototype.catch=function(oe){return this.then(void 0,oe)},H.prototype.M=function(oe,ve){function ze(){switch(tt.h){case 1:oe(tt.i);break;case 2:ve(tt.i);break;default:throw Error("Unexpected state: "+tt.h)}}var tt=this;this.g==null?ae.h(ze):this.g.push(ze),this.s=!0},H.resolve=Y,H.reject=function(oe){return new H(function(ve,ze){ze(oe)})},H.race=function(oe){return new H(function(ve,ze){for(var tt=s(oe),dt=tt.next();!dt.done;dt=tt.next())Y(dt.value).M(ve,ze)})},H.all=function(oe){var ve=s(oe),ze=ve.next();return ze.done?Y([]):new H(function(tt,dt){function Et(mn){return function(Bn){Nt[mn]=Bn,--kt==0&&tt(Nt)}}var Nt=[],kt=0;do Nt.push(void 0),kt++,Y(ze.value).M(Et(Nt.length-1),dt),ze=ve.next();while(!ze.done)})},H});var j=typeof Object.assign=="function"?Object.assign:function(R,H){for(var W=1;W<arguments.length;W++){var Y=arguments[W];if(Y)for(var se in Y)Object.prototype.hasOwnProperty.call(Y,se)&&(R[se]=Y[se])}return R};r("Object.assign",function(R){return R||j}),r("Object.is",function(R){return R||function(H,W){return H===W?H!==0||1/H==1/W:H!=H&&W!=W}}),r("Array.prototype.includes",function(R){return R||function(H,W){var Y=this;Y instanceof String&&(Y=String(Y));var se=Y.length;for(0>(W=W||0)&&(W=Math.max(W+se,0));W<se;W++){var ae=Y[W];if(ae===H||Object.is(ae,H))return!0}return!1}}),r("String.prototype.includes",function(R){return R||function(H,W){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(H instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(H,W||0)!==-1}}),r("Array.prototype.keys",function(R){return R||function(){return function(H,W){H instanceof String&&(H+="");var Y=0,se=!1,ae={next:function(){if(!se&&Y<H.length){var oe=Y++;return{value:W(oe,H[oe]),done:!1}}return se=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}(this,function(H){return H})}});var X=this||self;function k(R,H){R=R.split(".");var W,Y=X;for((R[0]in Y)||Y.execScript===void 0||Y.execScript("var "+R[0]);R.length&&(W=R.shift());)R.length||H===void 0?Y=Y[W]&&Y[W]!==Object.prototype[W]?Y[W]:Y[W]={}:Y[W]=H}function U(){throw Error("Invalid UTF8")}function K(R,H){return H=String.fromCharCode.apply(null,H),R==null?H:R+H}var ye,ue,we=typeof TextDecoder<"u",Ae=typeof TextEncoder<"u",Z={},le=null;function de(R){var H;H===void 0&&(H=0),ee(),H=Z[H];for(var W=Array(Math.floor(R.length/3)),Y=H[64]||"",se=0,ae=0;se<R.length-2;se+=3){var oe=R[se],ve=R[se+1],ze=R[se+2],tt=H[oe>>2];oe=H[(3&oe)<<4|ve>>4],ve=H[(15&ve)<<2|ze>>6],ze=H[63&ze],W[ae++]=tt+oe+ve+ze}switch(tt=0,ze=Y,R.length-se){case 2:ze=H[(15&(tt=R[se+1]))<<2]||Y;case 1:R=R[se],W[ae]=H[R>>2]+H[(3&R)<<4|tt>>4]+ze+Y}return W.join("")}function Le(R){var H=R.length,W=3*H/4;W%3?W=Math.floor(W):"=.".indexOf(R[H-1])!=-1&&(W="=.".indexOf(R[H-2])!=-1?W-2:W-1);var Y=new Uint8Array(W),se=0;return function(ae,oe){function ve(kt){for(;ze<ae.length;){var mn=ae.charAt(ze++),Bn=le[mn];if(Bn!=null)return Bn;if(!/^[\s\xa0]*$/.test(mn))throw Error("Unknown base64 encoding at char: "+mn)}return kt}ee();for(var ze=0;;){var tt=ve(-1),dt=ve(0),Et=ve(64),Nt=ve(64);if(Nt===64&&tt===-1)break;oe(tt<<2|dt>>4),Et!=64&&(oe(dt<<4&240|Et>>2),Nt!=64&&oe(Et<<6&192|Nt))}}(R,function(ae){Y[se++]=ae}),se!==W?Y.subarray(0,se):Y}function ee(){if(!le){le={};for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),H=["+/=","+/","-_=","-_.","-_"],W=0;5>W;W++){var Y=R.concat(H[W].split(""));Z[W]=Y;for(var se=0;se<Y.length;se++){var ae=Y[se];le[ae]===void 0&&(le[ae]=se)}}}}var be,Ge=typeof Uint8Array=="function";function Ye(R){return Ge&&R!=null&&R instanceof Uint8Array}function xe(R){if(this.L=R,R!==null&&R.length===0)throw Error("ByteString should be constructed with non-empty values")}var Ke=typeof Uint8Array.prototype.slice=="function",et=0;function xt(R,H){return Error("Invalid wire type: "+R+" (at position "+H+")")}function bt(){return Error("Failed to read varint, encoding is invalid.")}function Kt(R,H){H=(H=H===void 0?{}:H).v!==void 0&&H.v,this.h=null,this.g=this.i=this.j=0,this.v=H,R&&Wt(this,R)}function Wt(R,H){R.h=function(W,Y){if(W.constructor===Uint8Array)return W;if(W.constructor===ArrayBuffer)return new Uint8Array(W);if(W.constructor===Array)return new Uint8Array(W);if(W.constructor===String)return Le(W);if(W.constructor===xe)return!Y&&(Y=W.L)&&Y.constructor===Uint8Array?Y:(Y=(Y=W.L)==null||Ye(Y)?Y:typeof Y=="string"?Le(Y):null,(W=W.L=Y)?new Uint8Array(W):be||(be=new Uint8Array(0)));if(W instanceof Uint8Array)return new Uint8Array(W.buffer,W.byteOffset,W.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(H,R.v),R.j=0,R.i=R.h.length,R.g=R.j}function tn(R){if(R.g>R.i)throw Error("Tried to read past the end of the data "+R.g+" > "+R.i)}function un(R){var H=R.h,W=H[R.g],Y=127&W;if(128>W)return R.g+=1,tn(R),Y;if(Y|=(127&(W=H[R.g+1]))<<7,128>W)return R.g+=2,tn(R),Y;if(Y|=(127&(W=H[R.g+2]))<<14,128>W)return R.g+=3,tn(R),Y;if(Y|=(127&(W=H[R.g+3]))<<21,128>W)return R.g+=4,tn(R),Y;if(W=H[R.g+4],R.g+=5,Y|=(15&W)<<28,128>W)return tn(R),Y;if(128<=H[R.g++]&&128<=H[R.g++]&&128<=H[R.g++]&&128<=H[R.g++]&&128<=H[R.g++])throw bt();return tn(R),Y}Kt.prototype.reset=function(){this.g=this.j};var Jt=[];function ie(){this.g=[]}function _t(R,H){for(;127<H;)R.g.push(127&H|128),H>>>=7;R.g.push(H)}function ut(R){var H={},W=H.W!==void 0&&H.W;this.l={v:H.v!==void 0&&H.v},this.W=W,H=this.l,Jt.length?(W=Jt.pop(),H&&(W.v=H.v),R&&Wt(W,R),R=W):R=new Kt(R,H),this.g=R,this.j=this.g.g,this.h=this.i=-1}function pt(R){var H=R.g;if(H.g==H.i)return!1;R.j=R.g.g;var W=un(R.g)>>>0;if(H=W>>>3,!(0<=(W&=7)&&5>=W))throw xt(W,R.j);if(1>H)throw Error("Invalid field number: "+H+" (at position "+R.j+")");return R.i=H,R.h=W,!0}function Ze(R){switch(R.h){case 0:if(R.h!=0)Ze(R);else e:{for(var H=(R=R.g).g,W=H+10;H<W;)if((128&R.h[H++])==0){R.g=H,tn(R);break e}throw bt()}break;case 1:(R=R.g).g+=8,tn(R);break;case 2:R.h!=2?Ze(R):(H=un(R.g)>>>0,(R=R.g).g+=H,tn(R));break;case 5:(R=R.g).g+=4,tn(R);break;case 3:for(H=R.i;;){if(!pt(R))throw Error("Unmatched start-group tag: stream EOF");if(R.h==4){if(R.i!=H)throw Error("Unmatched end-group tag");break}Ze(R)}break;default:throw xt(R.h,R.j)}}ie.prototype.length=function(){return this.g.length},ie.prototype.end=function(){var R=this.g;return this.g=[],R},ut.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var Ot=[];function ft(){this.i=[],this.h=0,this.g=new ie}function St(R,H){H.length!==0&&(R.i.push(H),R.h+=H.length)}var on=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function re(R,H){Object.isFrozen(R)||(on?R[on]|=H:R.N!==void 0?R.N|=H:Object.defineProperties(R,{N:{value:H,configurable:!0,writable:!0,enumerable:!1}}))}function q(R){var H;return(H=on?R[on]:R.N)==null?0:H}function Ce(R){return re(R,1),R}function We(R){return!!Array.isArray(R)&&!!(2&q(R))}function Qe(R){if(!Array.isArray(R))throw Error("cannot mark non-array as immutable");re(R,2)}function He(R){return R!==null&&typeof R=="object"&&!Array.isArray(R)&&R.constructor===Object}var Ut=Object.freeze(Ce([]));function wt(R){if(We(R.m))throw Error("Cannot mutate an immutable Message")}var Gt,$t=typeof Symbol<"u"&&Symbol.hasInstance!==void 0;function rt(R){return{value:R,configurable:!1,writable:!1,enumerable:!1}}function Tt(R,H,W){return H===-1?null:H>=R.i?R.g?R.g[H]:void 0:W!==void 0&&W&&R.g&&(W=R.g[H])!=null?W:R.m[H+R.h]}function Ct(R,H,W,Y){Y=Y!==void 0&&Y,wt(R),H<R.i&&!Y?R.m[H+R.h]=W:(R.g||(R.g=R.m[R.i+R.h]={}))[H]=W}function pe(R,H,W,Y){W=W===void 0||W;var se=Tt(R,H,Y=Y!==void 0&&Y);return se==null&&(se=Ut),We(R.m)?W&&(Qe(se),Object.freeze(se)):(se===Ut||We(se))&&Ct(R,H,se=Ce(se.slice()),Y),se}function Re(R,H,W){return(R=(R=Tt(R,H))==null?R:+R)==null?W===void 0?0:W:R}function yt(R,H,W,Y){R.j||(R.j={});var se=We(R.m),ae=R.j[W];if(!ae){Y=pe(R,W,!0,Y!==void 0&&Y),ae=[],se=se||We(Y);for(var oe=0;oe<Y.length;oe++)ae[oe]=new H(Y[oe]),se&&Qe(ae[oe].m);se&&(Qe(ae),Object.freeze(ae)),R.j[W]=ae}return ae}function he(R,H,W,Y,se){var ae=ae!==void 0&&ae;return wt(R),ae=yt(R,W,H,ae),W=Y||new W,R=pe(R,H),se!=null?(ae.splice(se,0,W),R.splice(se,0,W.m)):(ae.push(W),R.push(W.m)),W}function vt(R,H){return(R=Tt(R,H))==null?0:R}function at(R,H){return(R=Tt(R,H))==null?"":R}function At(R){var H=Ft;return Be(R,H=H===void 0?Qt:H)}function ct(R,H){if(R!=null){if(Array.isArray(R))R=Be(R,H);else if(He(R)){var W,Y={};for(W in R)Y[W]=ct(R[W],H);R=Y}else R=H(R);return R}}function Be(R,H){for(var W=R.slice(),Y=0;Y<W.length;Y++)W[Y]=ct(W[Y],H);return Array.isArray(R)&&1&q(R)&&Ce(W),W}function Ft(R){return R&&typeof R=="object"&&R.toJSON?R.toJSON():(R=function(H){switch(typeof H){case"number":return isFinite(H)?H:String(H);case"object":if(H&&!Array.isArray(H)){if(Ye(H))return de(H);if(H instanceof xe){var W=H.L;return W=W==null||typeof W=="string"?W:Ge&&W instanceof Uint8Array?de(W):null,(H.L=W)||""}}}return H}(R),Array.isArray(R)?At(R):R)}function Qt(R){return Ye(R)?new Uint8Array(R):R}function _n(R,H,W){R||(R=Gt),Gt=null;var Y=this.constructor.h;if(R||(R=Y?[Y]:[]),this.h=(Y?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=R,R=(Y=this.m.length)-1,Y&&He(Y=this.m[R])?(this.i=R-this.h,this.g=Y):H!==void 0&&-1<H?(this.i=Math.max(H,R+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,W)for(H=0;H<W.length;H++)if((R=W[H])<this.i)R+=this.h,(Y=this.m[R])?Array.isArray(Y)&&Ce(Y):this.m[R]=Ut;else{var se=(Y=this.g||(this.g=this.m[this.i+this.h]={}))[R];se?Array.isArray(se)&&Ce(se):Y[R]=Ut}}function bn(){_n.apply(this,arguments)}if(_n.prototype.toJSON=function(){return At(this.m)},_n.prototype.toString=function(){return this.m.toString()},_(bn,_n),$t){var mi={};Object.defineProperties(bn,(mi[Symbol.hasInstance]=rt(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),mi))}function gi(R,H,W){if(W){var Y,se={};for(Y in W){var ae=W[Y],oe=ae.ha;oe||(se.F=ae.la||ae.fa.P,ae.aa?(se.U=sr(ae.aa),oe=function(ve){return function(ze,tt,dt){return ve.F(ze,tt,dt,ve.U)}}(se)):ae.ca?(se.T=wr(ae.X.g,ae.ca),oe=function(ve){return function(ze,tt,dt){return ve.F(ze,tt,dt,ve.T)}}(se)):oe=se.F,ae.ha=oe),oe(H,R,ae.X),se={F:se.F,U:se.U,T:se.T}}}(function(ve,ze){if(ze=ze.ba){St(ve,ve.g.end());for(var tt=0;tt<ze.length;tt++)St(ve,ze[tt])}})(H,R)}var ei=Symbol();function Ti(R,H,W){return R[ei]||(R[ei]=function(Y,se){return H(Y,se,W)})}function hr(R){var H=R[ei];if(!H){var W=ke(R);H=function(Y,se){return je(Y,se,W)},R[ei]=H}return H}function Fr(R){var H=function(se){var ae=se.aa;return ae?hr(ae):(ae=se.ka)?Ti(se.X.g,ae,se.ca):void 0}(R),W=R.X,Y=R.fa.O;return H?function(se,ae){return Y(se,ae,W,H)}:function(se,ae){return Y(se,ae,W)}}function Ki(R,H,W,Y,se,ae){var oe=0;for((R=R()).length&&typeof R[0]!="number"&&(W(H,R[0]),oe++);oe<R.length;){W=R[oe++];for(var ve=oe+1;ve<R.length&&typeof R[ve]!="number";)ve++;var ze=R[oe++];switch(ve-=oe){case 0:Y(H,W,ze);break;case 1:Y(H,W,ze,R[oe++]);break;case 2:se(H,W,ze,R[oe++],R[oe++]);break;case 3:ve=R[oe++];var tt=R[oe++],dt=R[oe++];Array.isArray(dt)?se(H,W,ze,ve,tt,dt):ae(H,W,ze,ve,tt,dt);break;case 4:ae(H,W,ze,R[oe++],R[oe++],R[oe++],R[oe++]);break;default:throw Error("unexpected number of binary field arguments: "+ve)}}return H}var ar=Symbol();function sr(R){var H=R[ar];if(!H){var W=Gi(R);H=function(Y,se){return gt(Y,se,W)},R[ar]=H}return H}function wr(R,H){var W=R[ar];return W||(W=function(Y,se){return gi(Y,se,H)},R[ar]=W),W}var ui=Symbol();function yr(R,H){R.push(H)}function Ta(R,H,W){R.push(H,W.P)}function Ua(R,H,W,Y,se){var ae=sr(se),oe=W.P;R.push(H,function(ve,ze,tt){return oe(ve,ze,tt,Y,ae)})}function oa(R,H,W,Y,se,ae){var oe=wr(Y,ae),ve=W.P;R.push(H,function(ze,tt,dt){return ve(ze,tt,dt,Y,oe)})}function Gi(R){var H=R[ui];return H||Ki(R,R[ui]=[],yr,Ta,Ua,oa)}var Pa=Symbol();function Ar(R,H){R[0]=H}function la(R,H,W,Y){var se=W.O;R[H]=Y?function(ae,oe,ve){return se(ae,oe,ve,Y)}:se}function Q(R,H,W,Y,se,ae){var oe=W.O,ve=hr(se);R[H]=function(ze,tt,dt){return oe(ze,tt,dt,Y,ve,ae)}}function Te(R,H,W,Y,se,ae,oe){var ve=W.O,ze=Ti(Y,se,ae);R[H]=function(tt,dt,Et){return ve(tt,dt,Et,Y,ze,oe)}}function ke(R){var H=R[Pa];return H||Ki(R,R[Pa]={},Ar,la,Q,Te)}function je(R,H,W){for(;pt(H)&&H.h!=4;){var Y=H.i,se=W[Y];if(!se){var ae=W[0];ae&&(ae=ae[Y])&&(se=W[Y]=Fr(ae))}if(!(se&&se(H,R,Y)||(se=H,Y=R,ae=se.j,Ze(se),se.W))){var oe=se.g.h;se=ae===(se=se.g.g)?be||(be=new Uint8Array(0)):Ke?oe.slice(ae,se):new Uint8Array(oe.subarray(ae,se)),(ae=Y.ba)?ae.push(se):Y.ba=[se]}}return R}function Ne(R,H,W){if(Ot.length){var Y=Ot.pop();R&&(Wt(Y.g,R),Y.i=-1,Y.h=-1),R=Y}else R=new ut(R);try{return je(new H,R,ke(W))}finally{(H=R.g).h=null,H.j=0,H.i=0,H.g=0,H.v=!1,R.i=-1,R.h=-1,100>Ot.length&&Ot.push(R)}}function gt(R,H,W){for(var Y=W.length,se=Y%2==1,ae=se?1:0;ae<Y;ae+=2)(0,W[ae+1])(H,R,W[ae]);gi(R,H,se?W[0]:void 0)}function Lt(R,H){var W=new ft;gt(R,W,Gi(H)),St(W,W.g.end()),R=new Uint8Array(W.h);for(var Y=(H=W.i).length,se=0,ae=0;ae<Y;ae++){var oe=H[ae];R.set(oe,se),se+=oe.length}return W.i=[R],R}function Ht(R,H){return{O:R,P:H}}var Bt=Ht(function(R,H,W){if(R.h!==5)return!1;var Y=(R=R.g).h[R.g],se=R.h[R.g+1],ae=R.h[R.g+2],oe=R.h[R.g+3];return R.g+=4,tn(R),R=2*((se=(Y<<0|se<<8|ae<<16|oe<<24)>>>0)>>31)+1,Y=se>>>23&255,se&=8388607,Ct(H,W,Y==255?se?NaN:1/0*R:Y==0?R*Math.pow(2,-149)*se:R*Math.pow(2,Y-150)*(se+Math.pow(2,23))),!0},function(R,H,W){if((H=Tt(H,W))!=null){_t(R.g,8*W+5),R=R.g;var Y=H;(Y=(W=0>Y?1:0)?-Y:Y)===0?0<1/Y?et=0:et=2147483648:isNaN(Y)?et=2147483647:34028234663852886e22<Y?et=(W<<31|2139095040)>>>0:11754943508222875e-54>Y?(Y=Math.round(Y/Math.pow(2,-149)),et=(W<<31|Y)>>>0):(H=Math.floor(Math.log(Y)/Math.LN2),Y*=Math.pow(2,-H),16777216<=(Y=Math.round(8388608*Y))&&++H,et=(W<<31|H+127<<23|8388607&Y)>>>0),W=et,R.g.push(W>>>0&255),R.g.push(W>>>8&255),R.g.push(W>>>16&255),R.g.push(W>>>24&255)}}),hn=Ht(function(R,H,W){if(R.h!==0)return!1;for(var Y=R.g,se=128,ae=0,oe=R=0;4>oe&&128<=se;oe++)se=Y.h[Y.g++],tn(Y),ae|=(127&se)<<7*oe;if(128<=se&&(se=Y.h[Y.g++],tn(Y),ae|=(127&se)<<28,R|=(127&se)>>4),128<=se)for(oe=0;5>oe&&128<=se;oe++)se=Y.h[Y.g++],tn(Y),R|=(127&se)<<7*oe+3;if(!(128>se))throw bt();return Y=ae>>>0,(R=2147483648&(se=R>>>0))&&(se=~se>>>0,(Y=1+~Y>>>0)==0&&(se=se+1>>>0)),Y=4294967296*se+(Y>>>0),Ct(H,W,R?-Y:Y),!0},function(R,H,W){if((H=Tt(H,W))!=null&&H!=null){_t(R.g,8*W),R=R.g;var Y=H;for(W=0>Y,H=(Y=Math.abs(Y))>>>0,Y=Math.floor((Y-H)/4294967296),Y>>>=0,W&&(Y=~Y>>>0,4294967295<(H=1+(~H>>>0))&&(H=0,4294967295<++Y&&(Y=0))),W=et=H,H=Y;0<H||127<W;)R.g.push(127&W|128),W=(W>>>7|H<<25)>>>0,H>>>=7;R.g.push(W)}}),ln=Ht(function(R,H,W){return R.h===0&&(Ct(H,W,un(R.g)),!0)},function(R,H,W){if((H=Tt(H,W))!=null&&H!=null)if(_t(R.g,8*W),R=R.g,0<=(W=H))_t(R,W);else{for(H=0;9>H;H++)R.g.push(127&W|128),W>>=7;R.g.push(1)}}),en=Ht(function(R,H,W){if(R.h!==2)return!1;var Y,se=un(R.g)>>>0,ae=(R=R.g).g;if(R.g+=se,tn(R),R=R.h,we)(Y=ye)||(Y=ye=new TextDecoder("utf-8",{fatal:!0})),Y=Y.decode(R.subarray(ae,ae+se));else{se=ae+se;for(var oe,ve,ze,tt=[],dt=null;ae<se;)128>(oe=R[ae++])?tt.push(oe):224>oe?ae>=se?U():(ve=R[ae++],194>oe||(192&ve)!=128?(ae--,U()):tt.push((31&oe)<<6|63&ve)):240>oe?ae>=se-1?U():(192&(ve=R[ae++]))!=128||oe===224&&160>ve||oe===237&&160<=ve||(192&(Y=R[ae++]))!=128?(ae--,U()):tt.push((15&oe)<<12|(63&ve)<<6|63&Y):244>=oe?ae>=se-2?U():(192&(ve=R[ae++]))!=128||ve-144+(oe<<28)>>30!=0||(192&(Y=R[ae++]))!=128||(192&(ze=R[ae++]))!=128?(ae--,U()):(oe=(7&oe)<<18|(63&ve)<<12|(63&Y)<<6|63&ze,oe-=65536,tt.push(55296+(oe>>10&1023),56320+(1023&oe))):U(),8192<=tt.length&&(dt=K(dt,tt),tt.length=0);Y=K(dt,tt)}return Ct(H,W,Y),!0},function(R,H,W){if((H=Tt(H,W))!=null){var Y=!1;if(Y=Y!==void 0&&Y,Ae){if(Y&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(H))throw Error("Found an unpaired surrogate");H=(ue||(ue=new TextEncoder)).encode(H)}else{for(var se=0,ae=new Uint8Array(3*H.length),oe=0;oe<H.length;oe++){var ve=H.charCodeAt(oe);if(128>ve)ae[se++]=ve;else{if(2048>ve)ae[se++]=ve>>6|192;else{if(55296<=ve&&57343>=ve){if(56319>=ve&&oe<H.length){var ze=H.charCodeAt(++oe);if(56320<=ze&&57343>=ze){ve=1024*(ve-55296)+ze-56320+65536,ae[se++]=ve>>18|240,ae[se++]=ve>>12&63|128,ae[se++]=ve>>6&63|128,ae[se++]=63&ve|128;continue}oe--}if(Y)throw Error("Found an unpaired surrogate");ve=65533}ae[se++]=ve>>12|224,ae[se++]=ve>>6&63|128}ae[se++]=63&ve|128}}H=ae.subarray(0,se)}_t(R.g,8*W+2),_t(R.g,H.length),St(R,R.g.end()),St(R,H)}}),Cn=Ht(function(R,H,W,Y,se){if(R.h!==2)return!1;H=he(H,W,Y),W=R.g.i,Y=un(R.g)>>>0;var ae=R.g.g+Y,oe=ae-W;if(0>=oe&&(R.g.i=ae,se(H,R),oe=ae-R.g.g),oe)throw Error("Message parsing ended unexpectedly. Expected to read "+Y+" bytes, instead read "+(Y-oe)+" bytes, either the data ended unexpectedly or the message misreported its own length");return R.g.g=ae,R.g.i=W,!0},function(R,H,W,Y,se){if((H=yt(H,Y,W))!=null)for(Y=0;Y<H.length;Y++){var ae=R;_t(ae.g,8*W+2);var oe=ae.g.end();St(ae,oe),oe.push(ae.h),ae=oe,se(H[Y],R),oe=R;var ve=ae.pop();for(ve=oe.h+oe.g.length()-ve;127<ve;)ae.push(127&ve|128),ve>>>=7,oe.h++;ae.push(ve),oe.h++}});function Ln(){bn.apply(this,arguments)}if(_(Ln,bn),$t){var Ci={};Object.defineProperties(Ln,(Ci[Symbol.hasInstance]=rt(Object[Symbol.hasInstance]),Ci))}function Tn(R){Ln.call(this,R)}function ri(){return[1,ln,2,Bt,3,en,4,en]}function an(R){Ln.call(this,R,-1,Wn)}function yi(){return[1,Cn,Tn,ri]}_(Tn,Ln),_(an,Ln),an.prototype.addClassification=function(R,H){return he(this,1,Tn,R,H),this};var Wn=[1];function ki(R){Ln.call(this,R)}function Ba(){return[1,Bt,2,Bt,3,Bt,4,Bt,5,Bt]}function Ei(R){Ln.call(this,R,-1,Mi)}function Ka(){return[1,Cn,ki,Ba]}_(ki,Ln),_(Ei,Ln);var Mi=[1];function dr(R){Ln.call(this,R)}function Zi(){return[1,Bt,2,Bt,3,Bt,4,Bt,5,Bt,6,hn]}_(dr,Ln);var or=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],lr=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Rr=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Ea=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],ao=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Co=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],ol=[].concat(l(or),l(lr),l(Rr),l(Ea),l(ao),l(Co));function D(R,H,W){if(W=R.createShader(W===0?R.VERTEX_SHADER:R.FRAGMENT_SHADER),R.shaderSource(W,H),R.compileShader(W),!R.getShaderParameter(W,R.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+R.getShaderInfoLog(W));return W}function F(R){return yt(R,Tn,1).map(function(H){return{index:vt(H,1),ga:Re(H,2),label:Tt(H,3)!=null?at(H,3):void 0,displayName:Tt(H,4)!=null?at(H,4):void 0}})}function V(R){return{x:Re(R,1),y:Re(R,2),z:Re(R,3),visibility:Tt(R,4)!=null?Re(R,4):void 0}}function fe(R,H){this.h=R,this.g=H,this.l=0}function De(R,H,W){return function(Y,se){var ae=Y.g;if(Y.o===void 0){var oe=D(ae,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),ve=D(ae,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),ze=ae.createProgram();if(ae.attachShader(ze,oe),ae.attachShader(ze,ve),ae.linkProgram(ze),!ae.getProgramParameter(ze,ae.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+ae.getProgramInfoLog(ze));oe=Y.o=ze,ae.useProgram(oe),ve=ae.getUniformLocation(oe,"sampler0"),Y.j={K:ae.getAttribLocation(oe,"aVertex"),J:ae.getAttribLocation(oe,"aTex"),ma:ve},Y.u=ae.createBuffer(),ae.bindBuffer(ae.ARRAY_BUFFER,Y.u),ae.enableVertexAttribArray(Y.j.K),ae.vertexAttribPointer(Y.j.K,2,ae.FLOAT,!1,0,0),ae.bufferData(ae.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),ae.STATIC_DRAW),ae.bindBuffer(ae.ARRAY_BUFFER,null),Y.s=ae.createBuffer(),ae.bindBuffer(ae.ARRAY_BUFFER,Y.s),ae.enableVertexAttribArray(Y.j.J),ae.vertexAttribPointer(Y.j.J,2,ae.FLOAT,!1,0,0),ae.bufferData(ae.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),ae.STATIC_DRAW),ae.bindBuffer(ae.ARRAY_BUFFER,null),ae.uniform1i(ve,0)}oe=Y.j,ae.useProgram(Y.o),ae.canvas.width=se.width,ae.canvas.height=se.height,ae.viewport(0,0,se.width,se.height),ae.activeTexture(ae.TEXTURE0),Y.h.bindTexture2d(se.glName),ae.enableVertexAttribArray(oe.K),ae.bindBuffer(ae.ARRAY_BUFFER,Y.u),ae.vertexAttribPointer(oe.K,2,ae.FLOAT,!1,0,0),ae.enableVertexAttribArray(oe.J),ae.bindBuffer(ae.ARRAY_BUFFER,Y.s),ae.vertexAttribPointer(oe.J,2,ae.FLOAT,!1,0,0),ae.bindFramebuffer(ae.DRAW_FRAMEBUFFER?ae.DRAW_FRAMEBUFFER:ae.FRAMEBUFFER,null),ae.clearColor(0,0,0,0),ae.clear(ae.COLOR_BUFFER_BIT),ae.colorMask(!0,!0,!0,!0),ae.drawArrays(ae.TRIANGLE_FAN,0,4),ae.disableVertexAttribArray(oe.K),ae.disableVertexAttribArray(oe.J),ae.bindBuffer(ae.ARRAY_BUFFER,null),Y.h.bindTexture2d(0)}(R,H),typeof R.g.canvas.transferToImageBitmap=="function"?Promise.resolve(R.g.canvas.transferToImageBitmap()):W?Promise.resolve(R.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(R.g.canvas):(R.i===void 0&&(R.i=document.createElement("canvas")),new Promise(function(Y){R.i.height=R.g.canvas.height,R.i.width=R.g.canvas.width,R.i.getContext("2d",{}).drawImage(R.g.canvas,0,0,R.g.canvas.width,R.g.canvas.height),Y(R.i)}))}function Je(R){this.g=R}var Ue=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function nt(R,H){return H+R}function Mt(R,H){window[R]=H}function Xt(R){if(this.g=R,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=R&&R.locateFile||nt,typeof window=="object")var H=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if(typeof location>"u")throw Error("solutions can only be loaded on a web page or in a web worker");H=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=H,R.options)for(var W=(H=s(Object.keys(R.options))).next();!W.done;W=H.next()){W=W.value;var Y=R.options[W].default;Y!==void 0&&(this.j[W]=typeof Y=="function"?Y():Y)}}function dn(R){var H,W,Y,se,ae,oe,ve,ze,tt,dt,Et;return B(function(Nt){switch(Nt.g){case 1:return R.Z?(H=R.g.files===void 0?[]:typeof R.g.files=="function"?R.g.files(R.j):R.g.files,S(Nt,B(function(kt){switch(kt.g){case 1:return kt.o=2,S(kt,WebAssembly.instantiate(Ue),4);case 4:kt.g=3,kt.o=0;break;case 2:return kt.o=0,kt.j=null,kt.return(!1);case 3:return kt.return(!0)}}),2)):Nt.return();case 2:if(W=Nt.h,typeof window=="object")return Mt("createMediapipeSolutionsWasm",{locateFile:R.locateFile}),Mt("createMediapipeSolutionsPackedAssets",{locateFile:R.locateFile}),oe=H.filter(function(kt){return kt.data!==void 0}),ve=H.filter(function(kt){return kt.data===void 0}),ze=Promise.all(oe.map(function(kt){var mn=In(R,kt.url);if(kt.path!==void 0){var Bn=kt.path;mn=mn.then(function(Oi){return R.overrideFile(Bn,Oi),Promise.resolve(Oi)})}return mn})),tt=Promise.all(ve.map(function(kt){return kt.simd===void 0||kt.simd&&W||!kt.simd&&!W?function(mn){var Bn=document.createElement("script");return Bn.setAttribute("src",mn),Bn.setAttribute("crossorigin","anonymous"),new Promise(function(Oi){Bn.addEventListener("load",function(){Oi()},!1),Bn.addEventListener("error",function(){Oi()},!1),document.body.appendChild(Bn)})}(R.locateFile(kt.url,R.$)):Promise.resolve()})).then(function(){var kt,mn,Bn;return B(function(Oi){if(Oi.g==1)return kt=window.createMediapipeSolutionsWasm,mn=window.createMediapipeSolutionsPackedAssets,Bn=R,S(Oi,kt(mn),2);Bn.h=Oi.h,Oi.g=0})}),dt=B(function(kt){return R.g.graph&&R.g.graph.url?kt=S(kt,In(R,R.g.graph.url),0):(kt.g=0,kt=void 0),kt}),S(Nt,Promise.all([tt,ze,dt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Y=H.filter(function(kt){return kt.simd===void 0||kt.simd&&W||!kt.simd&&!W}).map(function(kt){return R.locateFile(kt.url,R.$)}),importScripts.apply(null,l(Y)),se=R,S(Nt,createMediapipeSolutionsWasm(Module),6);case 6:se.h=Nt.h,R.l=new OffscreenCanvas(1,1),R.h.canvas=R.l,ae=R.h.GL.createContext(R.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),R.h.GL.makeContextCurrent(ae),Nt.g=4;break;case 7:if(R.l=document.createElement("canvas"),!(Et=R.l.getContext("webgl2",{}))&&!(Et=R.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),Nt.return();R.G=Et,R.h.canvas=R.l,R.h.createContext(R.l,!0,!0,{});case 4:R.i=new R.h.SolutionWasm,R.Z=!1,Nt.g=0}})}function In(R,H){var W,Y;return B(function(se){return H in R.H?se.return(R.H[H]):(W=R.locateFile(H,""),Y=fetch(W).then(function(ae){return ae.arrayBuffer()}),R.H[H]=Y,se.return(Y))})}function Un(R,H,W){var Y,se,ae,oe,ve,ze,tt,dt,Et,Nt,kt,mn,Bn,Oi;return B(function(Hi){switch(Hi.g){case 1:if(!W)return Hi.return(H);for(Y={},se=0,ae=s(Object.keys(W)),oe=ae.next();!oe.done;oe=ae.next())ve=oe.value,typeof(ze=W[ve])!="string"&&ze.type==="texture"&&H[ze.stream]!==void 0&&++se;1<se&&(R.I=!1),tt=s(Object.keys(W)),oe=tt.next();case 2:if(oe.done){Hi.g=4;break}if(dt=oe.value,typeof(Et=W[dt])=="string")return Bn=Y,Oi=dt,S(Hi,function(ds,ku,ll){var Hu;return B(function(jc){return typeof ll=="number"||ll instanceof Uint8Array||ll instanceof ds.h.Uint8BlobList?jc.return(ll):ll instanceof ds.h.Texture2dDataOut?((Hu=ds.u[ku])||(Hu=new fe(ds.h,ds.G),ds.u[ku]=Hu),jc.return(De(Hu,ll,ds.I))):jc.return(void 0)})}(R,dt,H[Et]),14);if(Nt=H[Et.stream],Et.type==="detection_list"){if(Nt){for(var vi=Nt.getRectList(),ua=Nt.getLandmarksList(),ca=Nt.getClassificationsList(),di=[],kr=0;kr<vi.size();++kr){var so=Ne(vi.get(kr),dr,Zi);so={boundingBox:{xCenter:Re(so,1),yCenter:Re(so,2),height:Re(so,3),width:Re(so,4),rotation:Re(so,5,0),rectId:vt(so,6)},landmarks:yt(Ne(ua.get(kr),Ei,Ka),ki,1).map(V),V:F(Ne(ca.get(kr),an,yi))},di.push(so)}vi=di}else vi=[];Y[dt]=vi,Hi.g=7;break}if(Et.type==="proto_list"){if(Nt){for(vi=Array(Nt.size()),ua=0;ua<Nt.size();ua++)vi[ua]=Nt.get(ua);Nt.delete()}else vi=[];Y[dt]=vi,Hi.g=7;break}if(Nt===void 0){Hi.g=3;break}if(Et.type==="float_list"){Y[dt]=Nt,Hi.g=7;break}if(Et.type==="proto"){Y[dt]=Nt,Hi.g=7;break}if(Et.type!=="texture")throw Error("Unknown output config type: '"+Et.type+"'");return(kt=R.u[dt])||(kt=new fe(R.h,R.G),R.u[dt]=kt),S(Hi,De(kt,Nt,R.I),13);case 13:mn=Hi.h,Y[dt]=mn;case 7:Et.transform&&Y[dt]&&(Y[dt]=Et.transform(Y[dt])),Hi.g=3;break;case 14:Bn[Oi]=Hi.h;case 3:oe=tt.next(),Hi.g=2;break;case 4:return Hi.return(Y)}})}function vn(R,H){for(var W=H.name||"$",Y=[].concat(l(H.wants)),se=new R.h.StringList,ae=s(H.wants),oe=ae.next();!oe.done;oe=ae.next())se.push_back(oe.value);ae=R.h.PacketListener.implement({onResults:function(ve){for(var ze={},tt=0;tt<H.wants.length;++tt)ze[Y[tt]]=ve.get(tt);var dt=R.listeners[W];dt&&(R.D=Un(R,ze,H.outs).then(function(Et){Et=dt(Et);for(var Nt=0;Nt<H.wants.length;++Nt){var kt=ze[Y[Nt]];typeof kt=="object"&&kt.hasOwnProperty&&kt.hasOwnProperty("delete")&&kt.delete()}Et&&(R.D=Et)}))}}),R.i.attachMultiListener(se,ae),se.delete()}function Yt(R){var H=this;R=R||{};var W={url:"face_detection_short.binarypb"},Y={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Xt({locateFile:R.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:W,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window=="object"&&window.navigator!==void 0&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(se){var ae,oe,ve,ze,tt;return B(function(dt){switch(dt.g){case 1:ae=s(se==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),oe=ae.next();case 2:if(oe.done){dt.g=4;break}return ve=oe.value,ze="third_party/mediapipe/modules/face_detection/"+ve,S(dt,In(H.g,ve),5);case 5:tt=dt.h,H.g.overrideFile(ze,tt),oe=ae.next(),dt.g=2;break;case 4:return W.url=se==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",Y.graphOptionXref.calculatorName=se==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",dt.return(!0)}})}},minDetectionConfidence:Y}})}(n=Xt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},n.reset=function(){var R=this;return B(function(H){R.i&&(R.i.reset(),R.o={},R.u={}),H.g=0})},n.setOptions=function(R,H){var W=this;if(H=H||this.g.options){for(var Y=[],se=[],ae={},oe=s(Object.keys(R)),ve=oe.next();!ve.done;ae={R:ae.R,S:ae.S},ve=oe.next()){var ze=ve.value;ze in this.j&&this.j[ze]===R[ze]||(this.j[ze]=R[ze],(ve=H[ze])!==void 0&&(ve.onChange&&(ae.R=ve.onChange,ae.S=R[ze],Y.push(function(tt){return function(){return B(function(dt){if(dt.g==1)return S(dt,tt.R(tt.S),2);dt.h===!0&&(W.s=!0),dt.g=0})}}(ae))),ve.graphOptionXref&&(ze={valueNumber:ve.type===1?R[ze]:0,valueBoolean:ve.type===0&&R[ze],valueString:ve.type===2?R[ze]:""},ve=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),ve.graphOptionXref),ze),se.push(ve))))}Y.length===0&&se.length===0||(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(se),this.A=(this.A===void 0?[]:this.A).concat(Y))}},n.initialize=function(){var R=this;return B(function(H){return H.g==1?S(H,dn(R),2):H.g!=3?S(H,function(W){var Y,se,ae,oe,ve,ze,tt,dt;return B(function(Et){if(Et.g==1)return W.g.graph&&W.g.graph.url&&W.Y===W.g.graph.url?Et.return():(W.s=!0,W.g.graph&&W.g.graph.url?(W.Y=W.g.graph.url,S(Et,In(W,W.g.graph.url),3)):void(Et.g=2));for(Et.g!=2&&(Y=Et.h,W.i.loadGraph(Y)),se=s(Object.keys(W.C)),ae=se.next();!ae.done;ae=se.next())oe=ae.value,W.i.overrideFile(oe,W.C[oe]);if(W.C={},W.g.listeners)for(ve=s(W.g.listeners),ze=ve.next();!ze.done;ze=ve.next())tt=ze.value,vn(W,tt);dt=W.j,W.j={},W.setOptions(dt),Et.g=0})}(R),3):S(H,function(W){var Y,se,ae,oe,ve,ze;return B(function(tt){switch(tt.g){case 1:if(!W.s)return tt.return();if(!W.A){tt.g=2;break}Y=s(W.A),se=Y.next();case 3:if(se.done){tt.g=5;break}return S(tt,(0,se.value)(),4);case 4:se=Y.next(),tt.g=3;break;case 5:W.A=void 0;case 2:if(W.B){for(ae=new W.h.GraphOptionChangeRequestList,oe=s(W.B),ve=oe.next();!ve.done;ve=oe.next())ze=ve.value,ae.push_back(ze);W.i.changeOptions(ae),ae.delete(),W.B=void 0}W.s=!1,tt.g=0}})}(R),0)})},n.overrideFile=function(R,H){this.i?this.i.overrideFile(R,H):this.C[R]=H},n.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},n.send=function(R,H){var W,Y,se,ae,oe,ve,ze,tt,dt,Et=this;return B(function(Nt){switch(Nt.g){case 1:return Et.g.inputs?(W=1e3*(H??performance.now()),S(Nt,Et.D,2)):Nt.return();case 2:return S(Nt,Et.initialize(),3);case 3:for(Y=new Et.h.PacketDataList,se=s(Object.keys(R)),ae=se.next();!ae.done;ae=se.next())if(oe=ae.value,ve=Et.g.inputs[oe]){e:{var kt=R[oe];switch(ve.type){case"video":var mn=Et.o[ve.stream];if(mn||(mn=new fe(Et.h,Et.G),Et.o[ve.stream]=mn),mn.l===0&&(mn.l=mn.h.createTexture()),typeof HTMLVideoElement<"u"&&kt instanceof HTMLVideoElement)var Bn=kt.videoWidth,Oi=kt.videoHeight;else typeof HTMLImageElement<"u"&&kt instanceof HTMLImageElement?(Bn=kt.naturalWidth,Oi=kt.naturalHeight):(Bn=kt.width,Oi=kt.height);Oi={glName:mn.l,width:Bn,height:Oi},(Bn=mn.g).canvas.width=Oi.width,Bn.canvas.height=Oi.height,Bn.activeTexture(Bn.TEXTURE0),mn.h.bindTexture2d(mn.l),Bn.texImage2D(Bn.TEXTURE_2D,0,Bn.RGBA,Bn.RGBA,Bn.UNSIGNED_BYTE,kt),mn.h.bindTexture2d(0),mn=Oi;break e;case"detections":for((mn=Et.o[ve.stream])||(mn=new Je(Et.h),Et.o[ve.stream]=mn),mn.data||(mn.data=new mn.g.DetectionListData),mn.data.reset(kt.length),Oi=0;Oi<kt.length;++Oi){Bn=kt[Oi];var Hi=mn.data,vi=Hi.setBoundingBox,ua=Oi,ca=Bn.boundingBox,di=new dr;if(Ct(di,1,ca.xCenter),Ct(di,2,ca.yCenter),Ct(di,3,ca.height),Ct(di,4,ca.width),Ct(di,5,ca.rotation),Ct(di,6,ca.rectId),ca=Lt(di,Zi),vi.call(Hi,ua,ca),Bn.landmarks)for(Hi=0;Hi<Bn.landmarks.length;++Hi){var kr=!!(di=Bn.landmarks[Hi]).visibility;ua=(vi=mn.data).addNormalizedLandmark,ca=Oi,di=Object.assign(Object.assign({},di),{visibility:kr?di.visibility:0}),Ct(kr=new ki,1,di.x),Ct(kr,2,di.y),Ct(kr,3,di.z),di.visibility&&Ct(kr,4,di.visibility),di=Lt(kr,Ba),ua.call(vi,ca,di)}if(Bn.V)for(Hi=0;Hi<Bn.V.length;++Hi)ua=(vi=mn.data).addClassification,ca=Oi,di=Bn.V[Hi],Ct(kr=new Tn,2,di.ga),di.index&&Ct(kr,1,di.index),di.label&&Ct(kr,3,di.label),di.displayName&&Ct(kr,4,di.displayName),di=Lt(kr,ri),ua.call(vi,ca,di)}mn=mn.data;break e;default:mn={}}}switch(ze=mn,tt=ve.stream,ve.type){case"video":Y.pushTexture2d(Object.assign(Object.assign({},ze),{stream:tt,timestamp:W}));break;case"detections":(dt=ze).stream=tt,dt.timestamp=W,Y.pushDetectionList(dt);break;default:throw Error("Unknown input config type: '"+ve.type+"'")}}return Et.i.send(Y),S(Nt,Et.D,4);case 4:Y.delete(),Nt.g=0}})},n.onResults=function(R,H){this.listeners[H||"$"]=R},k("Solution",Xt),k("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(n=Yt.prototype).close=function(){return this.g.close(),Promise.resolve()},n.onResults=function(R){this.g.onResults(R)},n.initialize=function(){var R=this;return B(function(H){return S(H,R.g.initialize(),0)})},n.reset=function(){this.g.reset()},n.send=function(R){var H=this;return B(function(W){return S(W,H.g.send(R),0)})},n.setOptions=function(R){this.g.setOptions(R)},k("FaceDetection",Yt),k("FACEDETECTION_LIPS",or),k("FACEDETECTION_LEFT_EYE",lr),k("FACEDETECTION_LEFT_EYEBROW",Rr),k("FACEDETECTION_RIGHT_EYE",Ea),k("FACEDETECTION_RIGHT_EYEBROW",ao),k("FACEDETECTION_FACE_OVAL",Co),k("FACEDETECTION_CONTOURS",ol),k("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),k("VERSION","0.4.1646425229")}).call(hS);var eh=function(){return eh=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},eh.apply(this,arguments)};function Bc(n,e,t,i){return new(t||(t=Promise))(function(r,a){function s(f){try{u(i.next(f))}catch(m){a(m)}}function l(f){try{u(i.throw(f))}catch(m){a(m)}}function u(f){var m;f.done?r(f.value):(m=f.value,m instanceof t?m:new t(function(g){g(m)})).then(s,l)}u((i=i.apply(n,[])).next())})}function zc(n,e){var t,i,r,a,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(f){return function(m){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,i&&(r=2&m[0]?i.return:m[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,m[1])).done)return r;switch(i=0,r&&(m=[2&m[0],r.value]),m[0]){case 0:case 1:r=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,i=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||m[0]!==6&&m[0]!==2)){s=0;continue}if(m[0]===3&&(!r||m[1]>r[0]&&m[1]<r[3])){s.label=m[1];break}if(m[0]===6&&s.label<r[1]){s.label=r[1],r=m;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(m);break}r[2]&&s.ops.pop(),s.trys.pop();continue}m=e.call(n,s)}catch(g){m=[6,g],i=0}finally{t=r=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([u,f])}}}var uD=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],dS={modelType:"short",runtime:"mediapipe",maxFaces:1},Xie=function(){function n(e){var t=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new Wie.FaceDetection({locateFile:function(i,r){if(e.solutionPath){var a=e.solutionPath.replace(/\/+$/,"");return"".concat(a,"/").concat(i)}return"".concat(r,"/").concat(i)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults(function(i){if(t.height=i.image.height,t.width=i.image.width,t.faces=[],i.detections!==null)for(var r=0,a=i.detections;r<a.length;r++){var s=a[r];t.faces.push(t.normalizedToAbsolute(s.landmarks,{xMin:u=(l=s.boundingBox).xCenter-l.width/2,xMax:u+l.width,yMin:f=l.yCenter-l.height/2,yMax:f+l.height,width:l.width,height:l.height}))}var l,u,f})}return n.prototype.normalizedToAbsolute=function(e,t){var i=this;return{keypoints:e.map(function(r,a){return{x:r.x*i.width,y:r.y*i.height,name:uD[a]}}),box:{xMin:t.xMin*this.width,yMin:t.yMin*this.height,xMax:t.xMax*this.width,yMax:t.yMax*this.height,width:t.width*this.width,height:t.height*this.height}}},n.prototype.estimateFaces=function(e,t){return Bc(this,void 0,void 0,function(){var i,r;return zc(this,function(a){switch(a.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Ur?(r=ImageData.bind,[4,nD(e)]):[3,2];case 1:return i=new(r.apply(ImageData,[void 0,a.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:i=e,a.label=3;case 3:return e=i,[4,this.faceDetectorSolution.send({image:e})];case 4:return a.sent(),[2,this.faces]}})})},n.prototype.dispose=function(){this.faceDetectorSolution.close()},n.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},n.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},n}();function qie(n){return Bc(this,void 0,void 0,function(){var e,t;return zc(this,function(i){switch(i.label){case 0:return e=function(r){if(r==null)return eh({},dS);var a=eh({},r);return a.runtime="mediapipe",a.modelType==null&&(a.modelType=dS.modelType),a.maxFaces==null&&(a.maxFaces=dS.maxFaces),a}(n),[4,(t=new Xie(e)).initialize()];case 1:return i.sent(),[2,t]}})})}function cD(n){return n instanceof Ur?{height:n.shape[0],width:n.shape[1]}:{height:n.height,width:n.width}}function fD(n){return n instanceof Ur?n:iD(n)}function pS(n,e){ce(n.width!==0,function(){return"".concat(e," width cannot be 0.")}),ce(n.height!==0,function(){return"".concat(e," height cannot be 0.")})}function $ie(n,e,t){var i=e.outputTensorSize,r=e.keepAspectRatio,a=e.borderMode,s=e.outputTensorFloatRange,l=cD(n),u=function(y,_){return{xCenter:.5*y.width,yCenter:.5*y.height,width:y.width,height:y.height,rotation:0}}(l),f=function(y,_,x){if(x===void 0&&(x=!1),!x)return{top:0,left:0,right:0,bottom:0};var w=_.height,T=_.width;pS(_,"targetSize"),pS(y,"roi");var S,O,L=w/T,C=y.height/y.width,P=0,B=0;return L>C?(S=y.width,O=y.width*L,B=(1-C/L)/2):(S=y.height/L,O=y.height,P=(1-L/C)/2),y.width=S,y.height=O,{top:B,left:P,right:P,bottom:B}}(u,i,r),m=function(y,_,x,w){var T=y.width,S=y.height,O=1,L=Math.cos(y.rotation),C=Math.sin(y.rotation),P=y.xCenter,B=y.yCenter,j=1/_,X=1/x,k=new Array(16);return k[0]=T*L*O*j,k[1]=-S*C*j,k[2]=0,k[3]=(-.5*T*L*O+.5*S*C+P)*j,k[4]=T*C*O*X,k[5]=S*L*X,k[6]=0,k[7]=(-.5*S*L-.5*T*C*O+B)*X,k[8]=0,k[9]=0,k[10]=T*j,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,function(U){if(U.length!==16)throw new Error("Array length must be 16 but got ".concat(U.length));return[[U[0],U[1],U[2],U[3]],[U[4],U[5],U[6],U[7]],[U[8],U[9],U[10],U[11]],[U[12],U[13],U[14],U[15]]]}(k)}(u,l.width,l.height),g=Jn(function(){var y=fD(n),_=qf(function(T,S,O){return pS(O,"inputResolution"),[1/O.width*T[0][0]*S.width,1/O.height*T[0][1]*S.width,T[0][3]*S.width,1/O.width*T[1][0]*S.height,1/O.height*T[1][1]*S.height,T[1][3]*S.height,0,0]}(m,l,i),[1,8]),x=a==="zero"?"constant":"nearest",w=fg.transform(Qo(fr(y,"float32")),_,"bilinear",x,0,[i.height,i.width]);return s!=null?function(T,S){var O=function(L,C,P,B){var j=(B-P)/255;return{scale:j,offset:P-0*j}}(0,0,S[0],S[1]);return Jn(function(){return pn(zt(T,O.scale),O.offset)})}(w,s):w});return{imageTensor:g,padding:f,transformationMatrix:m}}function eN(n){n.reduceBoxesInLowestLayer==null&&(n.reduceBoxesInLowestLayer=!1),n.interpolatedScaleAspectRatio==null&&(n.interpolatedScaleAspectRatio=1),n.fixedAnchorSize==null&&(n.fixedAnchorSize=!1);for(var e=[],t=0;t<n.numLayers;){for(var i=[],r=[],a=[],s=[],l=t;l<n.strides.length&&n.strides[l]===n.strides[t];){var u=tN(n.minScale,n.maxScale,l,n.strides.length);if(l===0&&n.reduceBoxesInLowestLayer)a.push(1),a.push(2),a.push(.5),s.push(.1),s.push(u),s.push(u);else{for(var f=0;f<n.aspectRatios.length;++f)a.push(n.aspectRatios[f]),s.push(u);if(n.interpolatedScaleAspectRatio>0){var m=l===n.strides.length-1?1:tN(n.minScale,n.maxScale,l+1,n.strides.length);s.push(Math.sqrt(u*m)),a.push(n.interpolatedScaleAspectRatio)}}l++}for(var g=0;g<a.length;++g){var y=Math.sqrt(a[g]);i.push(s[g]/y),r.push(s[g]*y)}var _=0,x=0;if(n.featureMapHeight.length>0)_=n.featureMapHeight[t],x=n.featureMapWidth[t];else{var w=n.strides[t];_=Math.ceil(n.inputSizeHeight/w),x=Math.ceil(n.inputSizeWidth/w)}for(var T=0;T<_;++T)for(var S=0;S<x;++S)for(var O=0;O<i.length;++O){var L={xCenter:(S+n.anchorOffsetX)/x,yCenter:(T+n.anchorOffsetY)/_,width:0,height:0};n.fixedAnchorSize?(L.width=1,L.height=1):(L.width=r[O],L.height=i[O]),e.push(L)}t=l}return e}function tN(n,e,t,i){return i===1?.5*(n+e):n+(e-n)*t/(i-1)}function nN(n,e){var t=e[0],i=e[1];return[t*n[0]+i*n[1]+n[3],t*n[4]+i*n[5]+n[7]]}function Yie(n,e,t,i){return Bc(this,void 0,void 0,function(){var r,a,s,l,u;return zc(this,function(f){switch(f.label){case 0:return n.sort(function(m,g){return Math.max.apply(Math,g.score)-Math.max.apply(Math,m.score)}),r=qf(n.map(function(m){return[m.locationData.relativeBoundingBox.yMin,m.locationData.relativeBoundingBox.xMin,m.locationData.relativeBoundingBox.yMax,m.locationData.relativeBoundingBox.xMax]})),a=Xa(n.map(function(m){return m.score[0]})),[4,fg.nonMaxSuppressionAsync(r,a,e,t)];case 1:return[4,(s=f.sent()).array()];case 2:return l=f.sent(),u=n.filter(function(m,g){return l.indexOf(g)>-1}),Er([r,a,s]),[2,u]}})})}function Kie(n,e,t){return Bc(this,void 0,void 0,function(){var i,r,a,s,l;return zc(this,function(u){switch(u.label){case 0:return i=n[0],r=n[1],a=function(f,m,g){return Jn(function(){var y,_,x,w;g.reverseOutputOrder?(_=va(Kn(f,[0,g.boxCoordOffset+0],[-1,1])),y=va(Kn(f,[0,g.boxCoordOffset+1],[-1,1])),w=va(Kn(f,[0,g.boxCoordOffset+2],[-1,1])),x=va(Kn(f,[0,g.boxCoordOffset+3],[-1,1]))):(y=va(Kn(f,[0,g.boxCoordOffset+0],[-1,1])),_=va(Kn(f,[0,g.boxCoordOffset+1],[-1,1])),x=va(Kn(f,[0,g.boxCoordOffset+2],[-1,1])),w=va(Kn(f,[0,g.boxCoordOffset+3],[-1,1]))),_=pn(zt(oi(_,g.xScale),m.w),m.x),y=pn(zt(oi(y,g.yScale),m.h),m.y),g.applyExponentialOnBoxSize?(x=zt(Ic(oi(x,g.hScale)),m.h),w=zt(Ic(oi(w,g.wScale)),m.w)):(x=zt(oi(x,g.hScale),m.h),w=zt(oi(w,g.wScale),m.h));var T=Zn(y,oi(x,2)),S=Zn(_,oi(w,2)),O=pn(y,oi(x,2)),L=pn(_,oi(w,2)),C=La([lt(T,[g.numBoxes,1]),lt(S,[g.numBoxes,1]),lt(O,[g.numBoxes,1]),lt(L,[g.numBoxes,1])],1);if(g.numKeypoints)for(var P=0;P<g.numKeypoints;++P){var B=g.keypointCoordOffset+P*g.numValuesPerKeypoint,j=void 0,X=void 0;g.reverseOutputOrder?(j=va(Kn(f,[0,B],[-1,1])),X=va(Kn(f,[0,B+1],[-1,1]))):(X=va(Kn(f,[0,B],[-1,1])),j=va(Kn(f,[0,B+1],[-1,1])));var k=pn(zt(oi(j,g.xScale),m.w),m.x),U=pn(zt(oi(X,g.yScale),m.h),m.y);C=La([C,lt(k,[g.numBoxes,1]),lt(U,[g.numBoxes,1])],1)}return C})}(r,e,t),s=Jn(function(){var f=i;return t.sigmoidScore?(t.scoreClippingThresh!=null&&(f=yO(i,-t.scoreClippingThresh,t.scoreClippingThresh)),f=Od(f)):f}),[4,Zie(a,s,t)];case 1:return l=u.sent(),Er([a,s]),[2,l]}})})}function Zie(n,e,t){return Bc(this,void 0,void 0,function(){var i,r,a,s,l,u,f,m,g,y,_,x;return zc(this,function(w){switch(w.label){case 0:return i=[],[4,n.data()];case 1:return r=w.sent(),[4,e.data()];case 2:for(a=w.sent(),s=0;s<t.numBoxes;++s)if(!(t.minScoreThresh!=null&&a[s]<t.minScoreThresh||(l=s*t.numCoords,u=Qie(r[l+0],r[l+1],r[l+2],r[l+3],a[s],t.flipVertically,s),(f=u.locationData.relativeBoundingBox).width<0||f.height<0))){if(t.numKeypoints>0)for((m=u.locationData).relativeKeypoints=[],g=t.numKeypoints*t.numValuesPerKeypoint,y=0;y<g;y+=t.numValuesPerKeypoint)_=l+t.keypointCoordOffset+y,x={x:r[_+0],y:t.flipVertically?1-r[_+1]:r[_+1]},m.relativeKeypoints.push(x);i.push(u)}return[2,i]}})})}function Qie(n,e,t,i,r,a,s){return{score:[r],ind:s,locationData:{relativeBoundingBox:{xMin:e,yMin:a?1-t:n,xMax:i,yMax:a?1-n:t,width:i-e,height:t-n}}}}var H_,Jie={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},ere={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},mS={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},tre={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},nre={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},ire={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},rre={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},are=function(){function n(e,t,i){this.detectorModel=t,this.maxFaces=i,e==="full"?(this.imageToTensorConfig=rre,this.tensorsToDetectionConfig=nre,this.anchors=eN(ere)):(this.imageToTensorConfig=ire,this.tensorsToDetectionConfig=tre,this.anchors=eN(Jie));var r=Xa(this.anchors.map(function(u){return u.width})),a=Xa(this.anchors.map(function(u){return u.height})),s=Xa(this.anchors.map(function(u){return u.xCenter})),l=Xa(this.anchors.map(function(u){return u.yCenter}));this.anchorTensor={x:s,y:l,w:r,h:a}}return n.prototype.dispose=function(){this.detectorModel.dispose(),Er([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},n.prototype.reset=function(){},n.prototype.detectFaces=function(e,t){return t===void 0&&(t=!1),Bc(this,void 0,void 0,function(){var i,r,a,s,l,u,f,m,g,y,_;return zc(this,function(x){switch(x.label){case 0:return e==null?(this.reset(),[2,[]]):(i=Jn(function(){var w=fr(fD(e),"float32");return t&&(w=va(fg.flipLeftRight(Qo(w,0)),[0])),w}),r=$ie(i,this.imageToTensorConfig),a=r.imageTensor,s=r.transformationMatrix,l=this.detectorModel.execute(a,"Identity:0"),u=function(w){return Jn(function(){var T=function(L){return Jn(function(){return[Kn(L,[0,0,0],[1,-1,1]),Kn(L,[0,0,1],[1,-1,-1])]})}(w),S=T[0],O=T[1];return{boxes:va(O),logits:va(S)}})}(l),f=u.boxes,[4,Kie([m=u.logits,f],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return(g=x.sent()).length===0?(Er([i,a,l,m,f]),[2,g]):[4,Yie(g,this.maxFaces,.3)];case 2:return y=x.sent(),_=function(w,T){w===void 0&&(w=[]);var S,O=(S=T,[].concat.apply([],S));return w.forEach(function(L){var C=L.locationData;C.relativeKeypoints.forEach(function(U){var K=nN(O,[U.x,U.y]),ye=K[0],ue=K[1];U.x=ye,U.y=ue});var P=C.relativeBoundingBox,B=Number.MAX_VALUE,j=Number.MAX_VALUE,X=Number.MIN_VALUE,k=Number.MIN_VALUE;[[P.xMin,P.yMin],[P.xMin+P.width,P.yMin],[P.xMin+P.width,P.yMin+P.height],[P.xMin,P.yMin+P.height]].forEach(function(U){var K=nN(O,U),ye=K[0],ue=K[1];B=Math.min(B,ye),X=Math.max(X,ye),j=Math.min(j,ue),k=Math.max(k,ue)}),C.relativeBoundingBox={xMin:B,xMax:X,yMin:j,yMax:k,width:X-B,height:k-j}}),w}(y,s),Er([i,a,l,m,f]),[2,_]}})})},n.prototype.estimateFaces=function(e,t){return Bc(this,void 0,void 0,function(){var i,r;return zc(this,function(a){return i=cD(e),r=!!t&&t.flipHorizontal,[2,this.detectFaces(e,r).then(function(s){return s.map(function(l){for(var u=l.locationData.relativeKeypoints.map(function(x,w){return eh(eh({},x),{x:x.x*i.width,y:x.y*i.height,name:uD[w]})}),f=l.locationData.relativeBoundingBox,m=0,g=["width","xMax","xMin"];m<g.length;m++)f[g[m]]*=i.width;for(var y=0,_=["height","yMax","yMin"];y<_.length;y++)f[_[y]]*=i.height;return{keypoints:u,box:f}})})]})})},n}();function sre(n){return Bc(this,void 0,void 0,function(){var e,t,i;return zc(this,function(r){switch(r.label){case 0:return e=function(a){if(a==null)return eh({},mS);var s=eh({},a);return s.modelType==null&&(s.modelType=mS.modelType),s.maxFaces==null&&(s.maxFaces=mS.maxFaces),s.detectorModelUrl==null&&(s.modelType==="full"?s.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":s.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),s}(n),t=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,oD(e.detectorModelUrl,{fromTFHub:t})];case 1:return i=r.sent(),[2,new are(e.modelType,i,e.maxFaces)]}})})}function ore(n,e){return Bc(this,void 0,void 0,function(){var t,i;return zc(this,function(r){if(n===H_.MediaPipeFaceDetector){if(i=void 0,(t=e)!=null){if(t.runtime==="tfjs")return[2,sre(t)];if(t.runtime==="mediapipe")return[2,qie(t)];i=t.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(i))}throw new Error("".concat(n," is not a supported model name."))})})}function gS(n){return n.width*n.height}function iN(n){var e=n.xCenter-n.width/2,t=e+n.width,i=n.yCenter-n.height/2;return{xMin:e,xMax:t,yMin:i,yMax:i+n.height,width:n.width,height:n.height}}function lre(n,e){var t=iN(n),i=iN(e);if(!function(s,l){return!(s.xMax<l.xMin||l.xMax<s.xMin||s.yMax<l.yMin||l.yMax<s.yMin)}(t,i))return 0;var r=gS(function(s,l){var u=Math.max(s.xMin,l.xMin),f=Math.min(s.xMax,l.xMax),m=Math.max(s.yMin,l.yMin),g=Math.min(s.yMax,l.yMax);return{xMin:u,xMax:f,yMin:m,yMax:g,width:Math.max(f-u,0),height:Math.max(g-m,0)}}(t,i)),a=gS(t)+gS(i)-r;return a>0?r/a:0}function ure(n,e,t,i){var r=n.width,a=n.height,s=1,l=Math.cos(n.rotation),u=Math.sin(n.rotation),f=n.xCenter,m=n.yCenter,g=1/e,y=1/t,_=new Array(16);return _[0]=r*l*s*g,_[1]=-a*u*g,_[2]=0,_[3]=(-.5*r*l*s+.5*a*u+f)*g,_[4]=r*u*s*y,_[5]=a*l*y,_[6]=0,_[7]=(-.5*a*l-.5*r*u*s+m)*y,_[8]=0,_[9]=0,_[10]=r*g,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,function(x){if(x.length!==16)throw new Error("Array length must be 16 but got "+x.length);return[[x[0],x[1],x[2],x[3]],[x[4],x[5],x[6],x[7]],[x[8],x[9],x[10],x[11]],[x[12],x[13],x[14],x[15]]]}(_)}function hD(n){return n instanceof Ur?{height:n.shape[0],width:n.shape[1]}:{height:n.height,width:n.width}}function dD(n){return n-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}function pD(n){return n instanceof Ur?n:iD(n)}function yS(n,e){ce(n.width!==0,function(){return e+" width cannot be 0."}),ce(n.height!==0,function(){return e+" height cannot be 0."})}function cre(n,e){var t=function(i,r,a,s){var l=r-i,u=s-a,f=u/l;return{scale:f,offset:a-i*f}}(0,255,e[0],e[1]);return Jn(function(){return pn(zt(n,t.scale),t.offset)})}function fre(n,e,t){var i=e.outputTensorSize,r=e.keepAspectRatio,a=e.outputTensorFloatRange,s=hD(n),l=function(g,y){return y?{xCenter:y.xCenter*g.width,yCenter:y.yCenter*g.height,width:y.width*g.width,height:y.height*g.height,rotation:y.rotation}:{xCenter:.5*g.width,yCenter:.5*g.height,width:g.width,height:g.height,rotation:0}}(s,t),u=function(g,y,_){if(_===void 0&&(_=!1),!_)return{top:0,left:0,right:0,bottom:0};var x=y.height,w=y.width;yS(y,"targetSize"),yS(g,"roi");var T,S,O=x/w,L=g.height/g.width,C=0,P=0;return O>L?(T=g.width,S=g.width*O,P=(1-L/O)/2):(T=g.height/O,S=g.height,C=(1-O/L)/2),g.width=T,g.height=S,{top:P,left:C,right:C,bottom:P}}(l,i,r),f=ure(l,s.width,s.height),m=Jn(function(){var g=pD(n),y=qf(function(w,T,S){return yS(S,"inputResolution"),[1/S.width*w[0][0]*T.width,1/S.height*w[0][1]*T.width,w[0][3]*T.width,1/S.width*w[1][0]*T.height,1/S.height*w[1][1]*T.height,w[1][3]*T.height,0,0]}(f,s,i),[1,8]),_="nearest",x=fg.transform(Qo(fr(g,"float32")),y,"bilinear",_,0,[i.height,i.width]);return a!=null?cre(x,a):x});return{imageTensor:m,padding:u,transformationMatrix:f}}function rN(n){return{xCenter:n.xMin+n.width/2,yCenter:n.yMin+n.height/2,width:n.width,height:n.height}}function hre(n){var e=n.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var t=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.MIN_VALUE,a=Number.MIN_VALUE;return e.forEach(function(s){t=Math.min(t,s.x),r=Math.max(r,s.x),i=Math.min(i,s.y),a=Math.max(a,s.y)}),{xCenter:(t+r)/2,yCenter:(i+a)/2,width:r-t,height:a-i}}function aN(n,e,t,i,r){var a=t==="rect"?function(s,l,u){var f,m=s.locationData;return f=rN(m.boundingBox),f}(n):function(s,l){var u=s.locationData;return l==="boundingbox"?rN(u.relativeBoundingBox):hre(u)}(n,e);return r&&(a.rotation=function(s,l,u){var f,m=s.locationData,g=u.rotationVectorStartKeypointIndex,y=u.rotationVectorEndKeypointIndex;f=u.rotationVectorTargetAngle?u.rotationVectorTargetAngle:Math.PI*u.rotationVectorTargetAngleDegree/180;var _=m.relativeKeypoints[g].x*l.width,x=m.relativeKeypoints[g].y*l.height,w=m.relativeKeypoints[y].x*l.width,T=m.relativeKeypoints[y].y*l.height;return dD(f-Math.atan2(-(T-x),w-_))}(n,i,r)),a}function dre(n,e,t){for(var i=0;i<e.length;++i){var r=e[i],a=t[n[i]];a.x=r.x,a.y=r.y}}function pre(n,e,t,i){if(typeof e=="string"){if(e==="copy")for(var r=0;r<t.length;++r)i[n[r]].z=t[r].z}else{var a=function(s,l){for(var u=0,f=0;f<l.length;++f)u+=s[l[f]].z;return u/l.length}(i,e);for(r=0;r<n.length;++r)i[n[r]].z=a}}function mre(n,e){for(var t=function(l){var u=[].concat.apply([],l.map(function(_){return _.indexesMapping}));if(u.length===0)throw new Error("There should be at least one landmark in indexes mapping");var f=u[0],m=u[0],g=new Set(u);g.forEach(function(_){f=Math.min(f,_),m=Math.max(m,_)});var y=g.size;if(f!==0)throw new Error("Indexes are expected to start with 0 instead of "+f);if(m+1!==y)throw new Error("Indexes should have no gaps but "+(m-y+1)+" indexes are missing");return y}(e),i=new Array(t).fill(null).map(Object),r=0;r<n.length;++r){var a=n[r],s=e[r];if(a.length!==s.indexesMapping.length)throw new Error("There are "+a.length+" refinement landmarks while mapping has "+s.indexesMapping.length);dre(s.indexesMapping,a,i),pre(s.indexesMapping,s.zRefinement,a,i)}return i}function gre(n,e){return n.map(function(t){var i=kl(kl({},t),{x:t.x*e.width,y:t.y*e.height});return t.z!=null&&(i.z=t.z*e.width),i})}function yre(n,e){return n==="none"?e:function(t){return 1/(1+Math.exp(-t))}(e)}function hd(n,e,t,i){return Ec(this,void 0,void 0,function(){var r,a,s,l,u,f,m,g;return Mc(this,function(y){switch(y.label){case 0:return t=t||e.flipHorizontally||!1,i=i||e.flipVertically||!1,r=n.size,a=r/e.numLandmarks,[4,n.data()];case 1:for(s=y.sent(),l=[],u=0;u<e.numLandmarks;++u)f=u*a,(g={x:0,y:0}).x=t?e.inputImageWidth-s[f]:s[f],a>1&&(g.y=i?e.inputImageHeight-s[f+1]:s[f+1]),a>2&&(g.z=s[f+2]),a>3&&(g.score=yre(e.visibilityActivation,s[f+3])),l.push(g);for(m=0;m<l.length;++m)(g=l[m]).x=g.x/e.inputImageWidth,g.y=g.y/e.inputImageHeight,g.z=g.z/e.inputImageWidth/(e.normalizeZ||1);return[2,l]}})})}function sN(n,e,t){var i=n.width,r=n.height,a=n.rotation;if(t.rotation==null&&t.rotationDegree==null||(a=function(f,m){return m.rotation!=null?f+=m.rotation:m.rotationDegree!=null&&(f+=Math.PI*m.rotationDegree/180),dD(f)}(a,t)),a===0)n.xCenter=n.xCenter+i*t.shiftX,n.yCenter=n.yCenter+r*t.shiftY;else{var s=(e.width*i*t.shiftX*Math.cos(a)-e.height*r*t.shiftY*Math.sin(a))/e.width,l=(e.width*i*t.shiftX*Math.sin(a)+e.height*r*t.shiftY*Math.cos(a))/e.height;n.xCenter=n.xCenter+s,n.yCenter=n.yCenter+l}{var u=Math.max(i*e.width,r*e.height);i=u/e.width,r=u/e.height}return n.width=i*t.scaleX,n.height=r*t.scaleY,n}(H_||(H_={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var vS={runtime:"tfjs",maxFaces:1,refineLandmarks:!1,landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"},_S={flipHorizontal:!1,staticImageMode:!1},oN={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5},vre={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1]},lN={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},_re={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},uN={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},cN={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},bre={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},xre={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},Sre={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},Tre={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},Ere={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},Mre={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]},V_,wre=function(){function n(e,t,i,r){this.detector=e,this.landmarkModel=t,this.maxFaces=i,this.withAttention=r,this.prevFaceRectsFromLandmarks=null}return n.prototype.estimateFaces=function(e,t){return Ec(this,void 0,void 0,function(){var i,r,a,s,l,u,f,m,g,y,_,x,w,T=this;return Mc(this,function(S){switch(S.label){case 0:return i=function(C){if(C==null)return kl({},_S);var P=kl({},C);return P.flipHorizontal==null&&(P.flipHorizontal=_S.flipHorizontal),P.staticImageMode==null&&(P.staticImageMode=_S.staticImageMode),P}(t),e==null?(this.reset(),[2,[]]):(r=hD(e),a=Jn(function(){var C=fr(pD(e),"float32");return i.flipHorizontal&&(C=va(fg.flipLeftRight(Qo(C,0)),[0])),C}),s=this.prevFaceRectsFromLandmarks,i.staticImageMode||s==null||s.length<this.maxFaces?[4,this.detector.detectFaces(a,!1)]:[3,2]);case 1:return(u=S.sent()).length===0?(this.reset(),a.dispose(),[2,[]]):(l=u.map(function(C){return T.faceDetectionFrontDetectionToRoi(C,r)}),[3,3]);case 2:l=[],S.label=3;case 3:return O=.5,L=[],[l,s||[]].forEach(function(C){return C.forEach(function(P){(L=L.filter(function(B){return lre(P,B)<=O})).push(P)})}),f=L,[4,Promise.all(f.map(function(C){return T.faceLandmark(C,a)}))];case 4:for(m=S.sent(),g=[],this.prevFaceRectsFromLandmarks=[],y=0;y<m.length;++y)(_=m[y])!=null&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(_,r)),(x=gre(_,r))!=null&&x.forEach(function(C,P){var B=lD.get(P);B!=null&&(C.name=B)}),w=zT(x),g.push({keypoints:x,box:w.locationData.relativeBoundingBox}));return a.dispose(),[2,g]}var O,L})})},n.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},n.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},n.prototype.faceDetectionFrontDetectionToRoi=function(e,t){return sN(aN(e,"boundingbox","normRect",t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),t,oN)},n.prototype.faceLandmark=function(e,t){return Ec(this,void 0,void 0,function(){var i,r,a,s,l,u,f;return Mc(this,function(m){switch(m.label){case 0:return i=fre(t,vre,e).imageTensor,r=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),a=this.landmarkModel.execute(i,r),s=a[0],l=a.slice(1),[4,s.data()];case 1:return m.sent()[0]<.5?(Er(a),Er(i),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(l)]:[3,3];case 2:return u=m.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(l)];case 4:u=m.sent(),m.label=5;case 5:return f=function(g,y,_){_===void 0&&(_={ignoreRotation:!1});for(var x=[],w=0,T=g;w<T.length;w++){var S=T[w],O=S.x-.5,L=S.y-.5,C=_.ignoreRotation?0:y.rotation,P=Math.cos(C)*O-Math.sin(C)*L,B=Math.sin(C)*O+Math.cos(C)*L;P=P*y.width+y.xCenter,B=B*y.height+y.yCenter;var j=S.z*y.width,X=kl({},S);X.x=P,X.y=B,X.z=j,x.push(X)}return x}(u,e),Er(a),Er(i),[2,f]}})})},n.prototype.tensorsToFaceLandmarks=function(e){return Ec(this,void 0,void 0,function(){return Mc(this,function(t){return[2,hd(e[0],lN)]})})},n.prototype.tensorsToFaceLandmarksWithAttention=function(e){return Ec(this,void 0,void 0,function(){var t,i,r,a,s,l;return Mc(this,function(u){switch(u.label){case 0:return[4,hd(e[0],lN)];case 1:return t=u.sent(),[4,hd(e[1],_re)];case 2:return i=u.sent(),[4,hd(e[3],uN)];case 3:return r=u.sent(),[4,hd(e[5],uN)];case 4:return a=u.sent(),[4,hd(e[4],cN)];case 5:return s=u.sent(),[4,hd(e[2],cN)];case 6:return l=u.sent(),[2,mre([t,i,r,a,s,l],[bre,xre,Sre,Tre,Ere,Mre])]}})})},n.prototype.faceLandmarksToRoi=function(e,t){return sN(aN(zT(e),"boundingbox","normRect",t,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),t,oN)},n}();function Are(n){return Ec(this,void 0,void 0,function(){var e,t,i,r;return Mc(this,function(a){switch(a.label){case 0:return e=function(s){if(s==null)return kl({},vS);var l=kl({},s);return l.runtime="tfjs",l.maxFaces==null&&(l.maxFaces=vS.maxFaces),l.refineLandmarks==null&&(l.refineLandmarks=vS.refineLandmarks),l.landmarkModelUrl==null&&(l.landmarkModelUrl=l.refineLandmarks?"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/attention_mesh/1":"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"),l}(n),t=typeof e.landmarkModelUrl=="string"&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,oD(e.landmarkModelUrl,{fromTFHub:t})];case 1:return i=a.sent(),[4,ore(H_.MediaPipeFaceDetector,{modelType:"short",maxFaces:e.maxFaces,detectorModelUrl:e.detectorModelUrl,runtime:e.runtime})];case 2:return r=a.sent(),[2,new wre(r,i,e.maxFaces,e.refineLandmarks)]}})})}function Rre(n,e){return Ec(this,void 0,void 0,function(){var t,i;return Mc(this,function(r){if(n===V_.MediaPipeFaceMesh){if(i=void 0,(t=e)!=null){if(t.runtime==="tfjs")return[2,Are(t)];if(t.runtime==="mediapipe")return[2,jie(t)];i=t.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+i)}throw new Error(n+" is not a supported model name.")})})}(function(n){n.MediaPipeFaceMesh="MediaPipeFaceMesh"})(V_||(V_={}));function Nre(n){const[e,t]=jt.useState(null),[i,r]=jt.useState("");return jt.useEffect(()=>{if(!n){t(null);return}(async()=>{try{const s=await Rre(V_.MediaPipeFaceMesh,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh",maxFaces:1,refineLandmarks:!0});t(s),r("")}catch(s){r("Failed to load face mesh model"),console.error(s)}})()},[n]),{model:e,errMsg:i,setErrMsg:r}}function Cre(n,e,t,i){return{startCamera:async()=>{try{const s=await navigator.mediaDevices.getUserMedia({video:!0});if(n.current){e(!1),n.current.srcObject=s;const l=()=>{e(!0),n.current.removeEventListener("playing",l)};n.current.addEventListener("playing",l)}t("")}catch(s){s.name==="NotAllowedError"?t("Permission denied: Please allow camera access."):s.name==="NotFoundError"?t("No camera device found."):t("Error accessing webcam"),console.error(s)}},stopCamera:()=>{n.current&&n.current.srcObject&&(n.current.srcObject.getTracks().forEach(s=>s.stop()),n.current.srcObject=null),i?.current&&i.current.getContext("2d").clearRect(0,0,i.current.width,i.current.height)}}}function Ore(n,e){for(const t of e)n.beginPath(),n.arc(t.x,t.y,2,0,2*Math.PI),n.fillStyle="green",n.fill()}function Dre(n,e,t,i,r=!1){const a=jt.useRef(null),s=jt.useCallback(async()=>{if(!(!n||!e.current||!i||e.current.readyState!==4)){try{const l=await n.estimateFaces(e.current),u=t.current,f=u.getContext("2d");if(f.clearRect(0,0,u.width,u.height),l.length>0)if($0.current=l[0].keypoints,r)Ore(f,$0.current);else for(const m of $0.current)f.beginPath(),f.arc(m.x,m.y,2,0,2*Math.PI),f.fillStyle="lime",f.fill();else $0.current=null}catch(l){console.error("Face detection failed:",l)}a.current=requestAnimationFrame(s)}},[n,i,r,e,t]);jt.useEffect(()=>(n&&i?a.current=requestAnimationFrame(s):a.current!==null&&(cancelAnimationFrame(a.current),a.current=null),()=>{a.current!==null&&(cancelAnimationFrame(a.current),a.current=null)}),[n,i,s])}/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */function FT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function Lre(n){if(Array.isArray(n))return n}function Ire(n){if(Array.isArray(n))return FT(n)}function Ure(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Pre(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,mD(i.key),i)}}function Bre(n,e,t){return e&&Pre(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function U2(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=MM(n))||e){t&&(n=t);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,l=!1;return{s:function(){t=t.call(n)},n:function(){var u=t.next();return s=u.done,u},e:function(u){l=!0,a=u},f:function(){try{s||t.return==null||t.return()}finally{if(l)throw a}}}}function xi(n,e,t){return(e=mD(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zre(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Fre(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,a,s,l=[],u=!0,f=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(i=a.call(t)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(m){f=!0,r=m}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw r}}return l}}function kre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fN(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function It(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fN(Object(t),!0).forEach(function(i){xi(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fN(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function k3(n,e){return Lre(n)||Fre(n,e)||MM(n,e)||kre()}function Gl(n){return Ire(n)||zre(n)||MM(n)||Hre()}function Vre(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mD(n){var e=Vre(n,"string");return typeof e=="symbol"?e:e+""}function G_(n){"@babel/helpers - typeof";return G_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G_(n)}function MM(n,e){if(n){if(typeof n=="string")return FT(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?FT(n,e):void 0}}var hN=function(){},wM={},gD={},yD=null,vD={mark:hN,measure:hN};try{typeof window<"u"&&(wM=window),typeof document<"u"&&(gD=document),typeof MutationObserver<"u"&&(yD=MutationObserver),typeof performance<"u"&&(vD=performance)}catch{}var Gre=wM.navigator||{},dN=Gre.userAgent,pN=dN===void 0?"":dN,th=wM,gr=gD,mN=yD,d2=vD;th.document;var Gc=!!gr.documentElement&&!!gr.head&&typeof gr.addEventListener=="function"&&typeof gr.createElement=="function",_D=~pN.indexOf("MSIE")||~pN.indexOf("Trident/"),bS,jre=/fa(k|kd|s|r|l|t|d|dr|dl|dt|b|slr|slpr|wsb|tl|ns|nds|es|jr|jfr|jdr|cr|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Wre=/Font ?Awesome ?([567 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit|Notdog Duo|Notdog|Chisel|Etch|Thumbprint|Jelly Fill|Jelly Duo|Jelly|Slab Press|Slab|Whiteboard)?.*/i,bD={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"},slab:{"fa-regular":"regular",faslr:"regular"},"slab-press":{"fa-regular":"regular",faslpr:"regular"},thumbprint:{"fa-light":"light",fatl:"light"},whiteboard:{"fa-semibold":"semibold",fawsb:"semibold"},notdog:{"fa-solid":"solid",fans:"solid"},"notdog-duo":{"fa-solid":"solid",fands:"solid"},etch:{"fa-solid":"solid",faes:"solid"},jelly:{"fa-regular":"regular",fajr:"regular"},"jelly-fill":{"fa-regular":"regular",fajfr:"regular"},"jelly-duo":{"fa-regular":"regular",fajdr:"regular"},chisel:{"fa-regular":"regular",facr:"regular"}},Xre={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},xD=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],hs="classic",j1="duotone",SD="sharp",TD="sharp-duotone",ED="chisel",MD="etch",wD="jelly",AD="jelly-duo",RD="jelly-fill",ND="notdog",CD="notdog-duo",OD="slab",DD="slab-press",LD="thumbprint",ID="whiteboard",qre="Classic",$re="Duotone",Yre="Sharp",Kre="Sharp Duotone",Zre="Chisel",Qre="Etch",Jre="Jelly",eae="Jelly Duo",tae="Jelly Fill",nae="Notdog",iae="Notdog Duo",rae="Slab",aae="Slab Press",sae="Thumbprint",oae="Whiteboard",UD=[hs,j1,SD,TD,ED,MD,wD,AD,RD,ND,CD,OD,DD,LD,ID];bS={},xi(xi(xi(xi(xi(xi(xi(xi(xi(xi(bS,hs,qre),j1,$re),SD,Yre),TD,Kre),ED,Zre),MD,Qre),wD,Jre),AD,eae),RD,tae),ND,nae),xi(xi(xi(xi(xi(bS,CD,iae),OD,rae),DD,aae),LD,sae),ID,oae);var lae={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"},slab:{400:"faslr"},"slab-press":{400:"faslpr"},whiteboard:{600:"fawsb"},thumbprint:{300:"fatl"},notdog:{900:"fans"},"notdog-duo":{900:"fands"},etch:{900:"faes"},chisel:{400:"facr"},jelly:{400:"fajr"},"jelly-fill":{400:"fajfr"},"jelly-duo":{400:"fajdr"}},uae={"Font Awesome 7 Free":{900:"fas",400:"far"},"Font Awesome 7 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 7 Brands":{400:"fab",normal:"fab"},"Font Awesome 7 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 7 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 7 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"},"Font Awesome 7 Jelly":{400:"fajr",normal:"fajr"},"Font Awesome 7 Jelly Fill":{400:"fajfr",normal:"fajfr"},"Font Awesome 7 Jelly Duo":{400:"fajdr",normal:"fajdr"},"Font Awesome 7 Slab":{400:"faslr",normal:"faslr"},"Font Awesome 7 Slab Press":{400:"faslpr",normal:"faslpr"},"Font Awesome 7 Thumbprint":{300:"fatl",normal:"fatl"},"Font Awesome 7 Notdog":{900:"fans",normal:"fans"},"Font Awesome 7 Notdog Duo":{900:"fands",normal:"fands"},"Font Awesome 7 Etch":{900:"faes",normal:"faes"},"Font Awesome 7 Chisel":{400:"facr",normal:"facr"},"Font Awesome 7 Whiteboard":{600:"fawsb",normal:"fawsb"}},cae=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["chisel",{defaultShortPrefixId:"facr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["etch",{defaultShortPrefixId:"faes",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["jelly",{defaultShortPrefixId:"fajr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-duo",{defaultShortPrefixId:"fajdr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-fill",{defaultShortPrefixId:"fajfr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["notdog",{defaultShortPrefixId:"fans",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["notdog-duo",{defaultShortPrefixId:"fands",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["slab",{defaultShortPrefixId:"faslr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["slab-press",{defaultShortPrefixId:"faslpr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["thumbprint",{defaultShortPrefixId:"fatl",defaultStyleId:"light",styleIds:["light"],futureStyleIds:[],defaultFontWeight:300}],["whiteboard",{defaultShortPrefixId:"fawsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}]]),fae={chisel:{regular:"facr"},classic:{brands:"fab",light:"fal",regular:"far",solid:"fas",thin:"fat"},duotone:{light:"fadl",regular:"fadr",solid:"fad",thin:"fadt"},etch:{solid:"faes"},jelly:{regular:"fajr"},"jelly-duo":{regular:"fajdr"},"jelly-fill":{regular:"fajfr"},notdog:{solid:"fans"},"notdog-duo":{solid:"fands"},sharp:{light:"fasl",regular:"fasr",solid:"fass",thin:"fast"},"sharp-duotone":{light:"fasdl",regular:"fasdr",solid:"fasds",thin:"fasdt"},slab:{regular:"faslr"},"slab-press":{regular:"faslpr"},thumbprint:{light:"fatl"},whiteboard:{semibold:"fawsb"}},PD=["fak","fa-kit","fakd","fa-kit-duotone"],gN={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},hae=["kit"],dae="kit",pae="kit-duotone",mae="Kit",gae="Kit Duotone";xi(xi({},dae,mae),pae,gae);var yae={kit:{"fa-kit":"fak"}},vae={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},_ae={kit:{fak:"fa-kit"}},yN={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},xS,p2={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},bae=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],xae="classic",Sae="duotone",Tae="sharp",Eae="sharp-duotone",Mae="chisel",wae="etch",Aae="jelly",Rae="jelly-duo",Nae="jelly-fill",Cae="notdog",Oae="notdog-duo",Dae="slab",Lae="slab-press",Iae="thumbprint",Uae="whiteboard",Pae="Classic",Bae="Duotone",zae="Sharp",Fae="Sharp Duotone",kae="Chisel",Hae="Etch",Vae="Jelly",Gae="Jelly Duo",jae="Jelly Fill",Wae="Notdog",Xae="Notdog Duo",qae="Slab",$ae="Slab Press",Yae="Thumbprint",Kae="Whiteboard";xS={},xi(xi(xi(xi(xi(xi(xi(xi(xi(xi(xS,xae,Pae),Sae,Bae),Tae,zae),Eae,Fae),Mae,kae),wae,Hae),Aae,Vae),Rae,Gae),Nae,jae),Cae,Wae),xi(xi(xi(xi(xi(xS,Oae,Xae),Dae,qae),Lae,$ae),Iae,Yae),Uae,Kae);var Zae="kit",Qae="kit-duotone",Jae="Kit",ese="Kit Duotone";xi(xi({},Zae,Jae),Qae,ese);var tse={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"},slab:{"fa-regular":"faslr"},"slab-press":{"fa-regular":"faslpr"},whiteboard:{"fa-semibold":"fawsb"},thumbprint:{"fa-light":"fatl"},notdog:{"fa-solid":"fans"},"notdog-duo":{"fa-solid":"fands"},etch:{"fa-solid":"faes"},jelly:{"fa-regular":"fajr"},"jelly-fill":{"fa-regular":"fajfr"},"jelly-duo":{"fa-regular":"fajdr"},chisel:{"fa-regular":"facr"}},nse={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"],slab:["faslr"],"slab-press":["faslpr"],whiteboard:["fawsb"],thumbprint:["fatl"],notdog:["fans"],"notdog-duo":["fands"],etch:["faes"],jelly:["fajr"],"jelly-fill":["fajfr"],"jelly-duo":["fajdr"],chisel:["facr"]},kT={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"},slab:{faslr:"fa-regular"},"slab-press":{faslpr:"fa-regular"},whiteboard:{fawsb:"fa-semibold"},thumbprint:{fatl:"fa-light"},notdog:{fans:"fa-solid"},"notdog-duo":{fands:"fa-solid"},etch:{faes:"fa-solid"},jelly:{fajr:"fa-regular"},"jelly-fill":{fajfr:"fa-regular"},"jelly-duo":{fajdr:"fa-regular"},chisel:{facr:"fa-regular"}},ise=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands","fa-semibold"],BD=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","faslr","faslpr","fawsb","fatl","fans","fands","faes","fajr","fajfr","fajdr","facr"].concat(bae,ise),rse=["solid","regular","light","thin","duotone","brands","semibold"],zD=[1,2,3,4,5,6,7,8,9,10],ase=zD.concat([11,12,13,14,15,16,17,18,19,20]),sse=["aw","fw","pull-left","pull-right"],ose=[].concat(Gl(Object.keys(nse)),rse,sse,["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","inverse","layers","layers-bottom-left","layers-bottom-right","layers-counter","layers-text","layers-top-left","layers-top-right","li","pull-end","pull-start","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","width-auto","width-fixed",p2.GROUP,p2.SWAP_OPACITY,p2.PRIMARY,p2.SECONDARY]).concat(zD.map(function(n){return"".concat(n,"x")})).concat(ase.map(function(n){return"w-".concat(n)})),lse={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},Fc="___FONT_AWESOME___",HT=16,FD="fa",kD="svg-inline--fa",Xd="data-fa-i2svg",VT="data-fa-pseudo-element",use="data-fa-pseudo-element-pending",AM="data-prefix",RM="data-icon",vN="fontawesome-i2svg",cse="async",fse=["HTML","HEAD","STYLE","SCRIPT"],HD=["::before","::after",":before",":after"],VD=function(){try{return!0}catch{return!1}}();function W1(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[hs]}})}var GD=It({},bD);GD[hs]=It(It(It(It({},{"fa-duotone":"duotone"}),bD[hs]),gN.kit),gN["kit-duotone"]);var hse=W1(GD),GT=It({},fae);GT[hs]=It(It(It(It({},{duotone:"fad"}),GT[hs]),yN.kit),yN["kit-duotone"]);var _N=W1(GT),jT=It({},kT);jT[hs]=It(It({},jT[hs]),_ae.kit);var jD=W1(jT),WT=It({},tse);WT[hs]=It(It({},WT[hs]),yae.kit);W1(WT);var dse=jre,WD="fa-layers-text",pse=Wre,mse=It({},lae);W1(mse);var gse=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],SS=Xre,yse=[].concat(Gl(hae),Gl(ose)),u1=th.FontAwesomeConfig||{};function vse(n){var e=gr.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}function _se(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(gr&&typeof gr.querySelector=="function"){var bse=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-search-pseudo-elements","searchPseudoElements"],["data-search-pseudo-elements-warnings","searchPseudoElementsWarnings"],["data-search-pseudo-elements-full-scan","searchPseudoElementsFullScan"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];bse.forEach(function(n){var e=k3(n,2),t=e[0],i=e[1],r=_se(vse(t));r!=null&&(u1[i]=r)})}var XD={styleDefault:"solid",familyDefault:hs,cssPrefix:FD,replacementClass:kD,autoReplaceSvg:!0,autoAddCss:!0,searchPseudoElements:!1,searchPseudoElementsWarnings:!0,searchPseudoElementsFullScan:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};u1.familyPrefix&&(u1.cssPrefix=u1.familyPrefix);var eg=It(It({},XD),u1);eg.autoReplaceSvg||(eg.observeMutations=!1);var yn={};Object.keys(XD).forEach(function(n){Object.defineProperty(yn,n,{enumerable:!0,set:function(t){eg[n]=t,c1.forEach(function(i){return i(yn)})},get:function(){return eg[n]}})});Object.defineProperty(yn,"familyPrefix",{enumerable:!0,set:function(e){eg.cssPrefix=e,c1.forEach(function(t){return t(yn)})},get:function(){return eg.cssPrefix}});th.FontAwesomeConfig=yn;var c1=[];function xse(n){return c1.push(n),function(){c1.splice(c1.indexOf(n),1)}}var xm=HT,Du={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Sse(n){if(!(!n||!Gc)){var e=gr.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=gr.head.childNodes,i=null,r=t.length-1;r>-1;r--){var a=t[r],s=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(i=a)}return gr.head.insertBefore(e,i),n}}var Tse="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function bN(){for(var n=12,e="";n-- >0;)e+=Tse[Math.random()*62|0];return e}function hg(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function NM(n){return n.classList?hg(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function qD(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ese(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(qD(n[t]),'" ')},"").trim()}function H3(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function CM(n){return n.size!==Du.size||n.x!==Du.x||n.y!==Du.y||n.rotate!==Du.rotate||n.flipX||n.flipY}function Mse(n){var e=n.transform,t=n.containerWidth,i=n.iconWidth,r={transform:"translate(".concat(t/2," 256)")},a="translate(".concat(e.x*32,", ").concat(e.y*32,") "),s="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),l="rotate(".concat(e.rotate," 0 0)"),u={transform:"".concat(a," ").concat(s," ").concat(l)},f={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:u,path:f}}function wse(n){var e=n.transform,t=n.width,i=t===void 0?HT:t,r=n.height,a=r===void 0?HT:r,s="";return _D?s+="translate(".concat(e.x/xm-i/2,"em, ").concat(e.y/xm-a/2,"em) "):s+="translate(calc(-50% + ".concat(e.x/xm,"em), calc(-50% + ").concat(e.y/xm,"em)) "),s+="scale(".concat(e.size/xm*(e.flipX?-1:1),", ").concat(e.size/xm*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var Ase=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 7 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 7 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 7 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 7 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 7 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 7 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-slab-regular: normal 400 1em/1 "Font Awesome 7 Slab";
  --fa-font-slab-press-regular: normal 400 1em/1 "Font Awesome 7 Slab Press";
  --fa-font-whiteboard-semibold: normal 600 1em/1 "Font Awesome 7 Whiteboard";
  --fa-font-thumbprint-light: normal 300 1em/1 "Font Awesome 7 Thumbprint";
  --fa-font-notdog-solid: normal 900 1em/1 "Font Awesome 7 Notdog";
  --fa-font-notdog-duo-solid: normal 900 1em/1 "Font Awesome 7 Notdog Duo";
  --fa-font-etch-solid: normal 900 1em/1 "Font Awesome 7 Etch";
  --fa-font-jelly-regular: normal 400 1em/1 "Font Awesome 7 Jelly";
  --fa-font-jelly-fill-regular: normal 400 1em/1 "Font Awesome 7 Jelly Fill";
  --fa-font-jelly-duo-regular: normal 400 1em/1 "Font Awesome 7 Jelly Duo";
  --fa-font-chisel-regular: normal 400 1em/1 "Font Awesome 7 Chisel";
}

.svg-inline--fa {
  box-sizing: content-box;
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285714em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left,
.svg-inline--fa .fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-pull-right,
.svg-inline--fa .fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  inset-block-start: 0.25em; /* syncing vertical alignment with Web Font rendering */
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.fa-layers .svg-inline--fa {
  inset: 0;
  margin: auto;
  position: absolute;
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: calc(10 / 16 * 1em); /* converts a 10px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 10 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 10 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xs {
  font-size: calc(12 / 16 * 1em); /* converts a 12px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 12 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 12 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-sm {
  font-size: calc(14 / 16 * 1em); /* converts a 14px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 14 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 14 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-lg {
  font-size: calc(20 / 16 * 1em); /* converts a 20px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 20 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 20 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xl {
  font-size: calc(24 / 16 * 1em); /* converts a 24px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 24 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 24 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-2xl {
  font-size: calc(32 / 16 * 1em); /* converts a 32px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 32 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 32 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-width-auto {
  --fa-width: auto;
}

.fa-fw,
.fa-width-fixed {
  --fa-width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-inline-start: var(--fa-li-margin, 2.5em);
  padding-inline-start: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

/* Heads Up: Bordered Icons will not be supported in the future!
  - This feature will be deprecated in the next major release of Font Awesome (v8)!
  - You may continue to use it in this version *v7), but it will not be supported in Font Awesome v8.
*/
/* Notes:
* --@{v.$css-prefix}-border-width = 1/16 by default (to render as ~1px based on a 16px default font-size)
* --@{v.$css-prefix}-border-padding =
  ** 3/16 for vertical padding (to give ~2px of vertical whitespace around an icon considering it's vertical alignment)
  ** 4/16 for horizontal padding (to give ~4px of horizontal whitespace around an icon)
*/
.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.0625em);
  box-sizing: var(--fa-border-box-sizing, content-box);
  padding: var(--fa-border-padding, 0.1875em 0.25em);
}

.fa-pull-left,
.fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right,
.fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
  .fa-bounce,
  .fa-fade,
  .fa-beat-fade,
  .fa-flip,
  .fa-pulse,
  .fa-shake,
  .fa-spin,
  .fa-spin-pulse {
    animation: none !important;
    transition: none !important;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.svg-inline--fa.fa-inverse {
  fill: var(--fa-inverse, #fff);
}

.fa-stack {
  display: inline-block;
  height: 2em;
  line-height: 2em;
  position: relative;
  vertical-align: middle;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}`;function $D(){var n=FD,e=kD,t=yn.cssPrefix,i=yn.replacementClass,r=Ase;if(t!==n||i!==e){var a=new RegExp("\\.".concat(n,"\\-"),"g"),s=new RegExp("\\--".concat(n,"\\-"),"g"),l=new RegExp("\\.".concat(e),"g");r=r.replace(a,".".concat(t,"-")).replace(s,"--".concat(t,"-")).replace(l,".".concat(i))}return r}var xN=!1;function TS(){yn.autoAddCss&&!xN&&(Sse($D()),xN=!0)}var Rse={mixout:function(){return{dom:{css:$D,insertCss:TS}}},hooks:function(){return{beforeDOMElementCreation:function(){TS()},beforeI2svg:function(){TS()}}}},kc=th||{};kc[Fc]||(kc[Fc]={});kc[Fc].styles||(kc[Fc].styles={});kc[Fc].hooks||(kc[Fc].hooks={});kc[Fc].shims||(kc[Fc].shims=[]);var zl=kc[Fc],YD=[],KD=function(){gr.removeEventListener("DOMContentLoaded",KD),j_=1,YD.map(function(e){return e()})},j_=!1;Gc&&(j_=(gr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(gr.readyState),j_||gr.addEventListener("DOMContentLoaded",KD));function Nse(n){Gc&&(j_?setTimeout(n,0):YD.push(n))}function X1(n){var e=n.tag,t=n.attributes,i=t===void 0?{}:t,r=n.children,a=r===void 0?[]:r;return typeof n=="string"?qD(n):"<".concat(e," ").concat(Ese(i),">").concat(a.map(X1).join(""),"</").concat(e,">")}function SN(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}var ES=function(e,t,i,r){var a=Object.keys(e),s=a.length,l=t,u,f,m;for(i===void 0?(u=1,m=e[a[0]]):(u=0,m=i);u<s;u++)f=a[u],m=l(m,e[f],f,e);return m};function ZD(n){return Gl(n).length!==1?null:n.codePointAt(0).toString(16)}function TN(n){return Object.keys(n).reduce(function(e,t){var i=n[t],r=!!i.icon;return r?e[i.iconName]=i.icon:e[t]=i,e},{})}function QD(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=t.skipHooks,r=i===void 0?!1:i,a=TN(e);typeof zl.hooks.addPack=="function"&&!r?zl.hooks.addPack(n,TN(e)):zl.styles[n]=It(It({},zl.styles[n]||{}),a),n==="fas"&&QD("fa",e)}var C1=zl.styles,Cse=zl.shims,JD=Object.keys(jD),Ose=JD.reduce(function(n,e){return n[e]=Object.keys(jD[e]),n},{}),OM=null,eL={},tL={},nL={},iL={},rL={};function Dse(n){return~yse.indexOf(n)}function Lse(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i===n&&r!==""&&!Dse(r)?r:null}var aL=function(){var e=function(a){return ES(C1,function(s,l,u){return s[u]=ES(l,a,{}),s},{})};eL=e(function(r,a,s){if(a[3]&&(r[a[3]]=s),a[2]){var l=a[2].filter(function(u){return typeof u=="number"});l.forEach(function(u){r[u.toString(16)]=s})}return r}),tL=e(function(r,a,s){if(r[s]=s,a[2]){var l=a[2].filter(function(u){return typeof u=="string"});l.forEach(function(u){r[u]=s})}return r}),rL=e(function(r,a,s){var l=a[2];return r[s]=s,l.forEach(function(u){r[u]=s}),r});var t="far"in C1||yn.autoFetchSvg,i=ES(Cse,function(r,a){var s=a[0],l=a[1],u=a[2];return l==="far"&&!t&&(l="fas"),typeof s=="string"&&(r.names[s]={prefix:l,iconName:u}),typeof s=="number"&&(r.unicodes[s.toString(16)]={prefix:l,iconName:u}),r},{names:{},unicodes:{}});nL=i.names,iL=i.unicodes,OM=V3(yn.styleDefault,{family:yn.familyDefault})};xse(function(n){OM=V3(n.styleDefault,{family:yn.familyDefault})});aL();function DM(n,e){return(eL[n]||{})[e]}function Ise(n,e){return(tL[n]||{})[e]}function Ad(n,e){return(rL[n]||{})[e]}function sL(n){return nL[n]||{prefix:null,iconName:null}}function Use(n){var e=iL[n],t=DM("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function nh(){return OM}var oL=function(){return{prefix:null,iconName:null,rest:[]}};function Pse(n){var e=hs,t=JD.reduce(function(i,r){return i[r]="".concat(yn.cssPrefix,"-").concat(r),i},{});return UD.forEach(function(i){(n.includes(t[i])||n.some(function(r){return Ose[i].includes(r)}))&&(e=i)}),e}function V3(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.family,i=t===void 0?hs:t,r=hse[i][n];if(i===j1&&!n)return"fad";var a=_N[i][n]||_N[i][r],s=n in zl.styles?n:null,l=a||s||null;return l}function Bse(n){var e=[],t=null;return n.forEach(function(i){var r=Lse(yn.cssPrefix,i);r?t=r:i&&e.push(i)}),{iconName:t,rest:e}}function EN(n){return n.sort().filter(function(e,t,i){return i.indexOf(e)===t})}var MN=BD.concat(PD);function G3(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.skipLookups,i=t===void 0?!1:t,r=null,a=EN(n.filter(function(_){return MN.includes(_)})),s=EN(n.filter(function(_){return!MN.includes(_)})),l=a.filter(function(_){return r=_,!xD.includes(_)}),u=k3(l,1),f=u[0],m=f===void 0?null:f,g=Pse(a),y=It(It({},Bse(s)),{},{prefix:V3(m,{family:g})});return It(It(It({},y),Hse({values:n,family:g,styles:C1,config:yn,canonical:y,givenPrefix:r})),zse(i,r,y))}function zse(n,e,t){var i=t.prefix,r=t.iconName;if(n||!i||!r)return{prefix:i,iconName:r};var a=e==="fa"?sL(r):{},s=Ad(i,r);return r=a.iconName||s||r,i=a.prefix||i,i==="far"&&!C1.far&&C1.fas&&!yn.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}var Fse=UD.filter(function(n){return n!==hs||n!==j1}),kse=Object.keys(kT).filter(function(n){return n!==hs}).map(function(n){return Object.keys(kT[n])}).flat();function Hse(n){var e=n.values,t=n.family,i=n.canonical,r=n.givenPrefix,a=r===void 0?"":r,s=n.styles,l=s===void 0?{}:s,u=n.config,f=u===void 0?{}:u,m=t===j1,g=e.includes("fa-duotone")||e.includes("fad"),y=f.familyDefault==="duotone",_=i.prefix==="fad"||i.prefix==="fa-duotone";if(!m&&(g||y||_)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&Fse.includes(t)){var x=Object.keys(l).find(function(T){return kse.includes(T)});if(x||f.autoFetchSvg){var w=cae.get(t).defaultShortPrefixId;i.prefix=w,i.iconName=Ad(i.prefix,i.iconName)||i.iconName}}return(i.prefix==="fa"||a==="fa")&&(i.prefix=nh()||"fas"),i}var Vse=function(){function n(){Ure(this,n),this.definitions={}}return Bre(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=r.reduce(this._pullDefinitions,{});Object.keys(s).forEach(function(l){t.definitions[l]=It(It({},t.definitions[l]||{}),s[l]),QD(l,s[l]),aL()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(a){var s=r[a],l=s.prefix,u=s.iconName,f=s.icon,m=f[2];t[l]||(t[l]={}),m.length>0&&m.forEach(function(g){typeof g=="string"&&(t[l][g]=f)}),t[l][u]=f}),t}}])}(),wN=[],Nm={},Pm={},Gse=Object.keys(Pm);function jse(n,e){var t=e.mixoutsTo;return wN=n,Nm={},Object.keys(Pm).forEach(function(i){Gse.indexOf(i)===-1&&delete Pm[i]}),wN.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(s){typeof r[s]=="function"&&(t[s]=r[s]),G_(r[s])==="object"&&Object.keys(r[s]).forEach(function(l){t[s]||(t[s]={}),t[s][l]=r[s][l]})}),i.hooks){var a=i.hooks();Object.keys(a).forEach(function(s){Nm[s]||(Nm[s]=[]),Nm[s].push(a[s])})}i.provides&&i.provides(Pm)}),t}function XT(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var a=Nm[n]||[];return a.forEach(function(s){e=s.apply(null,[e].concat(i))}),e}function qd(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=Nm[n]||[];r.forEach(function(a){a.apply(null,t)})}function ih(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Pm[n]?Pm[n].apply(null,e):void 0}function qT(n){n.prefix==="fa"&&(n.prefix="fas");var e=n.iconName,t=n.prefix||nh();if(e)return e=Ad(t,e)||e,SN(lL.definitions,t,e)||SN(zl.styles,t,e)}var lL=new Vse,Wse=function(){yn.autoReplaceSvg=!1,yn.observeMutations=!1,qd("noAuto")},Xse={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Gc?(qd("beforeI2svg",e),ih("pseudoElements2svg",e),ih("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot;yn.autoReplaceSvg===!1&&(yn.autoReplaceSvg=!0),yn.observeMutations=!0,Nse(function(){$se({autoReplaceSvgRoot:t}),qd("watch",e)})}},qse={icon:function(e){if(e===null)return null;if(G_(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Ad(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=V3(e[0]);return{prefix:i,iconName:Ad(i,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(yn.cssPrefix,"-"))>-1||e.match(dse))){var r=G3(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||nh(),iconName:Ad(r.prefix,r.iconName)||r.iconName}}if(typeof e=="string"){var a=nh();return{prefix:a,iconName:Ad(a,e)||e}}}},No={noAuto:Wse,config:yn,dom:Xse,parse:qse,library:lL,findIconDefinition:qT,toHtml:X1},$se=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot,i=t===void 0?gr:t;(Object.keys(zl.styles).length>0||yn.autoFetchSvg)&&Gc&&yn.autoReplaceSvg&&No.dom.i2svg({node:i})};function j3(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return X1(i)})}}),Object.defineProperty(n,"node",{get:function(){if(Gc){var i=gr.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function Yse(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,a=n.styles,s=n.transform;if(CM(s)&&t.found&&!i.found){var l=t.width,u=t.height,f={x:l/u/2,y:.5};r.style=H3(It(It({},a),{},{"transform-origin":"".concat(f.x+s.x/16,"em ").concat(f.y+s.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function Kse(n){var e=n.prefix,t=n.iconName,i=n.children,r=n.attributes,a=n.symbol,s=a===!0?"".concat(e,"-").concat(yn.cssPrefix,"-").concat(t):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:It(It({},r),{},{id:s}),children:i}]}]}function Zse(n){var e=["aria-label","aria-labelledby","title","role"];return e.some(function(t){return t in n})}function LM(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,a=n.iconName,s=n.transform,l=n.symbol,u=n.maskId,f=n.extra,m=n.watchable,g=m===void 0?!1:m,y=i.found?i:t,_=y.width,x=y.height,w=[yn.replacementClass,a?"".concat(yn.cssPrefix,"-").concat(a):""].filter(function(P){return f.classes.indexOf(P)===-1}).filter(function(P){return P!==""||!!P}).concat(f.classes).join(" "),T={children:[],attributes:It(It({},f.attributes),{},{"data-prefix":r,"data-icon":a,class:w,role:f.attributes.role||"img",viewBox:"0 0 ".concat(_," ").concat(x)})};!Zse(f.attributes)&&!f.attributes["aria-hidden"]&&(T.attributes["aria-hidden"]="true"),g&&(T.attributes[Xd]="");var S=It(It({},T),{},{prefix:r,iconName:a,main:t,mask:i,maskId:u,transform:s,symbol:l,styles:It({},f.styles)}),O=i.found&&t.found?ih("generateAbstractMask",S)||{children:[],attributes:{}}:ih("generateAbstractIcon",S)||{children:[],attributes:{}},L=O.children,C=O.attributes;return S.children=L,S.attributes=C,l?Kse(S):Yse(S)}function AN(n){var e=n.content,t=n.width,i=n.height,r=n.transform,a=n.extra,s=n.watchable,l=s===void 0?!1:s,u=It(It({},a.attributes),{},{class:a.classes.join(" ")});l&&(u[Xd]="");var f=It({},a.styles);CM(r)&&(f.transform=wse({transform:r,width:t,height:i}),f["-webkit-transform"]=f.transform);var m=H3(f);m.length>0&&(u.style=m);var g=[];return g.push({tag:"span",attributes:u,children:[e]}),g}function Qse(n){var e=n.content,t=n.extra,i=It(It({},t.attributes),{},{class:t.classes.join(" ")}),r=H3(t.styles);r.length>0&&(i.style=r);var a=[];return a.push({tag:"span",attributes:i,children:[e]}),a}var MS=zl.styles;function $T(n){var e=n[0],t=n[1],i=n.slice(4),r=k3(i,1),a=r[0],s=null;return Array.isArray(a)?s={tag:"g",attributes:{class:"".concat(yn.cssPrefix,"-").concat(SS.GROUP)},children:[{tag:"path",attributes:{class:"".concat(yn.cssPrefix,"-").concat(SS.SECONDARY),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(yn.cssPrefix,"-").concat(SS.PRIMARY),fill:"currentColor",d:a[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:a}},{found:!0,width:e,height:t,icon:s}}var Jse={found:!1,width:512,height:512};function eoe(n,e){!VD&&!yn.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))}function YT(n,e){var t=e;return e==="fa"&&yn.styleDefault!==null&&(e=nh()),new Promise(function(i,r){if(t==="fa"){var a=sL(n)||{};n=a.iconName||n,e=a.prefix||e}if(n&&e&&MS[e]&&MS[e][n]){var s=MS[e][n];return i($T(s))}eoe(n,e),i(It(It({},Jse),{},{icon:yn.showMissingIcons&&n?ih("missingIconAbstract")||{}:{}}))})}var RN=function(){},KT=yn.measurePerformance&&d2&&d2.mark&&d2.measure?d2:{mark:RN,measure:RN},Z0='FA "7.0.0"',toe=function(e){return KT.mark("".concat(Z0," ").concat(e," begins")),function(){return uL(e)}},uL=function(e){KT.mark("".concat(Z0," ").concat(e," ends")),KT.measure("".concat(Z0," ").concat(e),"".concat(Z0," ").concat(e," begins"),"".concat(Z0," ").concat(e," ends"))},IM={begin:toe,end:uL},P2=function(){};function NN(n){var e=n.getAttribute?n.getAttribute(Xd):null;return typeof e=="string"}function noe(n){var e=n.getAttribute?n.getAttribute(AM):null,t=n.getAttribute?n.getAttribute(RM):null;return e&&t}function ioe(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(yn.replacementClass)}function roe(){if(yn.autoReplaceSvg===!0)return B2.replace;var n=B2[yn.autoReplaceSvg];return n||B2.replace}function aoe(n){return gr.createElementNS("http://www.w3.org/2000/svg",n)}function soe(n){return gr.createElement(n)}function cL(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.ceFn,i=t===void 0?n.tag==="svg"?aoe:soe:t;if(typeof n=="string")return gr.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(s){r.setAttribute(s,n.attributes[s])});var a=n.children||[];return a.forEach(function(s){r.appendChild(cL(s,{ceFn:i}))}),r}function ooe(n){var e=" ".concat(n.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var B2={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(cL(r),t)}),t.getAttribute(Xd)===null&&yn.keepOriginalSource){var i=gr.createComment(ooe(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~NM(t).indexOf(yn.replacementClass))return B2.replace(e);var r=new RegExp("".concat(yn.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var a=i[0].attributes.class.split(" ").reduce(function(l,u){return u===yn.replacementClass||u.match(r)?l.toSvg.push(u):l.toNode.push(u),l},{toNode:[],toSvg:[]});i[0].attributes.class=a.toSvg.join(" "),a.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",a.toNode.join(" "))}var s=i.map(function(l){return X1(l)}).join(`
`);t.setAttribute(Xd,""),t.innerHTML=s}};function CN(n){n()}function fL(n,e){var t=typeof e=="function"?e:P2;if(n.length===0)t();else{var i=CN;yn.mutateApproach===cse&&(i=th.requestAnimationFrame||CN),i(function(){var r=roe(),a=IM.begin("mutate");n.map(r),a(),t()})}}var UM=!1;function hL(){UM=!0}function ZT(){UM=!1}var W_=null;function ON(n){if(mN&&yn.observeMutations){var e=n.treeCallback,t=e===void 0?P2:e,i=n.nodeCallback,r=i===void 0?P2:i,a=n.pseudoElementsCallback,s=a===void 0?P2:a,l=n.observeMutationsRoot,u=l===void 0?gr:l;W_=new mN(function(f){if(!UM){var m=nh();hg(f).forEach(function(g){if(g.type==="childList"&&g.addedNodes.length>0&&!NN(g.addedNodes[0])&&(yn.searchPseudoElements&&s(g.target),t(g.target)),g.type==="attributes"&&g.target.parentNode&&yn.searchPseudoElements&&s([g.target],!0),g.type==="attributes"&&NN(g.target)&&~gse.indexOf(g.attributeName))if(g.attributeName==="class"&&noe(g.target)){var y=G3(NM(g.target)),_=y.prefix,x=y.iconName;g.target.setAttribute(AM,_||m),x&&g.target.setAttribute(RM,x)}else ioe(g.target)&&r(g.target)})}}),Gc&&W_.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function loe(){W_&&W_.disconnect()}function uoe(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var a=r.split(":"),s=a[0],l=a.slice(1);return s&&l.length>0&&(i[s]=l.join(":").trim()),i},{})),t}function coe(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=n.innerText!==void 0?n.innerText.trim():"",r=G3(NM(n));return r.prefix||(r.prefix=nh()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=Ise(r.prefix,n.innerText)||DM(r.prefix,ZD(n.innerText))),!r.iconName&&yn.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function foe(n){var e=hg(n.attributes).reduce(function(t,i){return t.name!=="class"&&t.name!=="style"&&(t[i.name]=i.value),t},{});return e}function hoe(){return{iconName:null,prefix:null,transform:Du,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function DN(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},t=coe(n),i=t.iconName,r=t.prefix,a=t.rest,s=foe(n),l=XT("parseNodeAttributes",{},n),u=e.styleParser?uoe(n):[];return It({iconName:i,prefix:r,transform:Du,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:u,attributes:s}},l)}var doe=zl.styles;function dL(n){var e=yn.autoReplaceSvg==="nest"?DN(n,{styleParser:!1}):DN(n);return~e.extra.classes.indexOf(WD)?ih("generateLayersText",n,e):ih("generateSvgReplacementMutation",n,e)}function poe(){return[].concat(Gl(PD),Gl(BD))}function LN(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Gc)return Promise.resolve();var t=gr.documentElement.classList,i=function(g){return t.add("".concat(vN,"-").concat(g))},r=function(g){return t.remove("".concat(vN,"-").concat(g))},a=yn.autoFetchSvg?poe():xD.concat(Object.keys(doe));a.includes("fa")||a.push("fa");var s=[".".concat(WD,":not([").concat(Xd,"])")].concat(a.map(function(m){return".".concat(m,":not([").concat(Xd,"])")})).join(", ");if(s.length===0)return Promise.resolve();var l=[];try{l=hg(n.querySelectorAll(s))}catch{}if(l.length>0)i("pending"),r("complete");else return Promise.resolve();var u=IM.begin("onTree"),f=l.reduce(function(m,g){try{var y=dL(g);y&&m.push(y)}catch(_){VD||_.name==="MissingIcon"&&console.error(_)}return m},[]);return new Promise(function(m,g){Promise.all(f).then(function(y){fL(y,function(){i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),u(),m()})}).catch(function(y){u(),g(y)})})}function moe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;dL(n).then(function(t){t&&fL([t],e)})}function goe(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(e||{}).icon?e:qT(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:qT(r||{})),n(i,It(It({},t),{},{mask:r}))}}var yoe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transform,r=i===void 0?Du:i,a=t.symbol,s=a===void 0?!1:a,l=t.mask,u=l===void 0?null:l,f=t.maskId,m=f===void 0?null:f,g=t.classes,y=g===void 0?[]:g,_=t.attributes,x=_===void 0?{}:_,w=t.styles,T=w===void 0?{}:w;if(e){var S=e.prefix,O=e.iconName,L=e.icon;return j3(It({type:"icon"},e),function(){return qd("beforeDOMElementCreation",{iconDefinition:e,params:t}),LM({icons:{main:$T(L),mask:u?$T(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:S,iconName:O,transform:It(It({},Du),r),symbol:s,maskId:m,extra:{attributes:x,styles:T,classes:y}})})}},voe={mixout:function(){return{icon:goe(yoe)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=LN,t.nodeCallback=moe,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,r=i===void 0?gr:i,a=t.callback,s=a===void 0?function(){}:a;return LN(r,s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,a=i.prefix,s=i.transform,l=i.symbol,u=i.mask,f=i.maskId,m=i.extra;return new Promise(function(g,y){Promise.all([YT(r,a),u.iconName?YT(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(_){var x=k3(_,2),w=x[0],T=x[1];g([t,LM({icons:{main:w,mask:T},prefix:a,iconName:r,transform:s,symbol:l,maskId:f,extra:m,watchable:!0})])}).catch(y)})},e.generateAbstractIcon=function(t){var i=t.children,r=t.attributes,a=t.main,s=t.transform,l=t.styles,u=H3(l);u.length>0&&(r.style=u);var f;return CM(s)&&(f=ih("generateAbstractTransformGrouping",{main:a,transform:s,containerWidth:a.width,iconWidth:a.width})),i.push(f||a.icon),{children:i,attributes:r}}}},_oe={mixout:function(){return{layer:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.classes,a=r===void 0?[]:r;return j3({type:"layer"},function(){qd("beforeDOMElementCreation",{assembler:t,params:i});var s=[];return t(function(l){Array.isArray(l)?l.map(function(u){s=s.concat(u.abstract)}):s=s.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(yn.cssPrefix,"-layers")].concat(Gl(a)).join(" ")},children:s}]})}}}},boe={mixout:function(){return{counter:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.title;var r=i.classes,a=r===void 0?[]:r,s=i.attributes,l=s===void 0?{}:s,u=i.styles,f=u===void 0?{}:u;return j3({type:"counter",content:t},function(){return qd("beforeDOMElementCreation",{content:t,params:i}),Qse({content:t.toString(),extra:{attributes:l,styles:f,classes:["".concat(yn.cssPrefix,"-layers-counter")].concat(Gl(a))}})})}}}},xoe={mixout:function(){return{text:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.transform,a=r===void 0?Du:r,s=i.classes,l=s===void 0?[]:s,u=i.attributes,f=u===void 0?{}:u,m=i.styles,g=m===void 0?{}:m;return j3({type:"text",content:t},function(){return qd("beforeDOMElementCreation",{content:t,params:i}),AN({content:t,transform:It(It({},Du),a),extra:{attributes:f,styles:g,classes:["".concat(yn.cssPrefix,"-layers-text")].concat(Gl(l))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.transform,a=i.extra,s=null,l=null;if(_D){var u=parseInt(getComputedStyle(t).fontSize,10),f=t.getBoundingClientRect();s=f.width/u,l=f.height/u}return Promise.resolve([t,AN({content:t.innerHTML,width:s,height:l,transform:r,extra:a,watchable:!0})])}}},pL=new RegExp('"',"ug"),IN=[1105920,1112319],UN=It(It(It(It({},{FontAwesome:{normal:"fas",400:"fas"}}),uae),lse),vae),QT=Object.keys(UN).reduce(function(n,e){return n[e.toLowerCase()]=UN[e],n},{}),Soe=Object.keys(QT).reduce(function(n,e){var t=QT[e];return n[e]=t[900]||Gl(Object.entries(t))[0][1],n},{});function Toe(n){var e=n.replace(pL,"");return ZD(Gl(e)[0]||"")}function Eoe(n){var e=n.getPropertyValue("font-feature-settings").includes("ss01"),t=n.getPropertyValue("content"),i=t.replace(pL,""),r=i.codePointAt(0),a=r>=IN[0]&&r<=IN[1],s=i.length===2?i[0]===i[1]:!1;return a||s||e}function Moe(n,e){var t=n.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(QT[t]||{})[r]||Soe[t]}function PN(n,e){var t="".concat(use).concat(e.replace(":","-"));return new Promise(function(i,r){if(n.getAttribute(t)!==null)return i();var a=hg(n.children),s=a.filter(function(B){return B.getAttribute(VT)===e})[0],l=th.getComputedStyle(n,e),u=l.getPropertyValue("font-family"),f=u.match(pse),m=l.getPropertyValue("font-weight"),g=l.getPropertyValue("content");if(s&&!f)return n.removeChild(s),i();if(f&&g!=="none"&&g!==""){var y=l.getPropertyValue("content"),_=Moe(u,m),x=Toe(y),w=f[0].startsWith("FontAwesome"),T=Eoe(l),S=DM(_,x),O=S;if(w){var L=Use(x);L.iconName&&L.prefix&&(S=L.iconName,_=L.prefix)}if(S&&!T&&(!s||s.getAttribute(AM)!==_||s.getAttribute(RM)!==O)){n.setAttribute(t,O),s&&n.removeChild(s);var C=hoe(),P=C.extra;P.attributes[VT]=e,YT(S,_).then(function(B){var j=LM(It(It({},C),{},{icons:{main:B,mask:oL()},prefix:_,iconName:O,extra:P,watchable:!0})),X=gr.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?n.insertBefore(X,n.firstChild):n.appendChild(X),X.outerHTML=j.map(function(k){return X1(k)}).join(`
`),n.removeAttribute(t),i()}).catch(r)}else i()}else i()})}function woe(n){return Promise.all([PN(n,"::before"),PN(n,"::after")])}function Aoe(n){return n.parentNode!==document.head&&!~fse.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(VT)&&(!n.parentNode||n.parentNode.tagName!=="svg")}var Roe=function(e){return!!e&&HD.some(function(t){return e.includes(t)})},Noe=function(e){if(!e)return[];for(var t=new Set,i=[e],r=[/(?=\s:)/,new RegExp("(?<=\\)\\)?[^,]*,)")],a=function(){var _=l[s];i=i.flatMap(function(x){return x.split(_).map(function(w){return w.replace(/,\s*$/,"").trim()})})},s=0,l=r;s<l.length;s++)a();i=i.flatMap(function(y){return y.includes("(")?y:y.split(",").map(function(_){return _.trim()})});var u=U2(i),f;try{for(u.s();!(f=u.n()).done;){var m=f.value;if(Roe(m)){var g=HD.reduce(function(y,_){return y.replace(_,"")},m);g!==""&&g!=="*"&&t.add(g)}}}catch(y){u.e(y)}finally{u.f()}return t};function BN(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Gc){var t;if(e)t=n;else if(yn.searchPseudoElementsFullScan)t=n.querySelectorAll("*");else{var i=new Set,r=U2(document.styleSheets),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;try{var l=U2(s.cssRules),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,m=Noe(f.selectorText),g=U2(m),y;try{for(g.s();!(y=g.n()).done;){var _=y.value;i.add(_)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){l.e(w)}finally{l.f()}}catch(w){yn.searchPseudoElementsWarnings&&console.warn("Font Awesome: cannot parse stylesheet: ".concat(s.href," (").concat(w.message,`)
If it declares any Font Awesome CSS pseudo-elements, they will not be rendered as SVG icons. Add crossorigin="anonymous" to the <link>, enable searchPseudoElementsFullScan for slower but more thorough DOM parsing, or suppress this warning by setting searchPseudoElementsWarnings to false.`))}}}catch(w){r.e(w)}finally{r.f()}if(!i.size)return;var x=Array.from(i).join(", ");try{t=n.querySelectorAll(x)}catch{}}return new Promise(function(w,T){var S=hg(t).filter(Aoe).map(woe),O=IM.begin("searchPseudoElements");hL(),Promise.all(S).then(function(){O(),ZT(),w()}).catch(function(){O(),ZT(),T()})})}}var Coe={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=BN,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node,r=i===void 0?gr:i;yn.searchPseudoElements&&BN(r)}}},zN=!1,Ooe={mixout:function(){return{dom:{unwatch:function(){hL(),zN=!0}}}},hooks:function(){return{bootstrap:function(){ON(XT("mutationObserverCallbacks",{}))},noAuto:function(){loe()},watch:function(t){var i=t.observeMutationsRoot;zN?ZT():ON(XT("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},FN=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(i,r){var a=r.toLowerCase().split("-"),s=a[0],l=a.slice(1).join("-");if(s&&l==="h")return i.flipX=!0,i;if(s&&l==="v")return i.flipY=!0,i;if(l=parseFloat(l),isNaN(l))return i;switch(s){case"grow":i.size=i.size+l;break;case"shrink":i.size=i.size-l;break;case"left":i.x=i.x-l;break;case"right":i.x=i.x+l;break;case"up":i.y=i.y-l;break;case"down":i.y=i.y+l;break;case"rotate":i.rotate=i.rotate+l;break}return i},t)},Doe={mixout:function(){return{parse:{transform:function(t){return FN(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=FN(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,a=t.containerWidth,s=t.iconWidth,l={transform:"translate(".concat(a/2," 256)")},u="translate(".concat(r.x*32,", ").concat(r.y*32,") "),f="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),m="rotate(".concat(r.rotate," 0 0)"),g={transform:"".concat(u," ").concat(f," ").concat(m)},y={transform:"translate(".concat(s/2*-1," -256)")},_={outer:l,inner:g,path:y};return{tag:"g",attributes:It({},_.outer),children:[{tag:"g",attributes:It({},_.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:It(It({},i.icon.attributes),_.path)}]}]}}}},wS={x:0,y:0,width:"100%",height:"100%"};function kN(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function Loe(n){return n.tag==="g"?n.children:[n]}var Ioe={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),a=r?G3(r.split(" ").map(function(s){return s.trim()})):oL();return a.prefix||(a.prefix=nh()),t.mask=a,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var i=t.children,r=t.attributes,a=t.main,s=t.mask,l=t.maskId,u=t.transform,f=a.width,m=a.icon,g=s.width,y=s.icon,_=Mse({transform:u,containerWidth:g,iconWidth:f}),x={tag:"rect",attributes:It(It({},wS),{},{fill:"white"})},w=m.children?{children:m.children.map(kN)}:{},T={tag:"g",attributes:It({},_.inner),children:[kN(It({tag:m.tag,attributes:It(It({},m.attributes),_.path)},w))]},S={tag:"g",attributes:It({},_.outer),children:[T]},O="mask-".concat(l||bN()),L="clip-".concat(l||bN()),C={tag:"mask",attributes:It(It({},wS),{},{id:O,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[x,S]},P={tag:"defs",children:[{tag:"clipPath",attributes:{id:L},children:Loe(y)},C]};return i.push(P,{tag:"rect",attributes:It({fill:"currentColor","clip-path":"url(#".concat(L,")"),mask:"url(#".concat(O,")")},wS)}),{children:i,attributes:r}}}},Uoe={provides:function(e){var t=!1;th.matchMedia&&(t=th.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},a={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:It(It({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var s=It(It({},a),{},{attributeName:"opacity"}),l={tag:"circle",attributes:It(It({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||l.children.push({tag:"animate",attributes:It(It({},a),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:It(It({},s),{},{values:"1;0;1;1;0;1;"})}),i.push(l),i.push({tag:"path",attributes:It(It({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:It(It({},s),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:It(It({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:It(It({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},Poe={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol"),a=r===null?!1:r===""?!0:r;return t.symbol=a,t}}}},Boe=[Rse,voe,_oe,boe,xoe,Coe,Ooe,Doe,Ioe,Uoe,Poe];jse(Boe,{mixoutsTo:No});No.noAuto;No.config;No.library;No.dom;var JT=No.parse;No.findIconDefinition;No.toHtml;var zoe=No.icon;No.layer;No.text;No.counter;var AS={exports:{}},RS,HN;function Foe(){if(HN)return RS;HN=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return RS=n,RS}var NS,VN;function koe(){if(VN)return NS;VN=1;var n=Foe();function e(){}function t(){}return t.resetWarningCache=e,NS=function(){function i(s,l,u,f,m,g){if(g!==n){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},NS}var GN;function Hoe(){return GN||(GN=1,AS.exports=koe()()),AS.exports}var Voe=Hoe();const ni=q_(Voe);var Goe={};function eE(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function joe(n){if(Array.isArray(n))return n}function Woe(n){if(Array.isArray(n))return eE(n)}function Ff(n,e,t){return(e=Joe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xoe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function qoe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,a,s,l=[],u=!0,f=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(i=a.call(t)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(m){f=!0,r=m}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw r}}return l}}function $oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jN(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Nu(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jN(Object(t),!0).forEach(function(i){Ff(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jN(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Koe(n,e){if(n==null)return{};var t,i,r=Zoe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Zoe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function WN(n,e){return joe(n)||qoe(n,e)||mL(n,e)||$oe()}function tE(n){return Woe(n)||Xoe(n)||mL(n)||Yoe()}function Qoe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Joe(n){var e=Qoe(n,"string");return typeof e=="symbol"?e:e+""}function X_(n){"@babel/helpers - typeof";return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X_(n)}function mL(n,e){if(n){if(typeof n=="string")return eE(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?eE(n,e):void 0}}var ele="7.0.0-alpha1",nE;try{var tle=require("@fortawesome/fontawesome-svg-core/package.json");nE=tle.version}catch{nE=Goe.FA_VERSION||"7.0.0-alpha8"}function nle(n){var e=n.beat,t=n.fade,i=n.beatFade,r=n.bounce,a=n.shake,s=n.flash,l=n.spin,u=n.spinPulse,f=n.spinReverse,m=n.pulse,g=n.fixedWidth,y=n.inverse,_=n.border,x=n.listItem,w=n.flip,T=n.size,S=n.rotation,O=n.pull,L=n.swapOpacity,C=n.rotateBy,P=n.widthAuto,B=ile(nE,ele),j=Ff(Ff(Ff(Ff(Ff(Ff({"fa-beat":e,"fa-fade":t,"fa-beat-fade":i,"fa-bounce":r,"fa-shake":a,"fa-flash":s,"fa-spin":l,"fa-spin-reverse":f,"fa-spin-pulse":u,"fa-pulse":m,"fa-fw":g,"fa-inverse":y,"fa-border":_,"fa-li":x,"fa-flip":w===!0,"fa-flip-horizontal":w==="horizontal"||w==="both","fa-flip-vertical":w==="vertical"||w==="both"},"fa-".concat(T),typeof T<"u"&&T!==null),"fa-rotate-".concat(S),typeof S<"u"&&S!==null&&S!==0),"fa-pull-".concat(O),typeof O<"u"&&O!==null),"fa-swap-opacity",L),"fa-rotate-by",B&&C),"fa-width-auto",B&&P);return Object.keys(j).map(function(X){return j[X]?X:null}).filter(function(X){return X})}function ile(n,e){for(var t=n.split("-"),i=WN(t,2),r=i[0],a=i[1],s=e.split("-"),l=WN(s,2),u=l[0],f=l[1],m=r.split("."),g=u.split("."),y=0;y<Math.max(m.length,g.length);y++){var _=m[y]||"0",x=g[y]||"0",w=parseInt(_,10),T=parseInt(x,10);if(w!==T)return w>T}for(var S=0;S<Math.max(m.length,g.length);S++){var O=m[S]||"0",L=g[S]||"0";if(O!==L&&O.length!==L.length)return O.length<L.length}return!(a&&!f)}function rle(n){return n=n-0,n===n}function gL(n){return rle(n)?n:(n=n.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),n.substr(0,1).toLowerCase()+n.substr(1))}var ale=["style"];function sle(n){return n.charAt(0).toUpperCase()+n.slice(1)}function ole(n){return n.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var i=t.indexOf(":"),r=gL(t.slice(0,i)),a=t.slice(i+1).trim();return r.startsWith("webkit")?e[sle(r)]=a:e[r]=a,e},{})}function yL(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(u){return yL(n,u)}),r=Object.keys(e.attributes||{}).reduce(function(u,f){var m=e.attributes[f];switch(f){case"class":u.attrs.className=m,delete e.attributes.class;break;case"style":u.attrs.style=ole(m);break;default:f.indexOf("aria-")===0||f.indexOf("data-")===0?u.attrs[f.toLowerCase()]=m:u.attrs[gL(f)]=m}return u},{attrs:{}}),a=t.style,s=a===void 0?{}:a,l=Koe(t,ale);return r.attrs.style=Nu(Nu({},r.attrs.style),s),n.apply(void 0,[e.tag,Nu(Nu({},r.attrs),l)].concat(tE(i)))}var vL=!1;try{vL=!0}catch{}function lle(){if(!vL&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function XN(n){if(n&&X_(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(JT.icon)return JT.icon(n);if(n===null)return null;if(n&&X_(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}function CS(n,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Ff({},n,e):{}}var qN={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},PM=iE.forwardRef(function(n,e){var t=Nu(Nu({},qN),n),i=t.icon,r=t.mask,a=t.symbol,s=t.className,l=t.title,u=t.titleId,f=t.maskId,m=XN(i),g=CS("classes",[].concat(tE(nle(t)),tE((s||"").split(" ")))),y=CS("transform",typeof t.transform=="string"?JT.transform(t.transform):t.transform),_=CS("mask",XN(r)),x=zoe(m,Nu(Nu(Nu(Nu({},g),y),_),{},{symbol:a,title:l,titleId:u,maskId:f}));if(!x)return lle("Could not find icon",m),null;var w=x.abstract,T={ref:e};return Object.keys(t).forEach(function(S){qN.hasOwnProperty(S)||(T[S]=t[S])}),ule(w[0],T)});PM.displayName="FontAwesomeIcon";PM.propTypes={beat:ni.bool,border:ni.bool,beatFade:ni.bool,bounce:ni.bool,className:ni.string,fade:ni.bool,flash:ni.bool,mask:ni.oneOfType([ni.object,ni.array,ni.string]),maskId:ni.string,fixedWidth:ni.bool,inverse:ni.bool,flip:ni.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ni.oneOfType([ni.object,ni.array,ni.string]),listItem:ni.bool,pull:ni.oneOf(["right","left"]),pulse:ni.bool,rotation:ni.oneOf([0,90,180,270]),rotateBy:ni.bool,shake:ni.bool,size:ni.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ni.bool,spinPulse:ni.bool,spinReverse:ni.bool,symbol:ni.oneOfType([ni.bool,ni.string]),title:ni.string,titleId:ni.string,transform:ni.oneOfType([ni.string,ni.object]),swapOpacity:ni.bool,widthAuto:ni.bool};var ule=yL.bind(null,iE.createElement);/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var cle={prefix:"fas",iconName:"video",icon:[576,512,["video-camera"],"f03d","M96 64c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L96 64zM464 336l73.5 58.8c4.2 3.4 9.4 5.2 14.8 5.2 13.1 0 23.7-10.6 23.7-23.7l0-240.6c0-13.1-10.6-23.7-23.7-23.7-5.4 0-10.6 1.8-14.8 5.2L464 176 464 336z"]};function fle(){const n=jt.useRef(null),e=jt.useRef(null),[t,i]=jt.useState(!1),[r,a]=jt.useState(!1),{model:s,setErrMsg:l}=Nre(t),{startCamera:u,stopCamera:f}=Cre(n,a,l,e);Dre(s,n,e,r,!0);const m=()=>{t?(f(),i(!1),a(!1)):(u(),i(!0))};return Ni.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Ni.jsxs("div",{className:"relative w-[200px] h-[150px] rounded-2xl overflow-hidden border border-gray-300 shadow-lg",style:{backgroundImage:r?"none":'url("/vtuber-js/placeholder.jpg")',backgroundSize:"cover",backgroundPosition:"center"},children:[Ni.jsx("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0,width:640,height:480,className:"w-full h-full object-cover"}),Ni.jsx("canvas",{ref:e,width:640,height:480,className:"absolute top-0 left-0 w-full h-full pointer-events-none"})]}),Ni.jsx("button",{onClick:m,className:`w-10 h-10 rounded-full flex items-center justify-center transition
            ${t?"bg-gray-700 text-white shadow-[0_0_10px_rgba(255,255,255,0.3)]":"bg-black text-white shadow-[0_0_10px_rgba(255,255,255,0.6)]"}
            hover:scale-105`,"aria-label":t?"Stop Camera":"Start Camera",children:Ni.jsx(PM,{icon:cle})})]})}function hle(){return Ni.jsxs("div",{className:"w-screen h-screen bg-black overflow-hidden relative",style:{backgroundColor:"oklch(14.1% 0.005 285.823)"},children:[Ni.jsx("div",{className:"flex items-center justify-center w-full h-full px-4",children:Ni.jsx("div",{className:"w-full h-auto max-w-[90vw] md:max-w-[70vw] max-h-[100vh] aspect-[9/7]",children:Ni.jsx(gG,{})})}),Ni.jsx("div",{className:"absolute bottom-2 right-2",children:Ni.jsx(fle,{})})]})}p8.createRoot(document.getElementById("root")).render(Ni.jsx(jt.StrictMode,{children:Ni.jsx(hle,{})}));
